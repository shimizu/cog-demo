/*! For license information please see app.js.LICENSE.txt */
(()=>{var e,t,n,i,r={9705:(e,t,n)=>{"use strict";var i=n(5410);function r(e){var t=[1/0,1/0,-1/0,-1/0];return i.coordEach(e,(function(e){t[0]>e[0]&&(t[0]=e[0]),t[1]>e[1]&&(t[1]=e[1]),t[2]<e[0]&&(t[2]=e[0]),t[3]<e[1]&&(t[3]=e[1])})),t}r.default=r,t.Z=r},2758:(e,t)=>{"use strict";function n(e,t,n){void 0===n&&(n={});var i={type:"Feature"};return(0===n.id||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=t||{},i.geometry=e,i}function i(e,t,i){if(void 0===i&&(i={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!p(e[0])||!p(e[1]))throw new Error("coordinates must contain numbers");return n({type:"Point",coordinates:e},t,i)}function r(e,t,i){void 0===i&&(i={});for(var r=0,o=e;r<o.length;r++){var a=o[r];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:e},t,i)}function o(e,t,i){if(void 0===i&&(i={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:e},t,i)}function a(e,t){void 0===t&&(t={});var n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function s(e,t,i){return void 0===i&&(i={}),n({type:"MultiLineString",coordinates:e},t,i)}function l(e,t,i){return void 0===i&&(i={}),n({type:"MultiPoint",coordinates:e},t,i)}function c(e,t,i){return void 0===i&&(i={}),n({type:"MultiPolygon",coordinates:e},t,i)}function u(e,n){void 0===n&&(n="kilometers");var i=t.factors[n];if(!i)throw new Error(n+" units is invalid");return e*i}function h(e,n){void 0===n&&(n="kilometers");var i=t.factors[n];if(!i)throw new Error(n+" units is invalid");return e/i}function d(e){return e%(2*Math.PI)*180/Math.PI}function p(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.earthRadius=6371008.8,t.factors={centimeters:100*t.earthRadius,centimetres:100*t.earthRadius,degrees:t.earthRadius/111325,feet:3.28084*t.earthRadius,inches:39.37*t.earthRadius,kilometers:t.earthRadius/1e3,kilometres:t.earthRadius/1e3,meters:t.earthRadius,metres:t.earthRadius,miles:t.earthRadius/1609.344,millimeters:1e3*t.earthRadius,millimetres:1e3*t.earthRadius,nauticalmiles:t.earthRadius/1852,radians:1,yards:1.0936*t.earthRadius},t.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/t.earthRadius,yards:1.0936133},t.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},t.feature=n,t.geometry=function(e,t,n){switch(void 0===n&&(n={}),e){case"Point":return i(t).geometry;case"LineString":return o(t).geometry;case"Polygon":return r(t).geometry;case"MultiPoint":return l(t).geometry;case"MultiLineString":return s(t).geometry;case"MultiPolygon":return c(t).geometry;default:throw new Error(e+" is invalid")}},t.point=i,t.points=function(e,t,n){return void 0===n&&(n={}),a(e.map((function(e){return i(e,t)})),n)},t.polygon=r,t.polygons=function(e,t,n){return void 0===n&&(n={}),a(e.map((function(e){return r(e,t)})),n)},t.lineString=o,t.lineStrings=function(e,t,n){return void 0===n&&(n={}),a(e.map((function(e){return o(e,t)})),n)},t.featureCollection=a,t.multiLineString=s,t.multiPoint=l,t.multiPolygon=c,t.geometryCollection=function(e,t,i){return void 0===i&&(i={}),n({type:"GeometryCollection",geometries:e},t,i)},t.round=function(e,t){if(void 0===t&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,t||0);return Math.round(e*n)/n},t.radiansToLength=u,t.lengthToRadians=h,t.lengthToDegrees=function(e,t){return d(h(e,t))},t.bearingToAzimuth=function(e){var t=e%360;return t<0&&(t+=360),t},t.radiansToDegrees=d,t.degreesToRadians=function(e){return e%360*Math.PI/180},t.convertLength=function(e,t,n){if(void 0===t&&(t="kilometers"),void 0===n&&(n="kilometers"),!(e>=0))throw new Error("length must be a positive number");return u(h(e,t),n)},t.convertArea=function(e,n,i){if(void 0===n&&(n="meters"),void 0===i&&(i="kilometers"),!(e>=0))throw new Error("area must be a positive number");var r=t.areaFactors[n];if(!r)throw new Error("invalid original units");var o=t.areaFactors[i];if(!o)throw new Error("invalid final units");return e/r*o},t.isNumber=p,t.isObject=function(e){return!!e&&e.constructor===Object},t.validateBBox=function(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(4!==e.length&&6!==e.length)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach((function(e){if(!p(e))throw new Error("bbox must only contain numbers")}))},t.validateId=function(e){if(!e)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof e))throw new Error("id must be a number or a string")}},5410:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2758);function r(e,t,n){if(null!==e)for(var i,o,a,s,l,c,u,h,d=0,p=0,f=e.type,g="FeatureCollection"===f,m="Feature"===f,y=g?e.features.length:1,v=0;v<y;v++){l=(h=!!(u=g?e.features[v].geometry:m?e.geometry:e)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var b=0;b<l;b++){var _=0,w=0;if(null!==(s=h?u.geometries[b]:u)){c=s.coordinates;var P=s.type;switch(d=!n||"Polygon"!==P&&"MultiPolygon"!==P?0:1,P){case null:break;case"Point":if(!1===t(c,p,v,_,w))return!1;p++,_++;break;case"LineString":case"MultiPoint":for(i=0;i<c.length;i++){if(!1===t(c[i],p,v,_,w))return!1;p++,"MultiPoint"===P&&_++}"LineString"===P&&_++;break;case"Polygon":case"MultiLineString":for(i=0;i<c.length;i++){for(o=0;o<c[i].length-d;o++){if(!1===t(c[i][o],p,v,_,w))return!1;p++}"MultiLineString"===P&&_++,"Polygon"===P&&w++}"Polygon"===P&&_++;break;case"MultiPolygon":for(i=0;i<c.length;i++){for(w=0,o=0;o<c[i].length;o++){for(a=0;a<c[i][o].length-d;a++){if(!1===t(c[i][o][a],p,v,_,w))return!1;p++}w++}_++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===r(s.geometries[i],t,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(e,t){var n;switch(e.type){case"FeatureCollection":for(n=0;n<e.features.length&&!1!==t(e.features[n].properties,n);n++);break;case"Feature":t(e.properties,0)}}function a(e,t){if("Feature"===e.type)t(e,0);else if("FeatureCollection"===e.type)for(var n=0;n<e.features.length&&!1!==t(e.features[n],n);n++);}function s(e,t){var n,i,r,o,a,s,l,c,u,h,d=0,p="FeatureCollection"===e.type,f="Feature"===e.type,g=p?e.features.length:1;for(n=0;n<g;n++){for(s=p?e.features[n].geometry:f?e.geometry:e,c=p?e.features[n].properties:f?e.properties:{},u=p?e.features[n].bbox:f?e.bbox:void 0,h=p?e.features[n].id:f?e.id:void 0,a=(l=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,r=0;r<a;r++)if(null!==(o=l?s.geometries[r]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(o,d,c,u,h))return!1;break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(!1===t(o.geometries[i],d,c,u,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===t(null,d,c,u,h))return!1;d++}}function l(e,t){s(e,(function(e,n,r,o,a){var s,l=null===e?null:e.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return!1!==t(i.feature(e,r,{bbox:o,id:a}),n,0)&&void 0}switch(l){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var c=0;c<e.coordinates.length;c++){var u={type:s,coordinates:e.coordinates[c]};if(!1===t(i.feature(u,r),n,c))return!1}}))}function c(e,t){l(e,(function(e,n,o){var a=0;if(e.geometry){var s=e.geometry.type;if("Point"!==s&&"MultiPoint"!==s){var l,c=0,u=0,h=0;return!1!==r(e,(function(r,s,d,p,f){if(void 0===l||n>c||p>u||f>h)return l=r,c=n,u=p,h=f,void(a=0);var g=i.lineString([l,r],e.properties);if(!1===t(g,n,o,f,a))return!1;a++,l=r}))&&void 0}}}))}function u(e,t){if(!e)throw new Error("geojson is required");l(e,(function(e,n,r){if(null!==e.geometry){var o=e.geometry.type,a=e.geometry.coordinates;switch(o){case"LineString":if(!1===t(e,n,r,0,0))return!1;break;case"Polygon":for(var s=0;s<a.length;s++)if(!1===t(i.lineString(a[s],e.properties),n,r,s))return!1}}}))}t.coordAll=function(e){var t=[];return r(e,(function(e){t.push(e)})),t},t.coordEach=r,t.coordReduce=function(e,t,n,i){var o=n;return r(e,(function(e,i,r,a,s){o=0===i&&void 0===n?e:t(o,e,i,r,a,s)}),i),o},t.featureEach=a,t.featureReduce=function(e,t,n){var i=n;return a(e,(function(e,r){i=0===r&&void 0===n?e:t(i,e,r)})),i},t.findPoint=function(e,t){if(t=t||{},!i.isObject(t))throw new Error("options is invalid");var n,r=t.featureIndex||0,o=t.multiFeatureIndex||0,a=t.geometryIndex||0,s=t.coordIndex||0,l=t.properties;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),l=l||e.features[r].properties,n=e.features[r].geometry;break;case"Feature":l=l||e.properties,n=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=e;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var c=n.coordinates;switch(n.type){case"Point":return i.point(c,l,t);case"MultiPoint":return o<0&&(o=c.length+o),i.point(c[o],l,t);case"LineString":return s<0&&(s=c.length+s),i.point(c[s],l,t);case"Polygon":return a<0&&(a=c.length+a),s<0&&(s=c[a].length+s),i.point(c[a][s],l,t);case"MultiLineString":return o<0&&(o=c.length+o),s<0&&(s=c[o].length+s),i.point(c[o][s],l,t);case"MultiPolygon":return o<0&&(o=c.length+o),a<0&&(a=c[o].length+a),s<0&&(s=c[o][a].length-s),i.point(c[o][a][s],l,t)}throw new Error("geojson is invalid")},t.findSegment=function(e,t){if(t=t||{},!i.isObject(t))throw new Error("options is invalid");var n,r=t.featureIndex||0,o=t.multiFeatureIndex||0,a=t.geometryIndex||0,s=t.segmentIndex||0,l=t.properties;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),l=l||e.features[r].properties,n=e.features[r].geometry;break;case"Feature":l=l||e.properties,n=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=e;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var c=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=c.length+s-1),i.lineString([c[s],c[s+1]],l,t);case"Polygon":return a<0&&(a=c.length+a),s<0&&(s=c[a].length+s-1),i.lineString([c[a][s],c[a][s+1]],l,t);case"MultiLineString":return o<0&&(o=c.length+o),s<0&&(s=c[o].length+s-1),i.lineString([c[o][s],c[o][s+1]],l,t);case"MultiPolygon":return o<0&&(o=c.length+o),a<0&&(a=c[o].length+a),s<0&&(s=c[o][a].length-s-1),i.lineString([c[o][a][s],c[o][a][s+1]],l,t)}throw new Error("geojson is invalid")},t.flattenEach=l,t.flattenReduce=function(e,t,n){var i=n;return l(e,(function(e,r,o){i=0===r&&0===o&&void 0===n?e:t(i,e,r,o)})),i},t.geomEach=s,t.geomReduce=function(e,t,n){var i=n;return s(e,(function(e,r,o,a,s){i=0===r&&void 0===n?e:t(i,e,r,o,a,s)})),i},t.lineEach=u,t.lineReduce=function(e,t,n){var i=n;return u(e,(function(e,r,o,a){i=0===r&&void 0===n?e:t(i,e,r,o,a)})),i},t.propEach=o,t.propReduce=function(e,t,n){var i=n;return o(e,(function(e,r){i=0===r&&void 0===n?e:t(i,e,r)})),i},t.segmentEach=c,t.segmentReduce=function(e,t,n){var i=n,r=!1;return c(e,(function(e,o,a,s,l){i=!1===r&&void 0===n?e:t(i,e,o,a,s,l),r=!0})),i}},1924:(e,t,n)=>{"use strict";var i=n(210),r=n(5559),o=r(i("String.prototype.indexOf"));e.exports=function(e,t){var n=i(e,!!t);return"function"==typeof n&&o(e,".prototype.")>-1?r(n):n}},5559:(e,t,n)=>{"use strict";var i=n(8612),r=n(210),o=r("%Function.prototype.apply%"),a=r("%Function.prototype.call%"),s=r("%Reflect.apply%",!0)||i.call(a,o),l=r("%Object.getOwnPropertyDescriptor%",!0),c=r("%Object.defineProperty%",!0),u=r("%Math.max%");if(c)try{c({},"a",{value:1})}catch(e){c=null}e.exports=function(e){var t=s(i,a,arguments);return l&&c&&l(t,"length").configurable&&c(t,"length",{value:1+u(0,e.length-(arguments.length-1))}),t};var h=function(){return s(i,o,arguments)};c?c(e.exports,"apply",{value:h}):e.exports.apply=h},2273:(e,t,n)=>{"use strict";var i=n(1662),r=n(3842),o=n(6960),a=n(8639).orient2d;function s(e,t,n){t=Math.max(0,void 0===t?2:t),n=n||0;var r=function(e){for(var t=e[0],n=e[0],i=e[0],r=e[0],a=0;a<e.length;a++){var s=e[a];s[0]<t[0]&&(t=s),s[0]>i[0]&&(i=s),s[1]<n[1]&&(n=s),s[1]>r[1]&&(r=s)}var l=[t,n,i,r],c=l.slice();for(a=0;a<e.length;a++)o(e[a],l)||c.push(e[a]);return function(e){e.sort(b);for(var t=[],n=0;n<e.length;n++){for(;t.length>=2&&p(t[t.length-2],t[t.length-1],e[n])<=0;)t.pop();t.push(e[n])}for(var i=[],r=e.length-1;r>=0;r--){for(;i.length>=2&&p(i[i.length-2],i[i.length-1],e[r])<=0;)i.pop();i.push(e[r])}return i.pop(),t.pop(),t.concat(i)}(c)}(e),a=new i(16);a.toBBox=function(e){return{minX:e[0],minY:e[1],maxX:e[0],maxY:e[1]}},a.compareMinX=function(e,t){return e[0]-t[0]},a.compareMinY=function(e,t){return e[1]-t[1]},a.load(e);for(var s,c=[],u=0;u<r.length;u++){var h=r[u];a.remove(h),s=g(h,s),c.push(s)}var d=new i(16);for(u=0;u<c.length;u++)d.insert(f(c[u]));for(var y=t*t,v=n*n;c.length;){var _=c.shift(),w=_.p,P=_.next.p,E=m(w,P);if(!(E<v)){var x=E/y;(h=l(a,_.prev.p,w,P,_.next.next.p,x,d))&&Math.min(m(h,w),m(h,P))<=x&&(c.push(_),c.push(g(h,_)),a.remove(h),d.remove(_),d.insert(f(_)),d.insert(f(_.next)))}}_=s;var A=[];do{A.push(_.p),_=_.next}while(_!==s);return A.push(_.p),A}function l(e,t,n,i,o,a,s){for(var l=new r([],c),h=e.data;h;){for(var p=0;p<h.children.length;p++){var f=h.children[p],g=h.leaf?y(f,n,i):u(n,i,f);g>a||l.push({node:f,dist:g})}for(;l.length&&!l.peek().node.children;){var m=l.pop(),v=m.node,b=y(v,t,n),_=y(v,i,o);if(m.dist<b&&m.dist<_&&d(n,v,s)&&d(i,v,s))return v}(h=l.pop())&&(h=h.node)}return null}function c(e,t){return e.dist-t.dist}function u(e,t,n){if(h(e,n)||h(t,n))return 0;var i=v(e[0],e[1],t[0],t[1],n.minX,n.minY,n.maxX,n.minY);if(0===i)return 0;var r=v(e[0],e[1],t[0],t[1],n.minX,n.minY,n.minX,n.maxY);if(0===r)return 0;var o=v(e[0],e[1],t[0],t[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var a=v(e[0],e[1],t[0],t[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===a?0:Math.min(i,r,o,a)}function h(e,t){return e[0]>=t.minX&&e[0]<=t.maxX&&e[1]>=t.minY&&e[1]<=t.maxY}function d(e,t,n){for(var i,r,o,a,s=Math.min(e[0],t[0]),l=Math.min(e[1],t[1]),c=Math.max(e[0],t[0]),u=Math.max(e[1],t[1]),h=n.search({minX:s,minY:l,maxX:c,maxY:u}),d=0;d<h.length;d++)if(i=h[d].p,r=h[d].next.p,o=e,i!==(a=t)&&r!==o&&p(i,r,o)>0!=p(i,r,a)>0&&p(o,a,i)>0!=p(o,a,r)>0)return!1;return!0}function p(e,t,n){return a(e[0],e[1],t[0],t[1],n[0],n[1])}function f(e){var t=e.p,n=e.next.p;return e.minX=Math.min(t[0],n[0]),e.minY=Math.min(t[1],n[1]),e.maxX=Math.max(t[0],n[0]),e.maxY=Math.max(t[1],n[1]),e}function g(e,t){var n={p:e,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return t?(n.next=t.next,n.prev=t,t.next.prev=n,t.next=n):(n.prev=n,n.next=n),n}function m(e,t){var n=e[0]-t[0],i=e[1]-t[1];return n*n+i*i}function y(e,t,n){var i=t[0],r=t[1],o=n[0]-i,a=n[1]-r;if(0!==o||0!==a){var s=((e[0]-i)*o+(e[1]-r)*a)/(o*o+a*a);s>1?(i=n[0],r=n[1]):s>0&&(i+=o*s,r+=a*s)}return(o=e[0]-i)*o+(a=e[1]-r)*a}function v(e,t,n,i,r,o,a,s){var l,c,u,h,d=n-e,p=i-t,f=a-r,g=s-o,m=e-r,y=t-o,v=d*d+p*p,b=d*f+p*g,_=f*f+g*g,w=d*m+p*y,P=f*m+g*y,E=v*_-b*b,x=E,A=E;0===E?(c=0,x=1,h=P,A=_):(h=v*P-b*w,(c=b*P-_*w)<0?(c=0,h=P,A=_):c>x&&(c=x,h=P+b,A=_)),h<0?(h=0,-w<0?c=0:-w>v?c=x:(c=-w,x=v)):h>A&&(h=A,-w+b<0?c=0:-w+b>v?c=x:(c=-w+b,x=v));var C=(1-(u=0===h?0:h/A))*r+u*a-((1-(l=0===c?0:c/x))*e+l*n),S=(1-u)*o+u*s-((1-l)*t+l*i);return C*C+S*S}function b(e,t){return e[0]===t[0]?e[1]-t[1]:e[0]-t[0]}r.default&&(r=r.default),e.exports=s,e.exports.default=s},1662:function(e){e.exports=function(){"use strict";function e(e,i,r,o,a){!function e(n,i,r,o,a){for(;o>r;){if(o-r>600){var s=o-r+1,l=i-r+1,c=Math.log(s),u=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*u*(s-u)/s)*(l-s/2<0?-1:1);e(n,i,Math.max(r,Math.floor(i-l*u/s+h)),Math.min(o,Math.floor(i+(s-l)*u/s+h)),a)}var d=n[i],p=r,f=o;for(t(n,r,i),a(n[o],d)>0&&t(n,r,o);p<f;){for(t(n,p,f),p++,f--;a(n[p],d)<0;)p++;for(;a(n[f],d)>0;)f--}0===a(n[r],d)?t(n,r,f):t(n,++f,o),f<=i&&(r=f+1),i<=f&&(o=f-1)}}(e,i,r||0,o||e.length-1,a||n)}function t(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function n(e,t){return e<t?-1:e>t?1:0}var i=function(e){void 0===e&&(e=9),this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function r(e,t,n){if(!n)return t.indexOf(e);for(var i=0;i<t.length;i++)if(n(e,t[i]))return i;return-1}function o(e,t){a(e,0,e.children.length,t,e)}function a(e,t,n,i,r){r||(r=f(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o=t;o<n;o++){var a=e.children[o];s(r,e.leaf?i(a):a)}return r}function s(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function l(e,t){return e.minX-t.minX}function c(e,t){return e.minY-t.minY}function u(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function h(e){return e.maxX-e.minX+(e.maxY-e.minY)}function d(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function p(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function f(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(t,n,i,r,o){for(var a=[n,i];a.length;)if(!((i=a.pop())-(n=a.pop())<=r)){var s=n+Math.ceil((i-n)/r/2)*r;e(t,s,n,i,o),a.push(n,s,s,i)}}return i.prototype.all=function(){return this._all(this.data,[])},i.prototype.search=function(e){var t=this.data,n=[];if(!p(e,t))return n;for(var i=this.toBBox,r=[];t;){for(var o=0;o<t.children.length;o++){var a=t.children[o],s=t.leaf?i(a):a;p(e,s)&&(t.leaf?n.push(a):d(e,s)?this._all(a,n):r.push(a))}t=r.pop()}return n},i.prototype.collides=function(e){var t=this.data;if(!p(e,t))return!1;for(var n=[];t;){for(var i=0;i<t.children.length;i++){var r=t.children[i],o=t.leaf?this.toBBox(r):r;if(p(e,o)){if(t.leaf||d(e,o))return!0;n.push(r)}}t=n.pop()}return!1},i.prototype.load=function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0;t<e.length;t++)this.insert(e[t]);return this}var n=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var i=this.data;this.data=n,n=i}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},i.prototype.insert=function(e){return e&&this._insert(e,this.data.height-1),this},i.prototype.clear=function(){return this.data=f([]),this},i.prototype.remove=function(e,t){if(!e)return this;for(var n,i,o,a=this.data,s=this.toBBox(e),l=[],c=[];a||l.length;){if(a||(a=l.pop(),i=l[l.length-1],n=c.pop(),o=!0),a.leaf){var u=r(e,a.children,t);if(-1!==u)return a.children.splice(u,1),l.push(a),this._condense(l),this}o||a.leaf||!d(a,s)?i?(n++,a=i.children[n],o=!1):a=null:(l.push(a),c.push(n),n=0,i=a,a=a.children[0])}return this},i.prototype.toBBox=function(e){return e},i.prototype.compareMinX=function(e,t){return e.minX-t.minX},i.prototype.compareMinY=function(e,t){return e.minY-t.minY},i.prototype.toJSON=function(){return this.data},i.prototype.fromJSON=function(e){return this.data=e,this},i.prototype._all=function(e,t){for(var n=[];e;)e.leaf?t.push.apply(t,e.children):n.push.apply(n,e.children),e=n.pop();return t},i.prototype._build=function(e,t,n,i){var r,a=n-t+1,s=this._maxEntries;if(a<=s)return o(r=f(e.slice(t,n+1)),this.toBBox),r;i||(i=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,i-1))),(r=f([])).leaf=!1,r.height=i;var l=Math.ceil(a/s),c=l*Math.ceil(Math.sqrt(s));g(e,t,n,c,this.compareMinX);for(var u=t;u<=n;u+=c){var h=Math.min(u+c-1,n);g(e,u,h,l,this.compareMinY);for(var d=u;d<=h;d+=l){var p=Math.min(d+l-1,h);r.children.push(this._build(e,d,p,i-1))}}return o(r,this.toBBox),r},i.prototype._chooseSubtree=function(e,t,n,i){for(;i.push(t),!t.leaf&&i.length-1!==n;){for(var r=1/0,o=1/0,a=void 0,s=0;s<t.children.length;s++){var l=t.children[s],c=u(l),h=(d=e,p=l,(Math.max(p.maxX,d.maxX)-Math.min(p.minX,d.minX))*(Math.max(p.maxY,d.maxY)-Math.min(p.minY,d.minY))-c);h<o?(o=h,r=c<r?c:r,a=l):h===o&&c<r&&(r=c,a=l)}t=a||t.children[0]}var d,p;return t},i.prototype._insert=function(e,t,n){var i=n?e:this.toBBox(e),r=[],o=this._chooseSubtree(i,this.data,t,r);for(o.children.push(e),s(o,i);t>=0&&r[t].children.length>this._maxEntries;)this._split(r,t),t--;this._adjustParentBBoxes(i,r,t)},i.prototype._split=function(e,t){var n=e[t],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);var a=this._chooseSplitIndex(n,r,i),s=f(n.children.splice(a,n.children.length-a));s.height=n.height,s.leaf=n.leaf,o(n,this.toBBox),o(s,this.toBBox),t?e[t-1].children.push(s):this._splitRoot(n,s)},i.prototype._splitRoot=function(e,t){this.data=f([e,t]),this.data.height=e.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},i.prototype._chooseSplitIndex=function(e,t,n){for(var i,r,o,s,l,c,h,d=1/0,p=1/0,f=t;f<=n-t;f++){var g=a(e,0,f,this.toBBox),m=a(e,f,n,this.toBBox),y=(r=g,o=m,void 0,void 0,void 0,void 0,s=Math.max(r.minX,o.minX),l=Math.max(r.minY,o.minY),c=Math.min(r.maxX,o.maxX),h=Math.min(r.maxY,o.maxY),Math.max(0,c-s)*Math.max(0,h-l)),v=u(g)+u(m);y<d?(d=y,i=f,p=v<p?v:p):y===d&&v<p&&(p=v,i=f)}return i||n-t},i.prototype._chooseSplitAxis=function(e,t,n){var i=e.leaf?this.compareMinX:l,r=e.leaf?this.compareMinY:c;this._allDistMargin(e,t,n,i)<this._allDistMargin(e,t,n,r)&&e.children.sort(i)},i.prototype._allDistMargin=function(e,t,n,i){e.children.sort(i);for(var r=this.toBBox,o=a(e,0,t,r),l=a(e,n-t,n,r),c=h(o)+h(l),u=t;u<n-t;u++){var d=e.children[u];s(o,e.leaf?r(d):d),c+=h(o)}for(var p=n-t-1;p>=t;p--){var f=e.children[p];s(l,e.leaf?r(f):f),c+=h(l)}return c},i.prototype._adjustParentBBoxes=function(e,t,n){for(var i=n;i>=0;i--)s(t[i],e)},i.prototype._condense=function(e){for(var t=e.length-1,n=void 0;t>=0;t--)0===e[t].children.length?t>0?(n=e[t-1].children).splice(n.indexOf(e[t]),1):this.clear():o(e[t],this.toBBox)},i}()},251:(e,t,n)=>{var i=n(2215),r=n(2584),o=n(609),a=n(8420),s=n(2847),l=n(8923),c=Date.prototype.getTime;function u(e){return null==e}function h(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length||"function"!=typeof e.copy||"function"!=typeof e.slice||e.length>0&&"number"!=typeof e[0])}e.exports=function e(t,n,d){var p=d||{};return!!(p.strict?o(t,n):t===n)||(!t||!n||"object"!=typeof t&&"object"!=typeof n?p.strict?o(t,n):t==n:function(t,n,o){var d,p;if(typeof t!=typeof n)return!1;if(u(t)||u(n))return!1;if(t.prototype!==n.prototype)return!1;if(r(t)!==r(n))return!1;var f=a(t),g=a(n);if(f!==g)return!1;if(f||g)return t.source===n.source&&s(t)===s(n);if(l(t)&&l(n))return c.call(t)===c.call(n);var m=h(t),y=h(n);if(m!==y)return!1;if(m||y){if(t.length!==n.length)return!1;for(d=0;d<t.length;d++)if(t[d]!==n[d])return!1;return!0}if(typeof t!=typeof n)return!1;try{var v=i(t),b=i(n)}catch(e){return!1}if(v.length!==b.length)return!1;for(v.sort(),b.sort(),d=v.length-1;d>=0;d--)if(v[d]!=b[d])return!1;for(d=v.length-1;d>=0;d--)if(!e(t[p=v[d]],n[p],o))return!1;return!0}(t,n,p))}},4289:(e,t,n)=>{"use strict";var i=n(2215),r="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),o=Object.prototype.toString,a=Array.prototype.concat,s=Object.defineProperty,l=n(1044)(),c=s&&l,u=function(e,t,n,i){if(t in e)if(!0===i){if(e[t]===n)return}else if("function"!=typeof(r=i)||"[object Function]"!==o.call(r)||!i())return;var r;c?s(e,t,{configurable:!0,enumerable:!1,value:n,writable:!0}):e[t]=n},h=function(e,t){var n=arguments.length>2?arguments[2]:{},o=i(t);r&&(o=a.call(o,Object.getOwnPropertySymbols(t)));for(var s=0;s<o.length;s+=1)u(e,o[s],t[o[s]],n[o[s]])};h.supportsDescriptors=!!c,e.exports=h},8317:e=>{function t(e,t,n,i){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(e,t,n,i)}t.prototype.run=function(e,t,n,i){this._init(e,t,n,i);for(var r=0;r<this._datasetLength;r++)if(1!==this._visited[r]){this._visited[r]=1;var o=this._regionQuery(r);if(o.length<this.minPts)this.noise.push(r);else{var a=this.clusters.length;this.clusters.push([]),this._addToCluster(r,a),this._expandCluster(a,o)}}return this.clusters},t.prototype._init=function(e,t,n,i){if(e){if(!(e instanceof Array))throw Error("Dataset must be of type array, "+typeof e+" given");this.dataset=e,this.clusters=[],this.noise=[],this._datasetLength=e.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}t&&(this.epsilon=t),n&&(this.minPts=n),i&&(this.distance=i)},t.prototype._expandCluster=function(e,t){for(var n=0;n<t.length;n++){var i=t[n];if(1!==this._visited[i]){this._visited[i]=1;var r=this._regionQuery(i);r.length>=this.minPts&&(t=this._mergeArrays(t,r))}1!==this._assigned[i]&&this._addToCluster(i,e)}},t.prototype._addToCluster=function(e,t){this.clusters[t].push(e),this._assigned[e]=1},t.prototype._regionQuery=function(e){for(var t=[],n=0;n<this._datasetLength;n++)this.distance(this.dataset[e],this.dataset[n])<this.epsilon&&t.push(n);return t},t.prototype._mergeArrays=function(e,t){for(var n=t.length,i=0;i<n;i++){var r=t[i];e.indexOf(r)<0&&e.push(r)}return e},t.prototype._euclideanDistance=function(e,t){for(var n=0,i=Math.min(e.length,t.length);i--;)n+=(e[i]-t[i])*(e[i]-t[i]);return Math.sqrt(n)},e.exports&&(e.exports=t)},3781:e=>{function t(e,t,n){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(e,t,n)}t.prototype.init=function(e,t,n){this.assignments=[],this.centroids=[],void 0!==e&&(this.dataset=e),void 0!==t&&(this.k=t),void 0!==n&&(this.distance=n)},t.prototype.run=function(e,t){this.init(e,t);for(var n=this.dataset.length,i=0;i<this.k;i++)this.centroids[i]=this.randomCentroid();for(var r=!0;r;){r=this.assign();for(var o=0;o<this.k;o++){for(var a=new Array(u),s=0,l=0;l<u;l++)a[l]=0;for(var c=0;c<n;c++){var u=this.dataset[c].length;if(o===this.assignments[c]){for(l=0;l<u;l++)a[l]+=this.dataset[c][l];s++}}if(s>0){for(l=0;l<u;l++)a[l]/=s;this.centroids[o]=a}else this.centroids[o]=this.randomCentroid(),r=!0}}return this.getClusters()},t.prototype.randomCentroid=function(){var e,t,n=this.dataset.length-1;do{t=Math.round(Math.random()*n),e=this.dataset[t]}while(this.centroids.indexOf(e)>=0);return e},t.prototype.assign=function(){for(var e,t=!1,n=this.dataset.length,i=0;i<n;i++)(e=this.argmin(this.dataset[i],this.centroids,this.distance))!=this.assignments[i]&&(this.assignments[i]=e,t=!0);return t},t.prototype.getClusters=function(){for(var e,t=new Array(this.k),n=0;n<this.assignments.length;n++)void 0===t[e=this.assignments[n]]&&(t[e]=[]),t[e].push(n);return t},t.prototype.argmin=function(e,t,n){for(var i,r=Number.MAX_VALUE,o=0,a=t.length,s=0;s<a;s++)(i=n(e,t[s]))<r&&(r=i,o=s);return o},t.prototype.distance=function(e,t){for(var n=0,i=Math.min(e.length,t.length);i--;){var r=e[i]-t[i];n+=r*r}return Math.sqrt(n)},e.exports&&(e.exports=t)},3763:(e,t,n)=>{if(e.exports)var i=n(7985);function r(e,t,n,i){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(e,t,n,i)}r.prototype.run=function(e,t,n,r){this._init(e,t,n,r);for(var o=0,a=this.dataset.length;o<a;o++)if(1!==this._processed[o]){this._processed[o]=1,this.clusters.push([o]);var s=this.clusters.length-1;this._orderedList.push(o);var l=new i(null,null,"asc"),c=this._regionQuery(o);void 0!==this._distanceToCore(o)&&(this._updateQueue(o,c,l),this._expandCluster(s,l))}return this.clusters},r.prototype.getReachabilityPlot=function(){for(var e=[],t=0,n=this._orderedList.length;t<n;t++){var i=this._orderedList[t],r=this._reachability[i];e.push([i,r])}return e},r.prototype._init=function(e,t,n,i){if(e){if(!(e instanceof Array))throw Error("Dataset must be of type array, "+typeof e+" given");this.dataset=e,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}t&&(this.epsilon=t),n&&(this.minPts=n),i&&(this.distance=i)},r.prototype._updateQueue=function(e,t,n){var i=this;this._coreDistance=this._distanceToCore(e),t.forEach((function(t){if(void 0===i._processed[t]){var r=i.distance(i.dataset[e],i.dataset[t]),o=Math.max(i._coreDistance,r);void 0===i._reachability[t]?(i._reachability[t]=o,n.insert(t,o)):o<i._reachability[t]&&(i._reachability[t]=o,n.remove(t),n.insert(t,o))}}))},r.prototype._expandCluster=function(e,t){for(var n=t.getElements(),i=0,r=n.length;i<r;i++){var o=n[i];if(void 0===this._processed[o]){var a=this._regionQuery(o);this._processed[o]=1,this.clusters[e].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,a,t),this._expandCluster(e,t))}}},r.prototype._distanceToCore=function(e){for(var t=this.epsilon,n=0;n<t;n++)if(this._regionQuery(e,n).length>=this.minPts)return n},r.prototype._regionQuery=function(e,t){t=t||this.epsilon;for(var n=[],i=0,r=this.dataset.length;i<r;i++)this.distance(this.dataset[e],this.dataset[i])<t&&n.push(i);return n},r.prototype._euclideanDistance=function(e,t){for(var n=0,i=Math.min(e.length,t.length);i--;)n+=(e[i]-t[i])*(e[i]-t[i]);return Math.sqrt(n)},e.exports&&(e.exports=r)},7985:e=>{function t(e,t,n){this._queue=[],this._priorities=[],this._sorting="desc",this._init(e,t,n)}t.prototype.insert=function(e,t){for(var n=this._queue.length,i=n;i--;){var r=this._priorities[i];"desc"===this._sorting?t>r&&(n=i):t<r&&(n=i)}this._insertAt(e,t,n)},t.prototype.remove=function(e){for(var t=this._queue.length;t--;)if(e===this._queue[t]){this._queue.splice(t,1),this._priorities.splice(t,1);break}},t.prototype.forEach=function(e){this._queue.forEach(e)},t.prototype.getElements=function(){return this._queue},t.prototype.getElementPriority=function(e){return this._priorities[e]},t.prototype.getPriorities=function(){return this._priorities},t.prototype.getElementsWithPriorities=function(){for(var e=[],t=0,n=this._queue.length;t<n;t++)e.push([this._queue[t],this._priorities[t]]);return e},t.prototype._init=function(e,t,n){if(e&&t){if(this._queue=[],this._priorities=[],e.length!==t.length)throw new Error("Arrays must have the same length");for(var i=0;i<e.length;i++)this.insert(e[i],t[i])}n&&(this._sorting=n)},t.prototype._insertAt=function(e,t,n){this._queue.length===n?(this._queue.push(e),this._priorities.push(t)):(this._queue.splice(n,0,e),this._priorities.splice(n,0,t))},e.exports&&(e.exports=t)},2606:(e,t,n)=>{e.exports&&(e.exports={DBSCAN:n(8317),KMEANS:n(3781),OPTICS:n(3763),PriorityQueue:n(7985)})},9187:e=>{"use strict";function t(e,t,i){i=i||2;var o,a,s,l,h,d,f,g=t&&t.length,m=g?t[0]*i:e.length,y=n(e,0,m,i,!0),v=[];if(!y||y.next===y.prev)return v;if(g&&(y=function(e,t,i,r){var o,a,s,l=[];for(o=0,a=t.length;o<a;o++)(s=n(e,t[o]*r,o<a-1?t[o+1]*r:e.length,r,!1))===s.next&&(s.steiner=!0),l.push(p(s));for(l.sort(c),o=0;o<l.length;o++)i=u(l[o],i);return i}(e,t,y,i)),e.length>80*i){o=s=e[0],a=l=e[1];for(var b=i;b<m;b+=i)(h=e[b])<o&&(o=h),(d=e[b+1])<a&&(a=d),h>s&&(s=h),d>l&&(l=d);f=0!==(f=Math.max(s-o,l-a))?32767/f:0}return r(y,v,i,o,a,f,0),v}function n(e,t,n,i,r){var o,a;if(r===C(e,t,n,i)>0)for(o=t;o<n;o+=i)a=E(o,e[o],e[o+1],a);else for(o=n-i;o>=t;o-=i)a=E(o,e[o],e[o+1],a);return a&&y(a,a.next)&&(x(a),a=a.next),a}function i(e,t){if(!e)return e;t||(t=e);var n,i=e;do{if(n=!1,i.steiner||!y(i,i.next)&&0!==m(i.prev,i,i.next))i=i.next;else{if(x(i),(i=t=i.prev)===i.next)break;n=!0}}while(n||i!==t);return t}function r(e,t,n,c,u,h,p){if(e){!p&&h&&function(e,t,n,i){var r=e;do{0===r.z&&(r.z=d(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){var t,n,i,r,o,a,s,l,c=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,i=n,s=0,t=0;t<c&&(s++,i=i.nextZ);t++);for(l=c;s>0||l>0&&i;)0!==s&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,l--),o?o.nextZ=r:e=r,r.prevZ=o,o=r;n=i}o.nextZ=null,c*=2}while(a>1)}(r)}(e,c,u,h);for(var f,g,m=e;e.prev!==e.next;)if(f=e.prev,g=e.next,h?a(e,c,u,h):o(e))t.push(f.i/n|0),t.push(e.i/n|0),t.push(g.i/n|0),x(e),e=g.next,m=g.next;else if((e=g)===m){p?1===p?r(e=s(i(e),t,n),t,n,c,u,h,2):2===p&&l(e,t,n,c,u,h):r(i(e),t,n,c,u,h,1);break}}}function o(e){var t=e.prev,n=e,i=e.next;if(m(t,n,i)>=0)return!1;for(var r=t.x,o=n.x,a=i.x,s=t.y,l=n.y,c=i.y,u=r<o?r<a?r:a:o<a?o:a,h=s<l?s<c?s:c:l<c?l:c,d=r>o?r>a?r:a:o>a?o:a,p=s>l?s>c?s:c:l>c?l:c,g=i.next;g!==t;){if(g.x>=u&&g.x<=d&&g.y>=h&&g.y<=p&&f(r,s,o,l,a,c,g.x,g.y)&&m(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function a(e,t,n,i){var r=e.prev,o=e,a=e.next;if(m(r,o,a)>=0)return!1;for(var s=r.x,l=o.x,c=a.x,u=r.y,h=o.y,p=a.y,g=s<l?s<c?s:c:l<c?l:c,y=u<h?u<p?u:p:h<p?h:p,v=s>l?s>c?s:c:l>c?l:c,b=u>h?u>p?u:p:h>p?h:p,_=d(g,y,t,n,i),w=d(v,b,t,n,i),P=e.prevZ,E=e.nextZ;P&&P.z>=_&&E&&E.z<=w;){if(P.x>=g&&P.x<=v&&P.y>=y&&P.y<=b&&P!==r&&P!==a&&f(s,u,l,h,c,p,P.x,P.y)&&m(P.prev,P,P.next)>=0)return!1;if(P=P.prevZ,E.x>=g&&E.x<=v&&E.y>=y&&E.y<=b&&E!==r&&E!==a&&f(s,u,l,h,c,p,E.x,E.y)&&m(E.prev,E,E.next)>=0)return!1;E=E.nextZ}for(;P&&P.z>=_;){if(P.x>=g&&P.x<=v&&P.y>=y&&P.y<=b&&P!==r&&P!==a&&f(s,u,l,h,c,p,P.x,P.y)&&m(P.prev,P,P.next)>=0)return!1;P=P.prevZ}for(;E&&E.z<=w;){if(E.x>=g&&E.x<=v&&E.y>=y&&E.y<=b&&E!==r&&E!==a&&f(s,u,l,h,c,p,E.x,E.y)&&m(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function s(e,t,n){var r=e;do{var o=r.prev,a=r.next.next;!y(o,a)&&v(o,r,r.next,a)&&w(o,a)&&w(a,o)&&(t.push(o.i/n|0),t.push(r.i/n|0),t.push(a.i/n|0),x(r),x(r.next),r=e=a),r=r.next}while(r!==e);return i(r)}function l(e,t,n,o,a,s){var l=e;do{for(var c=l.next.next;c!==l.prev;){if(l.i!==c.i&&g(l,c)){var u=P(l,c);return l=i(l,l.next),u=i(u,u.next),r(l,t,n,o,a,s,0),void r(u,t,n,o,a,s,0)}c=c.next}l=l.next}while(l!==e)}function c(e,t){return e.x-t.x}function u(e,t){var n=function(e,t){var n,i=t,r=e.x,o=e.y,a=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var s=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=r&&s>a&&(a=s,n=i.x<i.next.x?i:i.next,s===r))return n}i=i.next}while(i!==t);if(!n)return null;var l,c=n,u=n.x,d=n.y,p=1/0;i=n;do{r>=i.x&&i.x>=u&&r!==i.x&&f(o<d?r:a,o,u,d,o<d?a:r,o,i.x,i.y)&&(l=Math.abs(o-i.y)/(r-i.x),w(i,e)&&(l<p||l===p&&(i.x>n.x||i.x===n.x&&h(n,i)))&&(n=i,p=l)),i=i.next}while(i!==c);return n}(e,t);if(!n)return t;var r=P(n,e);return i(r,r.next),i(n,n.next)}function h(e,t){return m(e.prev,e,t.prev)<0&&m(t.next,e,e.next)<0}function d(e,t,n,i,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function p(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function f(e,t,n,i,r,o,a,s){return(r-a)*(t-s)>=(e-a)*(o-s)&&(e-a)*(i-s)>=(n-a)*(t-s)&&(n-a)*(o-s)>=(r-a)*(i-s)}function g(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&v(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(w(e,t)&&w(t,e)&&function(e,t){var n=e,i=!1,r=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)&&(m(e.prev,e,t.prev)||m(e,t.prev,t))||y(e,t)&&m(e.prev,e,e.next)>0&&m(t.prev,t,t.next)>0)}function m(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function y(e,t){return e.x===t.x&&e.y===t.y}function v(e,t,n,i){var r=_(m(e,t,n)),o=_(m(e,t,i)),a=_(m(n,i,e)),s=_(m(n,i,t));return r!==o&&a!==s||!(0!==r||!b(e,n,t))||!(0!==o||!b(e,i,t))||!(0!==a||!b(n,e,i))||!(0!==s||!b(n,t,i))}function b(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function _(e){return e>0?1:e<0?-1:0}function w(e,t){return m(e.prev,e,e.next)<0?m(e,t,e.next)>=0&&m(e,e.prev,t)>=0:m(e,t,e.prev)<0||m(e,e.next,t)<0}function P(e,t){var n=new A(e.i,e.x,e.y),i=new A(t.i,t.x,t.y),r=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function E(e,t,n,i){var r=new A(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function x(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function A(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function C(e,t,n,i){for(var r=0,o=t,a=n-i;o<n;o+=i)r+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return r}e.exports=t,e.exports.default=t,t.deviation=function(e,t,n,i){var r=t&&t.length,o=r?t[0]*n:e.length,a=Math.abs(C(e,0,o,n));if(r)for(var s=0,l=t.length;s<l;s++){var c=t[s]*n,u=s<l-1?t[s+1]*n:e.length;a-=Math.abs(C(e,c,u,n))}var h=0;for(s=0;s<i.length;s+=3){var d=i[s]*n,p=i[s+1]*n,f=i[s+2]*n;h+=Math.abs((e[d]-e[f])*(e[p+1]-e[d+1])-(e[d]-e[p])*(e[f+1]-e[d+1]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},t.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},i=0,r=0;r<e.length;r++){for(var o=0;o<e[r].length;o++)for(var a=0;a<t;a++)n.vertices.push(e[r][o][a]);r>0&&(i+=e[r-1].length,n.holes.push(i))}return n}},7648:e=>{"use strict";var t="Function.prototype.bind called on incompatible ",n=Array.prototype.slice,i=Object.prototype.toString,r="[object Function]";e.exports=function(e){var o=this;if("function"!=typeof o||i.call(o)!==r)throw new TypeError(t+o);for(var a,s=n.call(arguments,1),l=Math.max(0,o.length-s.length),c=[],u=0;u<l;u++)c.push("$"+u);if(a=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof a){var t=o.apply(this,s.concat(n.call(arguments)));return Object(t)===t?t:this}return o.apply(e,s.concat(n.call(arguments)))})),o.prototype){var h=function(){};h.prototype=o.prototype,a.prototype=new h,h.prototype=null}return a}},8612:(e,t,n)=>{"use strict";var i=n(7648);e.exports=Function.prototype.bind||i},5972:e=>{"use strict";var t=function(){return"string"==typeof function(){}.name},n=Object.getOwnPropertyDescriptor;if(n)try{n([],"length")}catch(e){n=null}t.functionsHaveConfigurableNames=function(){if(!t()||!n)return!1;var e=n((function(){}),"name");return!!e&&!!e.configurable};var i=Function.prototype.bind;t.boundFunctionsHaveNames=function(){return t()&&"function"==typeof i&&""!==function(){}.bind().name},e.exports=t},9657:(e,t,n)=>{var i=n(251),r=function(e){this.precision=e&&e.precision?e.precision:17,this.direction=!(!e||!e.direction)&&e.direction,this.pseudoNode=!(!e||!e.pseudoNode)&&e.pseudoNode,this.objectComparator=e&&e.objectComparator?e.objectComparator:s};function o(e){return e.coordinates.map((function(t){return{type:e.type.replace("Multi",""),coordinates:t}}))}function a(e,t){return e.hasOwnProperty("coordinates")?e.coordinates.length===t.coordinates.length:e.length===t.length}function s(e,t){return i(e,t,{strict:!0})}r.prototype.compare=function(e,t){if(e.type!==t.type||!a(e,t))return!1;switch(e.type){case"Point":return this.compareCoord(e.coordinates,t.coordinates);case"LineString":return this.compareLine(e.coordinates,t.coordinates,0,!1);case"Polygon":return this.comparePolygon(e,t);case"Feature":return this.compareFeature(e,t);default:if(0===e.type.indexOf("Multi")){var n=this,i=o(e),r=o(t);return i.every((function(e){return this.some((function(t){return n.compare(e,t)}))}),r)}}return!1},r.prototype.compareCoord=function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n].toFixed(this.precision)!==t[n].toFixed(this.precision))return!1;return!0},r.prototype.compareLine=function(e,t,n,i){if(!a(e,t))return!1;var r=this.pseudoNode?e:this.removePseudo(e),o=this.pseudoNode?t:this.removePseudo(t);if(!i||this.compareCoord(r[0],o[0])||(o=this.fixStartIndex(o,r))){var s=this.compareCoord(r[n],o[n]);return this.direction||s?this.comparePath(r,o):!!this.compareCoord(r[n],o[o.length-(1+n)])&&this.comparePath(r.slice().reverse(),o)}},r.prototype.fixStartIndex=function(e,t){for(var n,i=-1,r=0;r<e.length;r++)if(this.compareCoord(e[r],t[0])){i=r;break}return i>=0&&(n=[].concat(e.slice(i,e.length),e.slice(1,i+1))),n},r.prototype.comparePath=function(e,t){var n=this;return e.every((function(e,t){return n.compareCoord(e,this[t])}),t)},r.prototype.comparePolygon=function(e,t){if(this.compareLine(e.coordinates[0],t.coordinates[0],1,!0)){var n=e.coordinates.slice(1,e.coordinates.length),i=t.coordinates.slice(1,t.coordinates.length),r=this;return n.every((function(e){return this.some((function(t){return r.compareLine(e,t,1,!0)}))}),i)}return!1},r.prototype.compareFeature=function(e,t){return!(e.id!==t.id||!this.objectComparator(e.properties,t.properties)||!this.compareBBox(e,t))&&this.compare(e.geometry,t.geometry)},r.prototype.compareBBox=function(e,t){return!!(!e.bbox&&!t.bbox||e.bbox&&t.bbox&&this.compareCoord(e.bbox,t.bbox))},r.prototype.removePseudo=function(e){return e},e.exports=r},1787:(e,t,n)=>{var i=n(4056),r=n(9500),o=n(9181),a=n(9705).Z,s=o.featureEach,l=(o.coordEach,r.polygon,r.featureCollection);function c(e){var t=new i(e);return t.insert=function(e){if("Feature"!==e.type)throw new Error("invalid feature");return e.bbox=e.bbox?e.bbox:a(e),i.prototype.insert.call(this,e)},t.load=function(e){var t=[];return Array.isArray(e)?e.forEach((function(e){if("Feature"!==e.type)throw new Error("invalid features");e.bbox=e.bbox?e.bbox:a(e),t.push(e)})):s(e,(function(e){if("Feature"!==e.type)throw new Error("invalid features");e.bbox=e.bbox?e.bbox:a(e),t.push(e)})),i.prototype.load.call(this,t)},t.remove=function(e,t){if("Feature"!==e.type)throw new Error("invalid feature");return e.bbox=e.bbox?e.bbox:a(e),i.prototype.remove.call(this,e,t)},t.clear=function(){return i.prototype.clear.call(this)},t.search=function(e){var t=i.prototype.search.call(this,this.toBBox(e));return l(t)},t.collides=function(e){return i.prototype.collides.call(this,this.toBBox(e))},t.all=function(){var e=i.prototype.all.call(this);return l(e)},t.toJSON=function(){return i.prototype.toJSON.call(this)},t.fromJSON=function(e){return i.prototype.fromJSON.call(this,e)},t.toBBox=function(e){var t;if(e.bbox)t=e.bbox;else if(Array.isArray(e)&&4===e.length)t=e;else if(Array.isArray(e)&&6===e.length)t=[e[0],e[1],e[3],e[4]];else if("Feature"===e.type)t=a(e);else{if("FeatureCollection"!==e.type)throw new Error("invalid geojson");t=a(e)}return{minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}},t}e.exports=c,e.exports.default=c},9500:(e,t)=>{"use strict";function n(e,t,n){void 0===n&&(n={});var i={type:"Feature"};return(0===n.id||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=t||{},i.geometry=e,i}function i(e,t,i){if(void 0===i&&(i={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!p(e[0])||!p(e[1]))throw new Error("coordinates must contain numbers");return n({type:"Point",coordinates:e},t,i)}function r(e,t,i){void 0===i&&(i={});for(var r=0,o=e;r<o.length;r++){var a=o[r];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:e},t,i)}function o(e,t,i){if(void 0===i&&(i={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:e},t,i)}function a(e,t){void 0===t&&(t={});var n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function s(e,t,i){return void 0===i&&(i={}),n({type:"MultiLineString",coordinates:e},t,i)}function l(e,t,i){return void 0===i&&(i={}),n({type:"MultiPoint",coordinates:e},t,i)}function c(e,t,i){return void 0===i&&(i={}),n({type:"MultiPolygon",coordinates:e},t,i)}function u(e,n){void 0===n&&(n="kilometers");var i=t.factors[n];if(!i)throw new Error(n+" units is invalid");return e*i}function h(e,n){void 0===n&&(n="kilometers");var i=t.factors[n];if(!i)throw new Error(n+" units is invalid");return e/i}function d(e){return e%(2*Math.PI)*180/Math.PI}function p(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.earthRadius=6371008.8,t.factors={centimeters:100*t.earthRadius,centimetres:100*t.earthRadius,degrees:t.earthRadius/111325,feet:3.28084*t.earthRadius,inches:39.37*t.earthRadius,kilometers:t.earthRadius/1e3,kilometres:t.earthRadius/1e3,meters:t.earthRadius,metres:t.earthRadius,miles:t.earthRadius/1609.344,millimeters:1e3*t.earthRadius,millimetres:1e3*t.earthRadius,nauticalmiles:t.earthRadius/1852,radians:1,yards:1.0936*t.earthRadius},t.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/t.earthRadius,yards:1.0936133},t.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},t.feature=n,t.geometry=function(e,t,n){switch(void 0===n&&(n={}),e){case"Point":return i(t).geometry;case"LineString":return o(t).geometry;case"Polygon":return r(t).geometry;case"MultiPoint":return l(t).geometry;case"MultiLineString":return s(t).geometry;case"MultiPolygon":return c(t).geometry;default:throw new Error(e+" is invalid")}},t.point=i,t.points=function(e,t,n){return void 0===n&&(n={}),a(e.map((function(e){return i(e,t)})),n)},t.polygon=r,t.polygons=function(e,t,n){return void 0===n&&(n={}),a(e.map((function(e){return r(e,t)})),n)},t.lineString=o,t.lineStrings=function(e,t,n){return void 0===n&&(n={}),a(e.map((function(e){return o(e,t)})),n)},t.featureCollection=a,t.multiLineString=s,t.multiPoint=l,t.multiPolygon=c,t.geometryCollection=function(e,t,i){return void 0===i&&(i={}),n({type:"GeometryCollection",geometries:e},t,i)},t.round=function(e,t){if(void 0===t&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,t||0);return Math.round(e*n)/n},t.radiansToLength=u,t.lengthToRadians=h,t.lengthToDegrees=function(e,t){return d(h(e,t))},t.bearingToAzimuth=function(e){var t=e%360;return t<0&&(t+=360),t},t.radiansToDegrees=d,t.degreesToRadians=function(e){return e%360*Math.PI/180},t.convertLength=function(e,t,n){if(void 0===t&&(t="kilometers"),void 0===n&&(n="kilometers"),!(e>=0))throw new Error("length must be a positive number");return u(h(e,t),n)},t.convertArea=function(e,n,i){if(void 0===n&&(n="meters"),void 0===i&&(i="kilometers"),!(e>=0))throw new Error("area must be a positive number");var r=t.areaFactors[n];if(!r)throw new Error("invalid original units");var o=t.areaFactors[i];if(!o)throw new Error("invalid final units");return e/r*o},t.isNumber=p,t.isObject=function(e){return!!e&&e.constructor===Object},t.validateBBox=function(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(4!==e.length&&6!==e.length)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach((function(e){if(!p(e))throw new Error("bbox must only contain numbers")}))},t.validateId=function(e){if(!e)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof e))throw new Error("id must be a number or a string")}},9181:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(9500);function r(e,t,n){if(null!==e)for(var i,o,a,s,l,c,u,h,d=0,p=0,f=e.type,g="FeatureCollection"===f,m="Feature"===f,y=g?e.features.length:1,v=0;v<y;v++){l=(h=!!(u=g?e.features[v].geometry:m?e.geometry:e)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var b=0;b<l;b++){var _=0,w=0;if(null!==(s=h?u.geometries[b]:u)){c=s.coordinates;var P=s.type;switch(d=!n||"Polygon"!==P&&"MultiPolygon"!==P?0:1,P){case null:break;case"Point":if(!1===t(c,p,v,_,w))return!1;p++,_++;break;case"LineString":case"MultiPoint":for(i=0;i<c.length;i++){if(!1===t(c[i],p,v,_,w))return!1;p++,"MultiPoint"===P&&_++}"LineString"===P&&_++;break;case"Polygon":case"MultiLineString":for(i=0;i<c.length;i++){for(o=0;o<c[i].length-d;o++){if(!1===t(c[i][o],p,v,_,w))return!1;p++}"MultiLineString"===P&&_++,"Polygon"===P&&w++}"Polygon"===P&&_++;break;case"MultiPolygon":for(i=0;i<c.length;i++){for(w=0,o=0;o<c[i].length;o++){for(a=0;a<c[i][o].length-d;a++){if(!1===t(c[i][o][a],p,v,_,w))return!1;p++}w++}_++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===r(s.geometries[i],t,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(e,t){var n;switch(e.type){case"FeatureCollection":for(n=0;n<e.features.length&&!1!==t(e.features[n].properties,n);n++);break;case"Feature":t(e.properties,0)}}function a(e,t){if("Feature"===e.type)t(e,0);else if("FeatureCollection"===e.type)for(var n=0;n<e.features.length&&!1!==t(e.features[n],n);n++);}function s(e,t){var n,i,r,o,a,s,l,c,u,h,d=0,p="FeatureCollection"===e.type,f="Feature"===e.type,g=p?e.features.length:1;for(n=0;n<g;n++){for(s=p?e.features[n].geometry:f?e.geometry:e,c=p?e.features[n].properties:f?e.properties:{},u=p?e.features[n].bbox:f?e.bbox:void 0,h=p?e.features[n].id:f?e.id:void 0,a=(l=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,r=0;r<a;r++)if(null!==(o=l?s.geometries[r]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(o,d,c,u,h))return!1;break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(!1===t(o.geometries[i],d,c,u,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===t(null,d,c,u,h))return!1;d++}}function l(e,t){s(e,(function(e,n,r,o,a){var s,l=null===e?null:e.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return!1!==t(i.feature(e,r,{bbox:o,id:a}),n,0)&&void 0}switch(l){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var c=0;c<e.coordinates.length;c++){var u={type:s,coordinates:e.coordinates[c]};if(!1===t(i.feature(u,r),n,c))return!1}}))}function c(e,t){l(e,(function(e,n,o){var a=0;if(e.geometry){var s=e.geometry.type;if("Point"!==s&&"MultiPoint"!==s){var l,c=0,u=0,h=0;return!1!==r(e,(function(r,s,d,p,f){if(void 0===l||n>c||p>u||f>h)return l=r,c=n,u=p,h=f,void(a=0);var g=i.lineString([l,r],e.properties);if(!1===t(g,n,o,f,a))return!1;a++,l=r}))&&void 0}}}))}function u(e,t){if(!e)throw new Error("geojson is required");l(e,(function(e,n,r){if(null!==e.geometry){var o=e.geometry.type,a=e.geometry.coordinates;switch(o){case"LineString":if(!1===t(e,n,r,0,0))return!1;break;case"Polygon":for(var s=0;s<a.length;s++)if(!1===t(i.lineString(a[s],e.properties),n,r,s))return!1}}}))}t.coordAll=function(e){var t=[];return r(e,(function(e){t.push(e)})),t},t.coordEach=r,t.coordReduce=function(e,t,n,i){var o=n;return r(e,(function(e,i,r,a,s){o=0===i&&void 0===n?e:t(o,e,i,r,a,s)}),i),o},t.featureEach=a,t.featureReduce=function(e,t,n){var i=n;return a(e,(function(e,r){i=0===r&&void 0===n?e:t(i,e,r)})),i},t.findPoint=function(e,t){if(t=t||{},!i.isObject(t))throw new Error("options is invalid");var n,r=t.featureIndex||0,o=t.multiFeatureIndex||0,a=t.geometryIndex||0,s=t.coordIndex||0,l=t.properties;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),l=l||e.features[r].properties,n=e.features[r].geometry;break;case"Feature":l=l||e.properties,n=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=e;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var c=n.coordinates;switch(n.type){case"Point":return i.point(c,l,t);case"MultiPoint":return o<0&&(o=c.length+o),i.point(c[o],l,t);case"LineString":return s<0&&(s=c.length+s),i.point(c[s],l,t);case"Polygon":return a<0&&(a=c.length+a),s<0&&(s=c[a].length+s),i.point(c[a][s],l,t);case"MultiLineString":return o<0&&(o=c.length+o),s<0&&(s=c[o].length+s),i.point(c[o][s],l,t);case"MultiPolygon":return o<0&&(o=c.length+o),a<0&&(a=c[o].length+a),s<0&&(s=c[o][a].length-s),i.point(c[o][a][s],l,t)}throw new Error("geojson is invalid")},t.findSegment=function(e,t){if(t=t||{},!i.isObject(t))throw new Error("options is invalid");var n,r=t.featureIndex||0,o=t.multiFeatureIndex||0,a=t.geometryIndex||0,s=t.segmentIndex||0,l=t.properties;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),l=l||e.features[r].properties,n=e.features[r].geometry;break;case"Feature":l=l||e.properties,n=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=e;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var c=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=c.length+s-1),i.lineString([c[s],c[s+1]],l,t);case"Polygon":return a<0&&(a=c.length+a),s<0&&(s=c[a].length+s-1),i.lineString([c[a][s],c[a][s+1]],l,t);case"MultiLineString":return o<0&&(o=c.length+o),s<0&&(s=c[o].length+s-1),i.lineString([c[o][s],c[o][s+1]],l,t);case"MultiPolygon":return o<0&&(o=c.length+o),a<0&&(a=c[o].length+a),s<0&&(s=c[o][a].length-s-1),i.lineString([c[o][a][s],c[o][a][s+1]],l,t)}throw new Error("geojson is invalid")},t.flattenEach=l,t.flattenReduce=function(e,t,n){var i=n;return l(e,(function(e,r,o){i=0===r&&0===o&&void 0===n?e:t(i,e,r,o)})),i},t.geomEach=s,t.geomReduce=function(e,t,n){var i=n;return s(e,(function(e,r,o,a,s){i=0===r&&void 0===n?e:t(i,e,r,o,a,s)})),i},t.lineEach=u,t.lineReduce=function(e,t,n){var i=n;return u(e,(function(e,r,o,a){i=0===r&&void 0===n?e:t(i,e,r,o,a)})),i},t.propEach=o,t.propReduce=function(e,t,n){var i=n;return o(e,(function(e,r){i=0===r&&void 0===n?e:t(i,e,r)})),i},t.segmentEach=c,t.segmentReduce=function(e,t,n){var i=n,r=!1;return c(e,(function(e,o,a,s,l){i=!1===r&&void 0===n?e:t(i,e,o,a,s,l),r=!0})),i}},4056:function(e){e.exports=function(){"use strict";function e(e,i,r,o,a){!function e(n,i,r,o,a){for(;o>r;){if(o-r>600){var s=o-r+1,l=i-r+1,c=Math.log(s),u=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*u*(s-u)/s)*(l-s/2<0?-1:1);e(n,i,Math.max(r,Math.floor(i-l*u/s+h)),Math.min(o,Math.floor(i+(s-l)*u/s+h)),a)}var d=n[i],p=r,f=o;for(t(n,r,i),a(n[o],d)>0&&t(n,r,o);p<f;){for(t(n,p,f),p++,f--;a(n[p],d)<0;)p++;for(;a(n[f],d)>0;)f--}0===a(n[r],d)?t(n,r,f):t(n,++f,o),f<=i&&(r=f+1),i<=f&&(o=f-1)}}(e,i,r||0,o||e.length-1,a||n)}function t(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function n(e,t){return e<t?-1:e>t?1:0}var i=function(e){void 0===e&&(e=9),this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function r(e,t,n){if(!n)return t.indexOf(e);for(var i=0;i<t.length;i++)if(n(e,t[i]))return i;return-1}function o(e,t){a(e,0,e.children.length,t,e)}function a(e,t,n,i,r){r||(r=f(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o=t;o<n;o++){var a=e.children[o];s(r,e.leaf?i(a):a)}return r}function s(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function l(e,t){return e.minX-t.minX}function c(e,t){return e.minY-t.minY}function u(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function h(e){return e.maxX-e.minX+(e.maxY-e.minY)}function d(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function p(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function f(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(t,n,i,r,o){for(var a=[n,i];a.length;)if(!((i=a.pop())-(n=a.pop())<=r)){var s=n+Math.ceil((i-n)/r/2)*r;e(t,s,n,i,o),a.push(n,s,s,i)}}return i.prototype.all=function(){return this._all(this.data,[])},i.prototype.search=function(e){var t=this.data,n=[];if(!p(e,t))return n;for(var i=this.toBBox,r=[];t;){for(var o=0;o<t.children.length;o++){var a=t.children[o],s=t.leaf?i(a):a;p(e,s)&&(t.leaf?n.push(a):d(e,s)?this._all(a,n):r.push(a))}t=r.pop()}return n},i.prototype.collides=function(e){var t=this.data;if(!p(e,t))return!1;for(var n=[];t;){for(var i=0;i<t.children.length;i++){var r=t.children[i],o=t.leaf?this.toBBox(r):r;if(p(e,o)){if(t.leaf||d(e,o))return!0;n.push(r)}}t=n.pop()}return!1},i.prototype.load=function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0;t<e.length;t++)this.insert(e[t]);return this}var n=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var i=this.data;this.data=n,n=i}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},i.prototype.insert=function(e){return e&&this._insert(e,this.data.height-1),this},i.prototype.clear=function(){return this.data=f([]),this},i.prototype.remove=function(e,t){if(!e)return this;for(var n,i,o,a=this.data,s=this.toBBox(e),l=[],c=[];a||l.length;){if(a||(a=l.pop(),i=l[l.length-1],n=c.pop(),o=!0),a.leaf){var u=r(e,a.children,t);if(-1!==u)return a.children.splice(u,1),l.push(a),this._condense(l),this}o||a.leaf||!d(a,s)?i?(n++,a=i.children[n],o=!1):a=null:(l.push(a),c.push(n),n=0,i=a,a=a.children[0])}return this},i.prototype.toBBox=function(e){return e},i.prototype.compareMinX=function(e,t){return e.minX-t.minX},i.prototype.compareMinY=function(e,t){return e.minY-t.minY},i.prototype.toJSON=function(){return this.data},i.prototype.fromJSON=function(e){return this.data=e,this},i.prototype._all=function(e,t){for(var n=[];e;)e.leaf?t.push.apply(t,e.children):n.push.apply(n,e.children),e=n.pop();return t},i.prototype._build=function(e,t,n,i){var r,a=n-t+1,s=this._maxEntries;if(a<=s)return o(r=f(e.slice(t,n+1)),this.toBBox),r;i||(i=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,i-1))),(r=f([])).leaf=!1,r.height=i;var l=Math.ceil(a/s),c=l*Math.ceil(Math.sqrt(s));g(e,t,n,c,this.compareMinX);for(var u=t;u<=n;u+=c){var h=Math.min(u+c-1,n);g(e,u,h,l,this.compareMinY);for(var d=u;d<=h;d+=l){var p=Math.min(d+l-1,h);r.children.push(this._build(e,d,p,i-1))}}return o(r,this.toBBox),r},i.prototype._chooseSubtree=function(e,t,n,i){for(;i.push(t),!t.leaf&&i.length-1!==n;){for(var r=1/0,o=1/0,a=void 0,s=0;s<t.children.length;s++){var l=t.children[s],c=u(l),h=(d=e,p=l,(Math.max(p.maxX,d.maxX)-Math.min(p.minX,d.minX))*(Math.max(p.maxY,d.maxY)-Math.min(p.minY,d.minY))-c);h<o?(o=h,r=c<r?c:r,a=l):h===o&&c<r&&(r=c,a=l)}t=a||t.children[0]}var d,p;return t},i.prototype._insert=function(e,t,n){var i=n?e:this.toBBox(e),r=[],o=this._chooseSubtree(i,this.data,t,r);for(o.children.push(e),s(o,i);t>=0&&r[t].children.length>this._maxEntries;)this._split(r,t),t--;this._adjustParentBBoxes(i,r,t)},i.prototype._split=function(e,t){var n=e[t],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);var a=this._chooseSplitIndex(n,r,i),s=f(n.children.splice(a,n.children.length-a));s.height=n.height,s.leaf=n.leaf,o(n,this.toBBox),o(s,this.toBBox),t?e[t-1].children.push(s):this._splitRoot(n,s)},i.prototype._splitRoot=function(e,t){this.data=f([e,t]),this.data.height=e.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},i.prototype._chooseSplitIndex=function(e,t,n){for(var i,r,o,s,l,c,h,d=1/0,p=1/0,f=t;f<=n-t;f++){var g=a(e,0,f,this.toBBox),m=a(e,f,n,this.toBBox),y=(r=g,o=m,void 0,void 0,void 0,void 0,s=Math.max(r.minX,o.minX),l=Math.max(r.minY,o.minY),c=Math.min(r.maxX,o.maxX),h=Math.min(r.maxY,o.maxY),Math.max(0,c-s)*Math.max(0,h-l)),v=u(g)+u(m);y<d?(d=y,i=f,p=v<p?v:p):y===d&&v<p&&(p=v,i=f)}return i||n-t},i.prototype._chooseSplitAxis=function(e,t,n){var i=e.leaf?this.compareMinX:l,r=e.leaf?this.compareMinY:c;this._allDistMargin(e,t,n,i)<this._allDistMargin(e,t,n,r)&&e.children.sort(i)},i.prototype._allDistMargin=function(e,t,n,i){e.children.sort(i);for(var r=this.toBBox,o=a(e,0,t,r),l=a(e,n-t,n,r),c=h(o)+h(l),u=t;u<n-t;u++){var d=e.children[u];s(o,e.leaf?r(d):d),c+=h(o)}for(var p=n-t-1;p>=t;p--){var f=e.children[p];s(l,e.leaf?r(f):f),c+=h(l)}return c},i.prototype._adjustParentBBoxes=function(e,t,n){for(var i=n;i>=0;i--)s(t[i],e)},i.prototype._condense=function(e){for(var t=e.length-1,n=void 0;t>=0;t--)0===e[t].children.length?t>0?(n=e[t-1].children).splice(n.indexOf(e[t]),1):this.clear():o(e[t],this.toBBox)},i}()},210:(e,t,n)=>{"use strict";var i,r=SyntaxError,o=Function,a=TypeError,s=function(e){try{return o('"use strict"; return ('+e+").constructor;")()}catch(e){}},l=Object.getOwnPropertyDescriptor;if(l)try{l({},"")}catch(e){l=null}var c=function(){throw new a},u=l?function(){try{return c}catch(e){try{return l(arguments,"callee").get}catch(e){return c}}}():c,h=n(1405)(),d=Object.getPrototypeOf||function(e){return e.__proto__},p={},f="undefined"==typeof Uint8Array?i:d(Uint8Array),g={"%AggregateError%":"undefined"==typeof AggregateError?i:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?i:ArrayBuffer,"%ArrayIteratorPrototype%":h?d([][Symbol.iterator]()):i,"%AsyncFromSyncIteratorPrototype%":i,"%AsyncFunction%":p,"%AsyncGenerator%":p,"%AsyncGeneratorFunction%":p,"%AsyncIteratorPrototype%":p,"%Atomics%":"undefined"==typeof Atomics?i:Atomics,"%BigInt%":"undefined"==typeof BigInt?i:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?i:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?i:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?i:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?i:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?i:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?i:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":p,"%Int8Array%":"undefined"==typeof Int8Array?i:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?i:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?i:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":h?d(d([][Symbol.iterator]())):i,"%JSON%":"object"==typeof JSON?JSON:i,"%Map%":"undefined"==typeof Map?i:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&h?d((new Map)[Symbol.iterator]()):i,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?i:Promise,"%Proxy%":"undefined"==typeof Proxy?i:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?i:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?i:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&h?d((new Set)[Symbol.iterator]()):i,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?i:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":h?d(""[Symbol.iterator]()):i,"%Symbol%":h?Symbol:i,"%SyntaxError%":r,"%ThrowTypeError%":u,"%TypedArray%":f,"%TypeError%":a,"%Uint8Array%":"undefined"==typeof Uint8Array?i:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?i:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?i:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?i:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?i:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?i:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?i:WeakSet};try{null.error}catch(e){var m=d(d(e));g["%Error.prototype%"]=m}var y=function e(t){var n;if("%AsyncFunction%"===t)n=s("async function () {}");else if("%GeneratorFunction%"===t)n=s("function* () {}");else if("%AsyncGeneratorFunction%"===t)n=s("async function* () {}");else if("%AsyncGenerator%"===t){var i=e("%AsyncGeneratorFunction%");i&&(n=i.prototype)}else if("%AsyncIteratorPrototype%"===t){var r=e("%AsyncGenerator%");r&&(n=d(r.prototype))}return g[t]=n,n},v={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},b=n(8612),_=n(7642),w=b.call(Function.call,Array.prototype.concat),P=b.call(Function.apply,Array.prototype.splice),E=b.call(Function.call,String.prototype.replace),x=b.call(Function.call,String.prototype.slice),A=b.call(Function.call,RegExp.prototype.exec),C=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,S=/\\(\\)?/g,T=function(e){var t=x(e,0,1),n=x(e,-1);if("%"===t&&"%"!==n)throw new r("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new r("invalid intrinsic syntax, expected opening `%`");var i=[];return E(e,C,(function(e,t,n,r){i[i.length]=n?E(r,S,"$1"):t||e})),i},R=function(e,t){var n,i=e;if(_(v,i)&&(i="%"+(n=v[i])[0]+"%"),_(g,i)){var o=g[i];if(o===p&&(o=y(i)),void 0===o&&!t)throw new a("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:i,value:o}}throw new r("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new a('"allowMissing" argument must be a boolean');if(null===A(/^%?[^%]*%?$/,e))throw new r("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=T(e),i=n.length>0?n[0]:"",o=R("%"+i+"%",t),s=o.name,c=o.value,u=!1,h=o.alias;h&&(i=h[0],P(n,w([0,1],h)));for(var d=1,p=!0;d<n.length;d+=1){var f=n[d],m=x(f,0,1),y=x(f,-1);if(('"'===m||"'"===m||"`"===m||'"'===y||"'"===y||"`"===y)&&m!==y)throw new r("property names with quotes must have matching quotes");if("constructor"!==f&&p||(u=!0),_(g,s="%"+(i+="."+f)+"%"))c=g[s];else if(null!=c){if(!(f in c)){if(!t)throw new a("base intrinsic for "+e+" exists, but the property is not available.");return}if(l&&d+1>=n.length){var v=l(c,f);c=(p=!!v)&&"get"in v&&!("originalValue"in v.get)?v.get:c[f]}else p=_(c,f),c=c[f];p&&!u&&(g[s]=c)}}return c}},840:(e,t,n)=>{var i;!function(r,o,a,s){"use strict";var l,c=["","webkit","Moz","MS","ms","o"],u=o.createElement("div"),h="function",d=Math.round,p=Math.abs,f=Date.now;function g(e,t,n){return setTimeout(P(e,n),t)}function m(e,t,n){return!!Array.isArray(e)&&(y(e,n[t],n),!0)}function y(e,t,n){var i;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==s)for(i=0;i<e.length;)t.call(n,e[i],i,e),i++;else for(i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e)}function v(e,t,n){var i="DEPRECATED METHOD: "+t+"\n"+n+" AT \n";return function(){var t=new Error("get-stack-trace"),n=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=r.console&&(r.console.warn||r.console.log);return o&&o.call(r.console,i,n),e.apply(this,arguments)}}l="function"!=typeof Object.assign?function(e){if(e===s||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!==s&&null!==i)for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])}return t}:Object.assign;var b=v((function(e,t,n){for(var i=Object.keys(t),r=0;r<i.length;)(!n||n&&e[i[r]]===s)&&(e[i[r]]=t[i[r]]),r++;return e}),"extend","Use `assign`."),_=v((function(e,t){return b(e,t,!0)}),"merge","Use `assign`.");function w(e,t,n){var i,r=t.prototype;(i=e.prototype=Object.create(r)).constructor=e,i._super=r,n&&l(i,n)}function P(e,t){return function(){return e.apply(t,arguments)}}function E(e,t){return typeof e==h?e.apply(t&&t[0]||s,t):e}function x(e,t){return e===s?t:e}function A(e,t,n){y(R(t),(function(t){e.addEventListener(t,n,!1)}))}function C(e,t,n){y(R(t),(function(t){e.removeEventListener(t,n,!1)}))}function S(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function T(e,t){return e.indexOf(t)>-1}function R(e){return e.trim().split(/\s+/g)}function I(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var i=0;i<e.length;){if(n&&e[i][n]==t||!n&&e[i]===t)return i;i++}return-1}function M(e){return Array.prototype.slice.call(e,0)}function L(e,t,n){for(var i=[],r=[],o=0;o<e.length;){var a=t?e[o][t]:e[o];I(r,a)<0&&i.push(e[o]),r[o]=a,o++}return n&&(i=t?i.sort((function(e,n){return e[t]>n[t]})):i.sort()),i}function D(e,t){for(var n,i,r=t[0].toUpperCase()+t.slice(1),o=0;o<c.length;){if((i=(n=c[o])?n+r:t)in e)return i;o++}return s}var O=1;function j(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||r}var N="ontouchstart"in r,F=D(r,"PointerEvent")!==s,k=N&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),U="touch",z="mouse",B=25,G=1,V=2,H=4,q=8,W=1,X=2,Y=4,K=8,Z=16,J=X|Y,$=K|Z,Q=J|$,ee=["x","y"],te=["clientX","clientY"];function ne(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){E(e.options.enable,[e])&&n.handler(t)},this.init()}function ie(e,t,n){var i=n.pointers.length,r=n.changedPointers.length,o=t&G&&i-r==0,a=t&(H|q)&&i-r==0;n.isFirst=!!o,n.isFinal=!!a,o&&(e.session={}),n.eventType=t,function(e,t){var n=e.session,i=t.pointers,r=i.length;n.firstInput||(n.firstInput=re(t)),r>1&&!n.firstMultiple?n.firstMultiple=re(t):1===r&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,l=a?a.center:o.center,c=t.center=oe(i);t.timeStamp=f(),t.deltaTime=t.timeStamp-o.timeStamp,t.angle=ce(l,c),t.distance=le(l,c),function(e,t){var n=t.center,i=e.offsetDelta||{},r=e.prevDelta||{},o=e.prevInput||{};t.eventType!==G&&o.eventType!==H||(r=e.prevDelta={x:o.deltaX||0,y:o.deltaY||0},i=e.offsetDelta={x:n.x,y:n.y}),t.deltaX=r.x+(n.x-i.x),t.deltaY=r.y+(n.y-i.y)}(n,t),t.offsetDirection=se(t.deltaX,t.deltaY);var u,h,d=ae(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=d.x,t.overallVelocityY=d.y,t.overallVelocity=p(d.x)>p(d.y)?d.x:d.y,t.scale=a?(u=a.pointers,le((h=i)[0],h[1],te)/le(u[0],u[1],te)):1,t.rotation=a?function(e,t){return ce(t[1],t[0],te)+ce(e[1],e[0],te)}(a.pointers,i):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,function(e,t){var n,i,r,o,a=e.lastInterval||t,l=t.timeStamp-a.timeStamp;if(t.eventType!=q&&(l>B||a.velocity===s)){var c=t.deltaX-a.deltaX,u=t.deltaY-a.deltaY,h=ae(l,c,u);i=h.x,r=h.y,n=p(h.x)>p(h.y)?h.x:h.y,o=se(c,u),e.lastInterval=t}else n=a.velocity,i=a.velocityX,r=a.velocityY,o=a.direction;t.velocity=n,t.velocityX=i,t.velocityY=r,t.direction=o}(n,t);var g=e.element;S(t.srcEvent.target,g)&&(g=t.srcEvent.target),t.target=g}(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function re(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:d(e.pointers[n].clientX),clientY:d(e.pointers[n].clientY)},n++;return{timeStamp:f(),pointers:t,center:oe(t),deltaX:e.deltaX,deltaY:e.deltaY}}function oe(e){var t=e.length;if(1===t)return{x:d(e[0].clientX),y:d(e[0].clientY)};for(var n=0,i=0,r=0;r<t;)n+=e[r].clientX,i+=e[r].clientY,r++;return{x:d(n/t),y:d(i/t)}}function ae(e,t,n){return{x:t/e||0,y:n/e||0}}function se(e,t){return e===t?W:p(e)>=p(t)?e<0?X:Y:t<0?K:Z}function le(e,t,n){n||(n=ee);var i=t[n[0]]-e[n[0]],r=t[n[1]]-e[n[1]];return Math.sqrt(i*i+r*r)}function ce(e,t,n){n||(n=ee);var i=t[n[0]]-e[n[0]],r=t[n[1]]-e[n[1]];return 180*Math.atan2(r,i)/Math.PI}ne.prototype={handler:function(){},init:function(){this.evEl&&A(this.element,this.evEl,this.domHandler),this.evTarget&&A(this.target,this.evTarget,this.domHandler),this.evWin&&A(j(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&C(this.element,this.evEl,this.domHandler),this.evTarget&&C(this.target,this.evTarget,this.domHandler),this.evWin&&C(j(this.element),this.evWin,this.domHandler)}};var ue={mousedown:G,mousemove:V,mouseup:H},he="mousedown",de="mousemove mouseup";function pe(){this.evEl=he,this.evWin=de,this.pressed=!1,ne.apply(this,arguments)}w(pe,ne,{handler:function(e){var t=ue[e.type];t&G&&0===e.button&&(this.pressed=!0),t&V&&1!==e.which&&(t=H),this.pressed&&(t&H&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:z,srcEvent:e}))}});var fe={pointerdown:G,pointermove:V,pointerup:H,pointercancel:q,pointerout:q},ge={2:U,3:"pen",4:z,5:"kinect"},me="pointerdown",ye="pointermove pointerup pointercancel";function ve(){this.evEl=me,this.evWin=ye,ne.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}r.MSPointerEvent&&!r.PointerEvent&&(me="MSPointerDown",ye="MSPointerMove MSPointerUp MSPointerCancel"),w(ve,ne,{handler:function(e){var t=this.store,n=!1,i=e.type.toLowerCase().replace("ms",""),r=fe[i],o=ge[e.pointerType]||e.pointerType,a=o==U,s=I(t,e.pointerId,"pointerId");r&G&&(0===e.button||a)?s<0&&(t.push(e),s=t.length-1):r&(H|q)&&(n=!0),s<0||(t[s]=e,this.callback(this.manager,r,{pointers:t,changedPointers:[e],pointerType:o,srcEvent:e}),n&&t.splice(s,1))}});var be={touchstart:G,touchmove:V,touchend:H,touchcancel:q},_e="touchstart",we="touchstart touchmove touchend touchcancel";function Pe(){this.evTarget=_e,this.evWin=we,this.started=!1,ne.apply(this,arguments)}function Ee(e,t){var n=M(e.touches),i=M(e.changedTouches);return t&(H|q)&&(n=L(n.concat(i),"identifier",!0)),[n,i]}w(Pe,ne,{handler:function(e){var t=be[e.type];if(t===G&&(this.started=!0),this.started){var n=Ee.call(this,e,t);t&(H|q)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:U,srcEvent:e})}}});var xe={touchstart:G,touchmove:V,touchend:H,touchcancel:q},Ae="touchstart touchmove touchend touchcancel";function Ce(){this.evTarget=Ae,this.targetIds={},ne.apply(this,arguments)}function Se(e,t){var n=M(e.touches),i=this.targetIds;if(t&(G|V)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var r,o,a=M(e.changedTouches),s=[],l=this.target;if(o=n.filter((function(e){return S(e.target,l)})),t===G)for(r=0;r<o.length;)i[o[r].identifier]=!0,r++;for(r=0;r<a.length;)i[a[r].identifier]&&s.push(a[r]),t&(H|q)&&delete i[a[r].identifier],r++;return s.length?[L(o.concat(s),"identifier",!0),s]:void 0}w(Ce,ne,{handler:function(e){var t=xe[e.type],n=Se.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:U,srcEvent:e})}});var Te=2500,Re=25;function Ie(){ne.apply(this,arguments);var e=P(this.handler,this);this.touch=new Ce(this.manager,e),this.mouse=new pe(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function Me(e,t){e&G?(this.primaryTouch=t.changedPointers[0].identifier,Le.call(this,t)):e&(H|q)&&Le.call(this,t)}function Le(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var i=this.lastTouches;setTimeout((function(){var e=i.indexOf(n);e>-1&&i.splice(e,1)}),Te)}}function De(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var r=this.lastTouches[i],o=Math.abs(t-r.x),a=Math.abs(n-r.y);if(o<=Re&&a<=Re)return!0}return!1}w(Ie,ne,{handler:function(e,t,n){var i=n.pointerType==U,r=n.pointerType==z;if(!(r&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(i)Me.call(this,t,n);else if(r&&De.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Oe=D(u.style,"touchAction"),je=Oe!==s,Ne="compute",Fe="auto",ke="manipulation",Ue="none",ze="pan-x",Be="pan-y",Ge=function(){if(!je)return!1;var e={},t=r.CSS&&r.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(n){e[n]=!t||r.CSS.supports("touch-action",n)})),e}();function Ve(e,t){this.manager=e,this.set(t)}Ve.prototype={set:function(e){e==Ne&&(e=this.compute()),je&&this.manager.element.style&&Ge[e]&&(this.manager.element.style[Oe]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return y(this.manager.recognizers,(function(t){E(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))})),function(e){if(T(e,Ue))return Ue;var t=T(e,ze),n=T(e,Be);return t&&n?Ue:t||n?t?ze:Be:T(e,ke)?ke:Fe}(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var i=this.actions,r=T(i,Ue)&&!Ge[Ue],o=T(i,Be)&&!Ge[Be],a=T(i,ze)&&!Ge[ze];if(r){var s=1===e.pointers.length,l=e.distance<2,c=e.deltaTime<250;if(s&&l&&c)return}if(!a||!o)return r||o&&n&J||a&&n&$?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var He=1,qe=2,We=4,Xe=8,Ye=Xe,Ke=16,Ze=32;function Je(e){this.options=l({},this.defaults,e||{}),this.id=O++,this.manager=null,this.options.enable=x(this.options.enable,!0),this.state=He,this.simultaneous={},this.requireFail=[]}function $e(e){return e&Ke?"cancel":e&Xe?"end":e&We?"move":e&qe?"start":""}function Qe(e){return e==Z?"down":e==K?"up":e==X?"left":e==Y?"right":""}function et(e,t){var n=t.manager;return n?n.get(e):e}function tt(){Je.apply(this,arguments)}function nt(){tt.apply(this,arguments),this.pX=null,this.pY=null}function it(){tt.apply(this,arguments)}function rt(){Je.apply(this,arguments),this._timer=null,this._input=null}function ot(){tt.apply(this,arguments)}function at(){tt.apply(this,arguments)}function st(){Je.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function lt(e,t){return(t=t||{}).recognizers=x(t.recognizers,lt.defaults.preset),new ct(e,t)}function ct(e,t){this.options=l({},lt.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new(this.options.inputClass||(F?ve:k?Ce:N?Ie:pe))(this,ie),this.touchAction=new Ve(this,this.options.touchAction),ut(this,!0),y(this.options.recognizers,(function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])}),this)}function ut(e,t){var n,i=e.element;i.style&&(y(e.options.cssProps,(function(r,o){n=D(i.style,o),t?(e.oldCssProps[n]=i.style[n],i.style[n]=r):i.style[n]=e.oldCssProps[n]||""})),t||(e.oldCssProps={}))}Je.prototype={defaults:{},set:function(e){return l(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(m(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=et(e,this)).id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return m(e,"dropRecognizeWith",this)||(e=et(e,this),delete this.simultaneous[e.id]),this},requireFailure:function(e){if(m(e,"requireFailure",this))return this;var t=this.requireFail;return-1===I(t,e=et(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(m(e,"dropRequireFailure",this))return this;e=et(e,this);var t=I(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,n=this.state;function i(n){t.manager.emit(n,e)}n<Xe&&i(t.options.event+$e(n)),i(t.options.event),e.additionalEvent&&i(e.additionalEvent),n>=Xe&&i(t.options.event+$e(n))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=Ze},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(Ze|He)))return!1;e++}return!0},recognize:function(e){var t=l({},e);if(!E(this.options.enable,[this,t]))return this.reset(),void(this.state=Ze);this.state&(Ye|Ke|Ze)&&(this.state=He),this.state=this.process(t),this.state&(qe|We|Xe|Ke)&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},w(tt,Je,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,i=t&(qe|We),r=this.attrTest(e);return i&&(n&q||!r)?t|Ke:i||r?n&H?t|Xe:t&qe?t|We:qe:Ze}}),w(nt,tt,{defaults:{event:"pan",threshold:10,pointers:1,direction:Q},getTouchAction:function(){var e=this.options.direction,t=[];return e&J&&t.push(Be),e&$&&t.push(ze),t},directionTest:function(e){var t=this.options,n=!0,i=e.distance,r=e.direction,o=e.deltaX,a=e.deltaY;return r&t.direction||(t.direction&J?(r=0===o?W:o<0?X:Y,n=o!=this.pX,i=Math.abs(e.deltaX)):(r=0===a?W:a<0?K:Z,n=a!=this.pY,i=Math.abs(e.deltaY))),e.direction=r,n&&i>t.threshold&&r&t.direction},attrTest:function(e){return tt.prototype.attrTest.call(this,e)&&(this.state&qe||!(this.state&qe)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=Qe(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),w(it,tt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ue]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&qe)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),w(rt,Je,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Fe]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,r=e.deltaTime>t.time;if(this._input=e,!i||!n||e.eventType&(H|q)&&!r)this.reset();else if(e.eventType&G)this.reset(),this._timer=g((function(){this.state=Ye,this.tryEmit()}),t.time,this);else if(e.eventType&H)return Ye;return Ze},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===Ye&&(e&&e.eventType&H?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=f(),this.manager.emit(this.options.event,this._input)))}}),w(ot,tt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ue]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&qe)}}),w(at,tt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:J|$,pointers:1},getTouchAction:function(){return nt.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return n&(J|$)?t=e.overallVelocity:n&J?t=e.overallVelocityX:n&$&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&p(t)>this.options.velocity&&e.eventType&H},emit:function(e){var t=Qe(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),w(st,Je,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ke]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,r=e.deltaTime<t.time;if(this.reset(),e.eventType&G&&0===this.count)return this.failTimeout();if(i&&r&&n){if(e.eventType!=H)return this.failTimeout();var o=!this.pTime||e.timeStamp-this.pTime<t.interval,a=!this.pCenter||le(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,a&&o?this.count+=1:this.count=1,this._input=e,0==this.count%t.taps)return this.hasRequireFailures()?(this._timer=g((function(){this.state=Ye,this.tryEmit()}),t.interval,this),qe):Ye}return Ze},failTimeout:function(){return this._timer=g((function(){this.state=Ze}),this.options.interval,this),Ze},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Ye&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),lt.VERSION="2.0.7",lt.defaults={domEvents:!1,touchAction:Ne,enable:!0,inputTarget:null,inputClass:null,preset:[[ot,{enable:!1}],[it,{enable:!1},["rotate"]],[at,{direction:J}],[nt,{direction:J},["swipe"]],[st],[st,{event:"doubletap",taps:2},["tap"]],[rt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},ct.prototype={set:function(e){return l(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){var n;this.touchAction.preventDefaults(e);var i=this.recognizers,r=t.curRecognizer;(!r||r&&r.state&Ye)&&(r=t.curRecognizer=null);for(var o=0;o<i.length;)n=i[o],2===t.stopped||r&&n!=r&&!n.canRecognizeWith(r)?n.reset():n.recognize(e),!r&&n.state&(qe|We|Xe)&&(r=t.curRecognizer=n),o++}},get:function(e){if(e instanceof Je)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(m(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(m(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=I(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(e!==s&&t!==s){var n=this.handlers;return y(R(e),(function(e){n[e]=n[e]||[],n[e].push(t)})),this}},off:function(e,t){if(e!==s){var n=this.handlers;return y(R(e),(function(e){t?n[e]&&n[e].splice(I(n[e],t),1):delete n[e]})),this}},emit:function(e,t){this.options.domEvents&&function(e,t){var n=o.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=t,t.target.dispatchEvent(n)}(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](t),i++}},destroy:function(){this.element&&ut(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},l(lt,{INPUT_START:G,INPUT_MOVE:V,INPUT_END:H,INPUT_CANCEL:q,STATE_POSSIBLE:He,STATE_BEGAN:qe,STATE_CHANGED:We,STATE_ENDED:Xe,STATE_RECOGNIZED:Ye,STATE_CANCELLED:Ke,STATE_FAILED:Ze,DIRECTION_NONE:W,DIRECTION_LEFT:X,DIRECTION_RIGHT:Y,DIRECTION_UP:K,DIRECTION_DOWN:Z,DIRECTION_HORIZONTAL:J,DIRECTION_VERTICAL:$,DIRECTION_ALL:Q,Manager:ct,Input:ne,TouchAction:Ve,TouchInput:Ce,MouseInput:pe,PointerEventInput:ve,TouchMouseInput:Ie,SingleTouchInput:Pe,Recognizer:Je,AttrRecognizer:tt,Tap:st,Pan:nt,Swipe:at,Pinch:it,Rotate:ot,Press:rt,on:A,off:C,each:y,merge:_,extend:b,assign:l,inherit:w,bindFn:P,prefixed:D}),(void 0!==r?r:"undefined"!=typeof self?self:{}).Hammer=lt,(i=function(){return lt}.call(t,n,t,e))===s||(e.exports=i)}(window,document)},1044:(e,t,n)=>{"use strict";var i=n(210)("%Object.defineProperty%",!0),r=function(){if(i)try{return i({},"a",{value:1}),!0}catch(e){return!1}return!1};r.hasArrayLengthDefineBug=function(){if(!r())return null;try{return 1!==i([],"length",{value:1}).length}catch(e){return!0}},e.exports=r},1405:(e,t,n)=>{"use strict";var i="undefined"!=typeof Symbol&&Symbol,r=n(5419);e.exports=function(){return"function"==typeof i&&"function"==typeof Symbol&&"symbol"==typeof i("foo")&&"symbol"==typeof Symbol("bar")&&r()}},5419:e=>{"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),n=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var i=Object.getOwnPropertySymbols(e);if(1!==i.length||i[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var r=Object.getOwnPropertyDescriptor(e,t);if(42!==r.value||!0!==r.enumerable)return!1}return!0}},6410:(e,t,n)=>{"use strict";var i=n(5419);e.exports=function(){return i()&&!!Symbol.toStringTag}},7642:(e,t,n)=>{"use strict";var i=n(8612);e.exports=i.call(Function.call,Object.prototype.hasOwnProperty)},2584:(e,t,n)=>{"use strict";var i=n(6410)(),r=n(1924)("Object.prototype.toString"),o=function(e){return!(i&&e&&"object"==typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===r(e)},a=function(e){return!!o(e)||null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==r(e)&&"[object Function]"===r(e.callee)},s=function(){return o(arguments)}();o.isLegacyArguments=a,e.exports=s?o:a},8923:(e,t,n)=>{"use strict";var i=Date.prototype.getDay,r=Object.prototype.toString,o=n(6410)();e.exports=function(e){return"object"==typeof e&&null!==e&&(o?function(e){try{return i.call(e),!0}catch(e){return!1}}(e):"[object Date]"===r.call(e))}},8420:(e,t,n)=>{"use strict";var i,r,o,a,s=n(1924),l=n(6410)();if(l){i=s("Object.prototype.hasOwnProperty"),r=s("RegExp.prototype.exec"),o={};var c=function(){throw o};a={toString:c,valueOf:c},"symbol"==typeof Symbol.toPrimitive&&(a[Symbol.toPrimitive]=c)}var u=s("Object.prototype.toString"),h=Object.getOwnPropertyDescriptor;e.exports=l?function(e){if(!e||"object"!=typeof e)return!1;var t=h(e,"lastIndex");if(!t||!i(t,"value"))return!1;try{r(e,a)}catch(e){return e===o}}:function(e){return!(!e||"object"!=typeof e&&"function"!=typeof e)&&"[object RegExp]"===u(e)}},7418:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(e){i[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(e){return!1}}()?Object.assign:function(e,r){for(var o,a,s=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var c in o=Object(arguments[l]))n.call(o,c)&&(s[c]=o[c]);if(t){a=t(o);for(var u=0;u<a.length;u++)i.call(o,a[u])&&(s[a[u]]=o[a[u]])}}return s}},4244:e=>{"use strict";var t=function(e){return e!=e};e.exports=function(e,n){return 0===e&&0===n?1/e==1/n:e===n||!(!t(e)||!t(n))}},609:(e,t,n)=>{"use strict";var i=n(4289),r=n(5559),o=n(4244),a=n(5624),s=n(2281),l=r(a(),Object);i(l,{getPolyfill:a,implementation:o,shim:s}),e.exports=l},5624:(e,t,n)=>{"use strict";var i=n(4244);e.exports=function(){return"function"==typeof Object.is?Object.is:i}},2281:(e,t,n)=>{"use strict";var i=n(5624),r=n(4289);e.exports=function(){var e=i();return r(Object,{is:e},{is:function(){return Object.is!==e}}),e}},8987:(e,t,n)=>{"use strict";var i;if(!Object.keys){var r=Object.prototype.hasOwnProperty,o=Object.prototype.toString,a=n(1414),s=Object.prototype.propertyIsEnumerable,l=!s.call({toString:null},"toString"),c=s.call((function(){}),"prototype"),u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],h=function(e){var t=e.constructor;return t&&t.prototype===e},d={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},p=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!d["$"+e]&&r.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{h(window[e])}catch(e){return!0}}catch(e){return!0}return!1}();i=function(e){var t=null!==e&&"object"==typeof e,n="[object Function]"===o.call(e),i=a(e),s=t&&"[object String]"===o.call(e),d=[];if(!t&&!n&&!i)throw new TypeError("Object.keys called on a non-object");var f=c&&n;if(s&&e.length>0&&!r.call(e,0))for(var g=0;g<e.length;++g)d.push(String(g));if(i&&e.length>0)for(var m=0;m<e.length;++m)d.push(String(m));else for(var y in e)f&&"prototype"===y||!r.call(e,y)||d.push(String(y));if(l)for(var v=function(e){if("undefined"==typeof window||!p)return h(e);try{return h(e)}catch(e){return!1}}(e),b=0;b<u.length;++b)v&&"constructor"===u[b]||!r.call(e,u[b])||d.push(u[b]);return d}}e.exports=i},2215:(e,t,n)=>{"use strict";var i=Array.prototype.slice,r=n(1414),o=Object.keys,a=o?function(e){return o(e)}:n(8987),s=Object.keys;a.shim=function(){if(Object.keys){var e=function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2);e||(Object.keys=function(e){return r(e)?s(i.call(e)):s(e)})}else Object.keys=a;return Object.keys||a},e.exports=a},1414:e=>{"use strict";var t=Object.prototype.toString;e.exports=function(e){var n=t.call(e),i="[object Arguments]"===n;return i||(i="[object Array]"!==n&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===t.call(e.callee)),i}},1895:e=>{e.exports=function(e,t,n,i){var r=e[0],o=e[1],a=!1;void 0===n&&(n=0),void 0===i&&(i=t.length);for(var s=(i-n)/2,l=0,c=s-1;l<s;c=l++){var u=t[n+2*l+0],h=t[n+2*l+1],d=t[n+2*c+0],p=t[n+2*c+1];h>o!=p>o&&r<(d-u)*(o-h)/(p-h)+u&&(a=!a)}return a}},6960:(e,t,n)=>{var i=n(1895),r=n(8139);e.exports=function(e,t,n,o){return t.length>0&&Array.isArray(t[0])?r(e,t,n,o):i(e,t,n,o)},e.exports.nested=r,e.exports.flat=i},8139:e=>{e.exports=function(e,t,n,i){var r=e[0],o=e[1],a=!1;void 0===n&&(n=0),void 0===i&&(i=t.length);for(var s=i-n,l=0,c=s-1;l<s;c=l++){var u=t[l+n][0],h=t[l+n][1],d=t[c+n][0],p=t[c+n][1];h>o!=p>o&&r<(d-u)*(o-h)/(p-h)+u&&(a=!a)}return a}},2676:function(e){e.exports=function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}var i=function(e,t){this.next=null,this.key=e,this.data=t,this.left=null,this.right=null};function r(e,t){return e>t?1:e<t?-1:0}function o(e,t,n){for(var r=new i(null,null),o=r,a=r;;){var s=n(e,t.key);if(s<0){if(null===t.left)break;if(n(e,t.left.key)<0){var l=t.left;if(t.left=l.right,l.right=t,null===(t=l).left)break}a.left=t,a=t,t=t.left}else{if(!(s>0))break;if(null===t.right)break;if(n(e,t.right.key)>0&&(l=t.right,t.right=l.left,l.left=t,null===(t=l).right))break;o.right=t,o=t,t=t.right}}return o.right=t.left,a.left=t.right,t.left=r.right,t.right=r.left,t}function a(e,t,n,r){var a=new i(e,t);if(null===n)return a.left=a.right=null,a;var s=r(e,(n=o(e,n,r)).key);return s<0?(a.left=n.left,a.right=n,n.left=null):s>=0&&(a.right=n.right,a.left=n,n.right=null),a}function s(e,t,n){var i=null,r=null;if(t){var a=n((t=o(e,t,n)).key,e);0===a?(i=t.left,r=t.right):a<0?(r=t.right,t.right=null,i=t):(i=t.left,t.left=null,r=t)}return{left:i,right:r}}function l(e,t,n,i,r){if(e){i(t+(n?"└── ":"├── ")+r(e)+"\n");var o=t+(n?"    ":"│   ");e.left&&l(e.left,o,!1,i,r),e.right&&l(e.right,o,!0,i,r)}}var c=function(){function e(e){void 0===e&&(e=r),this._root=null,this._size=0,this._comparator=e}return e.prototype.insert=function(e,t){return this._size++,this._root=a(e,t,this._root,this._comparator)},e.prototype.add=function(e,t){var n=new i(e,t);null===this._root&&(n.left=n.right=null,this._size++,this._root=n);var r=this._comparator,a=o(e,this._root,r),s=r(e,a.key);return 0===s?this._root=a:(s<0?(n.left=a.left,n.right=a,a.left=null):s>0&&(n.right=a.right,n.left=a,a.right=null),this._size++,this._root=n),this._root},e.prototype.remove=function(e){this._root=this._remove(e,this._root,this._comparator)},e.prototype._remove=function(e,t,n){var i;return null===t?null:0===n(e,(t=o(e,t,n)).key)?(null===t.left?i=t.right:(i=o(e,t.left,n)).right=t.right,this._size--,i):t},e.prototype.pop=function(){var e=this._root;if(e){for(;e.left;)e=e.left;return this._root=o(e.key,this._root,this._comparator),this._root=this._remove(e.key,this._root,this._comparator),{key:e.key,data:e.data}}return null},e.prototype.findStatic=function(e){for(var t=this._root,n=this._comparator;t;){var i=n(e,t.key);if(0===i)return t;t=i<0?t.left:t.right}return null},e.prototype.find=function(e){return this._root&&(this._root=o(e,this._root,this._comparator),0!==this._comparator(e,this._root.key))?null:this._root},e.prototype.contains=function(e){for(var t=this._root,n=this._comparator;t;){var i=n(e,t.key);if(0===i)return!0;t=i<0?t.left:t.right}return!1},e.prototype.forEach=function(e,t){for(var n=this._root,i=[],r=!1;!r;)null!==n?(i.push(n),n=n.left):0!==i.length?(n=i.pop(),e.call(t,n),n=n.right):r=!0;return this},e.prototype.range=function(e,t,n,i){for(var r=[],o=this._comparator,a=this._root;0!==r.length||a;)if(a)r.push(a),a=a.left;else{if(o((a=r.pop()).key,t)>0)break;if(o(a.key,e)>=0&&n.call(i,a))return this;a=a.right}return this},e.prototype.keys=function(){var e=[];return this.forEach((function(t){var n=t.key;return e.push(n)})),e},e.prototype.values=function(){var e=[];return this.forEach((function(t){var n=t.data;return e.push(n)})),e},e.prototype.min=function(){return this._root?this.minNode(this._root).key:null},e.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},e.prototype.minNode=function(e){if(void 0===e&&(e=this._root),e)for(;e.left;)e=e.left;return e},e.prototype.maxNode=function(e){if(void 0===e&&(e=this._root),e)for(;e.right;)e=e.right;return e},e.prototype.at=function(e){for(var t=this._root,n=!1,i=0,r=[];!n;)if(t)r.push(t),t=t.left;else if(r.length>0){if(t=r.pop(),i===e)return t;i++,t=t.right}else n=!0;return null},e.prototype.next=function(e){var t=this._root,n=null;if(e.right){for(n=e.right;n.left;)n=n.left;return n}for(var i=this._comparator;t;){var r=i(e.key,t.key);if(0===r)break;r<0?(n=t,t=t.left):t=t.right}return n},e.prototype.prev=function(e){var t=this._root,n=null;if(null!==e.left){for(n=e.left;n.right;)n=n.right;return n}for(var i=this._comparator;t;){var r=i(e.key,t.key);if(0===r)break;r<0?t=t.left:(n=t,t=t.right)}return n},e.prototype.clear=function(){return this._root=null,this._size=0,this},e.prototype.toList=function(){return function(e){for(var t=e,n=[],r=!1,o=new i(null,null),a=o;!r;)t?(n.push(t),t=t.left):n.length>0?t=(t=a=a.next=n.pop()).right:r=!0;return a.next=null,o.next}(this._root)},e.prototype.load=function(e,t,n){void 0===t&&(t=[]),void 0===n&&(n=!1);var r=e.length,o=this._comparator;if(n&&d(e,t,0,r-1,o),null===this._root)this._root=u(e,t,0,r),this._size=r;else{var a=function(e,t,n){for(var r=new i(null,null),o=r,a=e,s=t;null!==a&&null!==s;)n(a.key,s.key)<0?(o.next=a,a=a.next):(o.next=s,s=s.next),o=o.next;return null!==a?o.next=a:null!==s&&(o.next=s),r.next}(this.toList(),function(e,t){for(var n=new i(null,null),r=n,o=0;o<e.length;o++)r=r.next=new i(e[o],t[o]);return r.next=null,n.next}(e,t),o);r=this._size+r,this._root=h({head:a},0,r)}return this},e.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),e.prototype.toString=function(e){void 0===e&&(e=function(e){return String(e.key)});var t=[];return l(this._root,"",!0,(function(e){return t.push(e)}),e),t.join("")},e.prototype.update=function(e,t,n){var i=this._comparator,r=s(e,this._root,i),l=r.left,c=r.right;i(e,t)<0?c=a(t,n,c,i):l=a(t,n,l,i),this._root=function(e,t,n){return null===t?e:(null===e||((t=o(e.key,t,n)).left=e),t)}(l,c,i)},e.prototype.split=function(e){return s(e,this._root,this._comparator)},e}();function u(e,t,n,r){var o=r-n;if(o>0){var a=n+Math.floor(o/2),s=e[a],l=t[a],c=new i(s,l);return c.left=u(e,t,n,a),c.right=u(e,t,a+1,r),c}return null}function h(e,t,n){var i=n-t;if(i>0){var r=t+Math.floor(i/2),o=h(e,t,r),a=e.head;return a.left=o,e.head=e.head.next,a.right=h(e,r+1,n),a}return null}function d(e,t,n,i,r){if(!(n>=i)){for(var o=e[n+i>>1],a=n-1,s=i+1;;){do{a++}while(r(e[a],o)<0);do{s--}while(r(e[s],o)>0);if(a>=s)break;var l=e[a];e[a]=e[s],e[s]=l,l=t[a],t[a]=t[s],t[s]=l}d(e,t,n,s,r),d(e,t,s+1,i,r)}}var p=function(e,t){return e.ll.x<=t.x&&t.x<=e.ur.x&&e.ll.y<=t.y&&t.y<=e.ur.y},f=function(e,t){if(t.ur.x<e.ll.x||e.ur.x<t.ll.x||t.ur.y<e.ll.y||e.ur.y<t.ll.y)return null;var n=e.ll.x<t.ll.x?t.ll.x:e.ll.x,i=e.ur.x<t.ur.x?e.ur.x:t.ur.x;return{ll:{x:n,y:e.ll.y<t.ll.y?t.ll.y:e.ll.y},ur:{x:i,y:e.ur.y<t.ur.y?e.ur.y:t.ur.y}}},g=Number.EPSILON;void 0===g&&(g=Math.pow(2,-52));var m=g*g,y=function(e,t){if(-g<e&&e<g&&-g<t&&t<g)return 0;var n=e-t;return n*n<m*e*t?0:e<t?-1:1},v=function(){function t(){e(this,t),this.reset()}return n(t,[{key:"reset",value:function(){this.xRounder=new b,this.yRounder=new b}},{key:"round",value:function(e,t){return{x:this.xRounder.round(e),y:this.yRounder.round(t)}}}]),t}(),b=function(){function t(){e(this,t),this.tree=new c,this.round(0)}return n(t,[{key:"round",value:function(e){var t=this.tree.add(e),n=this.tree.prev(t);if(null!==n&&0===y(t.key,n.key))return this.tree.remove(e),n.key;var i=this.tree.next(t);return null!==i&&0===y(t.key,i.key)?(this.tree.remove(e),i.key):e}}]),t}(),_=new v,w=function(e,t){return e.x*t.y-e.y*t.x},P=function(e,t){return e.x*t.x+e.y*t.y},E=function(e,t,n){var i={x:t.x-e.x,y:t.y-e.y},r={x:n.x-e.x,y:n.y-e.y},o=w(i,r);return y(o,0)},x=function(e){return Math.sqrt(P(e,e))},A=function(e,t,n){var i={x:t.x-e.x,y:t.y-e.y},r={x:n.x-e.x,y:n.y-e.y};return P(r,i)/x(r)/x(i)},C=function(e,t,n){return 0===t.y?null:{x:e.x+t.x/t.y*(n-e.y),y:n}},S=function(e,t,n){return 0===t.x?null:{x:n,y:e.y+t.y/t.x*(n-e.x)}},T=function(){function t(n,i){e(this,t),void 0===n.events?n.events=[this]:n.events.push(this),this.point=n,this.isLeft=i}return n(t,null,[{key:"compare",value:function(e,n){var i=t.comparePoints(e.point,n.point);return 0!==i?i:(e.point!==n.point&&e.link(n),e.isLeft!==n.isLeft?e.isLeft?1:-1:I.compare(e.segment,n.segment))}},{key:"comparePoints",value:function(e,t){return e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0}}]),n(t,[{key:"link",value:function(e){if(e.point===this.point)throw new Error("Tried to link already linked events");for(var t=e.point.events,n=0,i=t.length;n<i;n++){var r=t[n];this.point.events.push(r),r.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var e=this.point.events.length,t=0;t<e;t++){var n=this.point.events[t];if(void 0===n.segment.consumedBy)for(var i=t+1;i<e;i++){var r=this.point.events[i];void 0===r.consumedBy&&n.otherSE.point.events===r.otherSE.point.events&&n.segment.consume(r.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var e=[],t=0,n=this.point.events.length;t<n;t++){var i=this.point.events[t];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&e.push(i)}return e}},{key:"getLeftmostComparator",value:function(e){var t=this,n=new Map,i=function(i){var r,o,a,s,l,c=i.otherSE;n.set(i,{sine:(r=t.point,o=e.point,a=c.point,s={x:o.x-r.x,y:o.y-r.y},l={x:a.x-r.x,y:a.y-r.y},w(l,s)/x(l)/x(s)),cosine:A(t.point,e.point,c.point)})};return function(e,t){n.has(e)||i(e),n.has(t)||i(t);var r=n.get(e),o=r.sine,a=r.cosine,s=n.get(t),l=s.sine,c=s.cosine;return o>=0&&l>=0?a<c?1:a>c?-1:0:o<0&&l<0?a<c?-1:a>c?1:0:l<o?-1:l>o?1:0}}}]),t}(),R=0,I=function(){function t(n,i,r,o){e(this,t),this.id=++R,this.leftSE=n,n.segment=this,n.otherSE=i,this.rightSE=i,i.segment=this,i.otherSE=n,this.rings=r,this.windings=o}return n(t,null,[{key:"compare",value:function(e,t){var n=e.leftSE.point.x,i=t.leftSE.point.x,r=e.rightSE.point.x,o=t.rightSE.point.x;if(o<n)return 1;if(r<i)return-1;var a=e.leftSE.point.y,s=t.leftSE.point.y,l=e.rightSE.point.y,c=t.rightSE.point.y;if(n<i){if(s<a&&s<l)return 1;if(s>a&&s>l)return-1;var u=e.comparePoint(t.leftSE.point);if(u<0)return 1;if(u>0)return-1;var h=t.comparePoint(e.rightSE.point);return 0!==h?h:-1}if(n>i){if(a<s&&a<c)return-1;if(a>s&&a>c)return 1;var d=t.comparePoint(e.leftSE.point);if(0!==d)return d;var p=e.comparePoint(t.rightSE.point);return p<0?1:p>0?-1:1}if(a<s)return-1;if(a>s)return 1;if(r<o){var f=t.comparePoint(e.rightSE.point);if(0!==f)return f}if(r>o){var g=e.comparePoint(t.rightSE.point);if(g<0)return 1;if(g>0)return-1}if(r!==o){var m=l-a,y=r-n,v=c-s,b=o-i;if(m>y&&v<b)return 1;if(m<y&&v>b)return-1}return r>o?1:r<o||l<c?-1:l>c?1:e.id<t.id?-1:e.id>t.id?1:0}}]),n(t,[{key:"replaceRightSE",value:function(e){this.rightSE=e,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var e=this.leftSE.point.y,t=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:e<t?e:t},ur:{x:this.rightSE.point.x,y:e>t?e:t}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(e){return e.x===this.leftSE.point.x&&e.y===this.leftSE.point.y||e.x===this.rightSE.point.x&&e.y===this.rightSE.point.y}},{key:"comparePoint",value:function(e){if(this.isAnEndpoint(e))return 0;var t=this.leftSE.point,n=this.rightSE.point,i=this.vector();if(t.x===n.x)return e.x===t.x?0:e.x<t.x?1:-1;var r=(e.y-t.y)/i.y,o=t.x+r*i.x;if(e.x===o)return 0;var a=(e.x-t.x)/i.x,s=t.y+a*i.y;return e.y===s?0:e.y<s?-1:1}},{key:"getIntersection",value:function(e){var t=this.bbox(),n=e.bbox(),i=f(t,n);if(null===i)return null;var r=this.leftSE.point,o=this.rightSE.point,a=e.leftSE.point,s=e.rightSE.point,l=p(t,a)&&0===this.comparePoint(a),c=p(n,r)&&0===e.comparePoint(r),u=p(t,s)&&0===this.comparePoint(s),h=p(n,o)&&0===e.comparePoint(o);if(c&&l)return h&&!u?o:!h&&u?s:null;if(c)return u&&r.x===s.x&&r.y===s.y?null:r;if(l)return h&&o.x===a.x&&o.y===a.y?null:a;if(h&&u)return null;if(h)return o;if(u)return s;var d=function(e,t,n,i){if(0===t.x)return S(n,i,e.x);if(0===i.x)return S(e,t,n.x);if(0===t.y)return C(n,i,e.y);if(0===i.y)return C(e,t,n.y);var r=w(t,i);if(0==r)return null;var o={x:n.x-e.x,y:n.y-e.y},a=w(o,t)/r,s=w(o,i)/r;return{x:(e.x+s*t.x+(n.x+a*i.x))/2,y:(e.y+s*t.y+(n.y+a*i.y))/2}}(r,this.vector(),a,e.vector());return null===d?null:p(i,d)?_.round(d.x,d.y):null}},{key:"split",value:function(e){var n=[],i=void 0!==e.events,r=new T(e,!0),o=new T(e,!1),a=this.rightSE;this.replaceRightSE(o),n.push(o),n.push(r);var s=new t(r,a,this.rings.slice(),this.windings.slice());return T.comparePoints(s.leftSE.point,s.rightSE.point)>0&&s.swapEvents(),T.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),i&&(r.checkForConsuming(),o.checkForConsuming()),n}},{key:"swapEvents",value:function(){var e=this.rightSE;this.rightSE=this.leftSE,this.leftSE=e,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var t=0,n=this.windings.length;t<n;t++)this.windings[t]*=-1}},{key:"consume",value:function(e){for(var n=this,i=e;n.consumedBy;)n=n.consumedBy;for(;i.consumedBy;)i=i.consumedBy;var r=t.compare(n,i);if(0!==r){if(r>0){var o=n;n=i,i=o}if(n.prev===i){var a=n;n=i,i=a}for(var s=0,l=i.rings.length;s<l;s++){var c=i.rings[s],u=i.windings[s],h=n.rings.indexOf(c);-1===h?(n.rings.push(c),n.windings.push(u)):n.windings[h]+=u}i.rings=null,i.windings=null,i.consumedBy=n,i.leftSE.consumedBy=n.leftSE,i.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var e=this.prev.consumedBy||this.prev;this._beforeState=e.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var e=this.beforeState();this._afterState={rings:e.rings.slice(0),windings:e.windings.slice(0),multiPolys:[]};for(var t=this._afterState.rings,n=this._afterState.windings,i=this._afterState.multiPolys,r=0,o=this.rings.length;r<o;r++){var a=this.rings[r],s=this.windings[r],l=t.indexOf(a);-1===l?(t.push(a),n.push(s)):n[l]+=s}for(var c=[],u=[],h=0,d=t.length;h<d;h++)if(0!==n[h]){var p=t[h],f=p.poly;if(-1===u.indexOf(f))if(p.isExterior)c.push(f);else{-1===u.indexOf(f)&&u.push(f);var g=c.indexOf(p.poly);-1!==g&&c.splice(g,1)}}for(var m=0,y=c.length;m<y;m++){var v=c[m].multiPoly;-1===i.indexOf(v)&&i.push(v)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var e=this.beforeState().multiPolys,t=this.afterState().multiPolys;switch(z.type){case"union":var n=0===e.length,i=0===t.length;this._isInResult=n!==i;break;case"intersection":var r,o;e.length<t.length?(r=e.length,o=t.length):(r=t.length,o=e.length),this._isInResult=o===z.numMultiPolys&&r<o;break;case"xor":var a=Math.abs(e.length-t.length);this._isInResult=a%2==1;break;case"difference":var s=function(e){return 1===e.length&&e[0].isSubject};this._isInResult=s(e)!==s(t);break;default:throw new Error("Unrecognized operation type found ".concat(z.type))}return this._isInResult}}],[{key:"fromRing",value:function(e,n,i){var r,o,a,s=T.comparePoints(e,n);if(s<0)r=e,o=n,a=1;else{if(!(s>0))throw new Error("Tried to create degenerate segment at [".concat(e.x,", ").concat(e.y,"]"));r=n,o=e,a=-1}return new t(new T(r,!0),new T(o,!1),[i],[a])}}]),t}(),M=function(){function t(n,i,r){if(e(this,t),!Array.isArray(n)||0===n.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=i,this.isExterior=r,this.segments=[],"number"!=typeof n[0][0]||"number"!=typeof n[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var o=_.round(n[0][0],n[0][1]);this.bbox={ll:{x:o.x,y:o.y},ur:{x:o.x,y:o.y}};for(var a=o,s=1,l=n.length;s<l;s++){if("number"!=typeof n[s][0]||"number"!=typeof n[s][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var c=_.round(n[s][0],n[s][1]);c.x===a.x&&c.y===a.y||(this.segments.push(I.fromRing(a,c,this)),c.x<this.bbox.ll.x&&(this.bbox.ll.x=c.x),c.y<this.bbox.ll.y&&(this.bbox.ll.y=c.y),c.x>this.bbox.ur.x&&(this.bbox.ur.x=c.x),c.y>this.bbox.ur.y&&(this.bbox.ur.y=c.y),a=c)}o.x===a.x&&o.y===a.y||this.segments.push(I.fromRing(a,o,this))}return n(t,[{key:"getSweepEvents",value:function(){for(var e=[],t=0,n=this.segments.length;t<n;t++){var i=this.segments[t];e.push(i.leftSE),e.push(i.rightSE)}return e}}]),t}(),L=function(){function t(n,i){if(e(this,t),!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new M(n[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var r=1,o=n.length;r<o;r++){var a=new M(n[r],this,!1);a.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=a.bbox.ll.x),a.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=a.bbox.ll.y),a.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=a.bbox.ur.x),a.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=a.bbox.ur.y),this.interiorRings.push(a)}this.multiPoly=i}return n(t,[{key:"getSweepEvents",value:function(){for(var e=this.exteriorRing.getSweepEvents(),t=0,n=this.interiorRings.length;t<n;t++)for(var i=this.interiorRings[t].getSweepEvents(),r=0,o=i.length;r<o;r++)e.push(i[r]);return e}}]),t}(),D=function(){function t(n,i){if(e(this,t),!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof n[0][0][0]&&(n=[n])}catch(e){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var r=0,o=n.length;r<o;r++){var a=new L(n[r],this);a.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=a.bbox.ll.x),a.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=a.bbox.ll.y),a.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=a.bbox.ur.x),a.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=a.bbox.ur.y),this.polys.push(a)}this.isSubject=i}return n(t,[{key:"getSweepEvents",value:function(){for(var e=[],t=0,n=this.polys.length;t<n;t++)for(var i=this.polys[t].getSweepEvents(),r=0,o=i.length;r<o;r++)e.push(i[r]);return e}}]),t}(),O=function(){function t(n){e(this,t),this.events=n;for(var i=0,r=n.length;i<r;i++)n[i].segment.ringOut=this;this.poly=null}return n(t,null,[{key:"factory",value:function(e){for(var n=[],i=0,r=e.length;i<r;i++){var o=e[i];if(o.isInResult()&&!o.ringOut){for(var a=null,s=o.leftSE,l=o.rightSE,c=[s],u=s.point,h=[];a=s,s=l,c.push(s),s.point!==u;)for(;;){var d=s.getAvailableLinkedEvents();if(0===d.length){var p=c[0].point,f=c[c.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(p.x,",")+" ".concat(p.y,"]. Last matching segment found ends at")+" [".concat(f.x,", ").concat(f.y,"]."))}if(1===d.length){l=d[0].otherSE;break}for(var g=null,m=0,y=h.length;m<y;m++)if(h[m].point===s.point){g=m;break}if(null===g){h.push({index:c.length,point:s.point});var v=s.getLeftmostComparator(a);l=d.sort(v)[0].otherSE;break}var b=h.splice(g)[0],_=c.splice(b.index);_.unshift(_[0].otherSE),n.push(new t(_.reverse()))}n.push(new t(c))}}return n}}]),n(t,[{key:"getGeom",value:function(){for(var e=this.events[0].point,t=[e],n=1,i=this.events.length-1;n<i;n++){var r=this.events[n].point,o=this.events[n+1].point;0!==E(r,e,o)&&(t.push(r),e=r)}if(1===t.length)return null;var a=t[0],s=t[1];0===E(a,e,s)&&t.shift(),t.push(t[0]);for(var l=this.isExteriorRing()?1:-1,c=this.isExteriorRing()?0:t.length-1,u=this.isExteriorRing()?t.length:-1,h=[],d=c;d!=u;d+=l)h.push([t[d].x,t[d].y]);return h}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var e=this.enclosingRing();this._isExteriorRing=!e||!e.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var e=this.events[0],t=1,n=this.events.length;t<n;t++){var i=this.events[t];T.compare(e,i)>0&&(e=i)}for(var r=e.segment.prevInResult(),o=r?r.prevInResult():null;;){if(!r)return null;if(!o)return r.ringOut;if(o.ringOut!==r.ringOut)return o.ringOut.enclosingRing()!==r.ringOut?r.ringOut:r.ringOut.enclosingRing();r=o.prevInResult(),o=r?r.prevInResult():null}}}]),t}(),j=function(){function t(n){e(this,t),this.exteriorRing=n,n.poly=this,this.interiorRings=[]}return n(t,[{key:"addInterior",value:function(e){this.interiorRings.push(e),e.poly=this}},{key:"getGeom",value:function(){var e=[this.exteriorRing.getGeom()];if(null===e[0])return null;for(var t=0,n=this.interiorRings.length;t<n;t++){var i=this.interiorRings[t].getGeom();null!==i&&e.push(i)}return e}}]),t}(),N=function(){function t(n){e(this,t),this.rings=n,this.polys=this._composePolys(n)}return n(t,[{key:"getGeom",value:function(){for(var e=[],t=0,n=this.polys.length;t<n;t++){var i=this.polys[t].getGeom();null!==i&&e.push(i)}return e}},{key:"_composePolys",value:function(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n];if(!r.poly)if(r.isExteriorRing())t.push(new j(r));else{var o=r.enclosingRing();o.poly||t.push(new j(o)),o.poly.addInterior(r)}}return t}}]),t}(),F=function(){function t(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I.compare;e(this,t),this.queue=n,this.tree=new c(i),this.segments=[]}return n(t,[{key:"process",value:function(e){var t=e.segment,n=[];if(e.consumedBy)return e.isLeft?this.queue.remove(e.otherSE):this.tree.remove(t),n;var i=e.isLeft?this.tree.insert(t):this.tree.find(t);if(!i)throw new Error("Unable to find segment #".concat(t.id," ")+"[".concat(t.leftSE.point.x,", ").concat(t.leftSE.point.y,"] -> ")+"[".concat(t.rightSE.point.x,", ").concat(t.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var r=i,o=i,a=void 0,s=void 0;void 0===a;)null===(r=this.tree.prev(r))?a=null:void 0===r.key.consumedBy&&(a=r.key);for(;void 0===s;)null===(o=this.tree.next(o))?s=null:void 0===o.key.consumedBy&&(s=o.key);if(e.isLeft){var l=null;if(a){var c=a.getIntersection(t);if(null!==c&&(t.isAnEndpoint(c)||(l=c),!a.isAnEndpoint(c)))for(var u=this._splitSafely(a,c),h=0,d=u.length;h<d;h++)n.push(u[h])}var p=null;if(s){var f=s.getIntersection(t);if(null!==f&&(t.isAnEndpoint(f)||(p=f),!s.isAnEndpoint(f)))for(var g=this._splitSafely(s,f),m=0,y=g.length;m<y;m++)n.push(g[m])}if(null!==l||null!==p){var v;v=null===l?p:null===p||T.comparePoints(l,p)<=0?l:p,this.queue.remove(t.rightSE),n.push(t.rightSE);for(var b=t.split(v),_=0,w=b.length;_<w;_++)n.push(b[_])}n.length>0?(this.tree.remove(t),n.push(e)):(this.segments.push(t),t.prev=a)}else{if(a&&s){var P=a.getIntersection(s);if(null!==P){if(!a.isAnEndpoint(P))for(var E=this._splitSafely(a,P),x=0,A=E.length;x<A;x++)n.push(E[x]);if(!s.isAnEndpoint(P))for(var C=this._splitSafely(s,P),S=0,R=C.length;S<R;S++)n.push(C[S])}}this.tree.remove(t)}return n}},{key:"_splitSafely",value:function(e,t){this.tree.remove(e);var n=e.rightSE;this.queue.remove(n);var i=e.split(t);return i.push(n),void 0===e.consumedBy&&this.tree.insert(e),i}}]),t}(),k="undefined"!=typeof process&&"MISSING_ENV_VAR".POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,U="undefined"!=typeof process&&"MISSING_ENV_VAR".POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,z=new(function(){function t(){e(this,t)}return n(t,[{key:"run",value:function(e,t,n){z.type=e,_.reset();for(var i=[new D(t,!0)],r=0,o=n.length;r<o;r++)i.push(new D(n[r],!1));if(z.numMultiPolys=i.length,"difference"===z.type)for(var a=i[0],s=1;s<i.length;)null!==f(i[s].bbox,a.bbox)?s++:i.splice(s,1);if("intersection"===z.type)for(var l=0,u=i.length;l<u;l++)for(var h=i[l],d=l+1,p=i.length;d<p;d++)if(null===f(h.bbox,i[d].bbox))return[];for(var g=new c(T.compare),m=0,y=i.length;m<y;m++)for(var v=i[m].getSweepEvents(),b=0,w=v.length;b<w;b++)if(g.insert(v[b]),g.size>k)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var P=new F(g),E=g.size,x=g.pop();x;){var A=x.key;if(g.size===E){var C=A.segment;throw new Error("Unable to pop() ".concat(A.isLeft?"left":"right"," SweepEvent ")+"[".concat(A.point.x,", ").concat(A.point.y,"] from segment #").concat(C.id," ")+"[".concat(C.leftSE.point.x,", ").concat(C.leftSE.point.y,"] -> ")+"[".concat(C.rightSE.point.x,", ").concat(C.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(g.size>k)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(P.segments.length>U)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var S=P.process(A),R=0,I=S.length;R<I;R++){var M=S[R];void 0===M.consumedBy&&g.insert(M)}E=g.size,x=g.pop()}_.reset();var L=O.factory(P.segments);return new N(L).getGeom()}}]),t}());return{union:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return z.run("union",e,n)},intersection:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return z.run("intersection",e,n)},xor:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return z.run("xor",e,n)},difference:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return z.run("difference",e,n)}}}()},8166:function(e){e.exports=function(){"use strict";function e(n,i,r,o,a){for(;o>r;){if(o-r>600){var s=o-r+1,l=i-r+1,c=Math.log(s),u=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*u*(s-u)/s)*(l-s/2<0?-1:1);e(n,i,Math.max(r,Math.floor(i-l*u/s+h)),Math.min(o,Math.floor(i+(s-l)*u/s+h)),a)}var d=n[i],p=r,f=o;for(t(n,r,i),a(n[o],d)>0&&t(n,r,o);p<f;){for(t(n,p,f),p++,f--;a(n[p],d)<0;)p++;for(;a(n[f],d)>0;)f--}0===a(n[r],d)?t(n,r,f):t(n,++f,o),f<=i&&(r=f+1),i<=f&&(o=f-1)}}function t(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function n(e,t){return e<t?-1:e>t?1:0}return function(t,i,r,o,a){e(t,i,r||0,o||t.length-1,a||n)}}()},5510:(e,t,n)=>{"use strict";e.exports=r,e.exports.default=r;var i=n(8166);function r(e,t){if(!(this instanceof r))return new r(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&this._initFormat(t),this.clear()}function o(e,t,n){if(!n)return t.indexOf(e);for(var i=0;i<t.length;i++)if(n(e,t[i]))return i;return-1}function a(e,t){s(e,0,e.children.length,t,e)}function s(e,t,n,i,r){r||(r=g(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o,a=t;a<n;a++)o=e.children[a],l(r,e.leaf?i(o):o);return r}function l(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function c(e,t){return e.minX-t.minX}function u(e,t){return e.minY-t.minY}function h(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function d(e){return e.maxX-e.minX+(e.maxY-e.minY)}function p(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function f(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function g(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function m(e,t,n,r,o){for(var a,s=[t,n];s.length;)(n=s.pop())-(t=s.pop())<=r||(a=t+Math.ceil((n-t)/r/2)*r,i(e,a,t,n,o),s.push(t,a,a,n))}r.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,n=[],i=this.toBBox;if(!f(e,t))return n;for(var r,o,a,s,l=[];t;){for(r=0,o=t.children.length;r<o;r++)a=t.children[r],f(e,s=t.leaf?i(a):a)&&(t.leaf?n.push(a):p(e,s)?this._all(a,n):l.push(a));t=l.pop()}return n},collides:function(e){var t=this.data,n=this.toBBox;if(!f(e,t))return!1;for(var i,r,o,a,s=[];t;){for(i=0,r=t.children.length;i<r;i++)if(o=t.children[i],f(e,a=t.leaf?n(o):o)){if(t.leaf||p(e,a))return!0;s.push(o)}t=s.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,n=e.length;t<n;t++)this.insert(e[t]);return this}var i=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var r=this.data;this.data=i,i=r}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=g([]),this},remove:function(e,t){if(!e)return this;for(var n,i,r,a,s=this.data,l=this.toBBox(e),c=[],u=[];s||c.length;){if(s||(s=c.pop(),i=c[c.length-1],n=u.pop(),a=!0),s.leaf&&-1!==(r=o(e,s.children,t)))return s.children.splice(r,1),c.push(s),this._condense(c),this;a||s.leaf||!p(s,l)?i?(n++,s=i.children[n],a=!1):s=null:(c.push(s),u.push(n),n=0,i=s,s=s.children[0])}return this},toBBox:function(e){return e},compareMinX:c,compareMinY:u,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var n=[];e;)e.leaf?t.push.apply(t,e.children):n.push.apply(n,e.children),e=n.pop();return t},_build:function(e,t,n,i){var r,o=n-t+1,s=this._maxEntries;if(o<=s)return a(r=g(e.slice(t,n+1)),this.toBBox),r;i||(i=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,i-1))),(r=g([])).leaf=!1,r.height=i;var l,c,u,h,d=Math.ceil(o/s),p=d*Math.ceil(Math.sqrt(s));for(m(e,t,n,p,this.compareMinX),l=t;l<=n;l+=p)for(m(e,l,u=Math.min(l+p-1,n),d,this.compareMinY),c=l;c<=u;c+=d)h=Math.min(c+d-1,u),r.children.push(this._build(e,c,h,i-1));return a(r,this.toBBox),r},_chooseSubtree:function(e,t,n,i){for(var r,o,a,s,l,c,u,d,p,f;i.push(t),!t.leaf&&i.length-1!==n;){for(u=d=1/0,r=0,o=t.children.length;r<o;r++)l=h(a=t.children[r]),p=e,f=a,(c=(Math.max(f.maxX,p.maxX)-Math.min(f.minX,p.minX))*(Math.max(f.maxY,p.maxY)-Math.min(f.minY,p.minY))-l)<d?(d=c,u=l<u?l:u,s=a):c===d&&l<u&&(u=l,s=a);t=s||t.children[0]}return t},_insert:function(e,t,n){var i=this.toBBox,r=n?e:i(e),o=[],a=this._chooseSubtree(r,this.data,t,o);for(a.children.push(e),l(a,r);t>=0&&o[t].children.length>this._maxEntries;)this._split(o,t),t--;this._adjustParentBBoxes(r,o,t)},_split:function(e,t){var n=e[t],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);var o=this._chooseSplitIndex(n,r,i),s=g(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,a(n,this.toBBox),a(s,this.toBBox),t?e[t-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(e,t){this.data=g([e,t]),this.data.height=e.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,n){var i,r,o,a,l,c,u,d,p,f,g,m,y,v;for(c=u=1/0,i=t;i<=n-t;i++)p=r=s(e,0,i,this.toBBox),f=o=s(e,i,n,this.toBBox),void 0,void 0,void 0,void 0,g=Math.max(p.minX,f.minX),m=Math.max(p.minY,f.minY),y=Math.min(p.maxX,f.maxX),v=Math.min(p.maxY,f.maxY),a=Math.max(0,y-g)*Math.max(0,v-m),l=h(r)+h(o),a<c?(c=a,d=i,u=l<u?l:u):a===c&&l<u&&(u=l,d=i);return d},_chooseSplitAxis:function(e,t,n){var i=e.leaf?this.compareMinX:c,r=e.leaf?this.compareMinY:u;this._allDistMargin(e,t,n,i)<this._allDistMargin(e,t,n,r)&&e.children.sort(i)},_allDistMargin:function(e,t,n,i){e.children.sort(i);var r,o,a=this.toBBox,c=s(e,0,t,a),u=s(e,n-t,n,a),h=d(c)+d(u);for(r=t;r<n-t;r++)o=e.children[r],l(c,e.leaf?a(o):o),h+=d(c);for(r=n-t-1;r>=t;r--)o=e.children[r],l(u,e.leaf?a(o):o),h+=d(u);return h},_adjustParentBBoxes:function(e,t,n){for(var i=n;i>=0;i--)l(t[i],e)},_condense:function(e){for(var t,n=e.length-1;n>=0;n--)0===e[n].children.length?n>0?(t=e[n-1].children).splice(t.indexOf(e[n]),1):this.clear():a(e[n],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}}},4448:(e,t,n)=>{"use strict";var i=n(7294),r=n(3840);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function g(e,t,n,i,r,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,i){var r=m.hasOwnProperty(t)?m[t]:null;(null!==r?0!==r.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,i){if(null==t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,i)&&(n=null),i||null===r?function(e){return!!h.call(f,e)||!h.call(p,e)&&(d.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),P=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),S=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),L=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function j(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=O&&e[O]||e["@@iterator"])?e:null}var N,F=Object.assign;function k(e){if(void 0===N)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);N=t&&t[1]||""}return"\n"+N+e}var U=!1;function z(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var i=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){i=e}e.call(t.prototype)}else{try{throw Error()}catch(e){i=e}e()}}catch(t){if(t&&i&&"string"==typeof t.stack){for(var r=t.stack.split("\n"),o=i.stack.split("\n"),a=r.length-1,s=o.length-1;1<=a&&0<=s&&r[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(r[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||r[a]!==o[s]){var l="\n"+r[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=s);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?k(e):""}function B(e){switch(e.tag){case 5:return k(e.type);case 16:return k("Lazy");case 13:return k("Suspense");case 19:return k("SuspenseList");case 0:case 2:case 15:return z(e.type,!1);case 11:return z(e.type.render,!1);case 1:return z(e.type,!0);default:return""}}function G(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case E:return"Fragment";case P:return"Portal";case A:return"Profiler";case x:return"StrictMode";case R:return"Suspense";case I:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case S:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case M:return null!==(t=e.displayName||null)?t:G(e.type)||"Memo";case L:t=e._payload,e=e._init;try{return G(e(t))}catch(e){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return G(t);case 8:return t===x?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var r=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=q(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function Y(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function K(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Z(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function $(e,t){J(e,t);var n=H(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Q(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function oe(e,t){var n=H(t.value),i=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=ge(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _e=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Pe=null,Ee=null,xe=null;function Ae(e){if(e=br(e)){if("function"!=typeof Pe)throw Error(o(280));var t=e.stateNode;t&&(t=wr(t),Pe(e.stateNode,e.type,t))}}function Ce(e){Ee?xe?xe.push(e):xe=[e]:Ee=e}function Se(){if(Ee){var e=Ee,t=xe;if(xe=Ee=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function Te(e,t){return e(t)}function Re(){}var Ie=!1;function Me(e,t,n){if(Ie)return e(t,n);Ie=!0;try{return Te(e,t,n)}finally{Ie=!1,(null!==Ee||null!==xe)&&(Re(),Se())}}function Le(e,t){var n=e.stateNode;if(null===n)return null;var i=wr(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(o(231,t,typeof n));return n}var De=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){De=!1}function je(e,t,n,i,r,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}var Ne=!1,Fe=null,ke=!1,Ue=null,ze={onError:function(e){Ne=!0,Fe=e}};function Be(e,t,n,i,r,o,a,s,l){Ne=!1,Fe=null,je.apply(ze,arguments)}function Ge(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function He(e){if(Ge(e)!==e)throw Error(o(188))}function qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ge(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var a=r.alternate;if(null===a){if(null!==(i=r.return)){n=i;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===n)return He(r),e;if(a===i)return He(r),t;a=a.sibling}throw Error(o(188))}if(n.return!==i.return)n=r,i=a;else{for(var s=!1,l=r.child;l;){if(l===n){s=!0,n=r,i=a;break}if(l===i){s=!0,i=r,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,i=r;break}if(l===i){s=!0,i=a,n=r;break}l=l.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==i)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Xe=r.unstable_scheduleCallback,Ye=r.unstable_cancelCallback,Ke=r.unstable_shouldYield,Ze=r.unstable_requestPaint,Je=r.unstable_now,$e=r.unstable_getCurrentPriorityLevel,Qe=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,it=r.unstable_IdlePriority,rt=null,ot=null,at=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2,ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,r=e.suspendedLanes,o=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~r;0!==s?i=ht(s):0!=(o&=a)&&(i=ht(o))}else 0!=(a=n&~r)?i=ht(a):0!==o&&(i=ht(o));if(0===i)return 0;if(0!==t&&t!==i&&0==(t&r)&&((r=i&-i)>=(o=t&-t)||16===r&&0!=(4194240&o)))return t;if(0!=(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-at(t)),i|=e[n],t&=~r;return i}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0==(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-at(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var bt=0;function _t(e){return 1<(e&=-e)?4<e?0!=(268435455&e)?16:536870912:4:1}var wt,Pt,Et,xt,At,Ct=!1,St=[],Tt=null,Rt=null,It=null,Mt=new Map,Lt=new Map,Dt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jt(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Rt=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":Mt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lt.delete(t.pointerId)}}function Nt(e,t,n,i,r,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},null!==t&&null!==(t=br(t))&&Pt(t),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Ft(e){var t=vr(e.target);if(null!==t){var n=Ge(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void At(e.priority,(function(){Et(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function kt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Kt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=br(n))&&Pt(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);_e=i,n.target.dispatchEvent(i),_e=null,t.shift()}return!0}function Ut(e,t,n){kt(e)&&n.delete(t)}function zt(){Ct=!1,null!==Tt&&kt(Tt)&&(Tt=null),null!==Rt&&kt(Rt)&&(Rt=null),null!==It&&kt(It)&&(It=null),Mt.forEach(Ut),Lt.forEach(Ut)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,zt)))}function Gt(e){function t(t){return Bt(t,e)}if(0<St.length){Bt(St[0],e);for(var n=1;n<St.length;n++){var i=St[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==Tt&&Bt(Tt,e),null!==Rt&&Bt(Rt,e),null!==It&&Bt(It,e),Mt.forEach(t),Lt.forEach(t),n=0;n<Dt.length;n++)(i=Dt[n]).blockedOn===e&&(i.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Dt.shift()}var Vt=_.ReactCurrentBatchConfig,Ht=!0;function qt(e,t,n,i){var r=bt,o=Vt.transition;Vt.transition=null;try{bt=1,Xt(e,t,n,i)}finally{bt=r,Vt.transition=o}}function Wt(e,t,n,i){var r=bt,o=Vt.transition;Vt.transition=null;try{bt=4,Xt(e,t,n,i)}finally{bt=r,Vt.transition=o}}function Xt(e,t,n,i){if(Ht){var r=Kt(e,t,n,i);if(null===r)Hi(e,t,i,Yt,n),jt(e,i);else if(function(e,t,n,i,r){switch(t){case"focusin":return Tt=Nt(Tt,e,t,n,i,r),!0;case"dragenter":return Rt=Nt(Rt,e,t,n,i,r),!0;case"mouseover":return It=Nt(It,e,t,n,i,r),!0;case"pointerover":var o=r.pointerId;return Mt.set(o,Nt(Mt.get(o)||null,e,t,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,Lt.set(o,Nt(Lt.get(o)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i))i.stopPropagation();else if(jt(e,i),4&t&&-1<Ot.indexOf(e)){for(;null!==r;){var o=br(r);if(null!==o&&wt(o),null===(o=Kt(e,t,n,i))&&Hi(e,t,i,Yt,n),o===r)break;r=o}null!==r&&i.stopPropagation()}else Hi(e,t,i,null,n)}}var Yt=null;function Kt(e,t,n,i){if(Yt=null,null!==(e=vr(e=we(i))))if(null===(t=Ge(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Zt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Qe:return 1;case et:return 4;case tt:case nt:return 16;case it:return 536870912;default:return 16}default:return 16}}var Jt=null,$t=null,Qt=null;function en(){if(Qt)return Qt;var e,t,n=$t,i=n.length,r="value"in Jt?Jt.value:Jt.textContent,o=r.length;for(e=0;e<i&&n[e]===r[e];e++);var a=i-e;for(t=1;t<=a&&n[i-t]===r[o-t];t++);return Qt=r.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,i,r,o){for(var a in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(r):r[a]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),hn=F({},cn,{view:0,detail:0}),dn=on(hn),pn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:An,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),fn=on(pn),gn=on(F({},pn,{dataTransfer:0})),mn=on(F({},hn,{relatedTarget:0})),yn=on(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(vn),_n=on(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function An(){return xn}var Cn=F({},hn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Pn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:An,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Sn=on(Cn),Tn=on(F({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Rn=on(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:An})),In=on(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Mn=F({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=on(Mn),Dn=[9,13,27,32],On=u&&"CompositionEvent"in window,jn=null;u&&"documentMode"in document&&(jn=document.documentMode);var Nn=u&&"TextEvent"in window&&!jn,Fn=u&&(!On||jn&&8<jn&&11>=jn),kn=String.fromCharCode(32),Un=!1;function zn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Gn=!1,Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function qn(e,t,n,i){Ce(i),0<(t=Wi(t,"onChange")).length&&(n=new un("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Wn=null,Xn=null;function Yn(e){ki(e,0)}function Kn(e){if(X(_r(e)))return e}function Zn(e,t){if("change"===e)return t}var Jn=!1;if(u){var $n;if(u){var Qn="oninput"in document;if(!Qn){var ei=document.createElement("div");ei.setAttribute("oninput","return;"),Qn="function"==typeof ei.oninput}$n=Qn}else $n=!1;Jn=$n&&(!document.documentMode||9<document.documentMode)}function ti(){Wn&&(Wn.detachEvent("onpropertychange",ni),Xn=Wn=null)}function ni(e){if("value"===e.propertyName&&Kn(Xn)){var t=[];qn(t,Xn,e,we(e)),Me(Yn,t)}}function ii(e,t,n){"focusin"===e?(ti(),Xn=n,(Wn=t).attachEvent("onpropertychange",ni)):"focusout"===e&&ti()}function ri(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Kn(Xn)}function oi(e,t){if("click"===e)return Kn(t)}function ai(e,t){if("input"===e||"change"===e)return Kn(t)}var si="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function li(e,t){if(si(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!h.call(t,r)||!si(e[r],t[r]))return!1}return!0}function ci(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ui(e,t){var n,i=ci(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=ci(i)}}function hi(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hi(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function di(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function pi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fi(e){var t=di(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hi(n.ownerDocument.documentElement,n)){if(null!==i&&pi(n))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=void 0===i.end?o:Math.min(i.end,r),!e.extend&&o>i&&(r=i,i=o,o=r),r=ui(n,o);var a=ui(n,i);r&&a&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),o>i?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gi=u&&"documentMode"in document&&11>=document.documentMode,mi=null,yi=null,vi=null,bi=!1;function _i(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;bi||null==mi||mi!==Y(i)||(i="selectionStart"in(i=mi)&&pi(i)?{start:i.selectionStart,end:i.selectionEnd}:{anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},vi&&li(vi,i)||(vi=i,0<(i=Wi(yi,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=mi)))}function wi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Pi={animationend:wi("Animation","AnimationEnd"),animationiteration:wi("Animation","AnimationIteration"),animationstart:wi("Animation","AnimationStart"),transitionend:wi("Transition","TransitionEnd")},Ei={},xi={};function Ai(e){if(Ei[e])return Ei[e];if(!Pi[e])return e;var t,n=Pi[e];for(t in n)if(n.hasOwnProperty(t)&&t in xi)return Ei[e]=n[t];return e}u&&(xi=document.createElement("div").style,"AnimationEvent"in window||(delete Pi.animationend.animation,delete Pi.animationiteration.animation,delete Pi.animationstart.animation),"TransitionEvent"in window||delete Pi.transitionend.transition);var Ci=Ai("animationend"),Si=Ai("animationiteration"),Ti=Ai("animationstart"),Ri=Ai("transitionend"),Ii=new Map,Mi="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Li(e,t){Ii.set(e,t),l(t,[e])}for(var Di=0;Di<Mi.length;Di++){var Oi=Mi[Di];Li(Oi.toLowerCase(),"on"+(Oi[0].toUpperCase()+Oi.slice(1)))}Li(Ci,"onAnimationEnd"),Li(Si,"onAnimationIteration"),Li(Ti,"onAnimationStart"),Li("dblclick","onDoubleClick"),Li("focusin","onFocus"),Li("focusout","onBlur"),Li(Ri,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ji="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ni=new Set("cancel close invalid load scroll toggle".split(" ").concat(ji));function Fi(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,r,a,s,l,c){if(Be.apply(this,arguments),Ne){if(!Ne)throw Error(o(198));var u=Fe;Ne=!1,Fe=null,ke||(ke=!0,Ue=u)}}(i,t,void 0,e),e.currentTarget=null}function ki(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var o=void 0;if(t)for(var a=i.length-1;0<=a;a--){var s=i[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&r.isPropagationStopped())break e;Fi(r,s,c),o=l}else for(a=0;a<i.length;a++){if(l=(s=i[a]).instance,c=s.currentTarget,s=s.listener,l!==o&&r.isPropagationStopped())break e;Fi(r,s,c),o=l}}}if(ke)throw e=Ue,ke=!1,Ue=null,e}function Ui(e,t){var n=t[gr];void 0===n&&(n=t[gr]=new Set);var i=e+"__bubble";n.has(i)||(Vi(t,e,2,!1),n.add(i))}function zi(e,t,n){var i=0;t&&(i|=4),Vi(n,e,i,t)}var Bi="_reactListening"+Math.random().toString(36).slice(2);function Gi(e){if(!e[Bi]){e[Bi]=!0,a.forEach((function(t){"selectionchange"!==t&&(Ni.has(t)||zi(t,!1,e),zi(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Bi]||(t[Bi]=!0,zi("selectionchange",!1,t))}}function Vi(e,t,n,i){switch(Zt(t)){case 1:var r=qt;break;case 4:r=Wt;break;default:r=Xt}n=r.bind(null,t,n,e),r=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Hi(e,t,n,i,r){var o=i;if(0==(1&t)&&0==(2&t)&&null!==i)e:for(;;){if(null===i)return;var a=i.tag;if(3===a||4===a){var s=i.stateNode.containerInfo;if(s===r||8===s.nodeType&&s.parentNode===r)break;if(4===a)for(a=i.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;a=a.return}for(;null!==s;){if(null===(a=vr(s)))return;if(5===(l=a.tag)||6===l){i=o=a;continue e}s=s.parentNode}}i=i.return}Me((function(){var i=o,r=we(n),a=[];e:{var s=Ii.get(e);if(void 0!==s){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Sn;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Rn;break;case Ci:case Si:case Ti:l=yn;break;case Ri:l=In;break;case"scroll":l=dn;break;case"wheel":l=Ln;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tn}var u=0!=(4&t),h=!u&&"scroll"===e,d=u?null!==s?s+"Capture":null:s;u=[];for(var p,f=i;null!==f;){var g=(p=f).stateNode;if(5===p.tag&&null!==g&&(p=g,null!==d&&null!=(g=Le(f,d))&&u.push(qi(f,g,p))),h)break;f=f.return}0<u.length&&(s=new l(s,c,null,n,r),a.push({event:s,listeners:u}))}}if(0==(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===_e||!(c=n.relatedTarget||n.fromElement)||!vr(c)&&!c[fr])&&(l||s)&&(s=r.window===r?r:(s=r.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=i,null!==(c=(c=n.relatedTarget||n.toElement)?vr(c):null)&&(c!==(h=Ge(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=i),l!==c)){if(u=fn,g="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=Tn,g="onPointerLeave",d="onPointerEnter",f="pointer"),h=null==l?s:_r(l),p=null==c?s:_r(c),(s=new u(g,f+"leave",l,n,r)).target=h,s.relatedTarget=p,g=null,vr(r)===i&&((u=new u(d,f+"enter",c,n,r)).target=p,u.relatedTarget=h,g=u),h=g,l&&c)e:{for(d=c,f=0,p=u=l;p;p=Xi(p))f++;for(p=0,g=d;g;g=Xi(g))p++;for(;0<f-p;)u=Xi(u),f--;for(;0<p-f;)d=Xi(d),p--;for(;f--;){if(u===d||null!==d&&u===d.alternate)break e;u=Xi(u),d=Xi(d)}u=null}else u=null;null!==l&&Yi(a,s,l,u,!1),null!==c&&null!==h&&Yi(a,h,c,u,!0)}if("select"===(l=(s=i?_r(i):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var m=Zn;else if(Hn(s))if(Jn)m=ai;else{m=ri;var y=ii}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=oi);switch(m&&(m=m(e,i))?qn(a,m,n,r):(y&&y(e,s,i),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ee(s,"number",s.value)),y=i?_r(i):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(mi=y,yi=i,vi=null);break;case"focusout":vi=yi=mi=null;break;case"mousedown":bi=!0;break;case"contextmenu":case"mouseup":case"dragend":bi=!1,_i(a,n,r);break;case"selectionchange":if(gi)break;case"keydown":case"keyup":_i(a,n,r)}var v;if(On)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Gn?zn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Fn&&"ko"!==n.locale&&(Gn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Gn&&(v=en()):($t="value"in(Jt=r)?Jt.value:Jt.textContent,Gn=!0)),0<(y=Wi(i,b)).length&&(b=new _n(b,e,null,n,r),a.push({event:b,listeners:y}),(v||null!==(v=Bn(n)))&&(b.data=v))),(v=Nn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Un=!0,kn);case"textInput":return(e=t.data)===kn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Gn)return"compositionend"===e||!On&&zn(e,t)?(e=en(),Qt=$t=Jt=null,Gn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(i=Wi(i,"onBeforeInput")).length&&(r=new _n("onBeforeInput","beforeinput",null,n,r),a.push({event:r,listeners:i}),r.data=v)}ki(a,t)}))}function qi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wi(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,o=r.stateNode;5===r.tag&&null!==o&&(r=o,null!=(o=Le(e,n))&&i.unshift(qi(e,o,r)),null!=(o=Le(e,t))&&i.push(qi(e,o,r))),e=e.return}return i}function Xi(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yi(e,t,n,i,r){for(var o=t._reactName,a=[];null!==n&&n!==i;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===i)break;5===s.tag&&null!==c&&(s=c,r?null!=(l=Le(n,o))&&a.unshift(qi(n,l,s)):r||null!=(l=Le(n,o))&&a.push(qi(n,l,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Ki=/\r\n?/g,Zi=/\u0000|\uFFFD/g;function Ji(e){return("string"==typeof e?e:""+e).replace(Ki,"\n").replace(Zi,"")}function $i(e,t,n){if(t=Ji(t),Ji(e)!==t&&n)throw Error(o(425))}function Qi(){}var er=null,tr=null;function nr(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ir="function"==typeof setTimeout?setTimeout:void 0,rr="function"==typeof clearTimeout?clearTimeout:void 0,or="function"==typeof Promise?Promise:void 0,ar="function"==typeof queueMicrotask?queueMicrotask:void 0!==or?function(e){return or.resolve(null).then(e).catch(sr)}:ir;function sr(e){setTimeout((function(){throw e}))}function lr(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return e.removeChild(r),void Gt(t);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);Gt(t)}function cr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ur(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hr=Math.random().toString(36).slice(2),dr="__reactFiber$"+hr,pr="__reactProps$"+hr,fr="__reactContainer$"+hr,gr="__reactEvents$"+hr,mr="__reactListeners$"+hr,yr="__reactHandles$"+hr;function vr(e){var t=e[dr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fr]||n[dr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ur(e);null!==e;){if(n=e[dr])return n;e=ur(e)}return t}n=(e=n).parentNode}return null}function br(e){return!(e=e[dr]||e[fr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function _r(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function wr(e){return e[pr]||null}var Pr=[],Er=-1;function xr(e){return{current:e}}function Ar(e){0>Er||(e.current=Pr[Er],Pr[Er]=null,Er--)}function Cr(e,t){Er++,Pr[Er]=e.current,e.current=t}var Sr={},Tr=xr(Sr),Rr=xr(!1),Ir=Sr;function Mr(e,t){var n=e.type.contextTypes;if(!n)return Sr;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,o={};for(r in n)o[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Lr(e){return null!=e.childContextTypes}function Dr(){Ar(Rr),Ar(Tr)}function Or(e,t,n){if(Tr.current!==Sr)throw Error(o(168));Cr(Tr,t),Cr(Rr,n)}function jr(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!=typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in t))throw Error(o(108,V(e)||"Unknown",r));return F({},n,i)}function Nr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Sr,Ir=Tr.current,Cr(Tr,e),Cr(Rr,Rr.current),!0}function Fr(e,t,n){var i=e.stateNode;if(!i)throw Error(o(169));n?(e=jr(e,t,Ir),i.__reactInternalMemoizedMergedChildContext=e,Ar(Rr),Ar(Tr),Cr(Tr,e)):Ar(Rr),Cr(Rr,n)}var kr=null,Ur=!1,zr=!1;function Br(e){null===kr?kr=[e]:kr.push(e)}function Gr(){if(!zr&&null!==kr){zr=!0;var e=0,t=bt;try{var n=kr;for(bt=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}kr=null,Ur=!1}catch(t){throw null!==kr&&(kr=kr.slice(e+1)),Xe(Qe,Gr),t}finally{bt=t,zr=!1}}return null}var Vr=[],Hr=0,qr=null,Wr=0,Xr=[],Yr=0,Kr=null,Zr=1,Jr="";function $r(e,t){Vr[Hr++]=Wr,Vr[Hr++]=qr,qr=e,Wr=t}function Qr(e,t,n){Xr[Yr++]=Zr,Xr[Yr++]=Jr,Xr[Yr++]=Kr,Kr=e;var i=Zr;e=Jr;var r=32-at(i)-1;i&=~(1<<r),n+=1;var o=32-at(t)+r;if(30<o){var a=r-r%5;o=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Zr=1<<32-at(t)+r|n<<r|i,Jr=o+e}else Zr=1<<o|n<<r|i,Jr=e}function eo(e){null!==e.return&&($r(e,1),Qr(e,1,0))}function to(e){for(;e===qr;)qr=Vr[--Hr],Vr[Hr]=null,Wr=Vr[--Hr],Vr[Hr]=null;for(;e===Kr;)Kr=Xr[--Yr],Xr[Yr]=null,Jr=Xr[--Yr],Xr[Yr]=null,Zr=Xr[--Yr],Xr[Yr]=null}var no=null,io=null,ro=!1,oo=null;function ao(e,t){var n=Lc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function so(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,io=cr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,io=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Kr?{id:Zr,overflow:Jr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Lc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,io=null,!0);default:return!1}}function lo(e){return 0!=(1&e.mode)&&0==(128&e.flags)}function co(e){if(ro){var t=io;if(t){var n=t;if(!so(e,t)){if(lo(e))throw Error(o(418));t=cr(n.nextSibling);var i=no;t&&so(e,t)?ao(i,n):(e.flags=-4097&e.flags|2,ro=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,ro=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!ro)return uo(e),ro=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!nr(e.type,e.memoizedProps)),t&&(t=io)){if(lo(e))throw po(),Error(o(418));for(;t;)ao(e,t),t=cr(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){io=cr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}io=null}}else io=no?cr(e.stateNode.nextSibling):null;return!0}function po(){for(var e=io;e;)e=cr(e.nextSibling)}function fo(){io=no=null,ro=!1}function go(e){null===oo?oo=[e]:oo.push(e)}var mo=_.ReactCurrentBatchConfig;function yo(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var vo=xr(null),bo=null,_o=null,wo=null;function Po(){wo=_o=bo=null}function Eo(e){var t=vo.current;Ar(vo),e._currentValue=t}function xo(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Ao(e,t){bo=e,wo=_o=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(_s=!0),e.firstContext=null)}function Co(e){var t=e._currentValue;if(wo!==e)if(e={context:e,memoizedValue:t,next:null},null===_o){if(null===bo)throw Error(o(308));_o=e,bo.dependencies={lanes:0,firstContext:e}}else _o=_o.next=e;return t}var So=null;function To(e){null===So?So=[e]:So.push(e)}function Ro(e,t,n,i){var r=t.interleaved;return null===r?(n.next=n,To(t)):(n.next=r.next,r.next=n),t.interleaved=n,Io(e,i)}function Io(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Mo=!1;function Lo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Do(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Oo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function jo(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!=(2&Rl)){var r=i.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),i.pending=t,Io(e,n)}return null===(r=i.interleaved)?(t.next=t,To(i)):(t.next=r.next,r.next=t),i.interleaved=t,Io(e,n)}function No(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!=(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Fo(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?r=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?r=o=t:o=o.next=t}else r=o=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ko(e,t,n,i){var r=e.updateQueue;Mo=!1;var o=r.firstBaseUpdate,a=r.lastBaseUpdate,s=r.shared.pending;if(null!==s){r.shared.pending=null;var l=s,c=l.next;l.next=null,null===a?o=c:a.next=c,a=l;var u=e.alternate;null!==u&&(s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l)}if(null!==o){var h=r.baseState;for(a=0,u=c=l=null,s=o;;){var d=s.lane,p=s.eventTime;if((i&d)===d){null!==u&&(u=u.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var f=e,g=s;switch(d=t,p=n,g.tag){case 1:if("function"==typeof(f=g.payload)){h=f.call(p,h,d);break e}h=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null==(d="function"==typeof(f=g.payload)?f.call(p,h,d):f))break e;h=F({},h,d);break e;case 2:Mo=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(d=r.effects)?r.effects=[s]:d.push(s))}else p={eventTime:p,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=p,l=h):u=u.next=p,a|=d;if(null===(s=s.next)){if(null===(s=r.shared.pending))break;s=(d=s).next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}if(null===u&&(l=h),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null!==(t=r.shared.interleaved)){r=t;do{a|=r.lane,r=r.next}while(r!==t)}else null===o&&(r.shared.lanes=0);Fl|=a,e.lanes=a,e.memoizedState=h}}function Uo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!=typeof r)throw Error(o(191,r));r.call(i)}}}var zo=(new i.Component).refs;function Bo(e,t,n,i){n=null==(n=n(i,t=e.memoizedState))?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Go={isMounted:function(e){return!!(e=e._reactInternals)&&Ge(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=tc(),r=nc(e),o=Oo(i,r);o.payload=t,null!=n&&(o.callback=n),null!==(t=jo(e,o,r))&&(ic(t,e,r,i),No(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=tc(),r=nc(e),o=Oo(i,r);o.tag=1,o.payload=t,null!=n&&(o.callback=n),null!==(t=jo(e,o,r))&&(ic(t,e,r,i),No(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),i=nc(e),r=Oo(n,i);r.tag=2,null!=t&&(r.callback=t),null!==(t=jo(e,r,i))&&(ic(t,e,i,n),No(t,e,i))}};function Vo(e,t,n,i,r,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,o,a):!(t.prototype&&t.prototype.isPureReactComponent&&li(n,i)&&li(r,o))}function Ho(e,t,n){var i=!1,r=Sr,o=t.contextType;return"object"==typeof o&&null!==o?o=Co(o):(r=Lr(t)?Ir:Tr.current,o=(i=null!=(i=t.contextTypes))?Mr(e,r):Sr),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Go,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=o),t}function qo(e,t,n,i){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Go.enqueueReplaceState(t,t.state,null)}function Wo(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs=zo,Lo(e);var o=t.contextType;"object"==typeof o&&null!==o?r.context=Co(o):(o=Lr(t)?Ir:Tr.current,r.context=Mr(e,o)),r.state=e.memoizedState,"function"==typeof(o=t.getDerivedStateFromProps)&&(Bo(e,t,o,n),r.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof r.getSnapshotBeforeUpdate||"function"!=typeof r.UNSAFE_componentWillMount&&"function"!=typeof r.componentWillMount||(t=r.state,"function"==typeof r.componentWillMount&&r.componentWillMount(),"function"==typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&Go.enqueueReplaceState(r,r.state,null),ko(e,n,r,i),r.state=e.memoizedState),"function"==typeof r.componentDidMount&&(e.flags|=4194308)}function Xo(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var i=n.stateNode}if(!i)throw Error(o(147,e));var r=i,a=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=r.refs;t===zo&&(t=r.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!=typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Yo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ko(e){return(0,e._init)(e._payload)}function Zo(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function a(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=kc(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,i){var o=n.type;return o===E?h(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===o||"object"==typeof o&&null!==o&&o.$$typeof===L&&Ko(o)===t.type)?((i=r(t,n.props)).ref=Xo(e,t,n),i.return=e,i):((i=jc(n.type,n.key,n.props,null,e.mode,i)).ref=Xo(e,t,n),i.return=e,i)}function u(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function h(e,t,n,i,o){return null===t||7!==t.tag?((t=Nc(n,e.mode,i,o)).return=e,t):((t=r(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=kc(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case w:return(n=jc(t.type,t.key,t.props,null,e.mode,n)).ref=Xo(e,null,t),n.return=e,n;case P:return(t=Uc(t,e.mode,n)).return=e,t;case L:return d(e,(0,t._init)(t._payload),n)}if(te(t)||j(t))return(t=Nc(t,e.mode,n,null)).return=e,t;Yo(e,t)}return null}function p(e,t,n,i){var r=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==r?null:l(e,t,""+n,i);if("object"==typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===r?c(e,t,n,i):null;case P:return n.key===r?u(e,t,n,i):null;case L:return p(e,t,(r=n._init)(n._payload),i)}if(te(n)||j(n))return null!==r?null:h(e,t,n,i,null);Yo(e,n)}return null}function f(e,t,n,i,r){if("string"==typeof i&&""!==i||"number"==typeof i)return l(t,e=e.get(n)||null,""+i,r);if("object"==typeof i&&null!==i){switch(i.$$typeof){case w:return c(t,e=e.get(null===i.key?n:i.key)||null,i,r);case P:return u(t,e=e.get(null===i.key?n:i.key)||null,i,r);case L:return f(e,t,n,(0,i._init)(i._payload),r)}if(te(i)||j(i))return h(t,e=e.get(n)||null,i,r,null);Yo(t,i)}return null}function g(r,o,s,l){for(var c=null,u=null,h=o,g=o=0,m=null;null!==h&&g<s.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var y=p(r,h,s[g],l);if(null===y){null===h&&(h=m);break}e&&h&&null===y.alternate&&t(r,h),o=a(y,o,g),null===u?c=y:u.sibling=y,u=y,h=m}if(g===s.length)return n(r,h),ro&&$r(r,g),c;if(null===h){for(;g<s.length;g++)null!==(h=d(r,s[g],l))&&(o=a(h,o,g),null===u?c=h:u.sibling=h,u=h);return ro&&$r(r,g),c}for(h=i(r,h);g<s.length;g++)null!==(m=f(h,r,g,s[g],l))&&(e&&null!==m.alternate&&h.delete(null===m.key?g:m.key),o=a(m,o,g),null===u?c=m:u.sibling=m,u=m);return e&&h.forEach((function(e){return t(r,e)})),ro&&$r(r,g),c}function m(r,s,l,c){var u=j(l);if("function"!=typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var h=u=null,g=s,m=s=0,y=null,v=l.next();null!==g&&!v.done;m++,v=l.next()){g.index>m?(y=g,g=null):y=g.sibling;var b=p(r,g,v.value,c);if(null===b){null===g&&(g=y);break}e&&g&&null===b.alternate&&t(r,g),s=a(b,s,m),null===h?u=b:h.sibling=b,h=b,g=y}if(v.done)return n(r,g),ro&&$r(r,m),u;if(null===g){for(;!v.done;m++,v=l.next())null!==(v=d(r,v.value,c))&&(s=a(v,s,m),null===h?u=v:h.sibling=v,h=v);return ro&&$r(r,m),u}for(g=i(r,g);!v.done;m++,v=l.next())null!==(v=f(g,r,m,v.value,c))&&(e&&null!==v.alternate&&g.delete(null===v.key?m:v.key),s=a(v,s,m),null===h?u=v:h.sibling=v,h=v);return e&&g.forEach((function(e){return t(r,e)})),ro&&$r(r,m),u}return function e(i,o,a,l){if("object"==typeof a&&null!==a&&a.type===E&&null===a.key&&(a=a.props.children),"object"==typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,u=o;null!==u;){if(u.key===c){if((c=a.type)===E){if(7===u.tag){n(i,u.sibling),(o=r(u,a.props.children)).return=i,i=o;break e}}else if(u.elementType===c||"object"==typeof c&&null!==c&&c.$$typeof===L&&Ko(c)===u.type){n(i,u.sibling),(o=r(u,a.props)).ref=Xo(i,u,a),o.return=i,i=o;break e}n(i,u);break}t(i,u),u=u.sibling}a.type===E?((o=Nc(a.props.children,i.mode,l,a.key)).return=i,i=o):((l=jc(a.type,a.key,a.props,null,i.mode,l)).ref=Xo(i,o,a),l.return=i,i=l)}return s(i);case P:e:{for(u=a.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(i,o.sibling),(o=r(o,a.children||[])).return=i,i=o;break e}n(i,o);break}t(i,o),o=o.sibling}(o=Uc(a,i.mode,l)).return=i,i=o}return s(i);case L:return e(i,o,(u=a._init)(a._payload),l)}if(te(a))return g(i,o,a,l);if(j(a))return m(i,o,a,l);Yo(i,a)}return"string"==typeof a&&""!==a||"number"==typeof a?(a=""+a,null!==o&&6===o.tag?(n(i,o.sibling),(o=r(o,a)).return=i,i=o):(n(i,o),(o=kc(a,i.mode,l)).return=i,i=o),s(i)):n(i,o)}}var Jo=Zo(!0),$o=Zo(!1),Qo={},ea=xr(Qo),ta=xr(Qo),na=xr(Qo);function ia(e){if(e===Qo)throw Error(o(174));return e}function ra(e,t){switch(Cr(na,t),Cr(ta,e),Cr(ea,Qo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ar(ea),Cr(ea,t)}function oa(){Ar(ea),Ar(ta),Ar(na)}function aa(e){ia(na.current);var t=ia(ea.current),n=le(t,e.type);t!==n&&(Cr(ta,e),Cr(ea,n))}function sa(e){ta.current===e&&(Ar(ea),Ar(ta))}var la=xr(0);function ca(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ua=[];function ha(){for(var e=0;e<ua.length;e++)ua[e]._workInProgressVersionPrimary=null;ua.length=0}var da=_.ReactCurrentDispatcher,pa=_.ReactCurrentBatchConfig,fa=0,ga=null,ma=null,ya=null,va=!1,ba=!1,_a=0,wa=0;function Pa(){throw Error(o(321))}function Ea(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!si(e[n],t[n]))return!1;return!0}function xa(e,t,n,i,r,a){if(fa=a,ga=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,da.current=null===e||null===e.memoizedState?ss:ls,e=n(i,r),ba){a=0;do{if(ba=!1,_a=0,25<=a)throw Error(o(301));a+=1,ya=ma=null,t.updateQueue=null,da.current=cs,e=n(i,r)}while(ba)}if(da.current=as,t=null!==ma&&null!==ma.next,fa=0,ya=ma=ga=null,va=!1,t)throw Error(o(300));return e}function Aa(){var e=0!==_a;return _a=0,e}function Ca(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ya?ga.memoizedState=ya=e:ya=ya.next=e,ya}function Sa(){if(null===ma){var e=ga.alternate;e=null!==e?e.memoizedState:null}else e=ma.next;var t=null===ya?ga.memoizedState:ya.next;if(null!==t)ya=t,ma=e;else{if(null===e)throw Error(o(310));e={memoizedState:(ma=e).memoizedState,baseState:ma.baseState,baseQueue:ma.baseQueue,queue:ma.queue,next:null},null===ya?ga.memoizedState=ya=e:ya=ya.next=e}return ya}function Ta(e,t){return"function"==typeof t?t(e):t}function Ra(e){var t=Sa(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var i=ma,r=i.baseQueue,a=n.pending;if(null!==a){if(null!==r){var s=r.next;r.next=a.next,a.next=s}i.baseQueue=r=a,n.pending=null}if(null!==r){a=r.next,i=i.baseState;var l=s=null,c=null,u=a;do{var h=u.lane;if((fa&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:e(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,s=i):c=c.next=d,ga.lanes|=h,Fl|=h}u=u.next}while(null!==u&&u!==a);null===c?s=i:c.next=l,si(i,t.memoizedState)||(_s=!0),t.memoizedState=i,t.baseState=s,t.baseQueue=c,n.lastRenderedState=i}if(null!==(e=n.interleaved)){r=e;do{a=r.lane,ga.lanes|=a,Fl|=a,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ia(e){var t=Sa(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,a=t.memoizedState;if(null!==r){n.pending=null;var s=r=r.next;do{a=e(a,s.action),s=s.next}while(s!==r);si(a,t.memoizedState)||(_s=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,i]}function Ma(){}function La(e,t){var n=ga,i=Sa(),r=t(),a=!si(i.memoizedState,r);if(a&&(i.memoizedState=r,_s=!0),i=i.queue,Ha(ja.bind(null,n,i,e),[e]),i.getSnapshot!==t||a||null!==ya&&1&ya.memoizedState.tag){if(n.flags|=2048,Ua(9,Oa.bind(null,n,i,r,t),void 0,null),null===Il)throw Error(o(349));0!=(30&fa)||Da(n,t,r)}return r}function Da(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ga.updateQueue)?(t={lastEffect:null,stores:null},ga.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oa(e,t,n,i){t.value=n,t.getSnapshot=i,Na(t)&&Fa(e)}function ja(e,t,n){return n((function(){Na(t)&&Fa(e)}))}function Na(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!si(e,n)}catch(e){return!0}}function Fa(e){var t=Io(e,1);null!==t&&ic(t,e,1,-1)}function ka(e){var t=Ca();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ta,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,ga,e),[t.memoizedState,e]}function Ua(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=ga.updateQueue)?(t={lastEffect:null,stores:null},ga.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function za(){return Sa().memoizedState}function Ba(e,t,n,i){var r=Ca();ga.flags|=e,r.memoizedState=Ua(1|t,n,void 0,void 0===i?null:i)}function Ga(e,t,n,i){var r=Sa();i=void 0===i?null:i;var o=void 0;if(null!==ma){var a=ma.memoizedState;if(o=a.destroy,null!==i&&Ea(i,a.deps))return void(r.memoizedState=Ua(t,n,o,i))}ga.flags|=e,r.memoizedState=Ua(1|t,n,o,i)}function Va(e,t){return Ba(8390656,8,e,t)}function Ha(e,t){return Ga(2048,8,e,t)}function qa(e,t){return Ga(4,2,e,t)}function Wa(e,t){return Ga(4,4,e,t)}function Xa(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ya(e,t,n){return n=null!=n?n.concat([e]):null,Ga(4,4,Xa.bind(null,t,e),n)}function Ka(){}function Za(e,t){var n=Sa();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&Ea(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Ja(e,t){var n=Sa();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&Ea(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function $a(e,t,n){return 0==(21&fa)?(e.baseState&&(e.baseState=!1,_s=!0),e.memoizedState=n):(si(n,t)||(n=gt(),ga.lanes|=n,Fl|=n,e.baseState=!0),t)}function Qa(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var i=pa.transition;pa.transition={};try{e(!1),t()}finally{bt=n,pa.transition=i}}function es(){return Sa().memoizedState}function ts(e,t,n){var i=nc(e);n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},is(e)?rs(t,n):null!==(n=Ro(e,t,n,i))&&(ic(n,e,i,tc()),os(n,t,i))}function ns(e,t,n){var i=nc(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(is(e))rs(t,r);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(r.hasEagerState=!0,r.eagerState=s,si(s,a)){var l=t.interleaved;return null===l?(r.next=r,To(t)):(r.next=l.next,l.next=r),void(t.interleaved=r)}}catch(e){}null!==(n=Ro(e,t,r,i))&&(ic(n,e,i,r=tc()),os(n,t,i))}}function is(e){var t=e.alternate;return e===ga||null!==t&&t===ga}function rs(e,t){ba=va=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function os(e,t,n){if(0!=(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,vt(e,n)}}var as={readContext:Co,useCallback:Pa,useContext:Pa,useEffect:Pa,useImperativeHandle:Pa,useInsertionEffect:Pa,useLayoutEffect:Pa,useMemo:Pa,useReducer:Pa,useRef:Pa,useState:Pa,useDebugValue:Pa,useDeferredValue:Pa,useTransition:Pa,useMutableSource:Pa,useSyncExternalStore:Pa,useId:Pa,unstable_isNewReconciler:!1},ss={readContext:Co,useCallback:function(e,t){return Ca().memoizedState=[e,void 0===t?null:t],e},useContext:Co,useEffect:Va,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Ba(4194308,4,Xa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ba(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ba(4,2,e,t)},useMemo:function(e,t){var n=Ca();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=Ca();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=ts.bind(null,ga,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},Ca().memoizedState=e},useState:ka,useDebugValue:Ka,useDeferredValue:function(e){return Ca().memoizedState=e},useTransition:function(){var e=ka(!1),t=e[0];return e=Qa.bind(null,e[1]),Ca().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=ga,r=Ca();if(ro){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Il)throw Error(o(349));0!=(30&fa)||Da(i,t,n)}r.memoizedState=n;var a={value:n,getSnapshot:t};return r.queue=a,Va(ja.bind(null,i,a,e),[e]),i.flags|=2048,Ua(9,Oa.bind(null,i,a,n,t),void 0,null),n},useId:function(){var e=Ca(),t=Il.identifierPrefix;if(ro){var n=Jr;t=":"+t+"R"+(n=(Zr&~(1<<32-at(Zr)-1)).toString(32)+n),0<(n=_a++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ls={readContext:Co,useCallback:Za,useContext:Co,useEffect:Ha,useImperativeHandle:Ya,useInsertionEffect:qa,useLayoutEffect:Wa,useMemo:Ja,useReducer:Ra,useRef:za,useState:function(){return Ra(Ta)},useDebugValue:Ka,useDeferredValue:function(e){return $a(Sa(),ma.memoizedState,e)},useTransition:function(){return[Ra(Ta)[0],Sa().memoizedState]},useMutableSource:Ma,useSyncExternalStore:La,useId:es,unstable_isNewReconciler:!1},cs={readContext:Co,useCallback:Za,useContext:Co,useEffect:Ha,useImperativeHandle:Ya,useInsertionEffect:qa,useLayoutEffect:Wa,useMemo:Ja,useReducer:Ia,useRef:za,useState:function(){return Ia(Ta)},useDebugValue:Ka,useDeferredValue:function(e){var t=Sa();return null===ma?t.memoizedState=e:$a(t,ma.memoizedState,e)},useTransition:function(){return[Ia(Ta)[0],Sa().memoizedState]},useMutableSource:Ma,useSyncExternalStore:La,useId:es,unstable_isNewReconciler:!1};function us(e,t){try{var n="",i=t;do{n+=B(i),i=i.return}while(i);var r=n}catch(e){r="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:r,digest:null}}function hs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ds(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}var ps="function"==typeof WeakMap?WeakMap:Map;function fs(e,t,n){(n=Oo(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){ql||(ql=!0,Wl=i),ds(0,t)},n}function gs(e,t,n){(n=Oo(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"==typeof i){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){ds(0,t)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){ds(0,t),"function"!=typeof i&&(null===Xl?Xl=new Set([this]):Xl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new ps;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function ys(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vs(e,t,n,i,r){return 0==(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Oo(-1,1)).tag=2,jo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var bs=_.ReactCurrentOwner,_s=!1;function ws(e,t,n,i){t.child=null===e?$o(t,null,n,i):Jo(t,e.child,n,i)}function Ps(e,t,n,i,r){n=n.render;var o=t.ref;return Ao(t,r),i=xa(e,t,n,i,o,r),n=Aa(),null===e||_s?(ro&&n&&eo(t),t.flags|=1,ws(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,qs(e,t,r))}function Es(e,t,n,i,r){if(null===e){var o=n.type;return"function"!=typeof o||Dc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=jc(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,xs(e,t,o,i,r))}if(o=e.child,0==(e.lanes&r)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:li)(a,i)&&e.ref===t.ref)return qs(e,t,r)}return t.flags|=1,(e=Oc(o,i)).ref=t.ref,e.return=t,t.child=e}function xs(e,t,n,i,r){if(null!==e){var o=e.memoizedProps;if(li(o,i)&&e.ref===t.ref){if(_s=!1,t.pendingProps=i=o,0==(e.lanes&r))return t.lanes=e.lanes,qs(e,t,r);0!=(131072&e.flags)&&(_s=!0)}}return Ss(e,t,n,i,r)}function As(e,t,n){var i=t.pendingProps,r=i.children,o=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0==(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Cr(Ol,Dl),Dl|=n;else{if(0==(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Cr(Ol,Dl),Dl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==o?o.baseLanes:n,Cr(Ol,Dl),Dl|=i}else null!==o?(i=o.baseLanes|n,t.memoizedState=null):i=n,Cr(Ol,Dl),Dl|=i;return ws(e,t,r,n),t.child}function Cs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ss(e,t,n,i,r){var o=Lr(n)?Ir:Tr.current;return o=Mr(t,o),Ao(t,r),n=xa(e,t,n,i,o,r),i=Aa(),null===e||_s?(ro&&i&&eo(t),t.flags|=1,ws(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,qs(e,t,r))}function Ts(e,t,n,i,r){if(Lr(n)){var o=!0;Nr(t)}else o=!1;if(Ao(t,r),null===t.stateNode)Hs(e,t),Ho(t,n,i),Wo(t,n,i,r),i=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=n.contextType;c="object"==typeof c&&null!==c?Co(c):Mr(t,c=Lr(n)?Ir:Tr.current);var u=n.getDerivedStateFromProps,h="function"==typeof u||"function"==typeof a.getSnapshotBeforeUpdate;h||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==i||l!==c)&&qo(t,a,i,c),Mo=!1;var d=t.memoizedState;a.state=d,ko(t,i,a,r),l=t.memoizedState,s!==i||d!==l||Rr.current||Mo?("function"==typeof u&&(Bo(t,n,u,i),l=t.memoizedState),(s=Mo||Vo(t,n,s,i,d,l,c))?(h||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4194308)):("function"==typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),a.props=i,a.state=l,a.context=c,i=s):("function"==typeof a.componentDidMount&&(t.flags|=4194308),i=!1)}else{a=t.stateNode,Do(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:yo(t.type,s),a.props=c,h=t.pendingProps,d=a.context,l="object"==typeof(l=n.contextType)&&null!==l?Co(l):Mr(t,l=Lr(n)?Ir:Tr.current);var p=n.getDerivedStateFromProps;(u="function"==typeof p||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==h||d!==l)&&qo(t,a,i,l),Mo=!1,d=t.memoizedState,a.state=d,ko(t,i,a,r);var f=t.memoizedState;s!==h||d!==f||Rr.current||Mo?("function"==typeof p&&(Bo(t,n,p,i),f=t.memoizedState),(c=Mo||Vo(t,n,c,i,d,f,l)||!1)?(u||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(i,f,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(i,f,l)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=f),a.props=i,a.state=f,a.context=l,i=c):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),i=!1)}return Rs(e,t,n,i,o,r)}function Rs(e,t,n,i,r,o){Cs(e,t);var a=0!=(128&t.flags);if(!i&&!a)return r&&Fr(t,n,!1),qs(e,t,o);i=t.stateNode,bs.current=t;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&a?(t.child=Jo(t,e.child,null,o),t.child=Jo(t,null,s,o)):ws(e,t,s,o),t.memoizedState=i.state,r&&Fr(t,n,!0),t.child}function Is(e){var t=e.stateNode;t.pendingContext?Or(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Or(0,t.context,!1),ra(e,t.containerInfo)}function Ms(e,t,n,i,r){return fo(),go(r),t.flags|=256,ws(e,t,n,i),t.child}var Ls,Ds,Os,js,Ns={dehydrated:null,treeContext:null,retryLane:0};function Fs(e){return{baseLanes:e,cachePool:null,transitions:null}}function ks(e,t,n){var i,r=t.pendingProps,a=la.current,s=!1,l=0!=(128&t.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&0!=(2&a)),i?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Cr(la,1&a),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0==(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=r.children,e=r.fallback,s?(r=t.mode,s=t.child,l={mode:"hidden",children:l},0==(1&r)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Fc(l,r,0,null),e=Nc(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Fs(n),t.memoizedState=Ns,e):Us(t,l));if(null!==(a=e.memoizedState)&&null!==(i=a.dehydrated))return function(e,t,n,i,r,a,s){if(n)return 256&t.flags?(t.flags&=-257,zs(e,t,s,i=hs(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=i.fallback,r=t.mode,i=Fc({mode:"visible",children:i.children},r,0,null),(a=Nc(a,r,s,null)).flags|=2,i.return=t,a.return=t,i.sibling=a,t.child=i,0!=(1&t.mode)&&Jo(t,e.child,null,s),t.child.memoizedState=Fs(s),t.memoizedState=Ns,a);if(0==(1&t.mode))return zs(e,t,s,null);if("$!"===r.data){if(i=r.nextSibling&&r.nextSibling.dataset)var l=i.dgst;return i=l,zs(e,t,s,i=hs(a=Error(o(419)),i,void 0))}if(l=0!=(s&e.childLanes),_s||l){if(null!==(i=Il)){switch(s&-s){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!=(r&(i.suspendedLanes|s))?0:r)&&r!==a.retryLane&&(a.retryLane=r,Io(e,r),ic(i,e,r,-1))}return mc(),zs(e,t,s,i=hs(Error(o(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),r._reactRetry=t,null):(e=a.treeContext,io=cr(r.nextSibling),no=t,ro=!0,oo=null,null!==e&&(Xr[Yr++]=Zr,Xr[Yr++]=Jr,Xr[Yr++]=Kr,Zr=e.id,Jr=e.overflow,Kr=t),(t=Us(t,i.children)).flags|=4096,t)}(e,t,l,r,i,a,n);if(s){s=r.fallback,l=t.mode,i=(a=e.child).sibling;var c={mode:"hidden",children:r.children};return 0==(1&l)&&t.child!==a?((r=t.child).childLanes=0,r.pendingProps=c,t.deletions=null):(r=Oc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==i?s=Oc(i,s):(s=Nc(s,l,n,null)).flags|=2,s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,l=null===(l=e.child.memoizedState)?Fs(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Ns,r}return e=(s=e.child).sibling,r=Oc(s,{mode:"visible",children:r.children}),0==(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Us(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zs(e,t,n,i){return null!==i&&go(i),Jo(t,e.child,null,n),(e=Us(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bs(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),xo(e.return,t,n)}function Gs(e,t,n,i,r){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function Vs(e,t,n){var i=t.pendingProps,r=i.revealOrder,o=i.tail;if(ws(e,t,i.children,n),0!=(2&(i=la.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!=(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bs(e,n,t);else if(19===e.tag)Bs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Cr(la,i),0==(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===ca(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Gs(t,!1,r,n,o);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===ca(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Gs(t,!0,n,null,o);break;case"together":Gs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Hs(e,t){0==(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fl|=t.lanes,0==(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ws(e,t){if(!ro)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Xs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Ys(e,t,n){var i=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xs(t),null;case 1:case 17:return Lr(t.type)&&Dr(),Xs(t),null;case 3:return i=t.stateNode,oa(),Ar(Rr),Ar(Tr),ha(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0==(256&t.flags)||(t.flags|=1024,null!==oo&&(sc(oo),oo=null))),Ds(e,t),Xs(t),null;case 5:sa(t);var r=ia(na.current);if(n=t.type,null!==e&&null!=t.stateNode)Os(e,t,n,i,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(o(166));return Xs(t),null}if(e=ia(ea.current),ho(t)){i=t.stateNode,n=t.type;var a=t.memoizedProps;switch(i[dr]=t,i[pr]=a,e=0!=(1&t.mode),n){case"dialog":Ui("cancel",i),Ui("close",i);break;case"iframe":case"object":case"embed":Ui("load",i);break;case"video":case"audio":for(r=0;r<ji.length;r++)Ui(ji[r],i);break;case"source":Ui("error",i);break;case"img":case"image":case"link":Ui("error",i),Ui("load",i);break;case"details":Ui("toggle",i);break;case"input":Z(i,a),Ui("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!a.multiple},Ui("invalid",i);break;case"textarea":re(i,a),Ui("invalid",i)}for(var l in ve(n,a),r=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"==typeof c?i.textContent!==c&&(!0!==a.suppressHydrationWarning&&$i(i.textContent,c,e),r=["children",c]):"number"==typeof c&&i.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&$i(i.textContent,c,e),r=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ui("scroll",i)}switch(n){case"input":W(i),Q(i,a,!0);break;case"textarea":W(i),ae(i);break;case"select":case"option":break;default:"function"==typeof a.onClick&&(i.onclick=Qi)}i=r,t.updateQueue=i,null!==i&&(t.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof i.is?e=l.createElement(n,{is:i.is}):(e=l.createElement(n),"select"===n&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,n),e[dr]=t,e[pr]=i,Ls(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,i),n){case"dialog":Ui("cancel",e),Ui("close",e),r=i;break;case"iframe":case"object":case"embed":Ui("load",e),r=i;break;case"video":case"audio":for(r=0;r<ji.length;r++)Ui(ji[r],e);r=i;break;case"source":Ui("error",e),r=i;break;case"img":case"image":case"link":Ui("error",e),Ui("load",e),r=i;break;case"details":Ui("toggle",e),r=i;break;case"input":Z(e,i),r=K(e,i),Ui("invalid",e);break;case"option":default:r=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},r=F({},i,{value:void 0}),Ui("invalid",e);break;case"textarea":re(e,i),r=ie(e,i),Ui("invalid",e)}for(a in ve(n,r),c=r)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?me(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===a?"string"==typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"==typeof u&&de(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Ui("scroll",e):null!=u&&b(e,a,u,l))}switch(n){case"input":W(e),Q(e,i,!1);break;case"textarea":W(e),ae(e);break;case"option":null!=i.value&&e.setAttribute("value",""+H(i.value));break;case"select":e.multiple=!!i.multiple,null!=(a=i.value)?ne(e,!!i.multiple,a,!1):null!=i.defaultValue&&ne(e,!!i.multiple,i.defaultValue,!0);break;default:"function"==typeof r.onClick&&(e.onclick=Qi)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Xs(t),null;case 6:if(e&&null!=t.stateNode)js(e,t,e.memoizedProps,i);else{if("string"!=typeof i&&null===t.stateNode)throw Error(o(166));if(n=ia(na.current),ia(ea.current),ho(t)){if(i=t.stateNode,n=t.memoizedProps,i[dr]=t,(a=i.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:$i(i.nodeValue,n,0!=(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$i(i.nodeValue,n,0!=(1&e.mode))}a&&(t.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[dr]=t,t.stateNode=i}return Xs(t),null;case 13:if(Ar(la),i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ro&&null!==io&&0!=(1&t.mode)&&0==(128&t.flags))po(),fo(),t.flags|=98560,a=!1;else if(a=ho(t),null!==i&&null!==i.dehydrated){if(null===e){if(!a)throw Error(o(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(o(317));a[dr]=t}else fo(),0==(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Xs(t),a=!1}else null!==oo&&(sc(oo),oo=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!=(128&t.flags)?(t.lanes=n,t):((i=null!==i)!=(null!==e&&null!==e.memoizedState)&&i&&(t.child.flags|=8192,0!=(1&t.mode)&&(null===e||0!=(1&la.current)?0===jl&&(jl=3):mc())),null!==t.updateQueue&&(t.flags|=4),Xs(t),null);case 4:return oa(),Ds(e,t),null===e&&Gi(t.stateNode.containerInfo),Xs(t),null;case 10:return Eo(t.type._context),Xs(t),null;case 19:if(Ar(la),null===(a=t.memoizedState))return Xs(t),null;if(i=0!=(128&t.flags),null===(l=a.rendering))if(i)Ws(a,!1);else{if(0!==jl||null!==e&&0!=(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ca(e))){for(t.flags|=128,Ws(a,!1),null!==(i=l.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;null!==n;)e=i,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Cr(la,1&la.current|2),t.child}e=e.sibling}null!==a.tail&&Je()>Vl&&(t.flags|=128,i=!0,Ws(a,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=ca(l))){if(t.flags|=128,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ws(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!ro)return Xs(t),null}else 2*Je()-a.renderingStartTime>Vl&&1073741824!==n&&(t.flags|=128,i=!0,Ws(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Je(),t.sibling=null,n=la.current,Cr(la,i?1&n|2:1&n),t):(Xs(t),null);case 22:case 23:return dc(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!=(1&t.mode)?0!=(1073741824&Dl)&&(Xs(t),6&t.subtreeFlags&&(t.flags|=8192)):Xs(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Ks(e,t){switch(to(t),t.tag){case 1:return Lr(t.type)&&Dr(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return oa(),Ar(Rr),Ar(Tr),ha(),0!=(65536&(e=t.flags))&&0==(128&e)?(t.flags=-65537&e|128,t):null;case 5:return sa(t),null;case 13:if(Ar(la),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));fo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ar(la),null;case 4:return oa(),null;case 10:return Eo(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Ls=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ds=function(){},Os=function(e,t,n,i){var r=e.memoizedProps;if(r!==i){e=t.stateNode,ia(ea.current);var o,a=null;switch(n){case"input":r=K(e,r),i=K(e,i),a=[];break;case"select":r=F({},r,{value:void 0}),i=F({},i,{value:void 0}),a=[];break;case"textarea":r=ie(e,r),i=ie(e,i),a=[];break;default:"function"!=typeof r.onClick&&"function"==typeof i.onClick&&(e.onclick=Qi)}for(u in ve(n,i),n=null,r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&null!=r[u])if("style"===u){var l=r[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in i){var c=i[u];if(l=null!=r?r[u]:void 0,i.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!=typeof c&&"number"!=typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ui("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},js=function(e,t,n,i){n!==i&&(t.flags|=4)};var Zs=!1,Js=!1,$s="function"==typeof WeakSet?WeakSet:Set,Qs=null;function el(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(n){Ac(e,t,n)}else n.current=null}function tl(e,t,n){try{n()}catch(n){Ac(e,t,n)}}var nl=!1;function il(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&e)===e){var o=r.destroy;r.destroy=void 0,void 0!==o&&tl(t,n,o)}r=r.next}while(r!==i)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function ol(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&(delete t[dr],delete t[pr],delete t[gr],delete t[mr],delete t[yr]),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Qi));else if(4!==i&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var hl=null,dl=!1;function pl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(ot&&"function"==typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(rt,n)}catch(e){}switch(n.tag){case 5:Js||el(n,t);case 6:var i=hl,r=dl;hl=null,pl(e,t,n),dl=r,null!==(hl=i)&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?lr(e.parentNode,n):1===e.nodeType&&lr(e,n),Gt(e)):lr(hl,n.stateNode));break;case 4:i=hl,r=dl,hl=n.stateNode.containerInfo,dl=!0,pl(e,t,n),hl=i,dl=r;break;case 0:case 11:case 14:case 15:if(!Js&&null!==(i=n.updateQueue)&&null!==(i=i.lastEffect)){r=i=i.next;do{var o=r,a=o.destroy;o=o.tag,void 0!==a&&(0!=(2&o)||0!=(4&o))&&tl(n,t,a),r=r.next}while(r!==i)}pl(e,t,n);break;case 1:if(!Js&&(el(n,t),"function"==typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(e){Ac(n,t,e)}pl(e,t,n);break;case 21:pl(e,t,n);break;case 22:1&n.mode?(Js=(i=Js)||null!==n.memoizedState,pl(e,t,n),Js=i):pl(e,t,n);break;default:pl(e,t,n)}}function gl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $s),t.forEach((function(t){var i=Rc.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var a=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,dl=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===hl)throw Error(o(160));fl(a,s,r),hl=null,dl=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(e){Ac(r,t,e)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yl(t,e),t=t.sibling}function yl(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&i){try{il(3,e,e.return),rl(3,e)}catch(t){Ac(e,e.return,t)}try{il(5,e,e.return)}catch(t){Ac(e,e.return,t)}}break;case 1:ml(t,e),vl(e),512&i&&null!==n&&el(n,n.return);break;case 5:if(ml(t,e),vl(e),512&i&&null!==n&&el(n,n.return),32&e.flags){var r=e.stateNode;try{de(r,"")}catch(t){Ac(e,e.return,t)}}if(4&i&&null!=(r=e.stateNode)){var a=e.memoizedProps,s=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&J(r,a),be(l,s);var u=be(l,a);for(s=0;s<c.length;s+=2){var h=c[s],d=c[s+1];"style"===h?me(r,d):"dangerouslySetInnerHTML"===h?he(r,d):"children"===h?de(r,d):b(r,h,d,u)}switch(l){case"input":$(r,a);break;case"textarea":oe(r,a);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!a.multiple;var f=a.value;null!=f?ne(r,!!a.multiple,f,!1):p!==!!a.multiple&&(null!=a.defaultValue?ne(r,!!a.multiple,a.defaultValue,!0):ne(r,!!a.multiple,a.multiple?[]:"",!1))}r[pr]=a}catch(t){Ac(e,e.return,t)}}break;case 6:if(ml(t,e),vl(e),4&i){if(null===e.stateNode)throw Error(o(162));r=e.stateNode,a=e.memoizedProps;try{r.nodeValue=a}catch(t){Ac(e,e.return,t)}}break;case 3:if(ml(t,e),vl(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Gt(t.containerInfo)}catch(t){Ac(e,e.return,t)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(r=e.child).flags&&(a=null!==r.memoizedState,r.stateNode.isHidden=a,!a||null!==r.alternate&&null!==r.alternate.memoizedState||(Gl=Je())),4&i&&gl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Js=(u=Js)||h,ml(t,e),Js=u):ml(t,e),vl(e),8192&i){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!=(1&e.mode))for(Qs=e,h=e.child;null!==h;){for(d=Qs=h;null!==Qs;){switch(f=(p=Qs).child,p.tag){case 0:case 11:case 14:case 15:il(4,p,p.return);break;case 1:el(p,p.return);var g=p.stateNode;if("function"==typeof g.componentWillUnmount){i=p,n=p.return;try{t=i,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(e){Ac(i,n,e)}}break;case 5:el(p,p.return);break;case 22:if(null!==p.memoizedState){Pl(d);continue}}null!==f?(f.return=p,Qs=f):Pl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{r=d.stateNode,u?"function"==typeof(a=r.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=d.stateNode,s=null!=(c=d.memoizedProps.style)&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",s))}catch(t){Ac(e,e.return,t)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(t){Ac(e,e.return,t)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(t,e),vl(e),4&i&&gl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sl(n)){var i=n;break e}n=n.return}throw Error(o(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(de(r,""),i.flags&=-33),ul(e,ll(e),r);break;case 3:case 4:var a=i.stateNode.containerInfo;cl(e,ll(e),a);break;default:throw Error(o(161))}}catch(t){Ac(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,n){Qs=e,_l(e,t,n)}function _l(e,t,n){for(var i=0!=(1&e.mode);null!==Qs;){var r=Qs,o=r.child;if(22===r.tag&&i){var a=null!==r.memoizedState||Zs;if(!a){var s=r.alternate,l=null!==s&&null!==s.memoizedState||Js;s=Zs;var c=Js;if(Zs=a,(Js=l)&&!c)for(Qs=r;null!==Qs;)l=(a=Qs).child,22===a.tag&&null!==a.memoizedState?El(r):null!==l?(l.return=a,Qs=l):El(r);for(;null!==o;)Qs=o,_l(o,t,n),o=o.sibling;Qs=r,Zs=s,Js=c}wl(e)}else 0!=(8772&r.subtreeFlags)&&null!==o?(o.return=r,Qs=o):wl(e)}}function wl(e){for(;null!==Qs;){var t=Qs;if(0!=(8772&t.flags)){var n=t.alternate;try{if(0!=(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Js||rl(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!Js)if(null===n)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:yo(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Uo(t,a,i);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Uo(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Gt(d)}}}break;default:throw Error(o(163))}Js||512&t.flags&&ol(t)}catch(e){Ac(t,t.return,e)}}if(t===e){Qs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Qs=n;break}Qs=t.return}}function Pl(e){for(;null!==Qs;){var t=Qs;if(t===e){Qs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Qs=n;break}Qs=t.return}}function El(e){for(;null!==Qs;){var t=Qs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(e){Ac(t,n,e)}break;case 1:var i=t.stateNode;if("function"==typeof i.componentDidMount){var r=t.return;try{i.componentDidMount()}catch(e){Ac(t,r,e)}}var o=t.return;try{ol(t)}catch(e){Ac(t,o,e)}break;case 5:var a=t.return;try{ol(t)}catch(e){Ac(t,a,e)}}}catch(e){Ac(t,t.return,e)}if(t===e){Qs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Qs=s;break}Qs=t.return}}var xl,Al=Math.ceil,Cl=_.ReactCurrentDispatcher,Sl=_.ReactCurrentOwner,Tl=_.ReactCurrentBatchConfig,Rl=0,Il=null,Ml=null,Ll=0,Dl=0,Ol=xr(0),jl=0,Nl=null,Fl=0,kl=0,Ul=0,zl=null,Bl=null,Gl=0,Vl=1/0,Hl=null,ql=!1,Wl=null,Xl=null,Yl=!1,Kl=null,Zl=0,Jl=0,$l=null,Ql=-1,ec=0;function tc(){return 0!=(6&Rl)?Je():-1!==Ql?Ql:Ql=Je()}function nc(e){return 0==(1&e.mode)?1:0!=(2&Rl)&&0!==Ll?Ll&-Ll:null!==mo.transition?(0===ec&&(ec=gt()),ec):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Zt(e.type)}function ic(e,t,n,i){if(50<Jl)throw Jl=0,$l=null,Error(o(185));yt(e,n,i),0!=(2&Rl)&&e===Il||(e===Il&&(0==(2&Rl)&&(kl|=n),4===jl&&lc(e,Ll)),rc(e,i),1===n&&0===Rl&&0==(1&t.mode)&&(Vl=Je()+500,Ur&&Gr()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-at(o),s=1<<a,l=r[a];-1===l?0!=(s&n)&&0==(s&i)||(r[a]=pt(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var i=dt(e,e===Il?Ll:0);if(0===i)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){Ur=!0,Br(e)}(cc.bind(null,e)):Br(cc.bind(null,e)),ar((function(){0==(6&Rl)&&Gr()})),n=null;else{switch(_t(i)){case 1:n=Qe;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=it}n=Ic(n,oc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function oc(e,t){if(Ql=-1,ec=0,0!=(6&Rl))throw Error(o(327));var n=e.callbackNode;if(Ec()&&e.callbackNode!==n)return null;var i=dt(e,e===Il?Ll:0);if(0===i)return null;if(0!=(30&i)||0!=(i&e.expiredLanes)||t)t=yc(e,i);else{t=i;var r=Rl;Rl|=2;var a=gc();for(Il===e&&Ll===t||(Hl=null,Vl=Je()+500,pc(e,t));;)try{bc();break}catch(t){fc(e,t)}Po(),Cl.current=a,Rl=r,null!==Ml?t=0:(Il=null,Ll=0,t=jl)}if(0!==t){if(2===t&&0!==(r=ft(e))&&(i=r,t=ac(e,r)),1===t)throw n=Nl,pc(e,0),lc(e,i),rc(e,Je()),n;if(6===t)lc(e,i);else{if(r=e.current.alternate,0==(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!si(o(),r))return!1}catch(e){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=yc(e,i))&&0!==(a=ft(e))&&(i=a,t=ac(e,a)),1===t))throw n=Nl,pc(e,0),lc(e,i),rc(e,Je()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(o(345));case 2:case 5:Pc(e,Bl,Hl);break;case 3:if(lc(e,i),(130023424&i)===i&&10<(t=Gl+500-Je())){if(0!==dt(e,0))break;if(((r=e.suspendedLanes)&i)!==i){tc(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=ir(Pc.bind(null,e,Bl,Hl),t);break}Pc(e,Bl,Hl);break;case 4:if(lc(e,i),(4194240&i)===i)break;for(t=e.eventTimes,r=-1;0<i;){var s=31-at(i);a=1<<s,(s=t[s])>r&&(r=s),i&=~a}if(i=r,10<(i=(120>(i=Je()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Al(i/1960))-i)){e.timeoutHandle=ir(Pc.bind(null,e,Bl,Hl),i);break}Pc(e,Bl,Hl);break;default:throw Error(o(329))}}}return rc(e,Je()),e.callbackNode===n?oc.bind(null,e):null}function ac(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(pc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=Bl,Bl=n,null!==t&&sc(t)),e}function sc(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function lc(e,t){for(t&=~Ul,t&=~kl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),i=1<<n;e[n]=-1,t&=~i}}function cc(e){if(0!=(6&Rl))throw Error(o(327));Ec();var t=dt(e,0);if(0==(1&t))return rc(e,Je()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var i=ft(e);0!==i&&(t=i,n=ac(e,i))}if(1===n)throw n=Nl,pc(e,0),lc(e,t),rc(e,Je()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Pc(e,Bl,Hl),rc(e,Je()),null}function uc(e,t){var n=Rl;Rl|=1;try{return e(t)}finally{0===(Rl=n)&&(Vl=Je()+500,Ur&&Gr())}}function hc(e){null!==Kl&&0===Kl.tag&&0==(6&Rl)&&Ec();var t=Rl;Rl|=1;var n=Tl.transition,i=bt;try{if(Tl.transition=null,bt=1,e)return e()}finally{bt=i,Tl.transition=n,0==(6&(Rl=t))&&Gr()}}function dc(){Dl=Ol.current,Ar(Ol)}function pc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rr(n)),null!==Ml)for(n=Ml.return;null!==n;){var i=n;switch(to(i),i.tag){case 1:null!=(i=i.type.childContextTypes)&&Dr();break;case 3:oa(),Ar(Rr),Ar(Tr),ha();break;case 5:sa(i);break;case 4:oa();break;case 13:case 19:Ar(la);break;case 10:Eo(i.type._context);break;case 22:case 23:dc()}n=n.return}if(Il=e,Ml=e=Oc(e.current,null),Ll=Dl=t,jl=0,Nl=null,Ul=kl=Fl=0,Bl=zl=null,null!==So){for(t=0;t<So.length;t++)if(null!==(i=(n=So[t]).interleaved)){n.interleaved=null;var r=i.next,o=n.pending;if(null!==o){var a=o.next;o.next=r,i.next=a}n.pending=i}So=null}return e}function fc(e,t){for(;;){var n=Ml;try{if(Po(),da.current=as,va){for(var i=ga.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}va=!1}if(fa=0,ya=ma=ga=null,ba=!1,_a=0,Sl.current=null,null===n||null===n.return){jl=1,Nl=t,Ml=null;break}e:{var a=e,s=n.return,l=n,c=t;if(t=Ll,l.flags|=32768,null!==c&&"object"==typeof c&&"function"==typeof c.then){var u=c,h=l,d=h.tag;if(0==(1&h.mode)&&(0===d||11===d||15===d)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=ys(s);if(null!==f){f.flags&=-257,vs(f,s,l,0,t),1&f.mode&&ms(a,u,t),c=u;var g=(t=f).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(0==(1&t)){ms(a,u,t),mc();break e}c=Error(o(426))}else if(ro&&1&l.mode){var y=ys(s);if(null!==y){0==(65536&y.flags)&&(y.flags|=256),vs(y,s,l,0,t),go(us(c,l));break e}}a=c=us(c,l),4!==jl&&(jl=2),null===zl?zl=[a]:zl.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Fo(a,fs(0,c,t));break e;case 1:l=c;var v=a.type,b=a.stateNode;if(0==(128&a.flags)&&("function"==typeof v.getDerivedStateFromError||null!==b&&"function"==typeof b.componentDidCatch&&(null===Xl||!Xl.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Fo(a,gs(a,l,t));break e}}a=a.return}while(null!==a)}wc(n)}catch(e){t=e,Ml===n&&null!==n&&(Ml=n=n.return);continue}break}}function gc(){var e=Cl.current;return Cl.current=as,null===e?as:e}function mc(){0!==jl&&3!==jl&&2!==jl||(jl=4),null===Il||0==(268435455&Fl)&&0==(268435455&kl)||lc(Il,Ll)}function yc(e,t){var n=Rl;Rl|=2;var i=gc();for(Il===e&&Ll===t||(Hl=null,pc(e,t));;)try{vc();break}catch(t){fc(e,t)}if(Po(),Rl=n,Cl.current=i,null!==Ml)throw Error(o(261));return Il=null,Ll=0,jl}function vc(){for(;null!==Ml;)_c(Ml)}function bc(){for(;null!==Ml&&!Ke();)_c(Ml)}function _c(e){var t=xl(e.alternate,e,Dl);e.memoizedProps=e.pendingProps,null===t?wc(e):Ml=t,Sl.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(32768&t.flags)){if(null!==(n=Ys(n,t,Dl)))return void(Ml=n)}else{if(null!==(n=Ks(n,t)))return n.flags&=32767,void(Ml=n);if(null===e)return jl=6,void(Ml=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ml=t);Ml=t=e}while(null!==t);0===jl&&(jl=5)}function Pc(e,t,n){var i=bt,r=Tl.transition;try{Tl.transition=null,bt=1,function(e,t,n,i){do{Ec()}while(null!==Kl);if(0!=(6&Rl))throw Error(o(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-at(n),o=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~o}}(e,a),e===Il&&(Ml=Il=null,Ll=0),0==(2064&n.subtreeFlags)&&0==(2064&n.flags)||Yl||(Yl=!0,Ic(tt,(function(){return Ec(),null}))),a=0!=(15990&n.flags),0!=(15990&n.subtreeFlags)||a){a=Tl.transition,Tl.transition=null;var s=bt;bt=1;var l=Rl;Rl|=4,Sl.current=null,function(e,t){if(er=Ht,pi(e=di())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{n.nodeType,a.nodeType}catch(e){n=null;break e}var s=0,l=-1,c=-1,u=0,h=0,d=e,p=null;t:for(;;){for(var f;d!==n||0!==r&&3!==d.nodeType||(l=s+r),d!==a||0!==i&&3!==d.nodeType||(c=s+i),3===d.nodeType&&(s+=d.nodeValue.length),null!==(f=d.firstChild);)p=d,d=f;for(;;){if(d===e)break t;if(p===n&&++u===r&&(l=s),p===a&&++h===i&&(c=s),null!==(f=d.nextSibling))break;p=(d=p).parentNode}d=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(tr={focusedElem:e,selectionRange:n},Ht=!1,Qs=t;null!==Qs;)if(e=(t=Qs).child,0!=(1028&t.subtreeFlags)&&null!==e)e.return=t,Qs=e;else for(;null!==Qs;){t=Qs;try{var g=t.alternate;if(0!=(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,y=g.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:yo(t.type,m),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var _=t.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(o(163))}}catch(e){Ac(t,t.return,e)}if(null!==(e=t.sibling)){e.return=t.return,Qs=e;break}Qs=t.return}g=nl,nl=!1}(e,n),yl(n,e),fi(tr),Ht=!!er,tr=er=null,e.current=n,bl(n,e,r),Ze(),Rl=l,bt=s,Tl.transition=a}else e.current=n;if(Yl&&(Yl=!1,Kl=e,Zl=r),0===(a=e.pendingLanes)&&(Xl=null),function(e){if(ot&&"function"==typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(rt,e,void 0,128==(128&e.current.flags))}catch(e){}}(n.stateNode),rc(e,Je()),null!==t)for(i=e.onRecoverableError,n=0;n<t.length;n++)i((r=t[n]).value,{componentStack:r.stack,digest:r.digest});if(ql)throw ql=!1,e=Wl,Wl=null,e;0!=(1&Zl)&&0!==e.tag&&Ec(),0!=(1&(a=e.pendingLanes))?e===$l?Jl++:(Jl=0,$l=e):Jl=0,Gr()}(e,t,n,i)}finally{Tl.transition=r,bt=i}return null}function Ec(){if(null!==Kl){var e=_t(Zl),t=Tl.transition,n=bt;try{if(Tl.transition=null,bt=16>e?16:e,null===Kl)var i=!1;else{if(e=Kl,Kl=null,Zl=0,0!=(6&Rl))throw Error(o(331));var r=Rl;for(Rl|=4,Qs=e.current;null!==Qs;){var a=Qs,s=a.child;if(0!=(16&Qs.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Qs=u;null!==Qs;){var h=Qs;switch(h.tag){case 0:case 11:case 15:il(8,h,a)}var d=h.child;if(null!==d)d.return=h,Qs=d;else for(;null!==Qs;){var p=(h=Qs).sibling,f=h.return;if(al(h),h===u){Qs=null;break}if(null!==p){p.return=f,Qs=p;break}Qs=f}}}var g=a.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Qs=a}}if(0!=(2064&a.subtreeFlags)&&null!==s)s.return=a,Qs=s;else e:for(;null!==Qs;){if(0!=(2048&(a=Qs).flags))switch(a.tag){case 0:case 11:case 15:il(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,Qs=v;break e}Qs=a.return}}var b=e.current;for(Qs=b;null!==Qs;){var _=(s=Qs).child;if(0!=(2064&s.subtreeFlags)&&null!==_)_.return=s,Qs=_;else e:for(s=b;null!==Qs;){if(0!=(2048&(l=Qs).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(e){Ac(l,l.return,e)}if(l===s){Qs=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Qs=w;break e}Qs=l.return}}if(Rl=r,Gr(),ot&&"function"==typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(rt,e)}catch(e){}i=!0}return i}finally{bt=n,Tl.transition=t}}return!1}function xc(e,t,n){e=jo(e,t=fs(0,t=us(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),rc(e,t))}function Ac(e,t,n){if(3===e.tag)xc(e,e,n);else for(;null!==t;){if(3===t.tag){xc(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof i.componentDidCatch&&(null===Xl||!Xl.has(i))){t=jo(t,e=gs(t,e=us(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Cc(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Il===e&&(Ll&n)===n&&(4===jl||3===jl&&(130023424&Ll)===Ll&&500>Je()-Gl?pc(e,0):Ul|=n),rc(e,t)}function Sc(e,t){0===t&&(0==(1&e.mode)?t=1:(t=ut,0==(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=Io(e,t))&&(yt(e,t,n),rc(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Sc(e,n)}function Rc(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(o(314))}null!==i&&i.delete(t),Sc(e,n)}function Ic(e,t){return Xe(e,t)}function Mc(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lc(e,t,n,i){return new Mc(e,t,n,i)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Lc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function jc(e,t,n,i,r,a){var s=2;if(i=e,"function"==typeof e)Dc(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case E:return Nc(n.children,r,a,t);case x:s=8,r|=8;break;case A:return(e=Lc(12,n,t,2|r)).elementType=A,e.lanes=a,e;case R:return(e=Lc(13,n,t,r)).elementType=R,e.lanes=a,e;case I:return(e=Lc(19,n,t,r)).elementType=I,e.lanes=a,e;case D:return Fc(n,r,a,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case C:s=10;break e;case S:s=9;break e;case T:s=11;break e;case M:s=14;break e;case L:s=16,i=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Lc(s,n,t,r)).elementType=e,t.type=i,t.lanes=a,t}function Nc(e,t,n,i){return(e=Lc(7,e,i,t)).lanes=n,e}function Fc(e,t,n,i){return(e=Lc(22,e,i,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function kc(e,t,n){return(e=Lc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Lc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,i,r,o,a,s,l){return e=new zc(e,t,n,s,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Lc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lo(o),e}function Gc(e){if(!e)return Sr;e:{if(Ge(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Lr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Lr(n))return jr(e,n,t)}return t}function Vc(e,t,n,i,r,o,a,s,l){return(e=Bc(n,i,!0,e,0,o,0,s,l)).context=Gc(null),n=e.current,(o=Oo(i=tc(),r=nc(n))).callback=null!=t?t:null,jo(n,o,r),e.current.lanes=r,yt(e,r,i),rc(e,i),e}function Hc(e,t,n,i){var r=t.current,o=tc(),a=nc(r);return n=Gc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Oo(o,a)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),null!==(e=jo(r,t,a))&&(ic(e,r,a,o),No(e,r,a)),a}function qc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Xc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}xl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Rr.current)_s=!0;else{if(0==(e.lanes&n)&&0==(128&t.flags))return _s=!1,function(e,t,n){switch(t.tag){case 3:Is(t),fo();break;case 5:aa(t);break;case 1:Lr(t.type)&&Nr(t);break;case 4:ra(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;Cr(vo,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(Cr(la,1&la.current),t.flags|=128,null):0!=(n&t.child.childLanes)?ks(e,t,n):(Cr(la,1&la.current),null!==(e=qs(e,t,n))?e.sibling:null);Cr(la,1&la.current);break;case 19:if(i=0!=(n&t.childLanes),0!=(128&e.flags)){if(i)return Vs(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Cr(la,la.current),i)break;return null;case 22:case 23:return t.lanes=0,As(e,t,n)}return qs(e,t,n)}(e,t,n);_s=0!=(131072&e.flags)}else _s=!1,ro&&0!=(1048576&t.flags)&&Qr(t,Wr,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Hs(e,t),e=t.pendingProps;var r=Mr(t,Tr.current);Ao(t,n),r=xa(null,t,i,e,r,n);var a=Aa();return t.flags|=1,"object"==typeof r&&null!==r&&"function"==typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Lr(i)?(a=!0,Nr(t)):a=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Lo(t),r.updater=Go,t.stateNode=r,r._reactInternals=t,Wo(t,i,e,n),t=Rs(null,t,i,!0,a,n)):(t.tag=0,ro&&a&&eo(t),ws(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Hs(e,t),e=t.pendingProps,i=(r=i._init)(i._payload),t.type=i,r=t.tag=function(e){if("function"==typeof e)return Dc(e)?1:0;if(null!=e){if((e=e.$$typeof)===T)return 11;if(e===M)return 14}return 2}(i),e=yo(i,e),r){case 0:t=Ss(null,t,i,e,n);break e;case 1:t=Ts(null,t,i,e,n);break e;case 11:t=Ps(null,t,i,e,n);break e;case 14:t=Es(null,t,i,yo(i.type,e),n);break e}throw Error(o(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,Ss(e,t,i,r=t.elementType===i?r:yo(i,r),n);case 1:return i=t.type,r=t.pendingProps,Ts(e,t,i,r=t.elementType===i?r:yo(i,r),n);case 3:e:{if(Is(t),null===e)throw Error(o(387));i=t.pendingProps,r=(a=t.memoizedState).element,Do(e,t),ko(t,i,null,n);var s=t.memoizedState;if(i=s.element,a.isDehydrated){if(a={element:i,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Ms(e,t,i,n,r=us(Error(o(423)),t));break e}if(i!==r){t=Ms(e,t,i,n,r=us(Error(o(424)),t));break e}for(io=cr(t.stateNode.containerInfo.firstChild),no=t,ro=!0,oo=null,n=$o(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fo(),i===r){t=qs(e,t,n);break e}ws(e,t,i,n)}t=t.child}return t;case 5:return aa(t),null===e&&co(t),i=t.type,r=t.pendingProps,a=null!==e?e.memoizedProps:null,s=r.children,nr(i,r)?s=null:null!==a&&nr(i,a)&&(t.flags|=32),Cs(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&co(t),null;case 13:return ks(e,t,n);case 4:return ra(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=Jo(t,null,i,n):ws(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,Ps(e,t,i,r=t.elementType===i?r:yo(i,r),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,a=t.memoizedProps,s=r.value,Cr(vo,i._currentValue),i._currentValue=s,null!==a)if(si(a.value,s)){if(a.children===r.children&&!Rr.current){t=qs(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===a.tag){(c=Oo(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),xo(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),xo(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}ws(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,Ao(t,n),i=i(r=Co(r)),t.flags|=1,ws(e,t,i,n),t.child;case 14:return r=yo(i=t.type,t.pendingProps),Es(e,t,i,r=yo(i.type,r),n);case 15:return xs(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:yo(i,r),Hs(e,t),t.tag=1,Lr(i)?(e=!0,Nr(t)):e=!1,Ao(t,n),Ho(t,i,r),Wo(t,i,r,n),Rs(null,t,i,!0,e,n);case 19:return Vs(e,t,n);case 22:return As(e,t,n)}throw Error(o(156,t.tag))};var Yc="function"==typeof reportError?reportError:function(e){console.error(e)};function Kc(e){this._internalRoot=e}function Zc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qc(){}function eu(e,t,n,i,r){var o=n._reactRootContainer;if(o){var a=o;if("function"==typeof r){var s=r;r=function(){var e=qc(a);s.call(e)}}Hc(t,a,e,r)}else a=function(e,t,n,i,r){if(r){if("function"==typeof i){var o=i;i=function(){var e=qc(a);o.call(e)}}var a=Vc(t,i,e,0,null,!1,0,"",Qc);return e._reactRootContainer=a,e[fr]=a.current,Gi(8===e.nodeType?e.parentNode:e),hc(),a}for(;r=e.lastChild;)e.removeChild(r);if("function"==typeof i){var s=i;i=function(){var e=qc(l);s.call(e)}}var l=Bc(e,0,!1,null,0,!1,0,"",Qc);return e._reactRootContainer=l,e[fr]=l.current,Gi(8===e.nodeType?e.parentNode:e),hc((function(){Hc(t,l,n,i)})),l}(n,t,e,r,i);return qc(a)}Zc.prototype.render=Kc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Hc(e,t,null,null)},Zc.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc((function(){Hc(null,e,null,null)})),t[fr]=null}},Zc.prototype.unstable_scheduleHydration=function(e){if(e){var t=xt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),rc(t,Je()),0==(6&Rl)&&(Vl=Je()+500,Gr()))}break;case 13:hc((function(){var t=Io(e,1);if(null!==t){var n=tc();ic(t,e,1,n)}})),Xc(e,1)}},Pt=function(e){if(13===e.tag){var t=Io(e,134217728);null!==t&&ic(t,e,134217728,tc()),Xc(e,134217728)}},Et=function(e){if(13===e.tag){var t=nc(e),n=Io(e,t);null!==n&&ic(n,e,t,tc()),Xc(e,t)}},xt=function(){return bt},At=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Pe=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=wr(i);if(!r)throw Error(o(90));X(i),$(i,r)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=uc,Re=hc;var tu={usingClientEntryPoint:!1,Events:[br,_r,wr,Ce,Se,uc]},nu={findFiberByHostInstance:vr,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},iu={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{rt=ru.inject(iu),ot=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(o(200));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:P,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(o(299));var n=!1,i="",r=Yc;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,i,r),e[fr]=t.current,Gi(8===e.nodeType?e.parentNode:e),new Kc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return hc(e)},t.hydrate=function(e,t,n){if(!$c(t))throw Error(o(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(o(405));var i=null!=n&&n.hydratedSources||null,r=!1,a="",s=Yc;if(null!=n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Vc(t,null,e,1,null!=n?n:null,r,0,a,s),e[fr]=t.current,Gi(e),i)for(e=0;e<i.length;e++)r=(r=(n=i[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Zc(t)},t.render=function(e,t,n){if(!$c(t))throw Error(o(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(o(40));return!!e._reactRootContainer&&(hc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[fr]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!$c(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return eu(e,t,n,!1,i)},t.version="18.2.0-next-9e3b772b8-20220608"},745:(e,t,n)=>{"use strict";var i=n(3935);t.s=i.createRoot,i.hydrateRoot},3935:(e,t,n)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(4448)},2408:(e,t)=>{"use strict";var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator,f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var _=b.prototype=new v;_.constructor=b,g(_,y.prototype),_.isPureReactComponent=!0;var w=Array.isArray,P=Object.prototype.hasOwnProperty,E={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function A(e,t,i){var r,o={},a=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)P.call(t,r)&&!x.hasOwnProperty(r)&&(o[r]=t[r]);var l=arguments.length-2;if(1===l)o.children=i;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===o[r]&&(o[r]=l[r]);return{$$typeof:n,type:e,key:a,ref:s,props:o,_owner:E.current}}function C(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var S=/\/+/g;function T(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function R(e,t,r,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case i:l=!0}}if(l)return a=a(l=e),e=""===o?"."+T(l,0):o,w(a)?(r="",null!=e&&(r=e.replace(S,"$&/")+"/"),R(a,t,r,"",(function(e){return e}))):null!=a&&(C(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,r+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(S,"$&/")+"/")+e)),t.push(a)),1;if(l=0,o=""===o?".":o+":",w(e))for(var c=0;c<e.length;c++){var u=o+T(s=e[c],c);l+=R(s,t,r,u,a)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"==typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=R(s=s.value,t,r,u=o+T(s,c++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function I(e,t,n){if(null==e)return e;var i=[],r=0;return R(e,i,"","",(function(e){return t.call(n,e,r++)})),i}function M(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var L={current:null},D={transition:null},O={ReactCurrentDispatcher:L,ReactCurrentBatchConfig:D,ReactCurrentOwner:E};t.Children={map:I,forEach:function(e,t,n){I(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return I(e,(function(){t++})),t},toArray:function(e){return I(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=r,t.Profiler=a,t.PureComponent=b,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,i){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=g({},e.props),o=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=E.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)P.call(t,c)&&!x.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=i;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:n,type:e.type,key:o,ref:a,props:r,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=A,t.createFactory=function(e){var t=A.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:M}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return L.current.useCallback(e,t)},t.useContext=function(e){return L.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return L.current.useDeferredValue(e)},t.useEffect=function(e,t){return L.current.useEffect(e,t)},t.useId=function(){return L.current.useId()},t.useImperativeHandle=function(e,t,n){return L.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return L.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return L.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return L.current.useMemo(e,t)},t.useReducer=function(e,t,n){return L.current.useReducer(e,t,n)},t.useRef=function(e){return L.current.useRef(e)},t.useState=function(e){return L.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return L.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return L.current.useTransition()},t.version="18.2.0"},7294:(e,t,n)=>{"use strict";e.exports=n(2408)},3697:(e,t,n)=>{"use strict";var i=n(5972).functionsHaveConfigurableNames(),r=Object,o=TypeError;e.exports=function(){if(null!=this&&this!==r(this))throw new o("RegExp.prototype.flags getter called on non-object");var e="";return this.hasIndices&&(e+="d"),this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),this.dotAll&&(e+="s"),this.unicode&&(e+="u"),this.sticky&&(e+="y"),e},i&&Object.defineProperty&&Object.defineProperty(e.exports,"name",{value:"get flags"})},2847:(e,t,n)=>{"use strict";var i=n(4289),r=n(5559),o=n(3697),a=n(1721),s=n(2753),l=r(a());i(l,{getPolyfill:a,implementation:o,shim:s}),e.exports=l},1721:(e,t,n)=>{"use strict";var i=n(3697),r=n(4289).supportsDescriptors,o=Object.getOwnPropertyDescriptor;e.exports=function(){if(r&&"gim"===/a/gim.flags){var e=o(RegExp.prototype,"flags");if(e&&"function"==typeof e.get&&"boolean"==typeof RegExp.prototype.dotAll&&"boolean"==typeof RegExp.prototype.hasIndices){var t="",n={};if(Object.defineProperty(n,"hasIndices",{get:function(){t+="d"}}),Object.defineProperty(n,"sticky",{get:function(){t+="y"}}),"dy"===t)return e.get}}return i}},2753:(e,t,n)=>{"use strict";var i=n(4289).supportsDescriptors,r=n(1721),o=Object.getOwnPropertyDescriptor,a=Object.defineProperty,s=TypeError,l=Object.getPrototypeOf,c=/a/;e.exports=function(){if(!i||!l)throw new s("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var e=r(),t=l(c),n=o(t,"flags");return n&&n.get===e||a(t,"flags",{configurable:!0,enumerable:!1,get:e}),e}},8639:function(e,t){!function(e){"use strict";const t=134217729;function n(e,t,n,i,r){let o,a,s,l,c=t[0],u=i[0],h=0,d=0;u>c==u>-c?(o=c,c=t[++h]):(o=u,u=i[++d]);let p=0;if(h<e&&d<n)for(u>c==u>-c?(s=o-((a=c+o)-c),c=t[++h]):(s=o-((a=u+o)-u),u=i[++d]),o=a,0!==s&&(r[p++]=s);h<e&&d<n;)u>c==u>-c?(s=o-((a=o+c)-(l=a-o))+(c-l),c=t[++h]):(s=o-((a=o+u)-(l=a-o))+(u-l),u=i[++d]),o=a,0!==s&&(r[p++]=s);for(;h<e;)s=o-((a=o+c)-(l=a-o))+(c-l),c=t[++h],o=a,0!==s&&(r[p++]=s);for(;d<n;)s=o-((a=o+u)-(l=a-o))+(u-l),u=i[++d],o=a,0!==s&&(r[p++]=s);return 0===o&&0!==p||(r[p++]=o),p}function i(e){return new Float64Array(e)}const r=i(4),o=i(8),a=i(12),s=i(16),l=i(4);e.orient2d=function(e,i,c,u,h,d){const p=(i-d)*(c-h),f=(e-h)*(u-d),g=p-f;if(0===p||0===f||p>0!=f>0)return g;const m=Math.abs(p+f);return Math.abs(g)>=33306690738754716e-32*m?g:-function(e,i,c,u,h,d,p){let f,g,m,y,v,b,_,w,P,E,x,A,C,S,T,R,I,M;const L=e-h,D=c-h,O=i-d,j=u-d;v=(T=(w=L-(_=(b=t*L)-(b-L)))*(E=j-(P=(b=t*j)-(b-j)))-((S=L*j)-_*P-w*P-_*E))-(x=T-(I=(w=O-(_=(b=t*O)-(b-O)))*(E=D-(P=(b=t*D)-(b-D)))-((R=O*D)-_*P-w*P-_*E))),r[0]=T-(x+v)+(v-I),v=(C=S-((A=S+x)-(v=A-S))+(x-v))-(x=C-R),r[1]=C-(x+v)+(v-R),v=(M=A+x)-A,r[2]=A-(M-v)+(x-v),r[3]=M;let N=function(e,t){let n=t[0];for(let e=1;e<4;e++)n+=t[e];return n}(0,r),F=22204460492503146e-32*p;if(N>=F||-N>=F)return N;if(f=e-(L+(v=e-L))+(v-h),m=c-(D+(v=c-D))+(v-h),g=i-(O+(v=i-O))+(v-d),y=u-(j+(v=u-j))+(v-d),0===f&&0===g&&0===m&&0===y)return N;if(F=11093356479670487e-47*p+33306690738754706e-32*Math.abs(N),(N+=L*y+j*f-(O*m+D*g))>=F||-N>=F)return N;v=(T=(w=f-(_=(b=t*f)-(b-f)))*(E=j-(P=(b=t*j)-(b-j)))-((S=f*j)-_*P-w*P-_*E))-(x=T-(I=(w=g-(_=(b=t*g)-(b-g)))*(E=D-(P=(b=t*D)-(b-D)))-((R=g*D)-_*P-w*P-_*E))),l[0]=T-(x+v)+(v-I),v=(C=S-((A=S+x)-(v=A-S))+(x-v))-(x=C-R),l[1]=C-(x+v)+(v-R),v=(M=A+x)-A,l[2]=A-(M-v)+(x-v),l[3]=M;const k=n(4,r,4,l,o);v=(T=(w=L-(_=(b=t*L)-(b-L)))*(E=y-(P=(b=t*y)-(b-y)))-((S=L*y)-_*P-w*P-_*E))-(x=T-(I=(w=O-(_=(b=t*O)-(b-O)))*(E=m-(P=(b=t*m)-(b-m)))-((R=O*m)-_*P-w*P-_*E))),l[0]=T-(x+v)+(v-I),v=(C=S-((A=S+x)-(v=A-S))+(x-v))-(x=C-R),l[1]=C-(x+v)+(v-R),v=(M=A+x)-A,l[2]=A-(M-v)+(x-v),l[3]=M;const U=n(k,o,4,l,a);v=(T=(w=f-(_=(b=t*f)-(b-f)))*(E=y-(P=(b=t*y)-(b-y)))-((S=f*y)-_*P-w*P-_*E))-(x=T-(I=(w=g-(_=(b=t*g)-(b-g)))*(E=m-(P=(b=t*m)-(b-m)))-((R=g*m)-_*P-w*P-_*E))),l[0]=T-(x+v)+(v-I),v=(C=S-((A=S+x)-(v=A-S))+(x-v))-(x=C-R),l[1]=C-(x+v)+(v-R),v=(M=A+x)-A,l[2]=A-(M-v)+(x-v),l[3]=M;const z=n(U,a,4,l,s);return s[z-1]}(e,i,c,u,h,d,m)},e.orient2dfast=function(e,t,n,i,r,o){return(t-o)*(n-r)-(e-r)*(i-o)},Object.defineProperty(e,"__esModule",{value:!0})}(t)},53:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<o(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,a=r>>>1;i<a;){var s=2*(i+1)-1,l=e[s],c=s+1,u=e[c];if(0>o(l,n))c<r&&0>o(u,l)?(e[i]=u,e[c]=n,i=c):(e[i]=l,e[s]=n,i=s);else{if(!(c<r&&0>o(u,n)))break e;e[i]=u,e[c]=n,i=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],h=1,d=null,p=3,f=!1,g=!1,m=!1,y="function"==typeof setTimeout?setTimeout:null,v="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function _(e){for(var t=i(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,n(c,t)}t=i(u)}}function w(e){if(m=!1,_(e),!g)if(null!==i(c))g=!0,D(P);else{var t=i(u);null!==t&&O(w,t.startTime-e)}}function P(e,n){g=!1,m&&(m=!1,v(C),C=-1),f=!0;var o=p;try{for(_(n),d=i(c);null!==d&&(!(d.expirationTime>n)||e&&!R());){var a=d.callback;if("function"==typeof a){d.callback=null,p=d.priorityLevel;var s=a(d.expirationTime<=n);n=t.unstable_now(),"function"==typeof s?d.callback=s:d===i(c)&&r(c),_(n)}else r(c);d=i(c)}if(null!==d)var l=!0;else{var h=i(u);null!==h&&O(w,h.startTime-n),l=!1}return l}finally{d=null,p=o,f=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,x=!1,A=null,C=-1,S=5,T=-1;function R(){return!(t.unstable_now()-T<S)}function I(){if(null!==A){var e=t.unstable_now();T=e;var n=!0;try{n=A(!0,e)}finally{n?E():(x=!1,A=null)}}else x=!1}if("function"==typeof b)E=function(){b(I)};else if("undefined"!=typeof MessageChannel){var M=new MessageChannel,L=M.port2;M.port1.onmessage=I,E=function(){L.postMessage(null)}}else E=function(){y(I,0)};function D(e){A=e,x||(x=!0,E())}function O(e,n){C=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||f||(g=!0,D(P))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,r,o){var a=t.unstable_now();switch(o="object"==typeof o&&null!==o&&"number"==typeof(o=o.delay)&&0<o?a+o:a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:r,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,n(u,e),null===i(c)&&e===i(u)&&(m?(v(C),C=-1):m=!0,O(w,o-a))):(e.sortIndex=s,n(c,e),g||f||(g=!0,D(P))),e},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},3840:(e,t,n)=>{"use strict";e.exports=n(53)},5697:e=>{"use strict";e.exports={eudist:function(e,t,n){for(var i=e.length,r=0,o=0;o<i;o++){var a=(e[o]||0)-(t[o]||0);r+=a*a}return n?Math.sqrt(r):r},mandist:function(e,t,n){for(var i=e.length,r=0,o=0;o<i;o++)r+=Math.abs((e[o]||0)-(t[o]||0));return n?Math.sqrt(r):r},dist:function(e,t,n){var i=Math.abs(e-t);return n?i:i*i}}},7035:(e,t,n)=>{"use strict";var i=n(5697),r=i.eudist,o=i.dist;e.exports={kmrand:function(e,t){for(var n={},i=[],r=t<<2,o=e.length,a=e[0].length>0;i.length<t&&r-- >0;){var s=e[Math.floor(Math.random()*o)],l=a?s.join("_"):""+s;n[l]||(n[l]=!0,i.push(s))}if(i.length<t)throw new Error("Error initializating clusters");return i},kmpp:function(e,t){var n=e[0].length?r:o,i=[],a=e.length,s=e[0].length>0,l=e[Math.floor(Math.random()*a)];for(s&&l.join("_"),i.push(l);i.length<t;){for(var c=[],u=i.length,h=0,d=[],p=0;p<a;p++){for(var f=1/0,g=0;g<u;g++){var m=n(e[p],i[g]);m<=f&&(f=m)}c[p]=f}for(var y=0;y<a;y++)h+=c[y];for(var v=0;v<a;v++)d[v]={i:v,v:e[v],pr:c[v]/h,cs:0};d.sort((function(e,t){return e.pr-t.pr})),d[0].cs=d[0].pr;for(var b=1;b<a;b++)d[b].cs=d[b-1].cs+d[b].pr;for(var _=Math.random(),w=0;w<a-1&&d[w++].cs<_;);i.push(d[w-1].v)}return i}}},1160:(e,t,n)=>{"use strict";var i=n(5697),r=n(7035),o=i.eudist,a=(i.mandist,i.dist,r.kmrand),s=r.kmpp;function l(e,t,n){n=n||[];for(var i=0;i<e;i++)n[i]=t;return n}e.exports=function(e,t,n,i){var r=[],c=[],u=[],h=[],d=!1,p=i||1e4,f=e.length,g=e[0].length,m=g>0,y=[];if(n)r="kmrand"==n?a(e,t):"kmpp"==n?s(e,t):n;else for(var v={};r.length<t;){var b=Math.floor(Math.random()*f);v[b]||(v[b]=!0,r.push(e[b]))}do{l(t,0,y);for(var _=0;_<f;_++){for(var w=1/0,P=0,E=0;E<t;E++)(h=m?o(e[_],r[E]):Math.abs(e[_]-r[E]))<=w&&(w=h,P=E);u[_]=P,y[P]++}for(var x=[],A=(c=[],0);A<t;A++)x[A]=m?l(g,0,x[A]):0,c[A]=r[A];if(m){for(var C=0;C<t;C++)r[C]=[];for(var S=0;S<f;S++)for(var T=x[u[S]],R=e[S],I=0;I<g;I++)T[I]+=R[I];d=!0;for(var M=0;M<t;M++){for(var L=r[M],D=x[M],O=c[M],j=y[M],N=0;N<g;N++)L[N]=D[N]/j||0;if(d)for(var F=0;F<g;F++)if(O[F]!=L[F]){d=!1;break}}}else{for(var k=0;k<f;k++)x[u[k]]+=e[k];for(var U=0;U<t;U++)r[U]=x[U]/y[U]||0;d=!0;for(var z=0;z<t;z++)if(c[z]!=r[z]){d=!1;break}}d=d||--p<=0}while(!d);return{it:1e4-p,k:t,idxs:u,centroids:r}}},3842:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});class i{constructor(e=[],t=r){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let e=(this.length>>1)-1;e>=0;e--)this._down(e)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:n}=this,i=t[e];for(;e>0;){const r=e-1>>1,o=t[r];if(n(i,o)>=0)break;t[e]=o,e=r}t[e]=i}_down(e){const{data:t,compare:n}=this,i=this.length>>1,r=t[e];for(;e<i;){let i=1+(e<<1),o=t[i];const a=i+1;if(a<this.length&&n(t[a],o)<0&&(i=a,o=t[a]),n(o,r)>=0)break;t[e]=o,e=i}t[e]=r}}function r(e,t){return e<t?-1:e>t?1:0}},675:function(e,t){!function(e){"use strict";function t(){}function n(e){this.message=e||""}function i(e){this.message=e||""}function r(e){this.message=e||""}function o(){}function a(e){return null===e?Oe:e.color}function s(e){return null===e?null:e.parent}function l(e,t){null!==e&&(e.color=t)}function c(e){return null===e?null:e.left}function u(e){return null===e?null:e.right}function h(){this.root_=null,this.size_=0}function d(){}function p(){this.array_=[],arguments[0]instanceof _e&&this.addAll(arguments[0])}function f(){}function g(e){this.message=e||""}function m(){this.array_=[]}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(e){if(null==this)throw new TypeError(this+" is not an object");var t=Object(this),n=Math.max(Math.min(t.length,9007199254740991),0)||0,i=1 in arguments&&parseInt(Number(arguments[1]),10)||0;i=i<0?Math.max(n+i,0):Math.min(i,n);var r=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(r=r<0?Math.max(n+arguments[2],0):Math.min(r,n);i<r;)t[i]=e,++i;return t},writable:!0}),Number.isFinite=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},Number.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(e){return e!=e},Math.trunc=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};var y=function(){};y.prototype.interfaces_=function(){return[]},y.prototype.getClass=function(){return y},y.prototype.equalsWithTolerance=function(e,t,n){return Math.abs(e-t)<=n};var v=function(e){function t(t){e.call(this,t),this.name="IllegalArgumentException",this.message=t,this.stack=(new e).stack}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error),b=function(){},_={MAX_VALUE:{configurable:!0}};b.isNaN=function(e){return Number.isNaN(e)},b.doubleToLongBits=function(e){return e},b.longBitsToDouble=function(e){return e},b.isInfinite=function(e){return!Number.isFinite(e)},_.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(b,_);var w=function(){},P=function(){},E=function(){},x=function e(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=e.NULL_ORDINATE;else if(1===arguments.length){var t=arguments[0];this.x=t.x,this.y=t.y,this.z=t.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=e.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},A={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};x.prototype.setOrdinate=function(e,t){switch(e){case x.X:this.x=t;break;case x.Y:this.y=t;break;case x.Z:this.z=t;break;default:throw new v("Invalid ordinate index: "+e)}},x.prototype.equals2D=function(){if(1===arguments.length){var e=arguments[0];return this.x===e.x&&this.y===e.y}if(2===arguments.length){var t=arguments[0],n=arguments[1];return!!y.equalsWithTolerance(this.x,t.x,n)&&!!y.equalsWithTolerance(this.y,t.y,n)}},x.prototype.getOrdinate=function(e){switch(e){case x.X:return this.x;case x.Y:return this.y;case x.Z:return this.z}throw new v("Invalid ordinate index: "+e)},x.prototype.equals3D=function(e){return this.x===e.x&&this.y===e.y&&(this.z===e.z||b.isNaN(this.z))&&b.isNaN(e.z)},x.prototype.equals=function(e){return e instanceof x&&this.equals2D(e)},x.prototype.equalInZ=function(e,t){return y.equalsWithTolerance(this.z,e.z,t)},x.prototype.compareTo=function(e){var t=e;return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0},x.prototype.clone=function(){},x.prototype.copy=function(){return new x(this)},x.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},x.prototype.distance3D=function(e){var t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return Math.sqrt(t*t+n*n+i*i)},x.prototype.distance=function(e){var t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)},x.prototype.hashCode=function(){var e=17;return 37*(e=37*e+x.hashCode(this.x))+x.hashCode(this.y)},x.prototype.setCoordinate=function(e){this.x=e.x,this.y=e.y,this.z=e.z},x.prototype.interfaces_=function(){return[w,P,t]},x.prototype.getClass=function(){return x},x.hashCode=function(){if(1===arguments.length){var e=arguments[0],t=b.doubleToLongBits(e);return Math.trunc((t^t)>>>32)}},A.DimensionalComparator.get=function(){return C},A.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},A.NULL_ORDINATE.get=function(){return b.NaN},A.X.get=function(){return 0},A.Y.get=function(){return 1},A.Z.get=function(){return 2},Object.defineProperties(x,A);var C=function(e){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(2!==t&&3!==t)throw new v("only 2 or 3 dimensions may be specified");this._dimensionsToTest=t}};C.prototype.compare=function(e,t){var n=e,i=t,r=C.compare(n.x,i.x);if(0!==r)return r;var o=C.compare(n.y,i.y);return 0!==o?o:this._dimensionsToTest<=2?0:C.compare(n.z,i.z)},C.prototype.interfaces_=function(){return[E]},C.prototype.getClass=function(){return C},C.compare=function(e,t){return e<t?-1:e>t?1:b.isNaN(e)?b.isNaN(t)?0:-1:b.isNaN(t)?1:0};var S=function(){};S.prototype.create=function(){},S.prototype.interfaces_=function(){return[]},S.prototype.getClass=function(){return S};var T=function(){},R={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};T.prototype.interfaces_=function(){return[]},T.prototype.getClass=function(){return T},T.toLocationSymbol=function(e){switch(e){case T.EXTERIOR:return"e";case T.BOUNDARY:return"b";case T.INTERIOR:return"i";case T.NONE:return"-"}throw new v("Unknown location value: "+e)},R.INTERIOR.get=function(){return 0},R.BOUNDARY.get=function(){return 1},R.EXTERIOR.get=function(){return 2},R.NONE.get=function(){return-1},Object.defineProperties(T,R);var I=function(e,t){return e.interfaces_&&e.interfaces_().indexOf(t)>-1},M=function(){},L={LOG_10:{configurable:!0}};M.prototype.interfaces_=function(){return[]},M.prototype.getClass=function(){return M},M.log10=function(e){var t=Math.log(e);return b.isInfinite(t)||b.isNaN(t)?t:t/M.LOG_10},M.min=function(e,t,n,i){var r=e;return t<r&&(r=t),n<r&&(r=n),i<r&&(r=i),r},M.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var e=arguments[0],t=arguments[1],n=arguments[2];return e<t?t:e>n?n:e}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var i=arguments[0],r=arguments[1],o=arguments[2];return i<r?r:i>o?o:i}},M.wrap=function(e,t){return e<0?t- -e%t:e%t},M.max=function(){if(3===arguments.length){var e=arguments[1],t=arguments[2],n=arguments[0];return e>n&&(n=e),t>n&&(n=t),n}if(4===arguments.length){var i=arguments[1],r=arguments[2],o=arguments[3],a=arguments[0];return i>a&&(a=i),r>a&&(a=r),o>a&&(a=o),a}},M.average=function(e,t){return(e+t)/2},L.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(M,L);var D=function(e){this.str=e};D.prototype.append=function(e){this.str+=e},D.prototype.setCharAt=function(e,t){this.str=this.str.substr(0,e)+t+this.str.substr(e+1)},D.prototype.toString=function(e){return this.str};var O=function(e){this.value=e};O.prototype.intValue=function(){return this.value},O.prototype.compareTo=function(e){return this.value<e?-1:this.value>e?1:0},O.isNaN=function(e){return Number.isNaN(e)};var j=function(){};j.isWhitespace=function(e){return e<=32&&e>=0||127===e},j.toUpperCase=function(e){return e.toUpperCase()};var N=function e(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length)if("number"==typeof arguments[0]){var t=arguments[0];this.init(t)}else if(arguments[0]instanceof e){var n=arguments[0];this.init(n)}else"string"==typeof arguments[0]&&e.call(this,e.parse(arguments[0]));else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.init(i,r)}},F={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};N.prototype.le=function(e){return(this._hi<e._hi||this._hi===e._hi)&&this._lo<=e._lo},N.prototype.extractSignificantDigits=function(e,t){var n=this.abs(),i=N.magnitude(n._hi),r=N.TEN.pow(i);(n=n.divide(r)).gt(N.TEN)?(n=n.divide(N.TEN),i+=1):n.lt(N.ONE)&&(n=n.multiply(N.TEN),i-=1);for(var o=i+1,a=new D,s=N.MAX_PRINT_DIGITS-1,l=0;l<=s;l++){e&&l===o&&a.append(".");var c=Math.trunc(n._hi);if(c<0)break;var u=!1,h=0;c>9?(u=!0,h="9"):h="0"+c,a.append(h),n=n.subtract(N.valueOf(c)).multiply(N.TEN),u&&n.selfAdd(N.TEN);var d=!0,p=N.magnitude(n._hi);if(p<0&&Math.abs(p)>=s-l&&(d=!1),!d)break}return t[0]=i,a.toString()},N.prototype.sqr=function(){return this.multiply(this)},N.prototype.doubleValue=function(){return this._hi+this._lo},N.prototype.subtract=function(){if(arguments[0]instanceof N){var e=arguments[0];return this.add(e.negate())}if("number"==typeof arguments[0]){var t=arguments[0];return this.add(-t)}},N.prototype.equals=function(){if(1===arguments.length){var e=arguments[0];return this._hi===e._hi&&this._lo===e._lo}},N.prototype.isZero=function(){return 0===this._hi&&0===this._lo},N.prototype.selfSubtract=function(){if(arguments[0]instanceof N){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e._hi,-e._lo)}if("number"==typeof arguments[0]){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t,0)}},N.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},N.prototype.min=function(e){return this.le(e)?this:e},N.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof N){var e=arguments[0];return this.selfDivide(e._hi,e._lo)}if("number"==typeof arguments[0]){var t=arguments[0];return this.selfDivide(t,0)}}else if(2===arguments.length){var n,i,r,o,a=arguments[0],s=arguments[1],l=null,c=null,u=null,h=null;return r=this._hi/a,h=(l=(u=N.SPLIT*r)-(l=u-r))*(c=(h=N.SPLIT*a)-(c=h-a))-(o=r*a)+l*(i=a-c)+(n=r-l)*c+n*i,h=r+(u=(this._hi-o-h+this._lo-r*s)/a),this._hi=h,this._lo=r-h+u,this}},N.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},N.prototype.divide=function(){if(arguments[0]instanceof N){var e,t,n,i,r=arguments[0],o=null,a=null,s=null,l=null;return e=(n=this._hi/r._hi)-(o=(s=N.SPLIT*n)-(o=s-n)),l=o*(a=(l=N.SPLIT*r._hi)-(a=l-r._hi))-(i=n*r._hi)+o*(t=r._hi-a)+e*a+e*t,s=(this._hi-i-l+this._lo-n*r._lo)/r._hi,new N(l=n+s,n-l+s)}if("number"==typeof arguments[0]){var c=arguments[0];return b.isNaN(c)?N.createNaN():N.copy(this).selfDivide(c,0)}},N.prototype.ge=function(e){return(this._hi>e._hi||this._hi===e._hi)&&this._lo>=e._lo},N.prototype.pow=function(e){if(0===e)return N.valueOf(1);var t=new N(this),n=N.valueOf(1),i=Math.abs(e);if(i>1)for(;i>0;)i%2==1&&n.selfMultiply(t),(i/=2)>0&&(t=t.sqr());else n=t;return e<0?n.reciprocal():n},N.prototype.ceil=function(){if(this.isNaN())return N.NaN;var e=Math.ceil(this._hi),t=0;return e===this._hi&&(t=Math.ceil(this._lo)),new N(e,t)},N.prototype.compareTo=function(e){var t=e;return this._hi<t._hi?-1:this._hi>t._hi?1:this._lo<t._lo?-1:this._lo>t._lo?1:0},N.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},N.prototype.setValue=function(){if(arguments[0]instanceof N){var e=arguments[0];return this.init(e),this}if("number"==typeof arguments[0]){var t=arguments[0];return this.init(t),this}},N.prototype.max=function(e){return this.ge(e)?this:e},N.prototype.sqrt=function(){if(this.isZero())return N.valueOf(0);if(this.isNegative())return N.NaN;var e=1/Math.sqrt(this._hi),t=this._hi*e,n=N.valueOf(t),i=this.subtract(n.sqr())._hi*(.5*e);return n.add(i)},N.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof N){var e=arguments[0];return this.selfAdd(e._hi,e._lo)}if("number"==typeof arguments[0]){var t,n,i,r,o,a=arguments[0],s=null;return s=(i=this._hi+a)-(r=i-this._hi),n=(o=(s=a-r+(this._hi-s))+this._lo)+(i-(t=i+o)),this._hi=t+n,this._lo=n+(t-this._hi),this}}else if(2===arguments.length){var l,c,u,h,d=arguments[0],p=arguments[1],f=null,g=null,m=null;u=this._hi+d,c=this._lo+p,g=u-(m=u-this._hi),f=c-(h=c-this._lo);var y=(l=u+(m=(g=d-m+(this._hi-g))+c))+(m=(f=p-h+(this._lo-f))+(m+(u-l))),v=m+(l-y);return this._hi=y,this._lo=v,this}},N.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof N){var e=arguments[0];return this.selfMultiply(e._hi,e._lo)}if("number"==typeof arguments[0]){var t=arguments[0];return this.selfMultiply(t,0)}}else if(2===arguments.length){var n,i,r=arguments[0],o=arguments[1],a=null,s=null,l=null,c=null;a=(l=N.SPLIT*this._hi)-this._hi,c=N.SPLIT*r,a=l-a,n=this._hi-a,s=c-r;var u=(l=this._hi*r)+(c=a*(s=c-s)-l+a*(i=r-s)+n*s+n*i+(this._hi*o+this._lo*r)),h=c+(a=l-u);return this._hi=u,this._lo=h,this}},N.prototype.selfSqr=function(){return this.selfMultiply(this)},N.prototype.floor=function(){if(this.isNaN())return N.NaN;var e=Math.floor(this._hi),t=0;return e===this._hi&&(t=Math.floor(this._lo)),new N(e,t)},N.prototype.negate=function(){return this.isNaN()?this:new N(-this._hi,-this._lo)},N.prototype.clone=function(){},N.prototype.multiply=function(){if(arguments[0]instanceof N){var e=arguments[0];return e.isNaN()?N.createNaN():N.copy(this).selfMultiply(e)}if("number"==typeof arguments[0]){var t=arguments[0];return b.isNaN(t)?N.createNaN():N.copy(this).selfMultiply(t,0)}},N.prototype.isNaN=function(){return b.isNaN(this._hi)},N.prototype.intValue=function(){return Math.trunc(this._hi)},N.prototype.toString=function(){var e=N.magnitude(this._hi);return e>=-3&&e<=20?this.toStandardNotation():this.toSciNotation()},N.prototype.toStandardNotation=function(){var e=this.getSpecialNumberString();if(null!==e)return e;var t=new Array(1).fill(null),n=this.extractSignificantDigits(!0,t),i=t[0]+1,r=n;if("."===n.charAt(0))r="0"+n;else if(i<0)r="0."+N.stringOfChar("0",-i)+n;else if(-1===n.indexOf(".")){var o=i-n.length;r=n+N.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+r:r},N.prototype.reciprocal=function(){var e,t,n,i,r=null,o=null,a=null,s=null;e=(n=1/this._hi)-(r=(a=N.SPLIT*n)-(r=a-n)),o=(s=N.SPLIT*this._hi)-this._hi;var l=n+(a=(1-(i=n*this._hi)-(s=r*(o=s-o)-i+r*(t=this._hi-o)+e*o+e*t)-n*this._lo)/this._hi);return new N(l,n-l+a)},N.prototype.toSciNotation=function(){if(this.isZero())return N.SCI_NOT_ZERO;var e=this.getSpecialNumberString();if(null!==e)return e;var t=new Array(1).fill(null),n=this.extractSignificantDigits(!1,t),i=N.SCI_NOT_EXPONENT_CHAR+t[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var r="";n.length>1&&(r=n.substring(1));var o=n.charAt(0)+"."+r;return this.isNegative()?"-"+o+i:o+i},N.prototype.abs=function(){return this.isNaN()?N.NaN:this.isNegative()?this.negate():new N(this)},N.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},N.prototype.lt=function(e){return(this._hi<e._hi||this._hi===e._hi)&&this._lo<e._lo},N.prototype.add=function(){if(arguments[0]instanceof N){var e=arguments[0];return N.copy(this).selfAdd(e)}if("number"==typeof arguments[0]){var t=arguments[0];return N.copy(this).selfAdd(t)}},N.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var e=arguments[0];this._hi=e,this._lo=0}else if(arguments[0]instanceof N){var t=arguments[0];this._hi=t._hi,this._lo=t._lo}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this._hi=n,this._lo=i}},N.prototype.gt=function(e){return(this._hi>e._hi||this._hi===e._hi)&&this._lo>e._lo},N.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},N.prototype.trunc=function(){return this.isNaN()?N.NaN:this.isPositive()?this.floor():this.ceil()},N.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},N.prototype.interfaces_=function(){return[t,w,P]},N.prototype.getClass=function(){return N},N.sqr=function(e){return N.valueOf(e).selfMultiply(e)},N.valueOf=function(){if("string"==typeof arguments[0]){var e=arguments[0];return N.parse(e)}if("number"==typeof arguments[0])return new N(arguments[0])},N.sqrt=function(e){return N.valueOf(e).sqrt()},N.parse=function(e){for(var t=0,n=e.length;j.isWhitespace(e.charAt(t));)t++;var i=!1;if(t<n){var r=e.charAt(t);"-"!==r&&"+"!==r||(t++,"-"===r&&(i=!0))}for(var o=new N,a=0,s=0,l=0;!(t>=n);){var c=e.charAt(t);if(t++,j.isDigit(c)){var u=c-"0";o.selfMultiply(N.TEN),o.selfAdd(u),a++}else{if("."!==c){if("e"===c||"E"===c){var h=e.substring(t);try{l=O.parseInt(h)}catch(t){throw t instanceof Error?new Error("Invalid exponent "+h+" in string "+e):t}break}throw new Error("Unexpected character '"+c+"' at position "+t+" in string "+e)}s=a}}var d=o,p=a-s-l;if(0===p)d=o;else if(p>0){var f=N.TEN.pow(p);d=o.divide(f)}else if(p<0){var g=N.TEN.pow(-p);d=o.multiply(g)}return i?d.negate():d},N.createNaN=function(){return new N(b.NaN,b.NaN)},N.copy=function(e){return new N(e)},N.magnitude=function(e){var t=Math.abs(e),n=Math.log(t)/Math.log(10),i=Math.trunc(Math.floor(n));return 10*Math.pow(10,i)<=t&&(i+=1),i},N.stringOfChar=function(e,t){for(var n=new D,i=0;i<t;i++)n.append(e);return n.toString()},F.PI.get=function(){return new N(3.141592653589793,12246467991473532e-32)},F.TWO_PI.get=function(){return new N(6.283185307179586,24492935982947064e-32)},F.PI_2.get=function(){return new N(1.5707963267948966,6123233995736766e-32)},F.E.get=function(){return new N(2.718281828459045,14456468917292502e-32)},F.NaN.get=function(){return new N(b.NaN,b.NaN)},F.EPS.get=function(){return 123259516440783e-46},F.SPLIT.get=function(){return 134217729},F.MAX_PRINT_DIGITS.get=function(){return 32},F.TEN.get=function(){return N.valueOf(10)},F.ONE.get=function(){return N.valueOf(1)},F.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},F.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(N,F);var k=function(){},U={DP_SAFE_EPSILON:{configurable:!0}};k.prototype.interfaces_=function(){return[]},k.prototype.getClass=function(){return k},k.orientationIndex=function(e,t,n){var i=k.orientationIndexFilter(e,t,n);if(i<=1)return i;var r=N.valueOf(t.x).selfAdd(-e.x),o=N.valueOf(t.y).selfAdd(-e.y),a=N.valueOf(n.x).selfAdd(-t.x),s=N.valueOf(n.y).selfAdd(-t.y);return r.selfMultiply(s).selfSubtract(o.selfMultiply(a)).signum()},k.signOfDet2x2=function(e,t,n,i){return e.multiply(i).selfSubtract(t.multiply(n)).signum()},k.intersection=function(e,t,n,i){var r=N.valueOf(i.y).selfSubtract(n.y).selfMultiply(N.valueOf(t.x).selfSubtract(e.x)),o=N.valueOf(i.x).selfSubtract(n.x).selfMultiply(N.valueOf(t.y).selfSubtract(e.y)),a=r.subtract(o),s=N.valueOf(i.x).selfSubtract(n.x).selfMultiply(N.valueOf(e.y).selfSubtract(n.y)),l=N.valueOf(i.y).selfSubtract(n.y).selfMultiply(N.valueOf(e.x).selfSubtract(n.x)),c=s.subtract(l).selfDivide(a).doubleValue(),u=N.valueOf(e.x).selfAdd(N.valueOf(t.x).selfSubtract(e.x).selfMultiply(c)).doubleValue(),h=N.valueOf(t.x).selfSubtract(e.x).selfMultiply(N.valueOf(e.y).selfSubtract(n.y)),d=N.valueOf(t.y).selfSubtract(e.y).selfMultiply(N.valueOf(e.x).selfSubtract(n.x)),p=h.subtract(d).selfDivide(a).doubleValue(),f=N.valueOf(n.y).selfAdd(N.valueOf(i.y).selfSubtract(n.y).selfMultiply(p)).doubleValue();return new x(u,f)},k.orientationIndexFilter=function(e,t,n){var i=null,r=(e.x-n.x)*(t.y-n.y),o=(e.y-n.y)*(t.x-n.x),a=r-o;if(r>0){if(o<=0)return k.signum(a);i=r+o}else{if(!(r<0))return k.signum(a);if(o>=0)return k.signum(a);i=-r-o}var s=k.DP_SAFE_EPSILON*i;return a>=s||-a>=s?k.signum(a):2},k.signum=function(e){return e>0?1:e<0?-1:0},U.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(k,U);var z=function(){},B={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};B.X.get=function(){return 0},B.Y.get=function(){return 1},B.Z.get=function(){return 2},B.M.get=function(){return 3},z.prototype.setOrdinate=function(e,t,n){},z.prototype.size=function(){},z.prototype.getOrdinate=function(e,t){},z.prototype.getCoordinate=function(){},z.prototype.getCoordinateCopy=function(e){},z.prototype.getDimension=function(){},z.prototype.getX=function(e){},z.prototype.clone=function(){},z.prototype.expandEnvelope=function(e){},z.prototype.copy=function(){},z.prototype.getY=function(e){},z.prototype.toCoordinateArray=function(){},z.prototype.interfaces_=function(){return[P]},z.prototype.getClass=function(){return z},Object.defineProperties(z,B);var G=function(){},V=function(e){function t(){e.call(this,"Projective point not representable on the Cartesian plane.")}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(G),H=function(){};H.arraycopy=function(e,t,n,i,r){for(var o=0,a=t;a<t+r;a++)n[i+o]=e[a],o++},H.getProperty=function(e){return{"line.separator":"\n"}[e]};var q=function e(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1];this.x=n,this.y=i,this.w=1}else if(arguments[0]instanceof e&&arguments[1]instanceof e){var r=arguments[0],o=arguments[1];this.x=r.y*o.w-o.y*r.w,this.y=o.x*r.w-r.x*o.w,this.w=r.x*o.y-o.x*r.y}else if(arguments[0]instanceof x&&arguments[1]instanceof x){var a=arguments[0],s=arguments[1];this.x=a.y-s.y,this.y=s.x-a.x,this.w=a.x*s.y-s.x*a.y}}else if(3===arguments.length){var l=arguments[0],c=arguments[1],u=arguments[2];this.x=l,this.y=c,this.w=u}else if(4===arguments.length){var h=arguments[0],d=arguments[1],p=arguments[2],f=arguments[3],g=h.y-d.y,m=d.x-h.x,y=h.x*d.y-d.x*h.y,v=p.y-f.y,b=f.x-p.x,_=p.x*f.y-f.x*p.y;this.x=m*_-b*y,this.y=v*y-g*_,this.w=g*b-v*m}};q.prototype.getY=function(){var e=this.y/this.w;if(b.isNaN(e)||b.isInfinite(e))throw new V;return e},q.prototype.getX=function(){var e=this.x/this.w;if(b.isNaN(e)||b.isInfinite(e))throw new V;return e},q.prototype.getCoordinate=function(){var e=new x;return e.x=this.getX(),e.y=this.getY(),e},q.prototype.interfaces_=function(){return[]},q.prototype.getClass=function(){return q},q.intersection=function(e,t,n,i){var r=e.y-t.y,o=t.x-e.x,a=e.x*t.y-t.x*e.y,s=n.y-i.y,l=i.x-n.x,c=n.x*i.y-i.x*n.y,u=r*l-s*o,h=(o*c-l*a)/u,d=(s*a-r*c)/u;if(b.isNaN(h)||b.isInfinite(h)||b.isNaN(d)||b.isInfinite(d))throw new V;return new x(h,d)};var W=function e(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof x){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof e){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.init(i.x,r.x,i.y,r.y)}else if(4===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],l=arguments[3];this.init(o,a,s,l)}},X={serialVersionUID:{configurable:!0}};W.prototype.getArea=function(){return this.getWidth()*this.getHeight()},W.prototype.equals=function(e){if(!(e instanceof W))return!1;var t=e;return this.isNull()?t.isNull():this._maxx===t.getMaxX()&&this._maxy===t.getMaxY()&&this._minx===t.getMinX()&&this._miny===t.getMinY()},W.prototype.intersection=function(e){if(this.isNull()||e.isNull()||!this.intersects(e))return new W;var t=this._minx>e._minx?this._minx:e._minx,n=this._miny>e._miny?this._miny:e._miny,i=this._maxx<e._maxx?this._maxx:e._maxx,r=this._maxy<e._maxy?this._maxy:e._maxy;return new W(t,i,n,r)},W.prototype.isNull=function(){return this._maxx<this._minx},W.prototype.getMaxX=function(){return this._maxx},W.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof x){var e=arguments[0];return this.covers(e.x,e.y)}if(arguments[0]instanceof W){var t=arguments[0];return!this.isNull()&&!t.isNull()&&t.getMinX()>=this._minx&&t.getMaxX()<=this._maxx&&t.getMinY()>=this._miny&&t.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&i>=this._miny&&i<=this._maxy}},W.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof W){var e=arguments[0];return!this.isNull()&&!e.isNull()&&!(e._minx>this._maxx||e._maxx<this._minx||e._miny>this._maxy||e._maxy<this._miny)}if(arguments[0]instanceof x){var t=arguments[0];return this.intersects(t.x,t.y)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||i>this._maxy||i<this._miny)}},W.prototype.getMinY=function(){return this._miny},W.prototype.getMinX=function(){return this._minx},W.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof x){var e=arguments[0];this.expandToInclude(e.x,e.y)}else if(arguments[0]instanceof W){var t=arguments[0];if(t.isNull())return null;this.isNull()?(this._minx=t.getMinX(),this._maxx=t.getMaxX(),this._miny=t.getMinY(),this._maxy=t.getMaxY()):(t._minx<this._minx&&(this._minx=t._minx),t._maxx>this._maxx&&(this._maxx=t._maxx),t._miny<this._miny&&(this._miny=t._miny),t._maxy>this._maxy&&(this._maxy=t._maxy))}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=i,this._maxy=i):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),i<this._miny&&(this._miny=i),i>this._maxy&&(this._maxy=i))}},W.prototype.minExtent=function(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return e<t?e:t},W.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},W.prototype.compareTo=function(e){var t=e;return this.isNull()?t.isNull()?0:-1:t.isNull()?1:this._minx<t._minx?-1:this._minx>t._minx?1:this._miny<t._miny?-1:this._miny>t._miny?1:this._maxx<t._maxx?-1:this._maxx>t._maxx?1:this._maxy<t._maxy?-1:this._maxy>t._maxy?1:0},W.prototype.translate=function(e,t){if(this.isNull())return null;this.init(this.getMinX()+e,this.getMaxX()+e,this.getMinY()+t,this.getMaxY()+t)},W.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},W.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},W.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},W.prototype.maxExtent=function(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return e>t?e:t},W.prototype.expandBy=function(){if(1===arguments.length){var e=arguments[0];this.expandBy(e,e)}else if(2===arguments.length){var t=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=t,this._maxx+=t,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},W.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof W){var e=arguments[0];return this.covers(e)}if(arguments[0]instanceof x){var t=arguments[0];return this.covers(t)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return this.covers(n,i)}},W.prototype.centre=function(){return this.isNull()?null:new x((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},W.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof x){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof W){var t=arguments[0];this._minx=t._minx,this._maxx=t._maxx,this._miny=t._miny,this._maxy=t._maxy}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];r<o?(this._minx=r,this._maxx=o):(this._minx=o,this._maxx=r),a<s?(this._miny=a,this._maxy=s):(this._miny=s,this._maxy=a)}},W.prototype.getMaxY=function(){return this._maxy},W.prototype.distance=function(e){if(this.intersects(e))return 0;var t=0;this._maxx<e._minx?t=e._minx-this._maxx:this._minx>e._maxx&&(t=this._minx-e._maxx);var n=0;return this._maxy<e._miny?n=e._miny-this._maxy:this._miny>e._maxy&&(n=this._miny-e._maxy),0===t?n:0===n?t:Math.sqrt(t*t+n*n)},W.prototype.hashCode=function(){var e=17;return 37*(e=37*(e=37*(e=37*e+x.hashCode(this._minx))+x.hashCode(this._maxx))+x.hashCode(this._miny))+x.hashCode(this._maxy)},W.prototype.interfaces_=function(){return[w,t]},W.prototype.getClass=function(){return W},W.intersects=function(){if(3===arguments.length){var e=arguments[0],t=arguments[1],n=arguments[2];return n.x>=(e.x<t.x?e.x:t.x)&&n.x<=(e.x>t.x?e.x:t.x)&&n.y>=(e.y<t.y?e.y:t.y)&&n.y<=(e.y>t.y?e.y:t.y)}if(4===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],a=arguments[3],s=Math.min(o.x,a.x),l=Math.max(o.x,a.x),c=Math.min(i.x,r.x),u=Math.max(i.x,r.x);return!(c>l||u<s||(s=Math.min(o.y,a.y),l=Math.max(o.y,a.y),c=Math.min(i.y,r.y),u=Math.max(i.y,r.y),c>l||u<s))}},X.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(W,X);var Y={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},K=function(e){this.geometryFactory=e||new yt};K.prototype.read=function(e){var t,n,i;e=e.replace(/[\n\r]/g," ");var r=Y.typeStr.exec(e);if(-1!==e.search("EMPTY")&&((r=Y.emptyTypeStr.exec(e))[2]=void 0),r&&(n=r[1].toLowerCase(),i=r[2],J[n]&&(t=J[n].apply(this,[i]))),void 0===t)throw new Error("Could not parse WKT "+e);return t},K.prototype.write=function(e){return this.extractGeometry(e)},K.prototype.extractGeometry=function(e){var t=e.getGeometryType().toLowerCase();if(!Z[t])return null;var n=t.toUpperCase();return e.isEmpty()?n+" EMPTY":n+"("+Z[t].apply(this,[e])+")"};var Z={coordinate:function(e){return e.x+" "+e.y},point:function(e){return Z.coordinate.call(this,e._coordinates._coordinates[0])},multipoint:function(e){for(var t=[],n=0,i=e._geometries.length;n<i;++n)t.push("("+Z.point.apply(this,[e._geometries[n]])+")");return t.join(",")},linestring:function(e){for(var t=[],n=0,i=e._points._coordinates.length;n<i;++n)t.push(Z.coordinate.apply(this,[e._points._coordinates[n]]));return t.join(",")},linearring:function(e){for(var t=[],n=0,i=e._points._coordinates.length;n<i;++n)t.push(Z.coordinate.apply(this,[e._points._coordinates[n]]));return t.join(",")},multilinestring:function(e){for(var t=[],n=0,i=e._geometries.length;n<i;++n)t.push("("+Z.linestring.apply(this,[e._geometries[n]])+")");return t.join(",")},polygon:function(e){var t=[];t.push("("+Z.linestring.apply(this,[e._shell])+")");for(var n=0,i=e._holes.length;n<i;++n)t.push("("+Z.linestring.apply(this,[e._holes[n]])+")");return t.join(",")},multipolygon:function(e){for(var t=[],n=0,i=e._geometries.length;n<i;++n)t.push("("+Z.polygon.apply(this,[e._geometries[n]])+")");return t.join(",")},geometrycollection:function(e){for(var t=[],n=0,i=e._geometries.length;n<i;++n)t.push(this.extractGeometry(e._geometries[n]));return t.join(",")}},J={point:function(e){if(void 0===e)return this.geometryFactory.createPoint();var t=e.trim().split(Y.spaces);return this.geometryFactory.createPoint(new x(Number.parseFloat(t[0]),Number.parseFloat(t[1])))},multipoint:function(e){if(void 0===e)return this.geometryFactory.createMultiPoint();for(var t,n=e.trim().split(","),i=[],r=0,o=n.length;r<o;++r)t=n[r].replace(Y.trimParens,"$1"),i.push(J.point.apply(this,[t]));return this.geometryFactory.createMultiPoint(i)},linestring:function(e){if(void 0===e)return this.geometryFactory.createLineString();for(var t,n=e.trim().split(","),i=[],r=0,o=n.length;r<o;++r)t=n[r].trim().split(Y.spaces),i.push(new x(Number.parseFloat(t[0]),Number.parseFloat(t[1])));return this.geometryFactory.createLineString(i)},linearring:function(e){if(void 0===e)return this.geometryFactory.createLinearRing();for(var t,n=e.trim().split(","),i=[],r=0,o=n.length;r<o;++r)t=n[r].trim().split(Y.spaces),i.push(new x(Number.parseFloat(t[0]),Number.parseFloat(t[1])));return this.geometryFactory.createLinearRing(i)},multilinestring:function(e){if(void 0===e)return this.geometryFactory.createMultiLineString();for(var t,n=e.trim().split(Y.parenComma),i=[],r=0,o=n.length;r<o;++r)t=n[r].replace(Y.trimParens,"$1"),i.push(J.linestring.apply(this,[t]));return this.geometryFactory.createMultiLineString(i)},polygon:function(e){if(void 0===e)return this.geometryFactory.createPolygon();for(var t,n,i,r,o=e.trim().split(Y.parenComma),a=[],s=0,l=o.length;s<l;++s)t=o[s].replace(Y.trimParens,"$1"),n=J.linestring.apply(this,[t]),i=this.geometryFactory.createLinearRing(n._points),0===s?r=i:a.push(i);return this.geometryFactory.createPolygon(r,a)},multipolygon:function(e){if(void 0===e)return this.geometryFactory.createMultiPolygon();for(var t,n=e.trim().split(Y.doubleParenComma),i=[],r=0,o=n.length;r<o;++r)t=n[r].replace(Y.trimParens,"$1"),i.push(J.polygon.apply(this,[t]));return this.geometryFactory.createMultiPolygon(i)},geometrycollection:function(e){if(void 0===e)return this.geometryFactory.createGeometryCollection();for(var t=(e=e.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],i=0,r=t.length;i<r;++i)n.push(this.read(t[i]));return this.geometryFactory.createGeometryCollection(n)}},$=function(e){this.parser=new K(e)};$.prototype.write=function(e){return this.parser.write(e)},$.toLineString=function(e,t){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+e.x+" "+e.y+", "+t.x+" "+t.y+" )"};var Q=function(e){function t(t){e.call(this,t),this.name="RuntimeException",this.message=t,this.stack=(new e).stack}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error),ee=function(e){function t(){if(e.call(this),0===arguments.length)e.call(this);else if(1===arguments.length){var t=arguments[0];e.call(this,t)}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Q),te=function(){};te.prototype.interfaces_=function(){return[]},te.prototype.getClass=function(){return te},te.shouldNeverReachHere=function(){if(0===arguments.length)te.shouldNeverReachHere(null);else if(1===arguments.length){var e=arguments[0];throw new ee("Should never reach here"+(null!==e?": "+e:""))}},te.isTrue=function(){var e,t;if(1===arguments.length)e=arguments[0],te.isTrue(e,null);else if(2===arguments.length&&(t=arguments[1],!(e=arguments[0])))throw null===t?new ee:new ee(t)},te.equals=function(){var e,t,n;if(2===arguments.length)e=arguments[0],t=arguments[1],te.equals(e,t,null);else if(3===arguments.length&&(e=arguments[0],n=arguments[2],!(t=arguments[1]).equals(e)))throw new ee("Expected "+e+" but encountered "+t+(null!==n?": "+n:""))};var ne=function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new x,this._intPt[1]=new x,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},ie={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};ne.prototype.getIndexAlongSegment=function(e,t){return this.computeIntLineIndex(),this._intLineIndex[e][t]},ne.prototype.getTopologySummary=function(){var e=new D;return this.isEndPoint()&&e.append(" endpoint"),this._isProper&&e.append(" proper"),this.isCollinear()&&e.append(" collinear"),e.toString()},ne.prototype.computeIntersection=function(e,t,n,i){this._inputLines[0][0]=e,this._inputLines[0][1]=t,this._inputLines[1][0]=n,this._inputLines[1][1]=i,this._result=this.computeIntersect(e,t,n,i)},ne.prototype.getIntersectionNum=function(){return this._result},ne.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var e=arguments[0];this.getEdgeDistance(e,0)>this.getEdgeDistance(e,1)?(this._intLineIndex[e][0]=0,this._intLineIndex[e][1]=1):(this._intLineIndex[e][0]=1,this._intLineIndex[e][1]=0)}},ne.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},ne.prototype.setPrecisionModel=function(e){this._precisionModel=e},ne.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var e=arguments[0],t=0;t<this._result;t++)if(!this._intPt[t].equals2D(this._inputLines[e][0])&&!this._intPt[t].equals2D(this._inputLines[e][1]))return!0;return!1}},ne.prototype.getIntersection=function(e){return this._intPt[e]},ne.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},ne.prototype.hasIntersection=function(){return this._result!==ne.NO_INTERSECTION},ne.prototype.getEdgeDistance=function(e,t){return ne.computeEdgeDistance(this._intPt[t],this._inputLines[e][0],this._inputLines[e][1])},ne.prototype.isCollinear=function(){return this._result===ne.COLLINEAR_INTERSECTION},ne.prototype.toString=function(){return $.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+$.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},ne.prototype.getEndpoint=function(e,t){return this._inputLines[e][t]},ne.prototype.isIntersection=function(e){for(var t=0;t<this._result;t++)if(this._intPt[t].equals2D(e))return!0;return!1},ne.prototype.getIntersectionAlongSegment=function(e,t){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[e][t]]},ne.prototype.interfaces_=function(){return[]},ne.prototype.getClass=function(){return ne},ne.computeEdgeDistance=function(e,t,n){var i=Math.abs(n.x-t.x),r=Math.abs(n.y-t.y),o=-1;if(e.equals(t))o=0;else if(e.equals(n))o=i>r?i:r;else{var a=Math.abs(e.x-t.x),s=Math.abs(e.y-t.y);0!==(o=i>r?a:s)||e.equals(t)||(o=Math.max(a,s))}return te.isTrue(!(0===o&&!e.equals(t)),"Bad distance calculation"),o},ne.nonRobustComputeEdgeDistance=function(e,t,n){var i=e.x-t.x,r=e.y-t.y,o=Math.sqrt(i*i+r*r);return te.isTrue(!(0===o&&!e.equals(t)),"Invalid distance calculation"),o},ie.DONT_INTERSECT.get=function(){return 0},ie.DO_INTERSECT.get=function(){return 1},ie.COLLINEAR.get=function(){return 2},ie.NO_INTERSECTION.get=function(){return 0},ie.POINT_INTERSECTION.get=function(){return 1},ie.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(ne,ie);var re=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.isInSegmentEnvelopes=function(e){var t=new W(this._inputLines[0][0],this._inputLines[0][1]),n=new W(this._inputLines[1][0],this._inputLines[1][1]);return t.contains(e)&&n.contains(e)},t.prototype.computeIntersection=function(){if(3!==arguments.length)return e.prototype.computeIntersection.apply(this,arguments);var t=arguments[0],n=arguments[1],i=arguments[2];if(this._isProper=!1,W.intersects(n,i,t)&&0===se.orientationIndex(n,i,t)&&0===se.orientationIndex(i,n,t))return this._isProper=!0,(t.equals(n)||t.equals(i))&&(this._isProper=!1),this._result=e.POINT_INTERSECTION,null;this._result=e.NO_INTERSECTION},t.prototype.normalizeToMinimum=function(e,t,n,i,r){r.x=this.smallestInAbsValue(e.x,t.x,n.x,i.x),r.y=this.smallestInAbsValue(e.y,t.y,n.y,i.y),e.x-=r.x,e.y-=r.y,t.x-=r.x,t.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y},t.prototype.safeHCoordinateIntersection=function(e,n,i,r){var o=null;try{o=q.intersection(e,n,i,r)}catch(a){if(!(a instanceof V))throw a;o=t.nearestEndpoint(e,n,i,r)}return o},t.prototype.intersection=function(e,n,i,r){var o=this.intersectionWithNormalization(e,n,i,r);return this.isInSegmentEnvelopes(o)||(o=new x(t.nearestEndpoint(e,n,i,r))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},t.prototype.smallestInAbsValue=function(e,t,n,i){var r=e,o=Math.abs(r);return Math.abs(t)<o&&(r=t,o=Math.abs(t)),Math.abs(n)<o&&(r=n,o=Math.abs(n)),Math.abs(i)<o&&(r=i),r},t.prototype.checkDD=function(e,t,n,i,r){var o=k.intersection(e,t,n,i),a=this.isInSegmentEnvelopes(o);H.out.println("DD in env = "+a+"  --------------------- "+o),r.distance(o)>1e-4&&H.out.println("Distance = "+r.distance(o))},t.prototype.intersectionWithNormalization=function(e,t,n,i){var r=new x(e),o=new x(t),a=new x(n),s=new x(i),l=new x;this.normalizeToEnvCentre(r,o,a,s,l);var c=this.safeHCoordinateIntersection(r,o,a,s);return c.x+=l.x,c.y+=l.y,c},t.prototype.computeCollinearIntersection=function(t,n,i,r){var o=W.intersects(t,n,i),a=W.intersects(t,n,r),s=W.intersects(i,r,t),l=W.intersects(i,r,n);return o&&a?(this._intPt[0]=i,this._intPt[1]=r,e.COLLINEAR_INTERSECTION):s&&l?(this._intPt[0]=t,this._intPt[1]=n,e.COLLINEAR_INTERSECTION):o&&s?(this._intPt[0]=i,this._intPt[1]=t,!i.equals(t)||a||l?e.COLLINEAR_INTERSECTION:e.POINT_INTERSECTION):o&&l?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||a||s?e.COLLINEAR_INTERSECTION:e.POINT_INTERSECTION):a&&s?(this._intPt[0]=r,this._intPt[1]=t,!r.equals(t)||o||l?e.COLLINEAR_INTERSECTION:e.POINT_INTERSECTION):a&&l?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||o||s?e.COLLINEAR_INTERSECTION:e.POINT_INTERSECTION):e.NO_INTERSECTION},t.prototype.normalizeToEnvCentre=function(e,t,n,i,r){var o=e.x<t.x?e.x:t.x,a=e.y<t.y?e.y:t.y,s=e.x>t.x?e.x:t.x,l=e.y>t.y?e.y:t.y,c=n.x<i.x?n.x:i.x,u=n.y<i.y?n.y:i.y,h=n.x>i.x?n.x:i.x,d=n.y>i.y?n.y:i.y,p=((o>c?o:c)+(s<h?s:h))/2,f=((a>u?a:u)+(l<d?l:d))/2;r.x=p,r.y=f,e.x-=r.x,e.y-=r.y,t.x-=r.x,t.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y},t.prototype.computeIntersect=function(t,n,i,r){if(this._isProper=!1,!W.intersects(t,n,i,r))return e.NO_INTERSECTION;var o=se.orientationIndex(t,n,i),a=se.orientationIndex(t,n,r);if(o>0&&a>0||o<0&&a<0)return e.NO_INTERSECTION;var s=se.orientationIndex(i,r,t),l=se.orientationIndex(i,r,n);return s>0&&l>0||s<0&&l<0?e.NO_INTERSECTION:0===o&&0===a&&0===s&&0===l?this.computeCollinearIntersection(t,n,i,r):(0===o||0===a||0===s||0===l?(this._isProper=!1,t.equals2D(i)||t.equals2D(r)?this._intPt[0]=t:n.equals2D(i)||n.equals2D(r)?this._intPt[0]=n:0===o?this._intPt[0]=new x(i):0===a?this._intPt[0]=new x(r):0===s?this._intPt[0]=new x(t):0===l&&(this._intPt[0]=new x(n))):(this._isProper=!0,this._intPt[0]=this.intersection(t,n,i,r)),e.POINT_INTERSECTION)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.nearestEndpoint=function(e,t,n,i){var r=e,o=se.distancePointLine(e,n,i),a=se.distancePointLine(t,n,i);return a<o&&(o=a,r=t),(a=se.distancePointLine(n,e,t))<o&&(o=a,r=n),(a=se.distancePointLine(i,e,t))<o&&(o=a,r=i),r},t}(ne),oe=function(){};oe.prototype.interfaces_=function(){return[]},oe.prototype.getClass=function(){return oe},oe.orientationIndex=function(e,t,n){var i=t.x-e.x,r=t.y-e.y,o=n.x-t.x,a=n.y-t.y;return oe.signOfDet2x2(i,r,o,a)},oe.signOfDet2x2=function(e,t,n,i){var r=null,o=null,a=null;if(r=1,0===e||0===i)return 0===t||0===n?0:t>0?n>0?-r:r:n>0?r:-r;if(0===t||0===n)return i>0?e>0?r:-r:e>0?-r:r;if(t>0?i>0?t<=i||(r=-r,o=e,e=n,n=o,o=t,t=i,i=o):t<=-i?(r=-r,n=-n,i=-i):(o=e,e=-n,n=o,o=t,t=-i,i=o):i>0?-t<=i?(r=-r,e=-e,t=-t):(o=-e,e=n,n=o,o=-t,t=i,i=o):t>=i?(e=-e,t=-t,n=-n,i=-i):(r=-r,o=-e,e=-n,n=o,o=-t,t=-i,i=o),e>0){if(!(n>0))return r;if(!(e<=n))return r}else{if(n>0)return-r;if(!(e>=n))return-r;r=-r,e=-e,n=-n}for(;;){if((i-=(a=Math.floor(n/e))*t)<0)return-r;if(i>t)return r;if(e>(n-=a*e)+n){if(t<i+i)return r}else{if(t>i+i)return-r;n=e-n,i=t-i,r=-r}if(0===i)return 0===n?0:-r;if(0===n)return r;if((t-=(a=Math.floor(e/n))*i)<0)return r;if(t>i)return-r;if(n>(e-=a*n)+e){if(i<t+t)return-r}else{if(i>t+t)return r;e=n-e,t=i-t,r=-r}if(0===t)return 0===e?0:r;if(0===e)return-r}};var ae=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var e=arguments[0];this._p=e};ae.prototype.countSegment=function(e,t){if(e.x<this._p.x&&t.x<this._p.x)return null;if(this._p.x===t.x&&this._p.y===t.y)return this._isPointOnSegment=!0,null;if(e.y===this._p.y&&t.y===this._p.y){var n=e.x,i=t.x;return n>i&&(n=t.x,i=e.x),this._p.x>=n&&this._p.x<=i&&(this._isPointOnSegment=!0),null}if(e.y>this._p.y&&t.y<=this._p.y||t.y>this._p.y&&e.y<=this._p.y){var r=e.x-this._p.x,o=e.y-this._p.y,a=t.x-this._p.x,s=t.y-this._p.y,l=oe.signOfDet2x2(r,o,a,s);if(0===l)return this._isPointOnSegment=!0,null;s<o&&(l=-l),l>0&&this._crossingCount++}},ae.prototype.isPointInPolygon=function(){return this.getLocation()!==T.EXTERIOR},ae.prototype.getLocation=function(){return this._isPointOnSegment?T.BOUNDARY:this._crossingCount%2==1?T.INTERIOR:T.EXTERIOR},ae.prototype.isOnSegment=function(){return this._isPointOnSegment},ae.prototype.interfaces_=function(){return[]},ae.prototype.getClass=function(){return ae},ae.locatePointInRing=function(){if(arguments[0]instanceof x&&I(arguments[1],z)){for(var e=arguments[1],t=new ae(arguments[0]),n=new x,i=new x,r=1;r<e.size();r++)if(e.getCoordinate(r,n),e.getCoordinate(r-1,i),t.countSegment(n,i),t.isOnSegment())return t.getLocation();return t.getLocation()}if(arguments[0]instanceof x&&arguments[1]instanceof Array){for(var o=arguments[1],a=new ae(arguments[0]),s=1;s<o.length;s++){var l=o[s],c=o[s-1];if(a.countSegment(l,c),a.isOnSegment())return a.getLocation()}return a.getLocation()}};var se=function(){},le={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};se.prototype.interfaces_=function(){return[]},se.prototype.getClass=function(){return se},se.orientationIndex=function(e,t,n){return k.orientationIndex(e,t,n)},se.signedArea=function(){if(arguments[0]instanceof Array){var e=arguments[0];if(e.length<3)return 0;for(var t=0,n=e[0].x,i=1;i<e.length-1;i++){var r=e[i].x-n,o=e[i+1].y;t+=r*(e[i-1].y-o)}return t/2}if(I(arguments[0],z)){var a=arguments[0],s=a.size();if(s<3)return 0;var l=new x,c=new x,u=new x;a.getCoordinate(0,c),a.getCoordinate(1,u);var h=c.x;u.x-=h;for(var d=0,p=1;p<s-1;p++)l.y=c.y,c.x=u.x,c.y=u.y,a.getCoordinate(p+1,u),u.x-=h,d+=c.x*(l.y-u.y);return d/2}},se.distanceLineLine=function(e,t,n,i){if(e.equals(t))return se.distancePointLine(e,n,i);if(n.equals(i))return se.distancePointLine(i,e,t);var r=!1;if(W.intersects(e,t,n,i)){var o=(t.x-e.x)*(i.y-n.y)-(t.y-e.y)*(i.x-n.x);if(0===o)r=!0;else{var a=(e.y-n.y)*(i.x-n.x)-(e.x-n.x)*(i.y-n.y),s=((e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y))/o,l=a/o;(l<0||l>1||s<0||s>1)&&(r=!0)}}else r=!0;return r?M.min(se.distancePointLine(e,n,i),se.distancePointLine(t,n,i),se.distancePointLine(n,e,t),se.distancePointLine(i,e,t)):0},se.isPointInRing=function(e,t){return se.locatePointInRing(e,t)!==T.EXTERIOR},se.computeLength=function(e){var t=e.size();if(t<=1)return 0;var n=0,i=new x;e.getCoordinate(0,i);for(var r=i.x,o=i.y,a=1;a<t;a++){e.getCoordinate(a,i);var s=i.x,l=i.y,c=s-r,u=l-o;n+=Math.sqrt(c*c+u*u),r=s,o=l}return n},se.isCCW=function(e){var t=e.length-1;if(t<3)throw new v("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=e[0],i=0,r=1;r<=t;r++){var o=e[r];o.y>n.y&&(n=o,i=r)}var a=i;do{(a-=1)<0&&(a=t)}while(e[a].equals2D(n)&&a!==i);var s=i;do{s=(s+1)%t}while(e[s].equals2D(n)&&s!==i);var l=e[a],c=e[s];if(l.equals2D(n)||c.equals2D(n)||l.equals2D(c))return!1;var u=se.computeOrientation(l,n,c);return 0===u?l.x>c.x:u>0},se.locatePointInRing=function(e,t){return ae.locatePointInRing(e,t)},se.distancePointLinePerpendicular=function(e,t,n){var i=(n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y),r=((t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y))/i;return Math.abs(r)*Math.sqrt(i)},se.computeOrientation=function(e,t,n){return se.orientationIndex(e,t,n)},se.distancePointLine=function(){if(2===arguments.length){var e=arguments[0],t=arguments[1];if(0===t.length)throw new v("Line array must contain at least one vertex");for(var n=e.distance(t[0]),i=0;i<t.length-1;i++){var r=se.distancePointLine(e,t[i],t[i+1]);r<n&&(n=r)}return n}if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];if(a.x===s.x&&a.y===s.y)return o.distance(a);var l=(s.x-a.x)*(s.x-a.x)+(s.y-a.y)*(s.y-a.y),c=((o.x-a.x)*(s.x-a.x)+(o.y-a.y)*(s.y-a.y))/l;if(c<=0)return o.distance(a);if(c>=1)return o.distance(s);var u=((a.y-o.y)*(s.x-a.x)-(a.x-o.x)*(s.y-a.y))/l;return Math.abs(u)*Math.sqrt(l)}},se.isOnLine=function(e,t){for(var n=new re,i=1;i<t.length;i++){var r=t[i-1],o=t[i];if(n.computeIntersection(e,r,o),n.hasIntersection())return!0}return!1},le.CLOCKWISE.get=function(){return-1},le.RIGHT.get=function(){return se.CLOCKWISE},le.COUNTERCLOCKWISE.get=function(){return 1},le.LEFT.get=function(){return se.COUNTERCLOCKWISE},le.COLLINEAR.get=function(){return 0},le.STRAIGHT.get=function(){return se.COLLINEAR},Object.defineProperties(se,le);var ce=function(){};ce.prototype.filter=function(e){},ce.prototype.interfaces_=function(){return[]},ce.prototype.getClass=function(){return ce};var ue=function(){var e=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=e,this._SRID=e.getSRID()},he={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};ue.prototype.isGeometryCollection=function(){return this.getSortIndex()===ue.SORTINDEX_GEOMETRYCOLLECTION},ue.prototype.getFactory=function(){return this._factory},ue.prototype.getGeometryN=function(e){return this},ue.prototype.getArea=function(){return 0},ue.prototype.isRectangle=function(){return!1},ue.prototype.equals=function(){if(arguments[0]instanceof ue){var e=arguments[0];return null!==e&&this.equalsTopo(e)}if(arguments[0]instanceof Object){var t=arguments[0];if(!(t instanceof ue))return!1;var n=t;return this.equalsExact(n)}},ue.prototype.equalsExact=function(e){return this===e||this.equalsExact(e,0)},ue.prototype.geometryChanged=function(){this.apply(ue.geometryChangedFilter)},ue.prototype.geometryChangedAction=function(){this._envelope=null},ue.prototype.equalsNorm=function(e){return null!==e&&this.norm().equalsExact(e.norm())},ue.prototype.getLength=function(){return 0},ue.prototype.getNumGeometries=function(){return 1},ue.prototype.compareTo=function(){if(1===arguments.length){var e=arguments[0],t=e;return this.getSortIndex()!==t.getSortIndex()?this.getSortIndex()-t.getSortIndex():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e)}if(2===arguments.length){var n=arguments[0],i=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,i)}},ue.prototype.getUserData=function(){return this._userData},ue.prototype.getSRID=function(){return this._SRID},ue.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},ue.prototype.checkNotGeometryCollection=function(e){if(e.getSortIndex()===ue.SORTINDEX_GEOMETRYCOLLECTION)throw new v("This method does not support GeometryCollection arguments")},ue.prototype.equal=function(e,t,n){return 0===n?e.equals(t):e.distance(t)<=n},ue.prototype.norm=function(){var e=this.copy();return e.normalize(),e},ue.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},ue.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new W(this._envelope)},ue.prototype.setSRID=function(e){this._SRID=e},ue.prototype.setUserData=function(e){this._userData=e},ue.prototype.compare=function(e,t){for(var n=e.iterator(),i=t.iterator();n.hasNext()&&i.hasNext();){var r=n.next(),o=i.next(),a=r.compareTo(o);if(0!==a)return a}return n.hasNext()?1:i.hasNext()?-1:0},ue.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},ue.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===ue.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===ue.SORTINDEX_MULTIPOINT||this.getSortIndex()===ue.SORTINDEX_MULTILINESTRING||this.getSortIndex()===ue.SORTINDEX_MULTIPOLYGON},ue.prototype.interfaces_=function(){return[P,w,t]},ue.prototype.getClass=function(){return ue},ue.hasNonEmptyElements=function(e){for(var t=0;t<e.length;t++)if(!e[t].isEmpty())return!0;return!1},ue.hasNullElements=function(e){for(var t=0;t<e.length;t++)if(null===e[t])return!0;return!1},he.serialVersionUID.get=function(){return 0x799ea46522854c00},he.SORTINDEX_POINT.get=function(){return 0},he.SORTINDEX_MULTIPOINT.get=function(){return 1},he.SORTINDEX_LINESTRING.get=function(){return 2},he.SORTINDEX_LINEARRING.get=function(){return 3},he.SORTINDEX_MULTILINESTRING.get=function(){return 4},he.SORTINDEX_POLYGON.get=function(){return 5},he.SORTINDEX_MULTIPOLYGON.get=function(){return 6},he.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},he.geometryChangedFilter.get=function(){return de},Object.defineProperties(ue,he);var de=function(){};de.interfaces_=function(){return[ce]},de.filter=function(e){e.geometryChangedAction()};var pe=function(){};pe.prototype.filter=function(e){},pe.prototype.interfaces_=function(){return[]},pe.prototype.getClass=function(){return pe};var fe=function(){},ge={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};fe.prototype.isInBoundary=function(e){},fe.prototype.interfaces_=function(){return[]},fe.prototype.getClass=function(){return fe},ge.Mod2BoundaryNodeRule.get=function(){return me},ge.EndPointBoundaryNodeRule.get=function(){return ye},ge.MultiValentEndPointBoundaryNodeRule.get=function(){return ve},ge.MonoValentEndPointBoundaryNodeRule.get=function(){return be},ge.MOD2_BOUNDARY_RULE.get=function(){return new me},ge.ENDPOINT_BOUNDARY_RULE.get=function(){return new ye},ge.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new ve},ge.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new be},ge.OGC_SFS_BOUNDARY_RULE.get=function(){return fe.MOD2_BOUNDARY_RULE},Object.defineProperties(fe,ge);var me=function(){};me.prototype.isInBoundary=function(e){return e%2==1},me.prototype.interfaces_=function(){return[fe]},me.prototype.getClass=function(){return me};var ye=function(){};ye.prototype.isInBoundary=function(e){return e>0},ye.prototype.interfaces_=function(){return[fe]},ye.prototype.getClass=function(){return ye};var ve=function(){};ve.prototype.isInBoundary=function(e){return e>1},ve.prototype.interfaces_=function(){return[fe]},ve.prototype.getClass=function(){return ve};var be=function(){};be.prototype.isInBoundary=function(e){return 1===e},be.prototype.interfaces_=function(){return[fe]},be.prototype.getClass=function(){return be};var _e=function(){};_e.prototype.add=function(){},_e.prototype.addAll=function(){},_e.prototype.isEmpty=function(){},_e.prototype.iterator=function(){},_e.prototype.size=function(){},_e.prototype.toArray=function(){},_e.prototype.remove=function(){},(n.prototype=new Error).name="IndexOutOfBoundsException";var we=function(){};we.prototype.hasNext=function(){},we.prototype.next=function(){},we.prototype.remove=function(){};var Pe=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(){},t.prototype.set=function(){},t.prototype.isEmpty=function(){},t}(_e);(i.prototype=new Error).name="NoSuchElementException";var Ee=function(e){function t(){e.call(this),this.array_=[],arguments[0]instanceof _e&&this.addAll(arguments[0])}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.ensureCapacity=function(){},t.prototype.interfaces_=function(){return[e,_e]},t.prototype.add=function(e){return 1===arguments.length?this.array_.push(e):this.array_.splice(arguments[0],arguments[1]),!0},t.prototype.clear=function(){this.array_=[]},t.prototype.addAll=function(e){for(var t=e.iterator();t.hasNext();)this.add(t.next());return!0},t.prototype.set=function(e,t){var n=this.array_[e];return this.array_[e]=t,n},t.prototype.iterator=function(){return new xe(this)},t.prototype.get=function(e){if(e<0||e>=this.size())throw new n;return this.array_[e]},t.prototype.isEmpty=function(){return 0===this.array_.length},t.prototype.size=function(){return this.array_.length},t.prototype.toArray=function(){for(var e=[],t=0,n=this.array_.length;t<n;t++)e.push(this.array_[t]);return e},t.prototype.remove=function(e){for(var t=!1,n=0,i=this.array_.length;n<i;n++)if(this.array_[n]===e){this.array_.splice(n,1),t=!0;break}return t},t}(Pe),xe=function(e){function t(t){e.call(this),this.arrayList_=t,this.position_=0}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new i;return this.arrayList_.get(this.position_++)},t.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},t.prototype.set=function(e){return this.arrayList_.set(this.position_-1,e)},t.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},t}(we),Ae=function(e){function t(){if(e.call(this),0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.ensureCapacity(t.length),this.add(t,!0)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.ensureCapacity(n.length),this.add(n,i)}}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},t.prototype.getCoordinate=function(e){return this.get(e)},t.prototype.addAll=function(){if(2===arguments.length){for(var t=arguments[1],n=!1,i=arguments[0].iterator();i.hasNext();)this.add(i.next(),t),n=!0;return n}return e.prototype.addAll.apply(this,arguments)},t.prototype.clone=function(){for(var t=e.prototype.clone.call(this),n=0;n<this.size();n++)t.add(n,this.get(n).copy());return t},t.prototype.toCoordinateArray=function(){return this.toArray(t.coordArrayType)},t.prototype.add=function(){if(1===arguments.length){var t=arguments[0];e.prototype.add.call(this,t)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var n=arguments[0],i=arguments[1];return this.add(n,i,!0),!0}if(arguments[0]instanceof x&&"boolean"==typeof arguments[1]){var r=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(r))return null;e.prototype.add.call(this,r)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1];return this.add(o,a),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var s=arguments[0],l=arguments[1];if(arguments[2])for(var c=0;c<s.length;c++)this.add(s[c],l);else for(var u=s.length-1;u>=0;u--)this.add(s[u],l);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof x){var h=arguments[0],d=arguments[1];if(!arguments[2]){var p=this.size();if(p>0){if(h>0&&this.get(h-1).equals2D(d))return null;if(h<p&&this.get(h).equals2D(d))return null}}e.prototype.add.call(this,h,d)}}else if(4===arguments.length){var f=arguments[0],g=arguments[1],m=arguments[2],y=arguments[3],v=1;m>y&&(v=-1);for(var b=m;b!==y;b+=v)this.add(f[b],g);return!0}},t.prototype.closeRing=function(){this.size()>0&&this.add(new x(this.get(0)),!1)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},Object.defineProperties(t,n),t}(Ee),Ce=function(){},Se={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Se.ForwardComparator.get=function(){return Te},Se.BidirectionalComparator.get=function(){return Re},Se.coordArrayType.get=function(){return new Array(0).fill(null)},Ce.prototype.interfaces_=function(){return[]},Ce.prototype.getClass=function(){return Ce},Ce.isRing=function(e){return!(e.length<4||!e[0].equals2D(e[e.length-1]))},Ce.ptNotInList=function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(Ce.indexOf(i,t)<0)return i}return null},Ce.scroll=function(e,t){var n=Ce.indexOf(t,e);if(n<0)return null;var i=new Array(e.length).fill(null);H.arraycopy(e,n,i,0,e.length-n),H.arraycopy(e,0,i,e.length-n,n),H.arraycopy(i,0,e,0,e.length)},Ce.equals=function(){if(2===arguments.length){var e=arguments[0],t=arguments[1];if(e===t)return!0;if(null===e||null===t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].equals(t[n]))return!1;return!0}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];if(i===r)return!0;if(null===i||null===r)return!1;if(i.length!==r.length)return!1;for(var a=0;a<i.length;a++)if(0!==o.compare(i[a],r[a]))return!1;return!0}},Ce.intersection=function(e,t){for(var n=new Ae,i=0;i<e.length;i++)t.intersects(e[i])&&n.add(e[i],!0);return n.toCoordinateArray()},Ce.hasRepeatedPoints=function(e){for(var t=1;t<e.length;t++)if(e[t-1].equals(e[t]))return!0;return!1},Ce.removeRepeatedPoints=function(e){return Ce.hasRepeatedPoints(e)?new Ae(e,!1).toCoordinateArray():e},Ce.reverse=function(e){for(var t=e.length-1,n=Math.trunc(t/2),i=0;i<=n;i++){var r=e[i];e[i]=e[t-i],e[t-i]=r}},Ce.removeNull=function(e){for(var t=0,n=0;n<e.length;n++)null!==e[n]&&t++;var i=new Array(t).fill(null);if(0===t)return i;for(var r=0,o=0;o<e.length;o++)null!==e[o]&&(i[r++]=e[o]);return i},Ce.copyDeep=function(){if(1===arguments.length){for(var e=arguments[0],t=new Array(e.length).fill(null),n=0;n<e.length;n++)t[n]=new x(e[n]);return t}if(5===arguments.length)for(var i=arguments[0],r=arguments[1],o=arguments[2],a=arguments[3],s=arguments[4],l=0;l<s;l++)o[a+l]=new x(i[r+l])},Ce.isEqualReversed=function(e,t){for(var n=0;n<e.length;n++){var i=e[n],r=t[e.length-n-1];if(0!==i.compareTo(r))return!1}return!0},Ce.envelope=function(e){for(var t=new W,n=0;n<e.length;n++)t.expandToInclude(e[n]);return t},Ce.toCoordinateArray=function(e){return e.toArray(Ce.coordArrayType)},Ce.atLeastNCoordinatesOrNothing=function(e,t){return t.length>=e?t:[]},Ce.indexOf=function(e,t){for(var n=0;n<t.length;n++)if(e.equals(t[n]))return n;return-1},Ce.increasingDirection=function(e){for(var t=0;t<Math.trunc(e.length/2);t++){var n=e.length-1-t,i=e[t].compareTo(e[n]);if(0!==i)return i}return 1},Ce.compare=function(e,t){for(var n=0;n<e.length&&n<t.length;){var i=e[n].compareTo(t[n]);if(0!==i)return i;n++}return n<t.length?-1:n<e.length?1:0},Ce.minCoordinate=function(e){for(var t=null,n=0;n<e.length;n++)(null===t||t.compareTo(e[n])>0)&&(t=e[n]);return t},Ce.extract=function(e,t,n){t=M.clamp(t,0,e.length);var i=(n=M.clamp(n,-1,e.length))-t+1;n<0&&(i=0),t>=e.length&&(i=0),n<t&&(i=0);var r=new Array(i).fill(null);if(0===i)return r;for(var o=0,a=t;a<=n;a++)r[o++]=e[a];return r},Object.defineProperties(Ce,Se);var Te=function(){};Te.prototype.compare=function(e,t){return Ce.compare(e,t)},Te.prototype.interfaces_=function(){return[E]},Te.prototype.getClass=function(){return Te};var Re=function(){};Re.prototype.compare=function(e,t){var n=e,i=t;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;var r=Ce.compare(n,i);return Ce.isEqualReversed(n,i)?0:r},Re.prototype.OLDcompare=function(e,t){var n=e,i=t;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;for(var r=Ce.increasingDirection(n),o=Ce.increasingDirection(i),a=r>0?0:n.length-1,s=o>0?0:n.length-1,l=0;l<n.length;l++){var c=n[a].compareTo(i[s]);if(0!==c)return c;a+=r,s+=o}return 0},Re.prototype.interfaces_=function(){return[E]},Re.prototype.getClass=function(){return Re};var Ie=function(){};Ie.prototype.get=function(){},Ie.prototype.put=function(){},Ie.prototype.size=function(){},Ie.prototype.values=function(){},Ie.prototype.entrySet=function(){};var Me=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Ie);(r.prototype=new Error).name="OperationNotSupported",(o.prototype=new _e).contains=function(){};var Le=function(e){function t(){e.call(this),this.array_=[],arguments[0]instanceof _e&&this.addAll(arguments[0])}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.contains=function(e){for(var t=0,n=this.array_.length;t<n;t++)if(this.array_[t]===e)return!0;return!1},t.prototype.add=function(e){return!this.contains(e)&&(this.array_.push(e),!0)},t.prototype.addAll=function(e){for(var t=e.iterator();t.hasNext();)this.add(t.next());return!0},t.prototype.remove=function(e){throw new Error},t.prototype.size=function(){return this.array_.length},t.prototype.isEmpty=function(){return 0===this.array_.length},t.prototype.toArray=function(){for(var e=[],t=0,n=this.array_.length;t<n;t++)e.push(this.array_[t]);return e},t.prototype.iterator=function(){return new De(this)},t}(o),De=function(e){function t(t){e.call(this),this.hashSet_=t,this.position_=0}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new i;return this.hashSet_.array_[this.position_++]},t.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},t.prototype.remove=function(){throw new r},t}(we),Oe=0;(h.prototype=new Me).get=function(e){for(var t=this.root_;null!==t;){var n=e.compareTo(t.key);if(n<0)t=t.left;else{if(!(n>0))return t.value;t=t.right}}return null},h.prototype.put=function(e,t){if(null===this.root_)return this.root_={key:e,value:t,left:null,right:null,parent:null,color:Oe,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,i,r=this.root_;do{if(n=r,(i=e.compareTo(r.key))<0)r=r.left;else{if(!(i>0)){var o=r.value;return r.value=t,o}r=r.right}}while(null!==r);var a={key:e,left:null,right:null,value:t,parent:n,color:Oe,getValue:function(){return this.value},getKey:function(){return this.key}};return i<0?n.left=a:n.right=a,this.fixAfterInsertion(a),this.size_++,null},h.prototype.fixAfterInsertion=function(e){for(e.color=1;null!=e&&e!==this.root_&&1===e.parent.color;)if(s(e)===c(s(s(e)))){var t=u(s(s(e)));1===a(t)?(l(s(e),Oe),l(t,Oe),l(s(s(e)),1),e=s(s(e))):(e===u(s(e))&&(e=s(e),this.rotateLeft(e)),l(s(e),Oe),l(s(s(e)),1),this.rotateRight(s(s(e))))}else{var n=c(s(s(e)));1===a(n)?(l(s(e),Oe),l(n,Oe),l(s(s(e)),1),e=s(s(e))):(e===c(s(e))&&(e=s(e),this.rotateRight(e)),l(s(e),Oe),l(s(s(e)),1),this.rotateLeft(s(s(e))))}this.root_.color=Oe},h.prototype.values=function(){var e=new Ee,t=this.getFirstEntry();if(null!==t)for(e.add(t.value);null!==(t=h.successor(t));)e.add(t.value);return e},h.prototype.entrySet=function(){var e=new Le,t=this.getFirstEntry();if(null!==t)for(e.add(t);null!==(t=h.successor(t));)e.add(t);return e},h.prototype.rotateLeft=function(e){if(null!=e){var t=e.right;e.right=t.left,null!=t.left&&(t.left.parent=e),t.parent=e.parent,null===e.parent?this.root_=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}},h.prototype.rotateRight=function(e){if(null!=e){var t=e.left;e.left=t.right,null!=t.right&&(t.right.parent=e),t.parent=e.parent,null===e.parent?this.root_=t:e.parent.right===e?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}},h.prototype.getFirstEntry=function(){var e=this.root_;if(null!=e)for(;null!=e.left;)e=e.left;return e},h.successor=function(e){if(null===e)return null;if(null!==e.right){for(var t=e.right;null!==t.left;)t=t.left;return t}for(var n=e.parent,i=e;null!==n&&i===n.right;)i=n,n=n.parent;return n},h.prototype.size=function(){return this.size_};var je=function(){};je.prototype.interfaces_=function(){return[]},je.prototype.getClass=function(){return je},d.prototype=new o,(p.prototype=new d).contains=function(e){for(var t=0,n=this.array_.length;t<n;t++)if(0===this.array_[t].compareTo(e))return!0;return!1},p.prototype.add=function(e){if(this.contains(e))return!1;for(var t=0,n=this.array_.length;t<n;t++)if(1===this.array_[t].compareTo(e))return this.array_.splice(t,0,e),!0;return this.array_.push(e),!0},p.prototype.addAll=function(e){for(var t=e.iterator();t.hasNext();)this.add(t.next());return!0},p.prototype.remove=function(e){throw new r},p.prototype.size=function(){return this.array_.length},p.prototype.isEmpty=function(){return 0===this.array_.length},p.prototype.toArray=function(){for(var e=[],t=0,n=this.array_.length;t<n;t++)e.push(this.array_[t]);return e},p.prototype.iterator=function(){return new Ne(this)};var Ne=function(e){this.treeSet_=e,this.position_=0};Ne.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new i;return this.treeSet_.array_[this.position_++]},Ne.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Ne.prototype.remove=function(){throw new r};var Fe=function(){};Fe.sort=function(){var e,t,n,i,r=arguments[0];if(1===arguments.length)i=function(e,t){return e.compareTo(t)},r.sort(i);else if(2===arguments.length)n=arguments[1],i=function(e,t){return n.compare(e,t)},r.sort(i);else if(3===arguments.length){(t=r.slice(arguments[1],arguments[2])).sort();var o=r.slice(0,arguments[1]).concat(t,r.slice(arguments[2],r.length));for(r.splice(0,r.length),e=0;e<o.length;e++)r.push(o[e])}else if(4===arguments.length)for(t=r.slice(arguments[1],arguments[2]),n=arguments[3],i=function(e,t){return n.compare(e,t)},t.sort(i),o=r.slice(0,arguments[1]).concat(t,r.slice(arguments[2],r.length)),r.splice(0,r.length),e=0;e<o.length;e++)r.push(o[e])},Fe.asList=function(e){for(var t=new Ee,n=0,i=e.length;n<i;n++)t.add(e[n]);return t};var ke=function(){},Ue={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Ue.P.get=function(){return 0},Ue.L.get=function(){return 1},Ue.A.get=function(){return 2},Ue.FALSE.get=function(){return-1},Ue.TRUE.get=function(){return-2},Ue.DONTCARE.get=function(){return-3},Ue.SYM_FALSE.get=function(){return"F"},Ue.SYM_TRUE.get=function(){return"T"},Ue.SYM_DONTCARE.get=function(){return"*"},Ue.SYM_P.get=function(){return"0"},Ue.SYM_L.get=function(){return"1"},Ue.SYM_A.get=function(){return"2"},ke.prototype.interfaces_=function(){return[]},ke.prototype.getClass=function(){return ke},ke.toDimensionSymbol=function(e){switch(e){case ke.FALSE:return ke.SYM_FALSE;case ke.TRUE:return ke.SYM_TRUE;case ke.DONTCARE:return ke.SYM_DONTCARE;case ke.P:return ke.SYM_P;case ke.L:return ke.SYM_L;case ke.A:return ke.SYM_A}throw new v("Unknown dimension value: "+e)},ke.toDimensionValue=function(e){switch(j.toUpperCase(e)){case ke.SYM_FALSE:return ke.FALSE;case ke.SYM_TRUE:return ke.TRUE;case ke.SYM_DONTCARE:return ke.DONTCARE;case ke.SYM_P:return ke.P;case ke.SYM_L:return ke.L;case ke.SYM_A:return ke.A}throw new v("Unknown dimension symbol: "+e)},Object.defineProperties(ke,Ue);var ze=function(){};ze.prototype.filter=function(e){},ze.prototype.interfaces_=function(){return[]},ze.prototype.getClass=function(){return ze};var Be=function(){};Be.prototype.filter=function(e,t){},Be.prototype.isDone=function(){},Be.prototype.isGeometryChanged=function(){},Be.prototype.interfaces_=function(){return[]},Be.prototype.getClass=function(){return Be};var Ge=function(e){function t(t,n){if(e.call(this,n),this._geometries=t||[],e.hasNullElements(this._geometries))throw new v("geometries must not contain null elements")}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){for(var e=new W,t=0;t<this._geometries.length;t++)e.expandToInclude(this._geometries[t].getEnvelopeInternal());return e},t.prototype.getGeometryN=function(e){return this._geometries[e]},t.prototype.getSortIndex=function(){return e.SORTINDEX_GEOMETRYCOLLECTION},t.prototype.getCoordinates=function(){for(var e=new Array(this.getNumPoints()).fill(null),t=-1,n=0;n<this._geometries.length;n++)for(var i=this._geometries[n].getCoordinates(),r=0;r<i.length;r++)e[++t]=i[r];return e},t.prototype.getArea=function(){for(var e=0,t=0;t<this._geometries.length;t++)e+=this._geometries[t].getArea();return e},t.prototype.equalsExact=function(){if(2===arguments.length){var t=arguments[0],n=arguments[1];if(!this.isEquivalentClass(t))return!1;var i=t;if(this._geometries.length!==i._geometries.length)return!1;for(var r=0;r<this._geometries.length;r++)if(!this._geometries[r].equalsExact(i._geometries[r],n))return!1;return!0}return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){for(var e=0;e<this._geometries.length;e++)this._geometries[e].normalize();Fe.sort(this._geometries)},t.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},t.prototype.getBoundaryDimension=function(){for(var e=ke.FALSE,t=0;t<this._geometries.length;t++)e=Math.max(e,this._geometries[t].getBoundaryDimension());return e},t.prototype.getDimension=function(){for(var e=ke.FALSE,t=0;t<this._geometries.length;t++)e=Math.max(e,this._geometries[t].getDimension());return e},t.prototype.getLength=function(){for(var e=0,t=0;t<this._geometries.length;t++)e+=this._geometries[t].getLength();return e},t.prototype.getNumPoints=function(){for(var e=0,t=0;t<this._geometries.length;t++)e+=this._geometries[t].getNumPoints();return e},t.prototype.getNumGeometries=function(){return this._geometries.length},t.prototype.reverse=function(){for(var e=this._geometries.length,t=new Array(e).fill(null),n=0;n<this._geometries.length;n++)t[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(t)},t.prototype.compareToSameClass=function(){if(1===arguments.length){var e=arguments[0],t=new p(Fe.asList(this._geometries)),n=new p(Fe.asList(e._geometries));return this.compare(t,n)}if(2===arguments.length){for(var i=arguments[1],r=arguments[0],o=this.getNumGeometries(),a=r.getNumGeometries(),s=0;s<o&&s<a;){var l=this.getGeometryN(s),c=r.getGeometryN(s),u=l.compareToSameClass(c,i);if(0!==u)return u;s++}return s<o?1:s<a?-1:0}},t.prototype.apply=function(){if(I(arguments[0],pe))for(var e=arguments[0],t=0;t<this._geometries.length;t++)this._geometries[t].apply(e);else if(I(arguments[0],Be)){var n=arguments[0];if(0===this._geometries.length)return null;for(var i=0;i<this._geometries.length&&(this._geometries[i].apply(n),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else if(I(arguments[0],ze)){var r=arguments[0];r.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(r)}else if(I(arguments[0],ce)){var a=arguments[0];a.filter(this);for(var s=0;s<this._geometries.length;s++)this._geometries[s].apply(a)}},t.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),te.shouldNeverReachHere(),null},t.prototype.clone=function(){var t=e.prototype.clone.call(this);t._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)t._geometries[n]=this._geometries[n].clone();return t},t.prototype.getGeometryType=function(){return"GeometryCollection"},t.prototype.copy=function(){for(var e=new Array(this._geometries.length).fill(null),n=0;n<e.length;n++)e[n]=this._geometries[n].copy();return new t(e,this._factory)},t.prototype.isEmpty=function(){for(var e=0;e<this._geometries.length;e++)if(!this._geometries[e].isEmpty())return!1;return!0},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(t,n),t}(ue),Ve=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return ue.SORTINDEX_MULTILINESTRING},t.prototype.equalsExact=function(){if(2===arguments.length){var t=arguments[0],n=arguments[1];return!!this.isEquivalentClass(t)&&e.prototype.equalsExact.call(this,t,n)}return e.prototype.equalsExact.apply(this,arguments)},t.prototype.getBoundaryDimension=function(){return this.isClosed()?ke.FALSE:0},t.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var e=0;e<this._geometries.length;e++)if(!this._geometries[e].isClosed())return!1;return!0},t.prototype.getDimension=function(){return 1},t.prototype.reverse=function(){for(var e=this._geometries.length,t=new Array(e).fill(null),n=0;n<this._geometries.length;n++)t[e-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(t)},t.prototype.getBoundary=function(){return new He(this).getBoundary()},t.prototype.getGeometryType=function(){return"MultiLineString"},t.prototype.copy=function(){for(var e=new Array(this._geometries.length).fill(null),n=0;n<e.length;n++)e[n]=this._geometries[n].copy();return new t(e,this._factory)},t.prototype.interfaces_=function(){return[je]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(t,n),t}(Ge),He=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var e=arguments[0],t=fe.MOD2_BOUNDARY_RULE;this._geom=e,this._geomFact=e.getFactory(),this._bnRule=t}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=i}};He.prototype.boundaryMultiLineString=function(e){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var t=this.computeBoundaryCoordinates(e);return 1===t.length?this._geomFact.createPoint(t[0]):this._geomFact.createMultiPointFromCoords(t)},He.prototype.getBoundary=function(){return this._geom instanceof Ke?this.boundaryLineString(this._geom):this._geom instanceof Ve?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},He.prototype.boundaryLineString=function(e){return this._geom.isEmpty()?this.getEmptyMultiPoint():e.isClosed()?this._bnRule.isInBoundary(2)?e.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([e.getStartPoint(),e.getEndPoint()])},He.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},He.prototype.computeBoundaryCoordinates=function(e){var t=new Ee;this._endpointMap=new h;for(var n=0;n<e.getNumGeometries();n++){var i=e.getGeometryN(n);0!==i.getNumPoints()&&(this.addEndpoint(i.getCoordinateN(0)),this.addEndpoint(i.getCoordinateN(i.getNumPoints()-1)))}for(var r=this._endpointMap.entrySet().iterator();r.hasNext();){var o=r.next(),a=o.getValue().count;this._bnRule.isInBoundary(a)&&t.add(o.getKey())}return Ce.toCoordinateArray(t)},He.prototype.addEndpoint=function(e){var t=this._endpointMap.get(e);null===t&&(t=new qe,this._endpointMap.put(e,t)),t.count++},He.prototype.interfaces_=function(){return[]},He.prototype.getClass=function(){return He},He.getBoundary=function(){return 1===arguments.length?new He(arguments[0]).getBoundary():2===arguments.length?new He(arguments[0],arguments[1]).getBoundary():void 0};var qe=function(){this.count=null};qe.prototype.interfaces_=function(){return[]},qe.prototype.getClass=function(){return qe};var We=function(){},Xe={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};We.prototype.interfaces_=function(){return[]},We.prototype.getClass=function(){return We},We.chars=function(e,t){for(var n=new Array(t).fill(null),i=0;i<t;i++)n[i]=e;return String(n)},We.getStackTrace=function(){if(1===arguments.length){var e=arguments[0],t=new function(){},n=new function(){}(t);return e.printStackTrace(n),t.toString()}if(2===arguments.length){for(var i=arguments[0],r=arguments[1],o="",a=new function(){}(new function(){}(We.getStackTrace(i))),s=0;s<r;s++)try{o+=a.readLine()+We.NEWLINE}catch(e){if(!(e instanceof f))throw e;te.shouldNeverReachHere()}return o}},We.split=function(e,t){for(var n=t.length,i=new Ee,r=""+e,o=r.indexOf(t);o>=0;){var a=r.substring(0,o);i.add(a),o=(r=r.substring(o+n)).indexOf(t)}r.length>0&&i.add(r);for(var s=new Array(i.size()).fill(null),l=0;l<s.length;l++)s[l]=i.get(l);return s},We.toString=function(){if(1===arguments.length){var e=arguments[0];return We.SIMPLE_ORDINATE_FORMAT.format(e)}},We.spaces=function(e){return We.chars(" ",e)},Xe.NEWLINE.get=function(){return H.getProperty("line.separator")},Xe.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(We,Xe);var Ye=function(){};Ye.prototype.interfaces_=function(){return[]},Ye.prototype.getClass=function(){return Ye},Ye.copyCoord=function(e,t,n,i){for(var r=Math.min(e.getDimension(),n.getDimension()),o=0;o<r;o++)n.setOrdinate(i,o,e.getOrdinate(t,o))},Ye.isRing=function(e){var t=e.size();return 0===t||!(t<=3)&&e.getOrdinate(0,z.X)===e.getOrdinate(t-1,z.X)&&e.getOrdinate(0,z.Y)===e.getOrdinate(t-1,z.Y)},Ye.isEqual=function(e,t){var n=e.size();if(n!==t.size())return!1;for(var i=Math.min(e.getDimension(),t.getDimension()),r=0;r<n;r++)for(var o=0;o<i;o++){var a=e.getOrdinate(r,o),s=t.getOrdinate(r,o);if(!(e.getOrdinate(r,o)===t.getOrdinate(r,o)||b.isNaN(a)&&b.isNaN(s)))return!1}return!0},Ye.extend=function(e,t,n){var i=e.create(n,t.getDimension()),r=t.size();if(Ye.copy(t,0,i,0,r),r>0)for(var o=r;o<n;o++)Ye.copy(t,r-1,i,o,1);return i},Ye.reverse=function(e){for(var t=e.size()-1,n=Math.trunc(t/2),i=0;i<=n;i++)Ye.swap(e,i,t-i)},Ye.swap=function(e,t,n){if(t===n)return null;for(var i=0;i<e.getDimension();i++){var r=e.getOrdinate(t,i);e.setOrdinate(t,i,e.getOrdinate(n,i)),e.setOrdinate(n,i,r)}},Ye.copy=function(e,t,n,i,r){for(var o=0;o<r;o++)Ye.copyCoord(e,t+o,n,i+o)},Ye.toString=function(){if(1===arguments.length){var e=arguments[0],t=e.size();if(0===t)return"()";var n=e.getDimension(),i=new D;i.append("(");for(var r=0;r<t;r++){r>0&&i.append(" ");for(var o=0;o<n;o++)o>0&&i.append(","),i.append(We.toString(e.getOrdinate(r,o)))}return i.append(")"),i.toString()}},Ye.ensureValidRing=function(e,t){var n=t.size();return 0===n?t:n<=3?Ye.createClosedRing(e,t,4):t.getOrdinate(0,z.X)===t.getOrdinate(n-1,z.X)&&t.getOrdinate(0,z.Y)===t.getOrdinate(n-1,z.Y)?t:Ye.createClosedRing(e,t,n+1)},Ye.createClosedRing=function(e,t,n){var i=e.create(n,t.getDimension()),r=t.size();Ye.copy(t,0,i,0,r);for(var o=r;o<n;o++)Ye.copy(t,0,i,o,1);return i};var Ke=function(e){function t(t,n){e.call(this,n),this._points=null,this.init(t)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new W:this._points.expandEnvelope(new W)},t.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},t.prototype.getSortIndex=function(){return e.SORTINDEX_LINESTRING},t.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},t.prototype.equalsExact=function(){if(2===arguments.length){var t=arguments[0],n=arguments[1];if(!this.isEquivalentClass(t))return!1;var i=t;if(this._points.size()!==i._points.size())return!1;for(var r=0;r<this._points.size();r++)if(!this.equal(this._points.getCoordinate(r),i._points.getCoordinate(r),n))return!1;return!0}return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){for(var e=0;e<Math.trunc(this._points.size()/2);e++){var t=this._points.size()-1-e;if(!this._points.getCoordinate(e).equals(this._points.getCoordinate(t)))return this._points.getCoordinate(e).compareTo(this._points.getCoordinate(t))>0&&Ye.reverse(this._points),null}},t.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},t.prototype.getBoundaryDimension=function(){return this.isClosed()?ke.FALSE:0},t.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},t.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},t.prototype.getDimension=function(){return 1},t.prototype.getLength=function(){return se.computeLength(this._points)},t.prototype.getNumPoints=function(){return this._points.size()},t.prototype.reverse=function(){var e=this._points.copy();return Ye.reverse(e),this.getFactory().createLineString(e)},t.prototype.compareToSameClass=function(){if(1===arguments.length){for(var e=arguments[0],t=0,n=0;t<this._points.size()&&n<e._points.size();){var i=this._points.getCoordinate(t).compareTo(e._points.getCoordinate(n));if(0!==i)return i;t++,n++}return t<this._points.size()?1:n<e._points.size()?-1:0}if(2===arguments.length){var r=arguments[0];return arguments[1].compare(this._points,r._points)}},t.prototype.apply=function(){if(I(arguments[0],pe))for(var e=arguments[0],t=0;t<this._points.size();t++)e.filter(this._points.getCoordinate(t));else if(I(arguments[0],Be)){var n=arguments[0];if(0===this._points.size())return null;for(var i=0;i<this._points.size()&&(n.filter(this._points,i),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else(I(arguments[0],ze)||I(arguments[0],ce))&&arguments[0].filter(this)},t.prototype.getBoundary=function(){return new He(this).getBoundary()},t.prototype.isEquivalentClass=function(e){return e instanceof t},t.prototype.clone=function(){var t=e.prototype.clone.call(this);return t._points=this._points.clone(),t},t.prototype.getCoordinateN=function(e){return this._points.getCoordinate(e)},t.prototype.getGeometryType=function(){return"LineString"},t.prototype.copy=function(){return new t(this._points.copy(),this._factory)},t.prototype.getCoordinateSequence=function(){return this._points},t.prototype.isEmpty=function(){return 0===this._points.size()},t.prototype.init=function(e){if(null===e&&(e=this.getFactory().getCoordinateSequenceFactory().create([])),1===e.size())throw new v("Invalid number of points in LineString (found "+e.size()+" - must be 0 or >= 2)");this._points=e},t.prototype.isCoordinate=function(e){for(var t=0;t<this._points.size();t++)if(this._points.getCoordinate(t).equals(e))return!0;return!1},t.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},t.prototype.getPointN=function(e){return this.getFactory().createPoint(this._points.getCoordinate(e))},t.prototype.interfaces_=function(){return[je]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(t,n),t}(ue),Ze=function(){};Ze.prototype.interfaces_=function(){return[]},Ze.prototype.getClass=function(){return Ze};var Je=function(e){function t(t,n){e.call(this,n),this._coordinates=t||null,this.init(this._coordinates)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new W;var e=new W;return e.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),e},t.prototype.getSortIndex=function(){return e.SORTINDEX_POINT},t.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},t.prototype.equalsExact=function(){if(2===arguments.length){var t=arguments[0],n=arguments[1];return!!this.isEquivalentClass(t)&&(!(!this.isEmpty()||!t.isEmpty())||this.isEmpty()===t.isEmpty()&&this.equal(t.getCoordinate(),this.getCoordinate(),n))}return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){},t.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},t.prototype.getBoundaryDimension=function(){return ke.FALSE},t.prototype.getDimension=function(){return 0},t.prototype.getNumPoints=function(){return this.isEmpty()?0:1},t.prototype.reverse=function(){return this.copy()},t.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},t.prototype.compareToSameClass=function(){if(1===arguments.length){var e=arguments[0];return this.getCoordinate().compareTo(e.getCoordinate())}if(2===arguments.length){var t=arguments[0];return arguments[1].compare(this._coordinates,t._coordinates)}},t.prototype.apply=function(){if(I(arguments[0],pe)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this.getCoordinate())}else if(I(arguments[0],Be)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this._coordinates,0),t.isGeometryChanged()&&this.geometryChanged()}else(I(arguments[0],ze)||I(arguments[0],ce))&&arguments[0].filter(this)},t.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},t.prototype.clone=function(){var t=e.prototype.clone.call(this);return t._coordinates=this._coordinates.clone(),t},t.prototype.getGeometryType=function(){return"Point"},t.prototype.copy=function(){return new t(this._coordinates.copy(),this._factory)},t.prototype.getCoordinateSequence=function(){return this._coordinates},t.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},t.prototype.isEmpty=function(){return 0===this._coordinates.size()},t.prototype.init=function(e){null===e&&(e=this.getFactory().getCoordinateSequenceFactory().create([])),te.isTrue(e.size()<=1),this._coordinates=e},t.prototype.isSimple=function(){return!0},t.prototype.interfaces_=function(){return[Ze]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(t,n),t}(ue),$e=function(){};$e.prototype.interfaces_=function(){return[]},$e.prototype.getClass=function(){return $e};var Qe=function(e){function t(t,n,i){if(e.call(this,i),this._shell=null,this._holes=null,null===t&&(t=this.getFactory().createLinearRing()),null===n&&(n=[]),e.hasNullElements(n))throw new v("holes must not contain null elements");if(t.isEmpty()&&e.hasNonEmptyElements(n))throw new v("shell is empty but holes are not");this._shell=t,this._holes=n}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},t.prototype.getSortIndex=function(){return e.SORTINDEX_POLYGON},t.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var e=new Array(this.getNumPoints()).fill(null),t=-1,n=this._shell.getCoordinates(),i=0;i<n.length;i++)e[++t]=n[i];for(var r=0;r<this._holes.length;r++)for(var o=this._holes[r].getCoordinates(),a=0;a<o.length;a++)e[++t]=o[a];return e},t.prototype.getArea=function(){var e=0;e+=Math.abs(se.signedArea(this._shell.getCoordinateSequence()));for(var t=0;t<this._holes.length;t++)e-=Math.abs(se.signedArea(this._holes[t].getCoordinateSequence()));return e},t.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var e=this._shell.getCoordinateSequence(),t=this.getEnvelopeInternal(),n=0;n<5;n++){var i=e.getX(n);if(i!==t.getMinX()&&i!==t.getMaxX())return!1;var r=e.getY(n);if(r!==t.getMinY()&&r!==t.getMaxY())return!1}for(var o=e.getX(0),a=e.getY(0),s=1;s<=4;s++){var l=e.getX(s),c=e.getY(s);if(l!==o==(c!==a))return!1;o=l,a=c}return!0},t.prototype.equalsExact=function(){if(2===arguments.length){var t=arguments[0],n=arguments[1];if(!this.isEquivalentClass(t))return!1;var i=t,r=this._shell,o=i._shell;if(!r.equalsExact(o,n))return!1;if(this._holes.length!==i._holes.length)return!1;for(var a=0;a<this._holes.length;a++)if(!this._holes[a].equalsExact(i._holes[a],n))return!1;return!0}return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var e=0;e<this._holes.length;e++)this.normalize(this._holes[e],!1);Fe.sort(this._holes)}else if(2===arguments.length){var t=arguments[0],n=arguments[1];if(t.isEmpty())return null;var i=new Array(t.getCoordinates().length-1).fill(null);H.arraycopy(t.getCoordinates(),0,i,0,i.length);var r=Ce.minCoordinate(t.getCoordinates());Ce.scroll(i,r),H.arraycopy(i,0,t.getCoordinates(),0,i.length),t.getCoordinates()[i.length]=i[0],se.isCCW(t.getCoordinates())===n&&Ce.reverse(t.getCoordinates())}},t.prototype.getCoordinate=function(){return this._shell.getCoordinate()},t.prototype.getNumInteriorRing=function(){return this._holes.length},t.prototype.getBoundaryDimension=function(){return 1},t.prototype.getDimension=function(){return 2},t.prototype.getLength=function(){var e=0;e+=this._shell.getLength();for(var t=0;t<this._holes.length;t++)e+=this._holes[t].getLength();return e},t.prototype.getNumPoints=function(){for(var e=this._shell.getNumPoints(),t=0;t<this._holes.length;t++)e+=this._holes[t].getNumPoints();return e},t.prototype.reverse=function(){var e=this.copy();e._shell=this._shell.copy().reverse(),e._holes=new Array(this._holes.length).fill(null);for(var t=0;t<this._holes.length;t++)e._holes[t]=this._holes[t].copy().reverse();return e},t.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},t.prototype.compareToSameClass=function(){if(1===arguments.length){var e=arguments[0],t=this._shell,n=e._shell;return t.compareToSameClass(n)}if(2===arguments.length){var i=arguments[1],r=arguments[0],o=this._shell,a=r._shell,s=o.compareToSameClass(a,i);if(0!==s)return s;for(var l=this.getNumInteriorRing(),c=r.getNumInteriorRing(),u=0;u<l&&u<c;){var h=this.getInteriorRingN(u),d=r.getInteriorRingN(u),p=h.compareToSameClass(d,i);if(0!==p)return p;u++}return u<l?1:u<c?-1:0}},t.prototype.apply=function(e){if(I(e,pe)){this._shell.apply(e);for(var t=0;t<this._holes.length;t++)this._holes[t].apply(e)}else if(I(e,Be)){if(this._shell.apply(e),!e.isDone())for(var n=0;n<this._holes.length&&(this._holes[n].apply(e),!e.isDone());n++);e.isGeometryChanged()&&this.geometryChanged()}else if(I(e,ze))e.filter(this);else if(I(e,ce)){e.filter(this),this._shell.apply(e);for(var i=0;i<this._holes.length;i++)this._holes[i].apply(e)}},t.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var e=new Array(this._holes.length+1).fill(null);e[0]=this._shell;for(var t=0;t<this._holes.length;t++)e[t+1]=this._holes[t];return e.length<=1?this.getFactory().createLinearRing(e[0].getCoordinateSequence()):this.getFactory().createMultiLineString(e)},t.prototype.clone=function(){var t=e.prototype.clone.call(this);t._shell=this._shell.clone(),t._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)t._holes[n]=this._holes[n].clone();return t},t.prototype.getGeometryType=function(){return"Polygon"},t.prototype.copy=function(){for(var e=this._shell.copy(),n=new Array(this._holes.length).fill(null),i=0;i<n.length;i++)n[i]=this._holes[i].copy();return new t(e,n,this._factory)},t.prototype.getExteriorRing=function(){return this._shell},t.prototype.isEmpty=function(){return this._shell.isEmpty()},t.prototype.getInteriorRingN=function(e){return this._holes[e]},t.prototype.interfaces_=function(){return[$e]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(t,n),t}(ue),et=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return ue.SORTINDEX_MULTIPOINT},t.prototype.isValid=function(){return!0},t.prototype.equalsExact=function(){if(2===arguments.length){var t=arguments[0],n=arguments[1];return!!this.isEquivalentClass(t)&&e.prototype.equalsExact.call(this,t,n)}return e.prototype.equalsExact.apply(this,arguments)},t.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._geometries[t].getCoordinate()}return e.prototype.getCoordinate.apply(this,arguments)},t.prototype.getBoundaryDimension=function(){return ke.FALSE},t.prototype.getDimension=function(){return 0},t.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},t.prototype.getGeometryType=function(){return"MultiPoint"},t.prototype.copy=function(){for(var e=new Array(this._geometries.length).fill(null),n=0;n<e.length;n++)e[n]=this._geometries[n].copy();return new t(e,this._factory)},t.prototype.interfaces_=function(){return[Ze]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(t,n),t}(Ge),tt=function(e){function t(t,n){t instanceof x&&n instanceof yt&&(t=n.getCoordinateSequenceFactory().create(t)),e.call(this,t,n),this.validateConstruction()}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return ue.SORTINDEX_LINEARRING},t.prototype.getBoundaryDimension=function(){return ke.FALSE},t.prototype.isClosed=function(){return!!this.isEmpty()||e.prototype.isClosed.call(this)},t.prototype.reverse=function(){var e=this._points.copy();return Ye.reverse(e),this.getFactory().createLinearRing(e)},t.prototype.validateConstruction=function(){if(!this.isEmpty()&&!e.prototype.isClosed.call(this))throw new v("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<t.MINIMUM_VALID_SIZE)throw new v("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},t.prototype.getGeometryType=function(){return"LinearRing"},t.prototype.copy=function(){return new t(this._points.copy(),this._factory)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(t,n),t}(Ke),nt=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return ue.SORTINDEX_MULTIPOLYGON},t.prototype.equalsExact=function(){if(2===arguments.length){var t=arguments[0],n=arguments[1];return!!this.isEquivalentClass(t)&&e.prototype.equalsExact.call(this,t,n)}return e.prototype.equalsExact.apply(this,arguments)},t.prototype.getBoundaryDimension=function(){return 1},t.prototype.getDimension=function(){return 2},t.prototype.reverse=function(){for(var e=this._geometries.length,t=new Array(e).fill(null),n=0;n<this._geometries.length;n++)t[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(t)},t.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var e=new Ee,t=0;t<this._geometries.length;t++)for(var n=this._geometries[t].getBoundary(),i=0;i<n.getNumGeometries();i++)e.add(n.getGeometryN(i));var r=new Array(e.size()).fill(null);return this.getFactory().createMultiLineString(e.toArray(r))},t.prototype.getGeometryType=function(){return"MultiPolygon"},t.prototype.copy=function(){for(var e=new Array(this._geometries.length).fill(null),n=0;n<e.length;n++)e[n]=this._geometries[n].copy();return new t(e,this._factory)},t.prototype.interfaces_=function(){return[$e]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(t,n),t}(Ge),it=function(e){this._factory=e||null,this._isUserDataCopied=!1},rt={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};it.prototype.setCopyUserData=function(e){this._isUserDataCopied=e},it.prototype.edit=function(e,t){if(null===e)return null;var n=this.editInternal(e,t);return this._isUserDataCopied&&n.setUserData(e.getUserData()),n},it.prototype.editInternal=function(e,t){return null===this._factory&&(this._factory=e.getFactory()),e instanceof Ge?this.editGeometryCollection(e,t):e instanceof Qe?this.editPolygon(e,t):e instanceof Je||e instanceof Ke?t.edit(e,this._factory):(te.shouldNeverReachHere("Unsupported Geometry class: "+e.getClass().getName()),null)},it.prototype.editGeometryCollection=function(e,t){for(var n=t.edit(e,this._factory),i=new Ee,r=0;r<n.getNumGeometries();r++){var o=this.edit(n.getGeometryN(r),t);null===o||o.isEmpty()||i.add(o)}return n.getClass()===et?this._factory.createMultiPoint(i.toArray([])):n.getClass()===Ve?this._factory.createMultiLineString(i.toArray([])):n.getClass()===nt?this._factory.createMultiPolygon(i.toArray([])):this._factory.createGeometryCollection(i.toArray([]))},it.prototype.editPolygon=function(e,t){var n=t.edit(e,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var i=this.edit(n.getExteriorRing(),t);if(null===i||i.isEmpty())return this._factory.createPolygon();for(var r=new Ee,o=0;o<n.getNumInteriorRing();o++){var a=this.edit(n.getInteriorRingN(o),t);null===a||a.isEmpty()||r.add(a)}return this._factory.createPolygon(i,r.toArray([]))},it.prototype.interfaces_=function(){return[]},it.prototype.getClass=function(){return it},it.GeometryEditorOperation=function(){},rt.NoOpGeometryOperation.get=function(){return ot},rt.CoordinateOperation.get=function(){return at},rt.CoordinateSequenceOperation.get=function(){return st},Object.defineProperties(it,rt);var ot=function(){};ot.prototype.edit=function(e,t){return e},ot.prototype.interfaces_=function(){return[it.GeometryEditorOperation]},ot.prototype.getClass=function(){return ot};var at=function(){};at.prototype.edit=function(e,t){var n=this.editCoordinates(e.getCoordinates(),e);return null===n?e:e instanceof tt?t.createLinearRing(n):e instanceof Ke?t.createLineString(n):e instanceof Je?n.length>0?t.createPoint(n[0]):t.createPoint():e},at.prototype.interfaces_=function(){return[it.GeometryEditorOperation]},at.prototype.getClass=function(){return at};var st=function(){};st.prototype.edit=function(e,t){return e instanceof tt?t.createLinearRing(this.edit(e.getCoordinateSequence(),e)):e instanceof Ke?t.createLineString(this.edit(e.getCoordinateSequence(),e)):e instanceof Je?t.createPoint(this.edit(e.getCoordinateSequence(),e)):e},st.prototype.interfaces_=function(){return[it.GeometryEditorOperation]},st.prototype.getClass=function(){return st};var lt=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var e=arguments[0];this._coordinates=new Array(e).fill(null);for(var t=0;t<e;t++)this._coordinates[t]=new x}else if(I(arguments[0],z)){var n=arguments[0];if(null===n)return this._coordinates=new Array(0).fill(null),null;this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null);for(var i=0;i<this._coordinates.length;i++)this._coordinates[i]=n.getCoordinateCopy(i)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var r=arguments[0],o=arguments[1];this._coordinates=r,this._dimension=o,null===r&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],s=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=s;for(var l=0;l<a;l++)this._coordinates[l]=new x}},ct={serialVersionUID:{configurable:!0}};lt.prototype.setOrdinate=function(e,t,n){switch(t){case z.X:this._coordinates[e].x=n;break;case z.Y:this._coordinates[e].y=n;break;case z.Z:this._coordinates[e].z=n;break;default:throw new v("invalid ordinateIndex")}},lt.prototype.size=function(){return this._coordinates.length},lt.prototype.getOrdinate=function(e,t){switch(t){case z.X:return this._coordinates[e].x;case z.Y:return this._coordinates[e].y;case z.Z:return this._coordinates[e].z}return b.NaN},lt.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._coordinates[e]}if(2===arguments.length){var t=arguments[0],n=arguments[1];n.x=this._coordinates[t].x,n.y=this._coordinates[t].y,n.z=this._coordinates[t].z}},lt.prototype.getCoordinateCopy=function(e){return new x(this._coordinates[e])},lt.prototype.getDimension=function(){return this._dimension},lt.prototype.getX=function(e){return this._coordinates[e].x},lt.prototype.clone=function(){for(var e=new Array(this.size()).fill(null),t=0;t<this._coordinates.length;t++)e[t]=this._coordinates[t].clone();return new lt(e,this._dimension)},lt.prototype.expandEnvelope=function(e){for(var t=0;t<this._coordinates.length;t++)e.expandToInclude(this._coordinates[t]);return e},lt.prototype.copy=function(){for(var e=new Array(this.size()).fill(null),t=0;t<this._coordinates.length;t++)e[t]=this._coordinates[t].copy();return new lt(e,this._dimension)},lt.prototype.toString=function(){if(this._coordinates.length>0){var e=new D(17*this._coordinates.length);e.append("("),e.append(this._coordinates[0]);for(var t=1;t<this._coordinates.length;t++)e.append(", "),e.append(this._coordinates[t]);return e.append(")"),e.toString()}return"()"},lt.prototype.getY=function(e){return this._coordinates[e].y},lt.prototype.toCoordinateArray=function(){return this._coordinates},lt.prototype.interfaces_=function(){return[z,t]},lt.prototype.getClass=function(){return lt},ct.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(lt,ct);var ut=function(){},ht={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};ut.prototype.readResolve=function(){return ut.instance()},ut.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new lt(arguments[0]);if(I(arguments[0],z))return new lt(arguments[0])}else if(2===arguments.length){var e=arguments[0],t=arguments[1];return t>3&&(t=3),t<2?new lt(e):new lt(e,t)}},ut.prototype.interfaces_=function(){return[S,t]},ut.prototype.getClass=function(){return ut},ut.instance=function(){return ut.instanceObject},ht.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},ht.instanceObject.get=function(){return new ut},Object.defineProperties(ut,ht);var dt=function(e){function t(){e.call(this),this.map_=new Map}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e){return this.map_.get(e)||null},t.prototype.put=function(e,t){return this.map_.set(e,t),t},t.prototype.values=function(){for(var e=new Ee,t=this.map_.values(),n=t.next();!n.done;)e.add(n.value),n=t.next();return e},t.prototype.entrySet=function(){var e=new Le;return this.map_.entries().forEach((function(t){return e.add(t)})),e},t.prototype.size=function(){return this.map_.size()},t}(Ie),pt=function e(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=e.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof gt){var t=arguments[0];this._modelType=t,t===e.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=e.FIXED,this.setScale(n)}else if(arguments[0]instanceof e){var i=arguments[0];this._modelType=i._modelType,this._scale=i._scale}},ft={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};pt.prototype.equals=function(e){if(!(e instanceof pt))return!1;var t=e;return this._modelType===t._modelType&&this._scale===t._scale},pt.prototype.compareTo=function(e){var t=e,n=this.getMaximumSignificantDigits(),i=t.getMaximumSignificantDigits();return new O(n).compareTo(new O(i))},pt.prototype.getScale=function(){return this._scale},pt.prototype.isFloating=function(){return this._modelType===pt.FLOATING||this._modelType===pt.FLOATING_SINGLE},pt.prototype.getType=function(){return this._modelType},pt.prototype.toString=function(){var e="UNKNOWN";return this._modelType===pt.FLOATING?e="Floating":this._modelType===pt.FLOATING_SINGLE?e="Floating-Single":this._modelType===pt.FIXED&&(e="Fixed (Scale="+this.getScale()+")"),e},pt.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var e=arguments[0];return b.isNaN(e)||this._modelType===pt.FLOATING_SINGLE?e:this._modelType===pt.FIXED?Math.round(e*this._scale)/this._scale:e}if(arguments[0]instanceof x){var t=arguments[0];if(this._modelType===pt.FLOATING)return null;t.x=this.makePrecise(t.x),t.y=this.makePrecise(t.y)}},pt.prototype.getMaximumSignificantDigits=function(){var e=16;return this._modelType===pt.FLOATING?e=16:this._modelType===pt.FLOATING_SINGLE?e=6:this._modelType===pt.FIXED&&(e=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),e},pt.prototype.setScale=function(e){this._scale=Math.abs(e)},pt.prototype.interfaces_=function(){return[t,w]},pt.prototype.getClass=function(){return pt},pt.mostPrecise=function(e,t){return e.compareTo(t)>=0?e:t},ft.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},ft.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(pt,ft);var gt=function e(t){this._name=t||null,e.nameToTypeMap.put(t,this)},mt={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};gt.prototype.readResolve=function(){return gt.nameToTypeMap.get(this._name)},gt.prototype.toString=function(){return this._name},gt.prototype.interfaces_=function(){return[t]},gt.prototype.getClass=function(){return gt},mt.serialVersionUID.get=function(){return-552860263173159e4},mt.nameToTypeMap.get=function(){return new dt},Object.defineProperties(gt,mt),pt.Type=gt,pt.FIXED=new gt("FIXED"),pt.FLOATING=new gt("FLOATING"),pt.FLOATING_SINGLE=new gt("FLOATING SINGLE");var yt=function e(){this._precisionModel=new pt,this._SRID=0,this._coordinateSequenceFactory=e.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?I(arguments[0],S)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof pt&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},vt={serialVersionUID:{configurable:!0}};yt.prototype.toGeometry=function(e){return e.isNull()?this.createPoint(null):e.getMinX()===e.getMaxX()&&e.getMinY()===e.getMaxY()?this.createPoint(new x(e.getMinX(),e.getMinY())):e.getMinX()===e.getMaxX()||e.getMinY()===e.getMaxY()?this.createLineString([new x(e.getMinX(),e.getMinY()),new x(e.getMaxX(),e.getMaxY())]):this.createPolygon(this.createLinearRing([new x(e.getMinX(),e.getMinY()),new x(e.getMinX(),e.getMaxY()),new x(e.getMaxX(),e.getMaxY()),new x(e.getMaxX(),e.getMinY()),new x(e.getMinX(),e.getMinY())]),null)},yt.prototype.createLineString=function(e){return e?e instanceof Array?new Ke(this.getCoordinateSequenceFactory().create(e),this):I(e,z)?new Ke(e,this):void 0:new Ke(this.getCoordinateSequenceFactory().create([]),this)},yt.prototype.createMultiLineString=function(){return 0===arguments.length?new Ve(null,this):1===arguments.length?new Ve(arguments[0],this):void 0},yt.prototype.buildGeometry=function(e){for(var t=null,n=!1,i=!1,r=e.iterator();r.hasNext();){var o=r.next(),a=o.getClass();null===t&&(t=a),a!==t&&(n=!0),o.isGeometryCollectionOrDerived()&&(i=!0)}if(null===t)return this.createGeometryCollection();if(n||i)return this.createGeometryCollection(yt.toGeometryArray(e));var s=e.iterator().next();if(e.size()>1){if(s instanceof Qe)return this.createMultiPolygon(yt.toPolygonArray(e));if(s instanceof Ke)return this.createMultiLineString(yt.toLineStringArray(e));if(s instanceof Je)return this.createMultiPoint(yt.toPointArray(e));te.shouldNeverReachHere("Unhandled class: "+s.getClass().getName())}return s},yt.prototype.createMultiPointFromCoords=function(e){return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)},yt.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof x){var e=arguments[0];return this.createPoint(null!==e?this.getCoordinateSequenceFactory().create([e]):null)}if(I(arguments[0],z))return new Je(arguments[0],this)}},yt.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},yt.prototype.createPolygon=function(){if(0===arguments.length)return new Qe(null,null,this);if(1===arguments.length){if(I(arguments[0],z)){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof Array){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof tt){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length)return new Qe(arguments[0],arguments[1],this)},yt.prototype.getSRID=function(){return this._SRID},yt.prototype.createGeometryCollection=function(){return 0===arguments.length?new Ge(null,this):1===arguments.length?new Ge(arguments[0],this):void 0},yt.prototype.createGeometry=function(e){return new it(this).edit(e,{edit:function(){if(2===arguments.length){var e=arguments[0];return this._coordinateSequenceFactory.create(e)}}})},yt.prototype.getPrecisionModel=function(){return this._precisionModel},yt.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];return this.createLinearRing(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(I(arguments[0],z))return new tt(arguments[0],this)}},yt.prototype.createMultiPolygon=function(){return 0===arguments.length?new nt(null,this):1===arguments.length?new nt(arguments[0],this):void 0},yt.prototype.createMultiPoint=function(){if(0===arguments.length)return new et(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new et(arguments[0],this);if(arguments[0]instanceof Array){var e=arguments[0];return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(I(arguments[0],z)){var t=arguments[0];if(null===t)return this.createMultiPoint(new Array(0).fill(null));for(var n=new Array(t.size()).fill(null),i=0;i<t.size();i++){var r=this.getCoordinateSequenceFactory().create(1,t.getDimension());Ye.copy(t,i,r,0,1),n[i]=this.createPoint(r)}return this.createMultiPoint(n)}}},yt.prototype.interfaces_=function(){return[t]},yt.prototype.getClass=function(){return yt},yt.toMultiPolygonArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)},yt.toGeometryArray=function(e){if(null===e)return null;var t=new Array(e.size()).fill(null);return e.toArray(t)},yt.getDefaultCoordinateSequenceFactory=function(){return ut.instance()},yt.toMultiLineStringArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)},yt.toLineStringArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)},yt.toMultiPointArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)},yt.toLinearRingArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)},yt.toPointArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)},yt.toPolygonArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)},yt.createPointFromInternalCoord=function(e,t){return t.getPrecisionModel().makePrecise(e),t.getFactory().createPoint(e)},vt.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(yt,vt);var bt=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],_t=function(e){this.geometryFactory=e||new yt};_t.prototype.read=function(e){var t,n=(t="string"==typeof e?JSON.parse(e):e).type;if(!wt[n])throw new Error("Unknown GeoJSON type: "+t.type);return-1!==bt.indexOf(n)?wt[n].apply(this,[t.coordinates]):"GeometryCollection"===n?wt[n].apply(this,[t.geometries]):wt[n].apply(this,[t])},_t.prototype.write=function(e){var t=e.getGeometryType();if(!Pt[t])throw new Error("Geometry is not supported");return Pt[t].apply(this,[e])};var wt={Feature:function(e){var t={};for(var n in e)t[n]=e[n];if(e.geometry){var i=e.geometry.type;if(!wt[i])throw new Error("Unknown GeoJSON type: "+e.type);t.geometry=this.read(e.geometry)}return e.bbox&&(t.bbox=wt.bbox.apply(this,[e.bbox])),t},FeatureCollection:function(e){var t={};if(e.features){t.features=[];for(var n=0;n<e.features.length;++n)t.features.push(this.read(e.features[n]))}return e.bbox&&(t.bbox=this.parse.bbox.apply(this,[e.bbox])),t},coordinates:function(e){for(var t=[],n=0;n<e.length;++n){var i=e[n];t.push(new x(i[0],i[1]))}return t},bbox:function(e){return this.geometryFactory.createLinearRing([new x(e[0],e[1]),new x(e[2],e[1]),new x(e[2],e[3]),new x(e[0],e[3]),new x(e[0],e[1])])},Point:function(e){var t=new x(e[0],e[1]);return this.geometryFactory.createPoint(t)},MultiPoint:function(e){for(var t=[],n=0;n<e.length;++n)t.push(wt.Point.apply(this,[e[n]]));return this.geometryFactory.createMultiPoint(t)},LineString:function(e){var t=wt.coordinates.apply(this,[e]);return this.geometryFactory.createLineString(t)},MultiLineString:function(e){for(var t=[],n=0;n<e.length;++n)t.push(wt.LineString.apply(this,[e[n]]));return this.geometryFactory.createMultiLineString(t)},Polygon:function(e){for(var t=wt.coordinates.apply(this,[e[0]]),n=this.geometryFactory.createLinearRing(t),i=[],r=1;r<e.length;++r){var o=e[r],a=wt.coordinates.apply(this,[o]),s=this.geometryFactory.createLinearRing(a);i.push(s)}return this.geometryFactory.createPolygon(n,i)},MultiPolygon:function(e){for(var t=[],n=0;n<e.length;++n){var i=e[n];t.push(wt.Polygon.apply(this,[i]))}return this.geometryFactory.createMultiPolygon(t)},GeometryCollection:function(e){for(var t=[],n=0;n<e.length;++n){var i=e[n];t.push(this.read(i))}return this.geometryFactory.createGeometryCollection(t)}},Pt={coordinate:function(e){return[e.x,e.y]},Point:function(e){return{type:"Point",coordinates:Pt.coordinate.apply(this,[e.getCoordinate()])}},MultiPoint:function(e){for(var t=[],n=0;n<e._geometries.length;++n){var i=e._geometries[n],r=Pt.Point.apply(this,[i]);t.push(r.coordinates)}return{type:"MultiPoint",coordinates:t}},LineString:function(e){for(var t=[],n=e.getCoordinates(),i=0;i<n.length;++i){var r=n[i];t.push(Pt.coordinate.apply(this,[r]))}return{type:"LineString",coordinates:t}},MultiLineString:function(e){for(var t=[],n=0;n<e._geometries.length;++n){var i=e._geometries[n],r=Pt.LineString.apply(this,[i]);t.push(r.coordinates)}return{type:"MultiLineString",coordinates:t}},Polygon:function(e){var t=[],n=Pt.LineString.apply(this,[e._shell]);t.push(n.coordinates);for(var i=0;i<e._holes.length;++i){var r=e._holes[i],o=Pt.LineString.apply(this,[r]);t.push(o.coordinates)}return{type:"Polygon",coordinates:t}},MultiPolygon:function(e){for(var t=[],n=0;n<e._geometries.length;++n){var i=e._geometries[n],r=Pt.Polygon.apply(this,[i]);t.push(r.coordinates)}return{type:"MultiPolygon",coordinates:t}},GeometryCollection:function(e){for(var t=[],n=0;n<e._geometries.length;++n){var i=e._geometries[n],r=i.getGeometryType();t.push(Pt[r].apply(this,[i]))}return{type:"GeometryCollection",geometries:t}}},Et=function(e){this.geometryFactory=e||new yt,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new _t(this.geometryFactory)};Et.prototype.read=function(e){var t=this.parser.read(e);return this.precisionModel.getType()===pt.FIXED&&this.reducePrecision(t),t},Et.prototype.reducePrecision=function(e){var t,n;if(e.coordinate)this.precisionModel.makePrecise(e.coordinate);else if(e.points)for(t=0,n=e.points.length;t<n;t++)this.precisionModel.makePrecise(e.points[t]);else if(e.geometries)for(t=0,n=e.geometries.length;t<n;t++)this.reducePrecision(e.geometries[t])};var xt=function(){this.parser=new _t(this.geometryFactory)};xt.prototype.write=function(e){return this.parser.write(e)};var At=function(){},Ct={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};At.prototype.interfaces_=function(){return[]},At.prototype.getClass=function(){return At},At.opposite=function(e){return e===At.LEFT?At.RIGHT:e===At.RIGHT?At.LEFT:e},Ct.ON.get=function(){return 0},Ct.LEFT.get=function(){return 1},Ct.RIGHT.get=function(){return 2},Object.defineProperties(At,Ct),(g.prototype=new Error).name="EmptyStackException",(m.prototype=new Pe).add=function(e){return this.array_.push(e),!0},m.prototype.get=function(e){if(e<0||e>=this.size())throw new Error;return this.array_[e]},m.prototype.push=function(e){return this.array_.push(e),e},m.prototype.pop=function(e){if(0===this.array_.length)throw new g;return this.array_.pop()},m.prototype.peek=function(){if(0===this.array_.length)throw new g;return this.array_[this.array_.length-1]},m.prototype.empty=function(){return 0===this.array_.length},m.prototype.isEmpty=function(){return this.empty()},m.prototype.search=function(e){return this.array_.indexOf(e)},m.prototype.size=function(){return this.array_.length},m.prototype.toArray=function(){for(var e=[],t=0,n=this.array_.length;t<n;t++)e.push(this.array_[t]);return e};var St=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};St.prototype.getCoordinate=function(){return this._minCoord},St.prototype.getRightmostSide=function(e,t){var n=this.getRightmostSideOfSegment(e,t);return n<0&&(n=this.getRightmostSideOfSegment(e,t-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(e)),n},St.prototype.findRightmostEdgeAtVertex=function(){var e=this._minDe.getEdge().getCoordinates();te.isTrue(this._minIndex>0&&this._minIndex<e.length,"rightmost point expected to be interior vertex of edge");var t=e[this._minIndex-1],n=e[this._minIndex+1],i=se.computeOrientation(this._minCoord,n,t),r=!1;(t.y<this._minCoord.y&&n.y<this._minCoord.y&&i===se.COUNTERCLOCKWISE||t.y>this._minCoord.y&&n.y>this._minCoord.y&&i===se.CLOCKWISE)&&(r=!0),r&&(this._minIndex=this._minIndex-1)},St.prototype.getRightmostSideOfSegment=function(e,t){var n=e.getEdge().getCoordinates();if(t<0||t+1>=n.length)return-1;if(n[t].y===n[t+1].y)return-1;var i=At.LEFT;return n[t].y<n[t+1].y&&(i=At.RIGHT),i},St.prototype.getEdge=function(){return this._orientedDe},St.prototype.checkForRightmostCoordinate=function(e){for(var t=e.getEdge().getCoordinates(),n=0;n<t.length-1;n++)(null===this._minCoord||t[n].x>this._minCoord.x)&&(this._minDe=e,this._minIndex=n,this._minCoord=t[n])},St.prototype.findRightmostEdgeAtNode=function(){var e=this._minDe.getNode().getEdges();this._minDe=e.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},St.prototype.findEdge=function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();n.isForward()&&this.checkForRightmostCoordinate(n)}te.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===At.LEFT&&(this._orientedDe=this._minDe.getSym())},St.prototype.interfaces_=function(){return[]},St.prototype.getClass=function(){return St};var Tt=function(e){function t(n,i){e.call(this,t.msgWithCoord(n,i)),this.pt=i?new x(i):null,this.name="TopologyException"}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getCoordinate=function(){return this.pt},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.msgWithCoord=function(e,t){return t?e:e+" [ "+t+" ]"},t}(Q),Rt=function(){this.array_=[]};Rt.prototype.addLast=function(e){this.array_.push(e)},Rt.prototype.removeFirst=function(){return this.array_.shift()},Rt.prototype.isEmpty=function(){return 0===this.array_.length};var It=function(){this._finder=null,this._dirEdgeList=new Ee,this._nodes=new Ee,this._rightMostCoord=null,this._env=null,this._finder=new St};It.prototype.clearVisitedEdges=function(){for(var e=this._dirEdgeList.iterator();e.hasNext();)e.next().setVisited(!1)},It.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},It.prototype.computeNodeDepth=function(e){for(var t=null,n=e.getEdges().iterator();n.hasNext();){var i=n.next();if(i.isVisited()||i.getSym().isVisited()){t=i;break}}if(null===t)throw new Tt("unable to find edge to compute depths at "+e.getCoordinate());e.getEdges().computeDepths(t);for(var r=e.getEdges().iterator();r.hasNext();){var o=r.next();o.setVisited(!0),this.copySymDepths(o)}},It.prototype.computeDepth=function(e){this.clearVisitedEdges();var t=this._finder.getEdge();t.setEdgeDepths(At.RIGHT,e),this.copySymDepths(t),this.computeDepths(t)},It.prototype.create=function(e){this.addReachable(e),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},It.prototype.findResultEdges=function(){for(var e=this._dirEdgeList.iterator();e.hasNext();){var t=e.next();t.getDepth(At.RIGHT)>=1&&t.getDepth(At.LEFT)<=0&&!t.isInteriorAreaEdge()&&t.setInResult(!0)}},It.prototype.computeDepths=function(e){var t=new Le,n=new Rt,i=e.getNode();for(n.addLast(i),t.add(i),e.setVisited(!0);!n.isEmpty();){var r=n.removeFirst();t.add(r),this.computeNodeDepth(r);for(var o=r.getEdges().iterator();o.hasNext();){var a=o.next().getSym();if(!a.isVisited()){var s=a.getNode();t.contains(s)||(n.addLast(s),t.add(s))}}}},It.prototype.compareTo=function(e){var t=e;return this._rightMostCoord.x<t._rightMostCoord.x?-1:this._rightMostCoord.x>t._rightMostCoord.x?1:0},It.prototype.getEnvelope=function(){if(null===this._env){for(var e=new W,t=this._dirEdgeList.iterator();t.hasNext();)for(var n=t.next().getEdge().getCoordinates(),i=0;i<n.length-1;i++)e.expandToInclude(n[i]);this._env=e}return this._env},It.prototype.addReachable=function(e){var t=new m;for(t.add(e);!t.empty();){var n=t.pop();this.add(n,t)}},It.prototype.copySymDepths=function(e){var t=e.getSym();t.setDepth(At.LEFT,e.getDepth(At.RIGHT)),t.setDepth(At.RIGHT,e.getDepth(At.LEFT))},It.prototype.add=function(e,t){e.setVisited(!0),this._nodes.add(e);for(var n=e.getEdges().iterator();n.hasNext();){var i=n.next();this._dirEdgeList.add(i);var r=i.getSym().getNode();r.isVisited()||t.push(r)}},It.prototype.getNodes=function(){return this._nodes},It.prototype.getDirectedEdges=function(){return this._dirEdgeList},It.prototype.interfaces_=function(){return[w]},It.prototype.getClass=function(){return It};var Mt=function e(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];this.init(t.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[At.ON]=n}else if(arguments[0]instanceof e){var i=arguments[0];if(this.init(i.location.length),null!==i)for(var r=0;r<this.location.length;r++)this.location[r]=i.location[r]}}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.init(3),this.location[At.ON]=o,this.location[At.LEFT]=a,this.location[At.RIGHT]=s}};Mt.prototype.setAllLocations=function(e){for(var t=0;t<this.location.length;t++)this.location[t]=e},Mt.prototype.isNull=function(){for(var e=0;e<this.location.length;e++)if(this.location[e]!==T.NONE)return!1;return!0},Mt.prototype.setAllLocationsIfNull=function(e){for(var t=0;t<this.location.length;t++)this.location[t]===T.NONE&&(this.location[t]=e)},Mt.prototype.isLine=function(){return 1===this.location.length},Mt.prototype.merge=function(e){if(e.location.length>this.location.length){var t=new Array(3).fill(null);t[At.ON]=this.location[At.ON],t[At.LEFT]=T.NONE,t[At.RIGHT]=T.NONE,this.location=t}for(var n=0;n<this.location.length;n++)this.location[n]===T.NONE&&n<e.location.length&&(this.location[n]=e.location[n])},Mt.prototype.getLocations=function(){return this.location},Mt.prototype.flip=function(){if(this.location.length<=1)return null;var e=this.location[At.LEFT];this.location[At.LEFT]=this.location[At.RIGHT],this.location[At.RIGHT]=e},Mt.prototype.toString=function(){var e=new D;return this.location.length>1&&e.append(T.toLocationSymbol(this.location[At.LEFT])),e.append(T.toLocationSymbol(this.location[At.ON])),this.location.length>1&&e.append(T.toLocationSymbol(this.location[At.RIGHT])),e.toString()},Mt.prototype.setLocations=function(e,t,n){this.location[At.ON]=e,this.location[At.LEFT]=t,this.location[At.RIGHT]=n},Mt.prototype.get=function(e){return e<this.location.length?this.location[e]:T.NONE},Mt.prototype.isArea=function(){return this.location.length>1},Mt.prototype.isAnyNull=function(){for(var e=0;e<this.location.length;e++)if(this.location[e]===T.NONE)return!0;return!1},Mt.prototype.setLocation=function(){if(1===arguments.length){var e=arguments[0];this.setLocation(At.ON,e)}else if(2===arguments.length){var t=arguments[0],n=arguments[1];this.location[t]=n}},Mt.prototype.init=function(e){this.location=new Array(e).fill(null),this.setAllLocations(T.NONE)},Mt.prototype.isEqualOnSide=function(e,t){return this.location[t]===e.location[t]},Mt.prototype.allPositionsEqual=function(e){for(var t=0;t<this.location.length;t++)if(this.location[t]!==e)return!1;return!0},Mt.prototype.interfaces_=function(){return[]},Mt.prototype.getClass=function(){return Mt};var Lt=function e(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new Mt(t),this.elt[1]=new Mt(t)}else if(arguments[0]instanceof e){var n=arguments[0];this.elt[0]=new Mt(n.elt[0]),this.elt[1]=new Mt(n.elt[1])}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.elt[0]=new Mt(T.NONE),this.elt[1]=new Mt(T.NONE),this.elt[i].setLocation(r)}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.elt[0]=new Mt(o,a,s),this.elt[1]=new Mt(o,a,s)}else if(4===arguments.length){var l=arguments[0],c=arguments[1],u=arguments[2],h=arguments[3];this.elt[0]=new Mt(T.NONE,T.NONE,T.NONE),this.elt[1]=new Mt(T.NONE,T.NONE,T.NONE),this.elt[l].setLocations(c,u,h)}};Lt.prototype.getGeometryCount=function(){var e=0;return this.elt[0].isNull()||e++,this.elt[1].isNull()||e++,e},Lt.prototype.setAllLocations=function(e,t){this.elt[e].setAllLocations(t)},Lt.prototype.isNull=function(e){return this.elt[e].isNull()},Lt.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var e=arguments[0];this.setAllLocationsIfNull(0,e),this.setAllLocationsIfNull(1,e)}else if(2===arguments.length){var t=arguments[0],n=arguments[1];this.elt[t].setAllLocationsIfNull(n)}},Lt.prototype.isLine=function(e){return this.elt[e].isLine()},Lt.prototype.merge=function(e){for(var t=0;t<2;t++)null===this.elt[t]&&null!==e.elt[t]?this.elt[t]=new Mt(e.elt[t]):this.elt[t].merge(e.elt[t])},Lt.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Lt.prototype.getLocation=function(){if(1===arguments.length){var e=arguments[0];return this.elt[e].get(At.ON)}if(2===arguments.length){var t=arguments[0],n=arguments[1];return this.elt[t].get(n)}},Lt.prototype.toString=function(){var e=new D;return null!==this.elt[0]&&(e.append("A:"),e.append(this.elt[0].toString())),null!==this.elt[1]&&(e.append(" B:"),e.append(this.elt[1].toString())),e.toString()},Lt.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var e=arguments[0];return this.elt[e].isArea()}},Lt.prototype.isAnyNull=function(e){return this.elt[e].isAnyNull()},Lt.prototype.setLocation=function(){if(2===arguments.length){var e=arguments[0],t=arguments[1];this.elt[e].setLocation(At.ON,t)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.elt[n].setLocation(i,r)}},Lt.prototype.isEqualOnSide=function(e,t){return this.elt[0].isEqualOnSide(e.elt[0],t)&&this.elt[1].isEqualOnSide(e.elt[1],t)},Lt.prototype.allPositionsEqual=function(e,t){return this.elt[e].allPositionsEqual(t)},Lt.prototype.toLine=function(e){this.elt[e].isArea()&&(this.elt[e]=new Mt(this.elt[e].location[0]))},Lt.prototype.interfaces_=function(){return[]},Lt.prototype.getClass=function(){return Lt},Lt.toLineLabel=function(e){for(var t=new Lt(T.NONE),n=0;n<2;n++)t.setLocation(n,e.getLocation(n));return t};var Dt=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new Ee,this._pts=new Ee,this._label=new Lt(T.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new Ee,this._geometryFactory=null;var e=arguments[0],t=arguments[1];this._geometryFactory=t,this.computePoints(e),this.computeRing()};Dt.prototype.computeRing=function(){if(null!==this._ring)return null;for(var e=new Array(this._pts.size()).fill(null),t=0;t<this._pts.size();t++)e[t]=this._pts.get(t);this._ring=this._geometryFactory.createLinearRing(e),this._isHole=se.isCCW(this._ring.getCoordinates())},Dt.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Dt.prototype.computePoints=function(e){this._startDe=e;var t=e,n=!0;do{if(null===t)throw new Tt("Found null DirectedEdge");if(t.getEdgeRing()===this)throw new Tt("Directed Edge visited twice during ring-building at "+t.getCoordinate());this._edges.add(t);var i=t.getLabel();te.isTrue(i.isArea()),this.mergeLabel(i),this.addPoints(t.getEdge(),t.isForward(),n),n=!1,this.setEdgeRing(t,this),t=this.getNext(t)}while(t!==this._startDe)},Dt.prototype.getLinearRing=function(){return this._ring},Dt.prototype.getCoordinate=function(e){return this._pts.get(e)},Dt.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var e=this._startDe;do{var t=e.getNode().getEdges().getOutgoingDegree(this);t>this._maxNodeDegree&&(this._maxNodeDegree=t),e=this.getNext(e)}while(e!==this._startDe);this._maxNodeDegree*=2},Dt.prototype.addPoints=function(e,t,n){var i=e.getCoordinates();if(t){var r=1;n&&(r=0);for(var o=r;o<i.length;o++)this._pts.add(i[o])}else{var a=i.length-2;n&&(a=i.length-1);for(var s=a;s>=0;s--)this._pts.add(i[s])}},Dt.prototype.isHole=function(){return this._isHole},Dt.prototype.setInResult=function(){var e=this._startDe;do{e.getEdge().setInResult(!0),e=e.getNext()}while(e!==this._startDe)},Dt.prototype.containsPoint=function(e){var t=this.getLinearRing();if(!t.getEnvelopeInternal().contains(e))return!1;if(!se.isPointInRing(e,t.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(e))return!1;return!0},Dt.prototype.addHole=function(e){this._holes.add(e)},Dt.prototype.isShell=function(){return null===this._shell},Dt.prototype.getLabel=function(){return this._label},Dt.prototype.getEdges=function(){return this._edges},Dt.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Dt.prototype.getShell=function(){return this._shell},Dt.prototype.mergeLabel=function(){if(1===arguments.length){var e=arguments[0];this.mergeLabel(e,0),this.mergeLabel(e,1)}else if(2===arguments.length){var t=arguments[1],n=arguments[0].getLocation(t,At.RIGHT);if(n===T.NONE)return null;if(this._label.getLocation(t)===T.NONE)return this._label.setLocation(t,n),null}},Dt.prototype.setShell=function(e){this._shell=e,null!==e&&e.addHole(this)},Dt.prototype.toPolygon=function(e){for(var t=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)t[n]=this._holes.get(n).getLinearRing();return e.createPolygon(this.getLinearRing(),t)},Dt.prototype.interfaces_=function(){return[]},Dt.prototype.getClass=function(){return Dt};var Ot=function(e){function t(){var t=arguments[0],n=arguments[1];e.call(this,t,n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setEdgeRing=function(e,t){e.setMinEdgeRing(t)},t.prototype.getNext=function(e){return e.getNextMin()},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Dt),jt=function(e){function t(){var t=arguments[0],n=arguments[1];e.call(this,t,n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.buildMinimalRings=function(){var e=new Ee,t=this._startDe;do{if(null===t.getMinEdgeRing()){var n=new Ot(t,this._geometryFactory);e.add(n)}t=t.getNext()}while(t!==this._startDe);return e},t.prototype.setEdgeRing=function(e,t){e.setEdgeRing(t)},t.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var e=this._startDe;do{e.getNode().getEdges().linkMinimalDirectedEdges(this),e=e.getNext()}while(e!==this._startDe)},t.prototype.getNext=function(e){return e.getNext()},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Dt),Nt=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this._label=e}};Nt.prototype.setVisited=function(e){this._isVisited=e},Nt.prototype.setInResult=function(e){this._isInResult=e},Nt.prototype.isCovered=function(){return this._isCovered},Nt.prototype.isCoveredSet=function(){return this._isCoveredSet},Nt.prototype.setLabel=function(e){this._label=e},Nt.prototype.getLabel=function(){return this._label},Nt.prototype.setCovered=function(e){this._isCovered=e,this._isCoveredSet=!0},Nt.prototype.updateIM=function(e){te.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(e)},Nt.prototype.isInResult=function(){return this._isInResult},Nt.prototype.isVisited=function(){return this._isVisited},Nt.prototype.interfaces_=function(){return[]},Nt.prototype.getClass=function(){return Nt};var Ft=function(e){function t(){e.call(this),this._coord=null,this._edges=null;var t=arguments[0],n=arguments[1];this._coord=t,this._edges=n,this._label=new Lt(0,T.NONE)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.isIncidentEdgeInResult=function(){for(var e=this.getEdges().getEdges().iterator();e.hasNext();)if(e.next().getEdge().isInResult())return!0;return!1},t.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},t.prototype.getCoordinate=function(){return this._coord},t.prototype.print=function(e){e.println("node "+this._coord+" lbl: "+this._label)},t.prototype.computeIM=function(e){},t.prototype.computeMergedLocation=function(e,t){var n=T.NONE;if(n=this._label.getLocation(t),!e.isNull(t)){var i=e.getLocation(t);n!==T.BOUNDARY&&(n=i)}return n},t.prototype.setLabel=function(){if(2!==arguments.length)return e.prototype.setLabel.apply(this,arguments);var t=arguments[0],n=arguments[1];null===this._label?this._label=new Lt(t,n):this._label.setLocation(t,n)},t.prototype.getEdges=function(){return this._edges},t.prototype.mergeLabel=function(){if(arguments[0]instanceof t){var e=arguments[0];this.mergeLabel(e._label)}else if(arguments[0]instanceof Lt)for(var n=arguments[0],i=0;i<2;i++){var r=this.computeMergedLocation(n,i);this._label.getLocation(i)===T.NONE&&this._label.setLocation(i,r)}},t.prototype.add=function(e){this._edges.insert(e),e.setNode(this)},t.prototype.setLabelBoundary=function(e){if(null===this._label)return null;var t=T.NONE;null!==this._label&&(t=this._label.getLocation(e));var n=null;switch(t){case T.BOUNDARY:n=T.INTERIOR;break;case T.INTERIOR:default:n=T.BOUNDARY}this._label.setLocation(e,n)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Nt),kt=function(){this.nodeMap=new h,this.nodeFact=null;var e=arguments[0];this.nodeFact=e};kt.prototype.find=function(e){return this.nodeMap.get(e)},kt.prototype.addNode=function(){if(arguments[0]instanceof x){var e=arguments[0],t=this.nodeMap.get(e);return null===t&&(t=this.nodeFact.createNode(e),this.nodeMap.put(e,t)),t}if(arguments[0]instanceof Ft){var n=arguments[0],i=this.nodeMap.get(n.getCoordinate());return null===i?(this.nodeMap.put(n.getCoordinate(),n),n):(i.mergeLabel(n),i)}},kt.prototype.print=function(e){for(var t=this.iterator();t.hasNext();)t.next().print(e)},kt.prototype.iterator=function(){return this.nodeMap.values().iterator()},kt.prototype.values=function(){return this.nodeMap.values()},kt.prototype.getBoundaryNodes=function(e){for(var t=new Ee,n=this.iterator();n.hasNext();){var i=n.next();i.getLabel().getLocation(e)===T.BOUNDARY&&t.add(i)}return t},kt.prototype.add=function(e){var t=e.getCoordinate();this.addNode(t).add(e)},kt.prototype.interfaces_=function(){return[]},kt.prototype.getClass=function(){return kt};var Ut=function(){},zt={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Ut.prototype.interfaces_=function(){return[]},Ut.prototype.getClass=function(){return Ut},Ut.isNorthern=function(e){return e===Ut.NE||e===Ut.NW},Ut.isOpposite=function(e,t){return e!==t&&2==(e-t+4)%4},Ut.commonHalfPlane=function(e,t){if(e===t)return e;if(2==(e-t+4)%4)return-1;var n=e<t?e:t;return 0===n&&3===(e>t?e:t)?3:n},Ut.isInHalfPlane=function(e,t){return t===Ut.SE?e===Ut.SE||e===Ut.SW:e===t||e===t+1},Ut.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var e=arguments[0],t=arguments[1];if(0===e&&0===t)throw new v("Cannot compute the quadrant for point ( "+e+", "+t+" )");return e>=0?t>=0?Ut.NE:Ut.SE:t>=0?Ut.NW:Ut.SW}if(arguments[0]instanceof x&&arguments[1]instanceof x){var n=arguments[0],i=arguments[1];if(i.x===n.x&&i.y===n.y)throw new v("Cannot compute the quadrant for two identical points "+n);return i.x>=n.x?i.y>=n.y?Ut.NE:Ut.SE:i.y>=n.y?Ut.NW:Ut.SW}},zt.NE.get=function(){return 0},zt.NW.get=function(){return 1},zt.SW.get=function(){return 2},zt.SE.get=function(){return 3},Object.defineProperties(Ut,zt);var Bt=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var e=arguments[0];this._edge=e}else if(3===arguments.length){var t=arguments[0],n=arguments[1],i=arguments[2];this._edge=t,this.init(n,i),this._label=null}else if(4===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this._edge=r,this.init(o,a),this._label=s}};Bt.prototype.compareDirection=function(e){return this._dx===e._dx&&this._dy===e._dy?0:this._quadrant>e._quadrant?1:this._quadrant<e._quadrant?-1:se.computeOrientation(e._p0,e._p1,this._p1)},Bt.prototype.getDy=function(){return this._dy},Bt.prototype.getCoordinate=function(){return this._p0},Bt.prototype.setNode=function(e){this._node=e},Bt.prototype.print=function(e){var t=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),i=n.lastIndexOf("."),r=n.substring(i+1);e.print("  "+r+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label)},Bt.prototype.compareTo=function(e){var t=e;return this.compareDirection(t)},Bt.prototype.getDirectedCoordinate=function(){return this._p1},Bt.prototype.getDx=function(){return this._dx},Bt.prototype.getLabel=function(){return this._label},Bt.prototype.getEdge=function(){return this._edge},Bt.prototype.getQuadrant=function(){return this._quadrant},Bt.prototype.getNode=function(){return this._node},Bt.prototype.toString=function(){var e=Math.atan2(this._dy,this._dx),t=this.getClass().getName(),n=t.lastIndexOf(".");return"  "+t.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label},Bt.prototype.computeLabel=function(e){},Bt.prototype.init=function(e,t){this._p0=e,this._p1=t,this._dx=t.x-e.x,this._dy=t.y-e.y,this._quadrant=Ut.quadrant(this._dx,this._dy),te.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Bt.prototype.interfaces_=function(){return[w]},Bt.prototype.getClass=function(){return Bt};var Gt=function(e){function t(){var t=arguments[0],n=arguments[1];if(e.call(this,t),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(t.getCoordinate(0),t.getCoordinate(1));else{var i=t.getNumPoints()-1;this.init(t.getCoordinate(i),t.getCoordinate(i-1))}this.computeDirectedLabel()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getNextMin=function(){return this._nextMin},t.prototype.getDepth=function(e){return this._depth[e]},t.prototype.setVisited=function(e){this._isVisited=e},t.prototype.computeDirectedLabel=function(){this._label=new Lt(this._edge.getLabel()),this._isForward||this._label.flip()},t.prototype.getNext=function(){return this._next},t.prototype.setDepth=function(e,t){if(-999!==this._depth[e]&&this._depth[e]!==t)throw new Tt("assigned depths do not match",this.getCoordinate());this._depth[e]=t},t.prototype.isInteriorAreaEdge=function(){for(var e=!0,t=0;t<2;t++)this._label.isArea(t)&&this._label.getLocation(t,At.LEFT)===T.INTERIOR&&this._label.getLocation(t,At.RIGHT)===T.INTERIOR||(e=!1);return e},t.prototype.setNextMin=function(e){this._nextMin=e},t.prototype.print=function(t){e.prototype.print.call(this,t),t.print(" "+this._depth[At.LEFT]+"/"+this._depth[At.RIGHT]),t.print(" ("+this.getDepthDelta()+")"),this._isInResult&&t.print(" inResult")},t.prototype.setMinEdgeRing=function(e){this._minEdgeRing=e},t.prototype.isLineEdge=function(){var e=this._label.isLine(0)||this._label.isLine(1),t=!this._label.isArea(0)||this._label.allPositionsEqual(0,T.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,T.EXTERIOR);return e&&t&&n},t.prototype.setEdgeRing=function(e){this._edgeRing=e},t.prototype.getMinEdgeRing=function(){return this._minEdgeRing},t.prototype.getDepthDelta=function(){var e=this._edge.getDepthDelta();return this._isForward||(e=-e),e},t.prototype.setInResult=function(e){this._isInResult=e},t.prototype.getSym=function(){return this._sym},t.prototype.isForward=function(){return this._isForward},t.prototype.getEdge=function(){return this._edge},t.prototype.printEdge=function(e){this.print(e),e.print(" "),this._isForward?this._edge.print(e):this._edge.printReverse(e)},t.prototype.setSym=function(e){this._sym=e},t.prototype.setVisitedEdge=function(e){this.setVisited(e),this._sym.setVisited(e)},t.prototype.setEdgeDepths=function(e,t){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var i=1;e===At.LEFT&&(i=-1);var r=At.opposite(e),o=t+n*i;this.setDepth(e,t),this.setDepth(r,o)},t.prototype.getEdgeRing=function(){return this._edgeRing},t.prototype.isInResult=function(){return this._isInResult},t.prototype.setNext=function(e){this._next=e},t.prototype.isVisited=function(){return this._isVisited},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.depthFactor=function(e,t){return e===T.EXTERIOR&&t===T.INTERIOR?1:e===T.INTERIOR&&t===T.EXTERIOR?-1:0},t}(Bt),Vt=function(){};Vt.prototype.createNode=function(e){return new Ft(e,null)},Vt.prototype.interfaces_=function(){return[]},Vt.prototype.getClass=function(){return Vt};var Ht=function(){if(this._edges=new Ee,this._nodes=null,this._edgeEndList=new Ee,0===arguments.length)this._nodes=new kt(new Vt);else if(1===arguments.length){var e=arguments[0];this._nodes=new kt(e)}};Ht.prototype.printEdges=function(e){e.println("Edges:");for(var t=0;t<this._edges.size();t++){e.println("edge "+t+":");var n=this._edges.get(t);n.print(e),n.eiList.print(e)}},Ht.prototype.find=function(e){return this._nodes.find(e)},Ht.prototype.addNode=function(){if(arguments[0]instanceof Ft){var e=arguments[0];return this._nodes.addNode(e)}if(arguments[0]instanceof x){var t=arguments[0];return this._nodes.addNode(t)}},Ht.prototype.getNodeIterator=function(){return this._nodes.iterator()},Ht.prototype.linkResultDirectedEdges=function(){for(var e=this._nodes.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()},Ht.prototype.debugPrintln=function(e){H.out.println(e)},Ht.prototype.isBoundaryNode=function(e,t){var n=this._nodes.find(t);if(null===n)return!1;var i=n.getLabel();return null!==i&&i.getLocation(e)===T.BOUNDARY},Ht.prototype.linkAllDirectedEdges=function(){for(var e=this._nodes.iterator();e.hasNext();)e.next().getEdges().linkAllDirectedEdges()},Ht.prototype.matchInSameDirection=function(e,t,n,i){return!!e.equals(n)&&se.computeOrientation(e,t,i)===se.COLLINEAR&&Ut.quadrant(e,t)===Ut.quadrant(n,i)},Ht.prototype.getEdgeEnds=function(){return this._edgeEndList},Ht.prototype.debugPrint=function(e){H.out.print(e)},Ht.prototype.getEdgeIterator=function(){return this._edges.iterator()},Ht.prototype.findEdgeInSameDirection=function(e,t){for(var n=0;n<this._edges.size();n++){var i=this._edges.get(n),r=i.getCoordinates();if(this.matchInSameDirection(e,t,r[0],r[1]))return i;if(this.matchInSameDirection(e,t,r[r.length-1],r[r.length-2]))return i}return null},Ht.prototype.insertEdge=function(e){this._edges.add(e)},Ht.prototype.findEdgeEnd=function(e){for(var t=this.getEdgeEnds().iterator();t.hasNext();){var n=t.next();if(n.getEdge()===e)return n}return null},Ht.prototype.addEdges=function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();this._edges.add(n);var i=new Gt(n,!0),r=new Gt(n,!1);i.setSym(r),r.setSym(i),this.add(i),this.add(r)}},Ht.prototype.add=function(e){this._nodes.add(e),this._edgeEndList.add(e)},Ht.prototype.getNodes=function(){return this._nodes.values()},Ht.prototype.findEdge=function(e,t){for(var n=0;n<this._edges.size();n++){var i=this._edges.get(n),r=i.getCoordinates();if(e.equals(r[0])&&t.equals(r[1]))return i}return null},Ht.prototype.interfaces_=function(){return[]},Ht.prototype.getClass=function(){return Ht},Ht.linkResultDirectedEdges=function(e){for(var t=e.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()};var qt=function(){this._geometryFactory=null,this._shellList=new Ee;var e=arguments[0];this._geometryFactory=e};qt.prototype.sortShellsAndHoles=function(e,t,n){for(var i=e.iterator();i.hasNext();){var r=i.next();r.isHole()?n.add(r):t.add(r)}},qt.prototype.computePolygons=function(e){for(var t=new Ee,n=e.iterator();n.hasNext();){var i=n.next().toPolygon(this._geometryFactory);t.add(i)}return t},qt.prototype.placeFreeHoles=function(e,t){for(var n=t.iterator();n.hasNext();){var i=n.next();if(null===i.getShell()){var r=this.findEdgeRingContaining(i,e);if(null===r)throw new Tt("unable to assign hole to a shell",i.getCoordinate(0));i.setShell(r)}}},qt.prototype.buildMinimalEdgeRings=function(e,t,n){for(var i=new Ee,r=e.iterator();r.hasNext();){var o=r.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var a=o.buildMinimalRings(),s=this.findShell(a);null!==s?(this.placePolygonHoles(s,a),t.add(s)):n.addAll(a)}else i.add(o)}return i},qt.prototype.containsPoint=function(e){for(var t=this._shellList.iterator();t.hasNext();)if(t.next().containsPoint(e))return!0;return!1},qt.prototype.buildMaximalEdgeRings=function(e){for(var t=new Ee,n=e.iterator();n.hasNext();){var i=n.next();if(i.isInResult()&&i.getLabel().isArea()&&null===i.getEdgeRing()){var r=new jt(i,this._geometryFactory);t.add(r),r.setInResult()}}return t},qt.prototype.placePolygonHoles=function(e,t){for(var n=t.iterator();n.hasNext();){var i=n.next();i.isHole()&&i.setShell(e)}},qt.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},qt.prototype.findEdgeRingContaining=function(e,t){for(var n=e.getLinearRing(),i=n.getEnvelopeInternal(),r=n.getCoordinateN(0),o=null,a=null,s=t.iterator();s.hasNext();){var l=s.next(),c=l.getLinearRing(),u=c.getEnvelopeInternal();null!==o&&(a=o.getLinearRing().getEnvelopeInternal());var h=!1;u.contains(i)&&se.isPointInRing(r,c.getCoordinates())&&(h=!0),h&&(null===o||a.contains(u))&&(o=l)}return o},qt.prototype.findShell=function(e){for(var t=0,n=null,i=e.iterator();i.hasNext();){var r=i.next();r.isHole()||(n=r,t++)}return te.isTrue(t<=1,"found two shells in MinimalEdgeRing list"),n},qt.prototype.add=function(){if(1===arguments.length){var e=arguments[0];this.add(e.getEdgeEnds(),e.getNodes())}else if(2===arguments.length){var t=arguments[0],n=arguments[1];Ht.linkResultDirectedEdges(n);var i=this.buildMaximalEdgeRings(t),r=new Ee,o=this.buildMinimalEdgeRings(i,this._shellList,r);this.sortShellsAndHoles(o,this._shellList,r),this.placeFreeHoles(this._shellList,r)}},qt.prototype.interfaces_=function(){return[]},qt.prototype.getClass=function(){return qt};var Wt=function(){};Wt.prototype.getBounds=function(){},Wt.prototype.interfaces_=function(){return[]},Wt.prototype.getClass=function(){return Wt};var Xt=function(){this._bounds=null,this._item=null;var e=arguments[0],t=arguments[1];this._bounds=e,this._item=t};Xt.prototype.getItem=function(){return this._item},Xt.prototype.getBounds=function(){return this._bounds},Xt.prototype.interfaces_=function(){return[Wt,t]},Xt.prototype.getClass=function(){return Xt};var Yt=function(){this._size=null,this._items=null,this._size=0,this._items=new Ee,this._items.add(null)};Yt.prototype.poll=function(){if(this.isEmpty())return null;var e=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),e},Yt.prototype.size=function(){return this._size},Yt.prototype.reorder=function(e){for(var t=null,n=this._items.get(e);2*e<=this._size&&((t=2*e)!==this._size&&this._items.get(t+1).compareTo(this._items.get(t))<0&&t++,this._items.get(t).compareTo(n)<0);e=t)this._items.set(e,this._items.get(t));this._items.set(e,n)},Yt.prototype.clear=function(){this._size=0,this._items.clear()},Yt.prototype.isEmpty=function(){return 0===this._size},Yt.prototype.add=function(e){this._items.add(null),this._size+=1;var t=this._size;for(this._items.set(0,e);e.compareTo(this._items.get(Math.trunc(t/2)))<0;t/=2)this._items.set(t,this._items.get(Math.trunc(t/2)));this._items.set(t,e)},Yt.prototype.interfaces_=function(){return[]},Yt.prototype.getClass=function(){return Yt};var Kt=function(){};Kt.prototype.visitItem=function(e){},Kt.prototype.interfaces_=function(){return[]},Kt.prototype.getClass=function(){return Kt};var Zt=function(){};Zt.prototype.insert=function(e,t){},Zt.prototype.remove=function(e,t){},Zt.prototype.query=function(){},Zt.prototype.interfaces_=function(){return[]},Zt.prototype.getClass=function(){return Zt};var Jt=function(){if(this._childBoundables=new Ee,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this._level=e}},$t={serialVersionUID:{configurable:!0}};Jt.prototype.getLevel=function(){return this._level},Jt.prototype.size=function(){return this._childBoundables.size()},Jt.prototype.getChildBoundables=function(){return this._childBoundables},Jt.prototype.addChildBoundable=function(e){te.isTrue(null===this._bounds),this._childBoundables.add(e)},Jt.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Jt.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Jt.prototype.interfaces_=function(){return[Wt,t]},Jt.prototype.getClass=function(){return Jt},$t.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Jt,$t);var Qt=function(){};Qt.reverseOrder=function(){return{compare:function(e,t){return t.compareTo(e)}}},Qt.min=function(e){return Qt.sort(e),e.get(0)},Qt.sort=function(e,t){var n=e.toArray();t?Fe.sort(n,t):Fe.sort(n);for(var i=e.iterator(),r=0,o=n.length;r<o;r++)i.next(),i.set(n[r])},Qt.singletonList=function(e){var t=new Ee;return t.add(e),t};var en=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var e=arguments[0],t=arguments[1],n=arguments[2];this._boundable1=e,this._boundable2=t,this._itemDistance=n,this._distance=this.distance()};en.prototype.expandToQueue=function(e,t){var n=en.isComposite(this._boundable1),i=en.isComposite(this._boundable2);if(n&&i)return en.area(this._boundable1)>en.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,e,t),null):(this.expand(this._boundable2,this._boundable1,e,t),null);if(n)return this.expand(this._boundable1,this._boundable2,e,t),null;if(i)return this.expand(this._boundable2,this._boundable1,e,t),null;throw new v("neither boundable is composite")},en.prototype.isLeaves=function(){return!(en.isComposite(this._boundable1)||en.isComposite(this._boundable2))},en.prototype.compareTo=function(e){var t=e;return this._distance<t._distance?-1:this._distance>t._distance?1:0},en.prototype.expand=function(e,t,n,i){for(var r=e.getChildBoundables().iterator();r.hasNext();){var o=r.next(),a=new en(o,t,this._itemDistance);a.getDistance()<i&&n.add(a)}},en.prototype.getBoundable=function(e){return 0===e?this._boundable1:this._boundable2},en.prototype.getDistance=function(){return this._distance},en.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},en.prototype.interfaces_=function(){return[w]},en.prototype.getClass=function(){return en},en.area=function(e){return e.getBounds().getArea()},en.isComposite=function(e){return e instanceof Jt};var tn=function e(){if(this._root=null,this._built=!1,this._itemBoundables=new Ee,this._nodeCapacity=null,0===arguments.length){var t=e.DEFAULT_NODE_CAPACITY;this._nodeCapacity=t}else if(1===arguments.length){var n=arguments[0];te.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},nn={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};tn.prototype.getNodeCapacity=function(){return this._nodeCapacity},tn.prototype.lastNode=function(e){return e.get(e.size()-1)},tn.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var e=0,t=arguments[0].getChildBoundables().iterator();t.hasNext();){var n=t.next();n instanceof Jt?e+=this.size(n):n instanceof Xt&&(e+=1)}return e}},tn.prototype.removeItem=function(e,t){for(var n=null,i=e.getChildBoundables().iterator();i.hasNext();){var r=i.next();r instanceof Xt&&r.getItem()===t&&(n=r)}return null!==n&&(e.getChildBoundables().remove(n),!0)},tn.prototype.itemsTree=function(){if(0===arguments.length){this.build();var e=this.itemsTree(this._root);return null===e?new Ee:e}if(1===arguments.length){for(var t=arguments[0],n=new Ee,i=t.getChildBoundables().iterator();i.hasNext();){var r=i.next();if(r instanceof Jt){var o=this.itemsTree(r);null!==o&&n.add(o)}else r instanceof Xt?n.add(r.getItem()):te.shouldNeverReachHere()}return n.size()<=0?null:n}},tn.prototype.insert=function(e,t){te.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Xt(e,t))},tn.prototype.boundablesAtLevel=function(){if(1===arguments.length){var e=arguments[0],t=new Ee;return this.boundablesAtLevel(e,this._root,t),t}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];if(te.isTrue(n>-2),i.getLevel()===n)return r.add(i),null;for(var o=i.getChildBoundables().iterator();o.hasNext();){var a=o.next();a instanceof Jt?this.boundablesAtLevel(n,a,r):(te.isTrue(a instanceof Xt),-1===n&&r.add(a))}return null}},tn.prototype.query=function(){if(1===arguments.length){var e=arguments[0];this.build();var t=new Ee;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.query(e,this._root,t),t}if(2===arguments.length){var n=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,i)}else if(3===arguments.length)if(I(arguments[2],Kt)&&arguments[0]instanceof Object&&arguments[1]instanceof Jt)for(var r=arguments[0],o=arguments[2],a=arguments[1].getChildBoundables(),s=0;s<a.size();s++){var l=a.get(s);this.getIntersectsOp().intersects(l.getBounds(),r)&&(l instanceof Jt?this.query(r,l,o):l instanceof Xt?o.visitItem(l.getItem()):te.shouldNeverReachHere())}else if(I(arguments[2],Pe)&&arguments[0]instanceof Object&&arguments[1]instanceof Jt)for(var c=arguments[0],u=arguments[2],h=arguments[1].getChildBoundables(),d=0;d<h.size();d++){var p=h.get(d);this.getIntersectsOp().intersects(p.getBounds(),c)&&(p instanceof Jt?this.query(c,p,u):p instanceof Xt?u.add(p.getItem()):te.shouldNeverReachHere())}},tn.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},tn.prototype.getRoot=function(){return this.build(),this._root},tn.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],t=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.remove(e,this._root,t)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=this.removeItem(i,r);if(o)return!0;for(var a=null,s=i.getChildBoundables().iterator();s.hasNext();){var l=s.next();if(this.getIntersectsOp().intersects(l.getBounds(),n)&&l instanceof Jt&&(o=this.remove(n,l,r))){a=l;break}}return null!==a&&a.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(a),o}},tn.prototype.createHigherLevels=function(e,t){te.isTrue(!e.isEmpty());var n=this.createParentBoundables(e,t+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,t+1)},tn.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var e=0,t=arguments[0].getChildBoundables().iterator();t.hasNext();){var n=t.next();if(n instanceof Jt){var i=this.depth(n);i>e&&(e=i)}}return e+1}},tn.prototype.createParentBoundables=function(e,t){te.isTrue(!e.isEmpty());var n=new Ee;n.add(this.createNode(t));var i=new Ee(e);Qt.sort(i,this.getComparator());for(var r=i.iterator();r.hasNext();){var o=r.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(t)),this.lastNode(n).addChildBoundable(o)}return n},tn.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},tn.prototype.interfaces_=function(){return[t]},tn.prototype.getClass=function(){return tn},tn.compareDoubles=function(e,t){return e>t?1:e<t?-1:0},nn.IntersectsOp.get=function(){return rn},nn.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},nn.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(tn,nn);var rn=function(){},on=function(){};on.prototype.distance=function(e,t){},on.prototype.interfaces_=function(){return[]},on.prototype.getClass=function(){return on};var an=function(e){function n(t){t=t||n.DEFAULT_NODE_CAPACITY,e.call(this,t)}e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n;var i={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return n.prototype.createParentBoundablesFromVerticalSlices=function(e,t){te.isTrue(e.length>0);for(var n=new Ee,i=0;i<e.length;i++)n.addAll(this.createParentBoundablesFromVerticalSlice(e[i],t));return n},n.prototype.createNode=function(e){return new sn(e)},n.prototype.size=function(){return 0===arguments.length?e.prototype.size.call(this):e.prototype.size.apply(this,arguments)},n.prototype.insert=function(){if(2!==arguments.length)return e.prototype.insert.apply(this,arguments);var t=arguments[0],n=arguments[1];if(t.isNull())return null;e.prototype.insert.call(this,t,n)},n.prototype.getIntersectsOp=function(){return n.intersectsOp},n.prototype.verticalSlices=function(e,t){for(var n=Math.trunc(Math.ceil(e.size()/t)),i=new Array(t).fill(null),r=e.iterator(),o=0;o<t;o++){i[o]=new Ee;for(var a=0;r.hasNext()&&a<n;){var s=r.next();i[o].add(s),a++}}return i},n.prototype.query=function(){if(1===arguments.length){var t=arguments[0];return e.prototype.query.call(this,t)}if(2===arguments.length){var n=arguments[0],i=arguments[1];e.prototype.query.call(this,n,i)}else if(3===arguments.length)if(I(arguments[2],Kt)&&arguments[0]instanceof Object&&arguments[1]instanceof Jt){var r=arguments[0],o=arguments[1],a=arguments[2];e.prototype.query.call(this,r,o,a)}else if(I(arguments[2],Pe)&&arguments[0]instanceof Object&&arguments[1]instanceof Jt){var s=arguments[0],l=arguments[1],c=arguments[2];e.prototype.query.call(this,s,l,c)}},n.prototype.getComparator=function(){return n.yComparator},n.prototype.createParentBoundablesFromVerticalSlice=function(t,n){return e.prototype.createParentBoundables.call(this,t,n)},n.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],n=arguments[1];return e.prototype.remove.call(this,t,n)}return e.prototype.remove.apply(this,arguments)},n.prototype.depth=function(){return 0===arguments.length?e.prototype.depth.call(this):e.prototype.depth.apply(this,arguments)},n.prototype.createParentBoundables=function(e,t){te.isTrue(!e.isEmpty());var i=Math.trunc(Math.ceil(e.size()/this.getNodeCapacity())),r=new Ee(e);Qt.sort(r,n.xComparator);var o=this.verticalSlices(r,Math.trunc(Math.ceil(Math.sqrt(i))));return this.createParentBoundablesFromVerticalSlices(o,t)},n.prototype.nearestNeighbour=function(){if(1===arguments.length){if(I(arguments[0],on)){var e=arguments[0],t=new en(this.getRoot(),this.getRoot(),e);return this.nearestNeighbour(t)}if(arguments[0]instanceof en){var i=arguments[0];return this.nearestNeighbour(i,b.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof n&&I(arguments[1],on)){var r=arguments[0],o=arguments[1],a=new en(this.getRoot(),r.getRoot(),o);return this.nearestNeighbour(a)}if(arguments[0]instanceof en&&"number"==typeof arguments[1]){var s=arguments[0],l=arguments[1],c=null,u=new Yt;for(u.add(s);!u.isEmpty()&&l>0;){var h=u.poll(),d=h.getDistance();if(d>=l)break;h.isLeaves()?(l=d,c=h):h.expandToQueue(u,l)}return[c.getBoundable(0).getItem(),c.getBoundable(1).getItem()]}}else if(3===arguments.length){var p=arguments[2],f=new Xt(arguments[0],arguments[1]),g=new en(this.getRoot(),f,p);return this.nearestNeighbour(g)[0]}},n.prototype.interfaces_=function(){return[Zt,t]},n.prototype.getClass=function(){return n},n.centreX=function(e){return n.avg(e.getMinX(),e.getMaxX())},n.avg=function(e,t){return(e+t)/2},n.centreY=function(e){return n.avg(e.getMinY(),e.getMaxY())},i.STRtreeNode.get=function(){return sn},i.serialVersionUID.get=function(){return 0x39920f7d5f261e0},i.xComparator.get=function(){return{interfaces_:function(){return[E]},compare:function(t,i){return e.compareDoubles(n.centreX(t.getBounds()),n.centreX(i.getBounds()))}}},i.yComparator.get=function(){return{interfaces_:function(){return[E]},compare:function(t,i){return e.compareDoubles(n.centreY(t.getBounds()),n.centreY(i.getBounds()))}}},i.intersectsOp.get=function(){return{interfaces_:function(){return[e.IntersectsOp]},intersects:function(e,t){return e.intersects(t)}}},i.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(n,i),n}(tn),sn=function(e){function t(){var t=arguments[0];e.call(this,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.computeBounds=function(){for(var e=null,t=this.getChildBoundables().iterator();t.hasNext();){var n=t.next();null===e?e=new W(n.getBounds()):e.expandToInclude(n.getBounds())}return e},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Jt),ln=function(){};ln.prototype.interfaces_=function(){return[]},ln.prototype.getClass=function(){return ln},ln.relativeSign=function(e,t){return e<t?-1:e>t?1:0},ln.compare=function(e,t,n){if(t.equals2D(n))return 0;var i=ln.relativeSign(t.x,n.x),r=ln.relativeSign(t.y,n.y);switch(e){case 0:return ln.compareValue(i,r);case 1:return ln.compareValue(r,i);case 2:return ln.compareValue(r,-i);case 3:return ln.compareValue(-i,r);case 4:return ln.compareValue(-i,-r);case 5:return ln.compareValue(-r,-i);case 6:return ln.compareValue(-r,i);case 7:return ln.compareValue(i,-r)}return te.shouldNeverReachHere("invalid octant value"),0},ln.compareValue=function(e,t){return e<0?-1:e>0?1:t<0?-1:t>0?1:0};var cn=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3];this._segString=e,this.coord=new x(t),this.segmentIndex=n,this._segmentOctant=i,this._isInterior=!t.equals2D(e.getCoordinate(n))};cn.prototype.getCoordinate=function(){return this.coord},cn.prototype.print=function(e){e.print(this.coord),e.print(" seg # = "+this.segmentIndex)},cn.prototype.compareTo=function(e){var t=e;return this.segmentIndex<t.segmentIndex?-1:this.segmentIndex>t.segmentIndex?1:this.coord.equals2D(t.coord)?0:ln.compare(this._segmentOctant,this.coord,t.coord)},cn.prototype.isEndPoint=function(e){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===e},cn.prototype.isInterior=function(){return this._isInterior},cn.prototype.interfaces_=function(){return[w]},cn.prototype.getClass=function(){return cn};var un=function(){this._nodeMap=new h,this._edge=null;var e=arguments[0];this._edge=e};un.prototype.getSplitCoordinates=function(){var e=new Ae;this.addEndpoints();for(var t=this.iterator(),n=t.next();t.hasNext();){var i=t.next();this.addEdgeCoordinates(n,i,e),n=i}return e.toCoordinateArray()},un.prototype.addCollapsedNodes=function(){var e=new Ee;this.findCollapsesFromInsertedNodes(e),this.findCollapsesFromExistingVertices(e);for(var t=e.iterator();t.hasNext();){var n=t.next().intValue();this.add(this._edge.getCoordinate(n),n)}},un.prototype.print=function(e){e.println("Intersections:");for(var t=this.iterator();t.hasNext();)t.next().print(e)},un.prototype.findCollapsesFromExistingVertices=function(e){for(var t=0;t<this._edge.size()-2;t++){var n=this._edge.getCoordinate(t),i=this._edge.getCoordinate(t+2);n.equals2D(i)&&e.add(new O(t+1))}},un.prototype.addEdgeCoordinates=function(e,t,n){var i=this._edge.getCoordinate(t.segmentIndex),r=t.isInterior()||!t.coord.equals2D(i);n.add(new x(e.coord),!1);for(var o=e.segmentIndex+1;o<=t.segmentIndex;o++)n.add(this._edge.getCoordinate(o));r&&n.add(new x(t.coord))},un.prototype.iterator=function(){return this._nodeMap.values().iterator()},un.prototype.addSplitEdges=function(e){this.addEndpoints(),this.addCollapsedNodes();for(var t=this.iterator(),n=t.next();t.hasNext();){var i=t.next(),r=this.createSplitEdge(n,i);e.add(r),n=i}},un.prototype.findCollapseIndex=function(e,t,n){if(!e.coord.equals2D(t.coord))return!1;var i=t.segmentIndex-e.segmentIndex;return t.isInterior()||i--,1===i&&(n[0]=e.segmentIndex+1,!0)},un.prototype.findCollapsesFromInsertedNodes=function(e){for(var t=new Array(1).fill(null),n=this.iterator(),i=n.next();n.hasNext();){var r=n.next();this.findCollapseIndex(i,r,t)&&e.add(new O(t[0])),i=r}},un.prototype.getEdge=function(){return this._edge},un.prototype.addEndpoints=function(){var e=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(e),e)},un.prototype.createSplitEdge=function(e,t){var n=t.segmentIndex-e.segmentIndex+2,i=this._edge.getCoordinate(t.segmentIndex),r=t.isInterior()||!t.coord.equals2D(i);r||n--;var o=new Array(n).fill(null),a=0;o[a++]=new x(e.coord);for(var s=e.segmentIndex+1;s<=t.segmentIndex;s++)o[a++]=this._edge.getCoordinate(s);return r&&(o[a]=new x(t.coord)),new fn(o,this._edge.getData())},un.prototype.add=function(e,t){var n=new cn(this._edge,e,t,this._edge.getSegmentOctant(t)),i=this._nodeMap.get(n);return null!==i?(te.isTrue(i.coord.equals2D(e),"Found equal nodes with different coordinates"),i):(this._nodeMap.put(n,n),n)},un.prototype.checkSplitEdgesCorrectness=function(e){var t=this._edge.getCoordinates(),n=e.get(0).getCoordinate(0);if(!n.equals2D(t[0]))throw new Q("bad split edge start point at "+n);var i=e.get(e.size()-1).getCoordinates(),r=i[i.length-1];if(!r.equals2D(t[t.length-1]))throw new Q("bad split edge end point at "+r)},un.prototype.interfaces_=function(){return[]},un.prototype.getClass=function(){return un};var hn=function(){};hn.prototype.interfaces_=function(){return[]},hn.prototype.getClass=function(){return hn},hn.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var e=arguments[0],t=arguments[1];if(0===e&&0===t)throw new v("Cannot compute the octant for point ( "+e+", "+t+" )");var n=Math.abs(e),i=Math.abs(t);return e>=0?t>=0?n>=i?0:1:n>=i?7:6:t>=0?n>=i?3:2:n>=i?4:5}if(arguments[0]instanceof x&&arguments[1]instanceof x){var r=arguments[0],o=arguments[1],a=o.x-r.x,s=o.y-r.y;if(0===a&&0===s)throw new v("Cannot compute the octant for two identical points "+r);return hn.octant(a,s)}};var dn=function(){};dn.prototype.getCoordinates=function(){},dn.prototype.size=function(){},dn.prototype.getCoordinate=function(e){},dn.prototype.isClosed=function(){},dn.prototype.setData=function(e){},dn.prototype.getData=function(){},dn.prototype.interfaces_=function(){return[]},dn.prototype.getClass=function(){return dn};var pn=function(){};pn.prototype.addIntersection=function(e,t){},pn.prototype.interfaces_=function(){return[dn]},pn.prototype.getClass=function(){return pn};var fn=function(){this._nodeList=new un(this),this._pts=null,this._data=null;var e=arguments[0],t=arguments[1];this._pts=e,this._data=t};fn.prototype.getCoordinates=function(){return this._pts},fn.prototype.size=function(){return this._pts.length},fn.prototype.getCoordinate=function(e){return this._pts[e]},fn.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},fn.prototype.getSegmentOctant=function(e){return e===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(e),this.getCoordinate(e+1))},fn.prototype.setData=function(e){this._data=e},fn.prototype.safeOctant=function(e,t){return e.equals2D(t)?0:hn.octant(e,t)},fn.prototype.getData=function(){return this._data},fn.prototype.addIntersection=function(){if(2===arguments.length){var e=arguments[0],t=arguments[1];this.addIntersectionNode(e,t)}else if(4===arguments.length){var n=arguments[1],i=arguments[3],r=new x(arguments[0].getIntersection(i));this.addIntersection(r,n)}},fn.prototype.toString=function(){return $.toLineString(new lt(this._pts))},fn.prototype.getNodeList=function(){return this._nodeList},fn.prototype.addIntersectionNode=function(e,t){var n=t,i=n+1;if(i<this._pts.length){var r=this._pts[i];e.equals2D(r)&&(n=i)}return this._nodeList.add(e,n)},fn.prototype.addIntersections=function(e,t,n){for(var i=0;i<e.getIntersectionNum();i++)this.addIntersection(e,t,n,i)},fn.prototype.interfaces_=function(){return[pn]},fn.prototype.getClass=function(){return fn},fn.getNodedSubstrings=function(){if(1===arguments.length){var e=arguments[0],t=new Ee;return fn.getNodedSubstrings(e,t),t}if(2===arguments.length)for(var n=arguments[1],i=arguments[0].iterator();i.hasNext();)i.next().getNodeList().addSplitEdges(n)};var gn=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new x,this.p1=new x;else if(1===arguments.length){var e=arguments[0];this.p0=new x(e.p0),this.p1=new x(e.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var t=arguments[0],n=arguments[1],i=arguments[2],r=arguments[3];this.p0=new x(t,n),this.p1=new x(i,r)}},mn={serialVersionUID:{configurable:!0}};gn.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},gn.prototype.orientationIndex=function(){if(arguments[0]instanceof gn){var e=arguments[0],t=se.orientationIndex(this.p0,this.p1,e.p0),n=se.orientationIndex(this.p0,this.p1,e.p1);return t>=0&&n>=0||t<=0&&n<=0?Math.max(t,n):0}if(arguments[0]instanceof x){var i=arguments[0];return se.orientationIndex(this.p0,this.p1,i)}},gn.prototype.toGeometry=function(e){return e.createLineString([this.p0,this.p1])},gn.prototype.isVertical=function(){return this.p0.x===this.p1.x},gn.prototype.equals=function(e){if(!(e instanceof gn))return!1;var t=e;return this.p0.equals(t.p0)&&this.p1.equals(t.p1)},gn.prototype.intersection=function(e){var t=new re;return t.computeIntersection(this.p0,this.p1,e.p0,e.p1),t.hasIntersection()?t.getIntersection(0):null},gn.prototype.project=function(){if(arguments[0]instanceof x){var e=arguments[0];if(e.equals(this.p0)||e.equals(this.p1))return new x(e);var t=this.projectionFactor(e),n=new x;return n.x=this.p0.x+t*(this.p1.x-this.p0.x),n.y=this.p0.y+t*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof gn){var i=arguments[0],r=this.projectionFactor(i.p0),o=this.projectionFactor(i.p1);if(r>=1&&o>=1)return null;if(r<=0&&o<=0)return null;var a=this.project(i.p0);r<0&&(a=this.p0),r>1&&(a=this.p1);var s=this.project(i.p1);return o<0&&(s=this.p0),o>1&&(s=this.p1),new gn(a,s)}},gn.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},gn.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},gn.prototype.getCoordinate=function(e){return 0===e?this.p0:this.p1},gn.prototype.distancePerpendicular=function(e){return se.distancePointLinePerpendicular(e,this.p0,this.p1)},gn.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},gn.prototype.midPoint=function(){return gn.midPoint(this.p0,this.p1)},gn.prototype.projectionFactor=function(e){if(e.equals(this.p0))return 0;if(e.equals(this.p1))return 1;var t=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,i=t*t+n*n;return i<=0?b.NaN:((e.x-this.p0.x)*t+(e.y-this.p0.y)*n)/i},gn.prototype.closestPoints=function(e){var t=this.intersection(e);if(null!==t)return[t,t];var n=new Array(2).fill(null),i=b.MAX_VALUE,r=null,o=this.closestPoint(e.p0);i=o.distance(e.p0),n[0]=o,n[1]=e.p0;var a=this.closestPoint(e.p1);(r=a.distance(e.p1))<i&&(i=r,n[0]=a,n[1]=e.p1);var s=e.closestPoint(this.p0);(r=s.distance(this.p0))<i&&(i=r,n[0]=this.p0,n[1]=s);var l=e.closestPoint(this.p1);return(r=l.distance(this.p1))<i&&(i=r,n[0]=this.p1,n[1]=l),n},gn.prototype.closestPoint=function(e){var t=this.projectionFactor(e);return t>0&&t<1?this.project(e):this.p0.distance(e)<this.p1.distance(e)?this.p0:this.p1},gn.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},gn.prototype.getLength=function(){return this.p0.distance(this.p1)},gn.prototype.compareTo=function(e){var t=e,n=this.p0.compareTo(t.p0);return 0!==n?n:this.p1.compareTo(t.p1)},gn.prototype.reverse=function(){var e=this.p0;this.p0=this.p1,this.p1=e},gn.prototype.equalsTopo=function(e){return this.p0.equals(e.p0)&&(this.p1.equals(e.p1)||this.p0.equals(e.p1))&&this.p1.equals(e.p0)},gn.prototype.lineIntersection=function(e){try{return q.intersection(this.p0,this.p1,e.p0,e.p1)}catch(e){if(!(e instanceof V))throw e}return null},gn.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},gn.prototype.pointAlongOffset=function(e,t){var n=this.p0.x+e*(this.p1.x-this.p0.x),i=this.p0.y+e*(this.p1.y-this.p0.y),r=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(r*r+o*o),s=0,l=0;if(0!==t){if(a<=0)throw new Error("Cannot compute offset from zero-length line segment");s=t*r/a,l=t*o/a}return new x(n-l,i+s)},gn.prototype.setCoordinates=function(){if(1===arguments.length){var e=arguments[0];this.setCoordinates(e.p0,e.p1)}else if(2===arguments.length){var t=arguments[0],n=arguments[1];this.p0.x=t.x,this.p0.y=t.y,this.p1.x=n.x,this.p1.y=n.y}},gn.prototype.segmentFraction=function(e){var t=this.projectionFactor(e);return t<0?t=0:(t>1||b.isNaN(t))&&(t=1),t},gn.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},gn.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},gn.prototype.distance=function(){if(arguments[0]instanceof gn){var e=arguments[0];return se.distanceLineLine(this.p0,this.p1,e.p0,e.p1)}if(arguments[0]instanceof x){var t=arguments[0];return se.distancePointLine(t,this.p0,this.p1)}},gn.prototype.pointAlong=function(e){var t=new x;return t.x=this.p0.x+e*(this.p1.x-this.p0.x),t.y=this.p0.y+e*(this.p1.y-this.p0.y),t},gn.prototype.hashCode=function(){var e=b.doubleToLongBits(this.p0.x);e^=31*b.doubleToLongBits(this.p0.y);var t=Math.trunc(e)^Math.trunc(e>>32),n=b.doubleToLongBits(this.p1.x);return n^=31*b.doubleToLongBits(this.p1.y),t^Math.trunc(n)^Math.trunc(n>>32)},gn.prototype.interfaces_=function(){return[w,t]},gn.prototype.getClass=function(){return gn},gn.midPoint=function(e,t){return new x((e.x+t.x)/2,(e.y+t.y)/2)},mn.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(gn,mn);var yn=function(){this.tempEnv1=new W,this.tempEnv2=new W,this._overlapSeg1=new gn,this._overlapSeg2=new gn};yn.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var e=arguments[1],t=arguments[2],n=arguments[3];arguments[0].getLineSegment(e,this._overlapSeg1),t.getLineSegment(n,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},yn.prototype.interfaces_=function(){return[]},yn.prototype.getClass=function(){return yn};var vn=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3];this._pts=e,this._start=t,this._end=n,this._context=i};vn.prototype.getLineSegment=function(e,t){t.p0=this._pts[e],t.p1=this._pts[e+1]},vn.prototype.computeSelect=function(e,t,n,i){var r=this._pts[t],o=this._pts[n];if(i.tempEnv1.init(r,o),n-t==1)return i.select(this,t),null;if(!e.intersects(i.tempEnv1))return null;var a=Math.trunc((t+n)/2);t<a&&this.computeSelect(e,t,a,i),a<n&&this.computeSelect(e,a,n,i)},vn.prototype.getCoordinates=function(){for(var e=new Array(this._end-this._start+1).fill(null),t=0,n=this._start;n<=this._end;n++)e[t++]=this._pts[n];return e},vn.prototype.computeOverlaps=function(e,t){this.computeOverlapsInternal(this._start,this._end,e,e._start,e._end,t)},vn.prototype.setId=function(e){this._id=e},vn.prototype.select=function(e,t){this.computeSelect(e,this._start,this._end,t)},vn.prototype.getEnvelope=function(){if(null===this._env){var e=this._pts[this._start],t=this._pts[this._end];this._env=new W(e,t)}return this._env},vn.prototype.getEndIndex=function(){return this._end},vn.prototype.getStartIndex=function(){return this._start},vn.prototype.getContext=function(){return this._context},vn.prototype.getId=function(){return this._id},vn.prototype.computeOverlapsInternal=function(e,t,n,i,r,o){var a=this._pts[e],s=this._pts[t],l=n._pts[i],c=n._pts[r];if(t-e==1&&r-i==1)return o.overlap(this,e,n,i),null;if(o.tempEnv1.init(a,s),o.tempEnv2.init(l,c),!o.tempEnv1.intersects(o.tempEnv2))return null;var u=Math.trunc((e+t)/2),h=Math.trunc((i+r)/2);e<u&&(i<h&&this.computeOverlapsInternal(e,u,n,i,h,o),h<r&&this.computeOverlapsInternal(e,u,n,h,r,o)),u<t&&(i<h&&this.computeOverlapsInternal(u,t,n,i,h,o),h<r&&this.computeOverlapsInternal(u,t,n,h,r,o))},vn.prototype.interfaces_=function(){return[]},vn.prototype.getClass=function(){return vn};var bn=function(){};bn.prototype.interfaces_=function(){return[]},bn.prototype.getClass=function(){return bn},bn.getChainStartIndices=function(e){var t=0,n=new Ee;n.add(new O(t));do{var i=bn.findChainEnd(e,t);n.add(new O(i)),t=i}while(t<e.length-1);return bn.toIntArray(n)},bn.findChainEnd=function(e,t){for(var n=t;n<e.length-1&&e[n].equals2D(e[n+1]);)n++;if(n>=e.length-1)return e.length-1;for(var i=Ut.quadrant(e[n],e[n+1]),r=t+1;r<e.length&&(e[r-1].equals2D(e[r])||Ut.quadrant(e[r-1],e[r])===i);)r++;return r-1},bn.getChains=function(){if(1===arguments.length){var e=arguments[0];return bn.getChains(e,null)}if(2===arguments.length){for(var t=arguments[0],n=arguments[1],i=new Ee,r=bn.getChainStartIndices(t),o=0;o<r.length-1;o++){var a=new vn(t,r[o],r[o+1],n);i.add(a)}return i}},bn.toIntArray=function(e){for(var t=new Array(e.size()).fill(null),n=0;n<t.length;n++)t[n]=e.get(n).intValue();return t};var _n=function(){};_n.prototype.computeNodes=function(e){},_n.prototype.getNodedSubstrings=function(){},_n.prototype.interfaces_=function(){return[]},_n.prototype.getClass=function(){return _n};var wn=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setSegmentIntersector(e)}};wn.prototype.setSegmentIntersector=function(e){this._segInt=e},wn.prototype.interfaces_=function(){return[_n]},wn.prototype.getClass=function(){return wn};var Pn=function(e){function t(t){t?e.call(this,t):e.call(this),this._monoChains=new Ee,this._index=new an,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={SegmentOverlapAction:{configurable:!0}};return t.prototype.getMonotoneChains=function(){return this._monoChains},t.prototype.getNodedSubstrings=function(){return fn.getNodedSubstrings(this._nodedSegStrings)},t.prototype.getIndex=function(){return this._index},t.prototype.add=function(e){for(var t=bn.getChains(e.getCoordinates(),e).iterator();t.hasNext();){var n=t.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}},t.prototype.computeNodes=function(e){this._nodedSegStrings=e;for(var t=e.iterator();t.hasNext();)this.add(t.next());this.intersectChains()},t.prototype.intersectChains=function(){for(var e=new En(this._segInt),t=this._monoChains.iterator();t.hasNext();)for(var n=t.next(),i=this._index.query(n.getEnvelope()).iterator();i.hasNext();){var r=i.next();if(r.getId()>n.getId()&&(n.computeOverlaps(r,e),this._nOverlaps++),this._segInt.isDone())return null}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},n.SegmentOverlapAction.get=function(){return En},Object.defineProperties(t,n),t}(wn),En=function(e){function t(){e.call(this),this._si=null;var t=arguments[0];this._si=t}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.overlap=function(){if(4!==arguments.length)return e.prototype.overlap.apply(this,arguments);var t=arguments[1],n=arguments[2],i=arguments[3],r=arguments[0].getContext(),o=n.getContext();this._si.processIntersections(r,t,o,i)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(yn),xn=function e(){if(this._quadrantSegments=e.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=e.CAP_ROUND,this._joinStyle=e.JOIN_ROUND,this._mitreLimit=e.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=e.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setQuadrantSegments(t)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(i)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this.setQuadrantSegments(r),this.setEndCapStyle(o),this.setJoinStyle(a),this.setMitreLimit(s)}},An={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};xn.prototype.getEndCapStyle=function(){return this._endCapStyle},xn.prototype.isSingleSided=function(){return this._isSingleSided},xn.prototype.setQuadrantSegments=function(e){this._quadrantSegments=e,0===this._quadrantSegments&&(this._joinStyle=xn.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=xn.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),e<=0&&(this._quadrantSegments=1),this._joinStyle!==xn.JOIN_ROUND&&(this._quadrantSegments=xn.DEFAULT_QUADRANT_SEGMENTS)},xn.prototype.getJoinStyle=function(){return this._joinStyle},xn.prototype.setJoinStyle=function(e){this._joinStyle=e},xn.prototype.setSimplifyFactor=function(e){this._simplifyFactor=e<0?0:e},xn.prototype.getSimplifyFactor=function(){return this._simplifyFactor},xn.prototype.getQuadrantSegments=function(){return this._quadrantSegments},xn.prototype.setEndCapStyle=function(e){this._endCapStyle=e},xn.prototype.getMitreLimit=function(){return this._mitreLimit},xn.prototype.setMitreLimit=function(e){this._mitreLimit=e},xn.prototype.setSingleSided=function(e){this._isSingleSided=e},xn.prototype.interfaces_=function(){return[]},xn.prototype.getClass=function(){return xn},xn.bufferDistanceError=function(e){var t=Math.PI/2/e;return 1-Math.cos(t/2)},An.CAP_ROUND.get=function(){return 1},An.CAP_FLAT.get=function(){return 2},An.CAP_SQUARE.get=function(){return 3},An.JOIN_ROUND.get=function(){return 1},An.JOIN_MITRE.get=function(){return 2},An.JOIN_BEVEL.get=function(){return 3},An.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},An.DEFAULT_MITRE_LIMIT.get=function(){return 5},An.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(xn,An);var Cn=function(e){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=se.COUNTERCLOCKWISE,this._inputLine=e||null},Sn={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Cn.prototype.isDeletable=function(e,t,n,i){var r=this._inputLine[e],o=this._inputLine[t],a=this._inputLine[n];return!!this.isConcave(r,o,a)&&!!this.isShallow(r,o,a,i)&&this.isShallowSampled(r,o,e,n,i)},Cn.prototype.deleteShallowConcavities=function(){for(var e=1,t=this.findNextNonDeletedIndex(e),n=this.findNextNonDeletedIndex(t),i=!1;n<this._inputLine.length;){var r=!1;this.isDeletable(e,t,n,this._distanceTol)&&(this._isDeleted[t]=Cn.DELETE,r=!0,i=!0),e=r?n:t,t=this.findNextNonDeletedIndex(e),n=this.findNextNonDeletedIndex(t)}return i},Cn.prototype.isShallowConcavity=function(e,t,n,i){return se.computeOrientation(e,t,n)===this._angleOrientation&&se.distancePointLine(t,e,n)<i},Cn.prototype.isShallowSampled=function(e,t,n,i,r){var o=Math.trunc((i-n)/Cn.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var a=n;a<i;a+=o)if(!this.isShallow(e,t,this._inputLine[a],r))return!1;return!0},Cn.prototype.isConcave=function(e,t,n){return se.computeOrientation(e,t,n)===this._angleOrientation},Cn.prototype.simplify=function(e){this._distanceTol=Math.abs(e),e<0&&(this._angleOrientation=se.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var t=!1;do{t=this.deleteShallowConcavities()}while(t);return this.collapseLine()},Cn.prototype.findNextNonDeletedIndex=function(e){for(var t=e+1;t<this._inputLine.length&&this._isDeleted[t]===Cn.DELETE;)t++;return t},Cn.prototype.isShallow=function(e,t,n,i){return se.distancePointLine(t,e,n)<i},Cn.prototype.collapseLine=function(){for(var e=new Ae,t=0;t<this._inputLine.length;t++)this._isDeleted[t]!==Cn.DELETE&&e.add(this._inputLine[t]);return e.toCoordinateArray()},Cn.prototype.interfaces_=function(){return[]},Cn.prototype.getClass=function(){return Cn},Cn.simplify=function(e,t){return new Cn(e).simplify(t)},Sn.INIT.get=function(){return 0},Sn.DELETE.get=function(){return 1},Sn.KEEP.get=function(){return 1},Sn.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Cn,Sn);var Tn=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new Ee},Rn={COORDINATE_ARRAY_TYPE:{configurable:!0}};Tn.prototype.getCoordinates=function(){return this._ptList.toArray(Tn.COORDINATE_ARRAY_TYPE)},Tn.prototype.setPrecisionModel=function(e){this._precisionModel=e},Tn.prototype.addPt=function(e){var t=new x(e);if(this._precisionModel.makePrecise(t),this.isRedundant(t))return null;this._ptList.add(t)},Tn.prototype.revere=function(){},Tn.prototype.addPts=function(e,t){if(t)for(var n=0;n<e.length;n++)this.addPt(e[n]);else for(var i=e.length-1;i>=0;i--)this.addPt(e[i])},Tn.prototype.isRedundant=function(e){if(this._ptList.size()<1)return!1;var t=this._ptList.get(this._ptList.size()-1);return e.distance(t)<this._minimimVertexDistance},Tn.prototype.toString=function(){return(new yt).createLineString(this.getCoordinates()).toString()},Tn.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var e=new x(this._ptList.get(0)),t=this._ptList.get(this._ptList.size()-1);if(e.equals(t))return null;this._ptList.add(e)},Tn.prototype.setMinimumVertexDistance=function(e){this._minimimVertexDistance=e},Tn.prototype.interfaces_=function(){return[]},Tn.prototype.getClass=function(){return Tn},Rn.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Tn,Rn);var In=function(){},Mn={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};In.prototype.interfaces_=function(){return[]},In.prototype.getClass=function(){return In},In.toDegrees=function(e){return 180*e/Math.PI},In.normalize=function(e){for(;e>Math.PI;)e-=In.PI_TIMES_2;for(;e<=-Math.PI;)e+=In.PI_TIMES_2;return e},In.angle=function(){if(1===arguments.length){var e=arguments[0];return Math.atan2(e.y,e.x)}if(2===arguments.length){var t=arguments[0],n=arguments[1],i=n.x-t.x,r=n.y-t.y;return Math.atan2(r,i)}},In.isAcute=function(e,t,n){var i=e.x-t.x,r=e.y-t.y;return i*(n.x-t.x)+r*(n.y-t.y)>0},In.isObtuse=function(e,t,n){var i=e.x-t.x,r=e.y-t.y;return i*(n.x-t.x)+r*(n.y-t.y)<0},In.interiorAngle=function(e,t,n){var i=In.angle(t,e),r=In.angle(t,n);return Math.abs(r-i)},In.normalizePositive=function(e){if(e<0){for(;e<0;)e+=In.PI_TIMES_2;e>=In.PI_TIMES_2&&(e=0)}else{for(;e>=In.PI_TIMES_2;)e-=In.PI_TIMES_2;e<0&&(e=0)}return e},In.angleBetween=function(e,t,n){var i=In.angle(t,e),r=In.angle(t,n);return In.diff(i,r)},In.diff=function(e,t){var n=null;return(n=e<t?t-e:e-t)>Math.PI&&(n=2*Math.PI-n),n},In.toRadians=function(e){return e*Math.PI/180},In.getTurn=function(e,t){var n=Math.sin(t-e);return n>0?In.COUNTERCLOCKWISE:n<0?In.CLOCKWISE:In.NONE},In.angleBetweenOriented=function(e,t,n){var i=In.angle(t,e),r=In.angle(t,n)-i;return r<=-Math.PI?r+In.PI_TIMES_2:r>Math.PI?r-In.PI_TIMES_2:r},Mn.PI_TIMES_2.get=function(){return 2*Math.PI},Mn.PI_OVER_2.get=function(){return Math.PI/2},Mn.PI_OVER_4.get=function(){return Math.PI/4},Mn.COUNTERCLOCKWISE.get=function(){return se.COUNTERCLOCKWISE},Mn.CLOCKWISE.get=function(){return se.CLOCKWISE},Mn.NONE.get=function(){return se.COLLINEAR},Object.defineProperties(In,Mn);var Ln=function e(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new gn,this._seg1=new gn,this._offset0=new gn,this._offset1=new gn,this._side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],n=arguments[1],i=arguments[2];this._precisionModel=t,this._bufParams=n,this._li=new re,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===xn.JOIN_ROUND&&(this._closingSegLengthFactor=e.MAX_CLOSING_SEG_LEN_FACTOR),this.init(i)},Dn={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Ln.prototype.addNextSegment=function(e,t){if(this._s0=this._s1,this._s1=this._s2,this._s2=e,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=se.computeOrientation(this._s0,this._s1,this._s2),i=n===se.CLOCKWISE&&this._side===At.LEFT||n===se.COUNTERCLOCKWISE&&this._side===At.RIGHT;0===n?this.addCollinear(t):i?this.addOutsideTurn(n,t):this.addInsideTurn(n,t)},Ln.prototype.addLineEndCap=function(e,t){var n=new gn(e,t),i=new gn;this.computeOffsetSegment(n,At.LEFT,this._distance,i);var r=new gn;this.computeOffsetSegment(n,At.RIGHT,this._distance,r);var o=t.x-e.x,a=t.y-e.y,s=Math.atan2(a,o);switch(this._bufParams.getEndCapStyle()){case xn.CAP_ROUND:this._segList.addPt(i.p1),this.addFilletArc(t,s+Math.PI/2,s-Math.PI/2,se.CLOCKWISE,this._distance),this._segList.addPt(r.p1);break;case xn.CAP_FLAT:this._segList.addPt(i.p1),this._segList.addPt(r.p1);break;case xn.CAP_SQUARE:var l=new x;l.x=Math.abs(this._distance)*Math.cos(s),l.y=Math.abs(this._distance)*Math.sin(s);var c=new x(i.p1.x+l.x,i.p1.y+l.y),u=new x(r.p1.x+l.x,r.p1.y+l.y);this._segList.addPt(c),this._segList.addPt(u)}},Ln.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Ln.prototype.addMitreJoin=function(e,t,n,i){var r=!0,o=null;try{o=q.intersection(t.p0,t.p1,n.p0,n.p1),(i<=0?1:o.distance(e)/Math.abs(i))>this._bufParams.getMitreLimit()&&(r=!1)}catch(e){if(!(e instanceof V))throw e;o=new x(0,0),r=!1}r?this._segList.addPt(o):this.addLimitedMitreJoin(t,n,i,this._bufParams.getMitreLimit())},Ln.prototype.addFilletCorner=function(e,t,n,i,r){var o=t.x-e.x,a=t.y-e.y,s=Math.atan2(a,o),l=n.x-e.x,c=n.y-e.y,u=Math.atan2(c,l);i===se.CLOCKWISE?s<=u&&(s+=2*Math.PI):s>=u&&(s-=2*Math.PI),this._segList.addPt(t),this.addFilletArc(e,s,u,i,r),this._segList.addPt(n)},Ln.prototype.addOutsideTurn=function(e,t){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Ln.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===xn.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===xn.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(t&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,e,this._distance),this._segList.addPt(this._offset1.p0))},Ln.prototype.createSquare=function(e){this._segList.addPt(new x(e.x+this._distance,e.y+this._distance)),this._segList.addPt(new x(e.x+this._distance,e.y-this._distance)),this._segList.addPt(new x(e.x-this._distance,e.y-this._distance)),this._segList.addPt(new x(e.x-this._distance,e.y+this._distance)),this._segList.closeRing()},Ln.prototype.addSegments=function(e,t){this._segList.addPts(e,t)},Ln.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Ln.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Ln.prototype.initSideSegments=function(e,t,n){this._s1=e,this._s2=t,this._side=n,this._seg1.setCoordinates(e,t),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},Ln.prototype.addLimitedMitreJoin=function(e,t,n,i){var r=this._seg0.p1,o=In.angle(r,this._seg0.p0),a=In.angleBetweenOriented(this._seg0.p0,r,this._seg1.p1)/2,s=In.normalize(o+a),l=In.normalize(s+Math.PI),c=i*n,u=n-c*Math.abs(Math.sin(a)),h=r.x+c*Math.cos(l),d=r.y+c*Math.sin(l),p=new x(h,d),f=new gn(r,p),g=f.pointAlongOffset(1,u),m=f.pointAlongOffset(1,-u);this._side===At.LEFT?(this._segList.addPt(g),this._segList.addPt(m)):(this._segList.addPt(m),this._segList.addPt(g))},Ln.prototype.computeOffsetSegment=function(e,t,n,i){var r=t===At.LEFT?1:-1,o=e.p1.x-e.p0.x,a=e.p1.y-e.p0.y,s=Math.sqrt(o*o+a*a),l=r*n*o/s,c=r*n*a/s;i.p0.x=e.p0.x-c,i.p0.y=e.p0.y+l,i.p1.x=e.p1.x-c,i.p1.y=e.p1.y+l},Ln.prototype.addFilletArc=function(e,t,n,i,r){var o=i===se.CLOCKWISE?-1:1,a=Math.abs(t-n),s=Math.trunc(a/this._filletAngleQuantum+.5);if(s<1)return null;for(var l=a/s,c=0,u=new x;c<a;){var h=t+o*c;u.x=e.x+r*Math.cos(h),u.y=e.y+r*Math.sin(h),this._segList.addPt(u),c+=l}},Ln.prototype.addInsideTurn=function(e,t){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Ln.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new x((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var i=new x((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(i)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Ln.prototype.createCircle=function(e){var t=new x(e.x+this._distance,e.y);this._segList.addPt(t),this.addFilletArc(e,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Ln.prototype.addBevelJoin=function(e,t){this._segList.addPt(e.p1),this._segList.addPt(t.p0)},Ln.prototype.init=function(e){this._distance=e,this._maxCurveSegmentError=e*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Tn,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(e*Ln.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Ln.prototype.addCollinear=function(e){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===xn.JOIN_BEVEL||this._bufParams.getJoinStyle()===xn.JOIN_MITRE?(e&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,se.CLOCKWISE,this._distance))},Ln.prototype.closeRing=function(){this._segList.closeRing()},Ln.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Ln.prototype.interfaces_=function(){return[]},Ln.prototype.getClass=function(){return Ln},Dn.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},Dn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},Dn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Dn.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Ln,Dn);var On=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var e=arguments[0],t=arguments[1];this._precisionModel=e,this._bufParams=t};On.prototype.getOffsetCurve=function(e,t){if(this._distance=t,0===t)return null;var n=t<0,i=Math.abs(t),r=this.getSegGen(i);e.length<=1?this.computePointCurve(e[0],r):this.computeOffsetCurve(e,n,r);var o=r.getCoordinates();return n&&Ce.reverse(o),o},On.prototype.computeSingleSidedBufferCurve=function(e,t,n){var i=this.simplifyTolerance(this._distance);if(t){n.addSegments(e,!0);var r=Cn.simplify(e,-i),o=r.length-1;n.initSideSegments(r[o],r[o-1],At.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(r[a],!0)}else{n.addSegments(e,!1);var s=Cn.simplify(e,i),l=s.length-1;n.initSideSegments(s[0],s[1],At.LEFT),n.addFirstSegment();for(var c=2;c<=l;c++)n.addNextSegment(s[c],!0)}n.addLastSegment(),n.closeRing()},On.prototype.computeRingBufferCurve=function(e,t,n){var i=this.simplifyTolerance(this._distance);t===At.RIGHT&&(i=-i);var r=Cn.simplify(e,i),o=r.length-1;n.initSideSegments(r[o-1],r[0],t);for(var a=1;a<=o;a++){var s=1!==a;n.addNextSegment(r[a],s)}n.closeRing()},On.prototype.computeLineBufferCurve=function(e,t){var n=this.simplifyTolerance(this._distance),i=Cn.simplify(e,n),r=i.length-1;t.initSideSegments(i[0],i[1],At.LEFT);for(var o=2;o<=r;o++)t.addNextSegment(i[o],!0);t.addLastSegment(),t.addLineEndCap(i[r-1],i[r]);var a=Cn.simplify(e,-n),s=a.length-1;t.initSideSegments(a[s],a[s-1],At.LEFT);for(var l=s-2;l>=0;l--)t.addNextSegment(a[l],!0);t.addLastSegment(),t.addLineEndCap(a[1],a[0]),t.closeRing()},On.prototype.computePointCurve=function(e,t){switch(this._bufParams.getEndCapStyle()){case xn.CAP_ROUND:t.createCircle(e);break;case xn.CAP_SQUARE:t.createSquare(e)}},On.prototype.getLineCurve=function(e,t){if(this._distance=t,t<0&&!this._bufParams.isSingleSided())return null;if(0===t)return null;var n=Math.abs(t),i=this.getSegGen(n);if(e.length<=1)this.computePointCurve(e[0],i);else if(this._bufParams.isSingleSided()){var r=t<0;this.computeSingleSidedBufferCurve(e,r,i)}else this.computeLineBufferCurve(e,i);return i.getCoordinates()},On.prototype.getBufferParameters=function(){return this._bufParams},On.prototype.simplifyTolerance=function(e){return e*this._bufParams.getSimplifyFactor()},On.prototype.getRingCurve=function(e,t,n){if(this._distance=n,e.length<=2)return this.getLineCurve(e,n);if(0===n)return On.copyCoordinates(e);var i=this.getSegGen(n);return this.computeRingBufferCurve(e,t,i),i.getCoordinates()},On.prototype.computeOffsetCurve=function(e,t,n){var i=this.simplifyTolerance(this._distance);if(t){var r=Cn.simplify(e,-i),o=r.length-1;n.initSideSegments(r[o],r[o-1],At.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(r[a],!0)}else{var s=Cn.simplify(e,i),l=s.length-1;n.initSideSegments(s[0],s[1],At.LEFT),n.addFirstSegment();for(var c=2;c<=l;c++)n.addNextSegment(s[c],!0)}n.addLastSegment()},On.prototype.getSegGen=function(e){return new Ln(this._precisionModel,this._bufParams,e)},On.prototype.interfaces_=function(){return[]},On.prototype.getClass=function(){return On},On.copyCoordinates=function(e){for(var t=new Array(e.length).fill(null),n=0;n<t.length;n++)t[n]=new x(e[n]);return t};var jn=function(){this._subgraphs=null,this._seg=new gn,this._cga=new se;var e=arguments[0];this._subgraphs=e},Nn={DepthSegment:{configurable:!0}};jn.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var e=arguments[0],t=new Ee,n=this._subgraphs.iterator();n.hasNext();){var i=n.next(),r=i.getEnvelope();e.y<r.getMinY()||e.y>r.getMaxY()||this.findStabbedSegments(e,i.getDirectedEdges(),t)}return t}if(3===arguments.length)if(I(arguments[2],Pe)&&arguments[0]instanceof x&&arguments[1]instanceof Gt){for(var o=arguments[0],a=arguments[1],s=arguments[2],l=a.getEdge().getCoordinates(),c=0;c<l.length-1;c++)if(this._seg.p0=l[c],this._seg.p1=l[c+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x||this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||se.computeOrientation(this._seg.p0,this._seg.p1,o)===se.RIGHT)){var u=a.getDepth(At.LEFT);this._seg.p0.equals(l[c])||(u=a.getDepth(At.RIGHT));var h=new Fn(this._seg,u);s.add(h)}}else if(I(arguments[2],Pe)&&arguments[0]instanceof x&&I(arguments[1],Pe))for(var d=arguments[0],p=arguments[2],f=arguments[1].iterator();f.hasNext();){var g=f.next();g.isForward()&&this.findStabbedSegments(d,g,p)}},jn.prototype.getDepth=function(e){var t=this.findStabbedSegments(e);return 0===t.size()?0:Qt.min(t)._leftDepth},jn.prototype.interfaces_=function(){return[]},jn.prototype.getClass=function(){return jn},Nn.DepthSegment.get=function(){return Fn},Object.defineProperties(jn,Nn);var Fn=function(){this._upwardSeg=null,this._leftDepth=null;var e=arguments[0],t=arguments[1];this._upwardSeg=new gn(e),this._leftDepth=t};Fn.prototype.compareTo=function(e){var t=e;if(this._upwardSeg.minX()>=t._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=t._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(t._upwardSeg);return 0!==n||0!=(n=-1*t._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(t._upwardSeg)},Fn.prototype.compareX=function(e,t){var n=e.p0.compareTo(t.p0);return 0!==n?n:e.p1.compareTo(t.p1)},Fn.prototype.toString=function(){return this._upwardSeg.toString()},Fn.prototype.interfaces_=function(){return[w]},Fn.prototype.getClass=function(){return Fn};var kn=function(e,t,n){this.p0=e||null,this.p1=t||null,this.p2=n||null};kn.prototype.area=function(){return kn.area(this.p0,this.p1,this.p2)},kn.prototype.signedArea=function(){return kn.signedArea(this.p0,this.p1,this.p2)},kn.prototype.interpolateZ=function(e){if(null===e)throw new v("Supplied point is null.");return kn.interpolateZ(e,this.p0,this.p1,this.p2)},kn.prototype.longestSideLength=function(){return kn.longestSideLength(this.p0,this.p1,this.p2)},kn.prototype.isAcute=function(){return kn.isAcute(this.p0,this.p1,this.p2)},kn.prototype.circumcentre=function(){return kn.circumcentre(this.p0,this.p1,this.p2)},kn.prototype.area3D=function(){return kn.area3D(this.p0,this.p1,this.p2)},kn.prototype.centroid=function(){return kn.centroid(this.p0,this.p1,this.p2)},kn.prototype.inCentre=function(){return kn.inCentre(this.p0,this.p1,this.p2)},kn.prototype.interfaces_=function(){return[]},kn.prototype.getClass=function(){return kn},kn.area=function(e,t,n){return Math.abs(((n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y))/2)},kn.signedArea=function(e,t,n){return((n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y))/2},kn.det=function(e,t,n,i){return e*i-t*n},kn.interpolateZ=function(e,t,n,i){var r=t.x,o=t.y,a=n.x-r,s=i.x-r,l=n.y-o,c=i.y-o,u=a*c-s*l,h=e.x-r,d=e.y-o,p=(c*h-s*d)/u,f=(-l*h+a*d)/u;return t.z+p*(n.z-t.z)+f*(i.z-t.z)},kn.longestSideLength=function(e,t,n){var i=e.distance(t),r=t.distance(n),o=n.distance(e),a=i;return r>a&&(a=r),o>a&&(a=o),a},kn.isAcute=function(e,t,n){return!!In.isAcute(e,t,n)&&!!In.isAcute(t,n,e)&&!!In.isAcute(n,e,t)},kn.circumcentre=function(e,t,n){var i=n.x,r=n.y,o=e.x-i,a=e.y-r,s=t.x-i,l=t.y-r,c=2*kn.det(o,a,s,l),u=kn.det(a,o*o+a*a,l,s*s+l*l),h=kn.det(o,o*o+a*a,s,s*s+l*l);return new x(i-u/c,r+h/c)},kn.perpendicularBisector=function(e,t){var n=t.x-e.x,i=t.y-e.y,r=new q(e.x+n/2,e.y+i/2,1),o=new q(e.x-i+n/2,e.y+n+i/2,1);return new q(r,o)},kn.angleBisector=function(e,t,n){var i=t.distance(e),r=i/(i+t.distance(n)),o=n.x-e.x,a=n.y-e.y;return new x(e.x+r*o,e.y+r*a)},kn.area3D=function(e,t,n){var i=t.x-e.x,r=t.y-e.y,o=t.z-e.z,a=n.x-e.x,s=n.y-e.y,l=n.z-e.z,c=r*l-o*s,u=o*a-i*l,h=i*s-r*a,d=c*c+u*u+h*h;return Math.sqrt(d)/2},kn.centroid=function(e,t,n){var i=(e.x+t.x+n.x)/3,r=(e.y+t.y+n.y)/3;return new x(i,r)},kn.inCentre=function(e,t,n){var i=t.distance(n),r=e.distance(n),o=e.distance(t),a=i+r+o,s=(i*e.x+r*t.x+o*n.x)/a,l=(i*e.y+r*t.y+o*n.y)/a;return new x(s,l)};var Un=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new Ee;var e=arguments[0],t=arguments[1],n=arguments[2];this._inputGeom=e,this._distance=t,this._curveBuilder=n};Un.prototype.addPoint=function(e){if(this._distance<=0)return null;var t=e.getCoordinates(),n=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(n,T.EXTERIOR,T.INTERIOR)},Un.prototype.addPolygon=function(e){var t=this._distance,n=At.LEFT;this._distance<0&&(t=-this._distance,n=At.RIGHT);var i=e.getExteriorRing(),r=Ce.removeRepeatedPoints(i.getCoordinates());if(this._distance<0&&this.isErodedCompletely(i,this._distance))return null;if(this._distance<=0&&r.length<3)return null;this.addPolygonRing(r,t,n,T.EXTERIOR,T.INTERIOR);for(var o=0;o<e.getNumInteriorRing();o++){var a=e.getInteriorRingN(o),s=Ce.removeRepeatedPoints(a.getCoordinates());this._distance>0&&this.isErodedCompletely(a,-this._distance)||this.addPolygonRing(s,t,At.opposite(n),T.INTERIOR,T.EXTERIOR)}},Un.prototype.isTriangleErodedCompletely=function(e,t){var n=new kn(e[0],e[1],e[2]),i=n.inCentre();return se.distancePointLine(i,n.p0,n.p1)<Math.abs(t)},Un.prototype.addLineString=function(e){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var t=Ce.removeRepeatedPoints(e.getCoordinates()),n=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(n,T.EXTERIOR,T.INTERIOR)},Un.prototype.addCurve=function(e,t,n){if(null===e||e.length<2)return null;var i=new fn(e,new Lt(0,T.BOUNDARY,t,n));this._curveList.add(i)},Un.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},Un.prototype.addPolygonRing=function(e,t,n,i,r){if(0===t&&e.length<tt.MINIMUM_VALID_SIZE)return null;var o=i,a=r;e.length>=tt.MINIMUM_VALID_SIZE&&se.isCCW(e)&&(o=r,a=i,n=At.opposite(n));var s=this._curveBuilder.getRingCurve(e,n,t);this.addCurve(s,o,a)},Un.prototype.add=function(e){if(e.isEmpty())return null;e instanceof Qe?this.addPolygon(e):e instanceof Ke?this.addLineString(e):e instanceof Je?this.addPoint(e):(e instanceof et||e instanceof Ve||e instanceof nt||e instanceof Ge)&&this.addCollection(e)},Un.prototype.isErodedCompletely=function(e,t){var n=e.getCoordinates();if(n.length<4)return t<0;if(4===n.length)return this.isTriangleErodedCompletely(n,t);var i=e.getEnvelopeInternal(),r=Math.min(i.getHeight(),i.getWidth());return t<0&&2*Math.abs(t)>r},Un.prototype.addCollection=function(e){for(var t=0;t<e.getNumGeometries();t++){var n=e.getGeometryN(t);this.add(n)}},Un.prototype.interfaces_=function(){return[]},Un.prototype.getClass=function(){return Un};var zn=function(){};zn.prototype.locate=function(e){},zn.prototype.interfaces_=function(){return[]},zn.prototype.getClass=function(){return zn};var Bn=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var e=arguments[0];this._parent=e,this._atStart=!0,this._index=0,this._max=e.getNumGeometries()};Bn.prototype.next=function(){if(this._atStart)return this._atStart=!1,Bn.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new i;var e=this._parent.getGeometryN(this._index++);return e instanceof Ge?(this._subcollectionIterator=new Bn(e),this._subcollectionIterator.next()):e},Bn.prototype.remove=function(){throw new Error(this.getClass().getName())},Bn.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Bn.prototype.interfaces_=function(){return[we]},Bn.prototype.getClass=function(){return Bn},Bn.isAtomic=function(e){return!(e instanceof Ge)};var Gn=function(){this._geom=null;var e=arguments[0];this._geom=e};Gn.prototype.locate=function(e){return Gn.locate(e,this._geom)},Gn.prototype.interfaces_=function(){return[zn]},Gn.prototype.getClass=function(){return Gn},Gn.isPointInRing=function(e,t){return!!t.getEnvelopeInternal().intersects(e)&&se.isPointInRing(e,t.getCoordinates())},Gn.containsPointInPolygon=function(e,t){if(t.isEmpty())return!1;var n=t.getExteriorRing();if(!Gn.isPointInRing(e,n))return!1;for(var i=0;i<t.getNumInteriorRing();i++){var r=t.getInteriorRingN(i);if(Gn.isPointInRing(e,r))return!1}return!0},Gn.containsPoint=function(e,t){if(t instanceof Qe)return Gn.containsPointInPolygon(e,t);if(t instanceof Ge)for(var n=new Bn(t);n.hasNext();){var i=n.next();if(i!==t&&Gn.containsPoint(e,i))return!0}return!1},Gn.locate=function(e,t){return t.isEmpty()?T.EXTERIOR:Gn.containsPoint(e,t)?T.INTERIOR:T.EXTERIOR};var Vn=function(){this._edgeMap=new h,this._edgeList=null,this._ptInAreaLocation=[T.NONE,T.NONE]};Vn.prototype.getNextCW=function(e){this.getEdges();var t=this._edgeList.indexOf(e),n=t-1;return 0===t&&(n=this._edgeList.size()-1),this._edgeList.get(n)},Vn.prototype.propagateSideLabels=function(e){for(var t=T.NONE,n=this.iterator();n.hasNext();){var i=n.next().getLabel();i.isArea(e)&&i.getLocation(e,At.LEFT)!==T.NONE&&(t=i.getLocation(e,At.LEFT))}if(t===T.NONE)return null;for(var r=t,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getLabel();if(s.getLocation(e,At.ON)===T.NONE&&s.setLocation(e,At.ON,r),s.isArea(e)){var l=s.getLocation(e,At.LEFT),c=s.getLocation(e,At.RIGHT);if(c!==T.NONE){if(c!==r)throw new Tt("side location conflict",a.getCoordinate());l===T.NONE&&te.shouldNeverReachHere("found single null side (at "+a.getCoordinate()+")"),r=l}else te.isTrue(s.getLocation(e,At.LEFT)===T.NONE,"found single null side"),s.setLocation(e,At.RIGHT,r),s.setLocation(e,At.LEFT,r)}}},Vn.prototype.getCoordinate=function(){var e=this.iterator();return e.hasNext()?e.next().getCoordinate():null},Vn.prototype.print=function(e){H.out.println("EdgeEndStar:   "+this.getCoordinate());for(var t=this.iterator();t.hasNext();)t.next().print(e)},Vn.prototype.isAreaLabelsConsistent=function(e){return this.computeEdgeEndLabels(e.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Vn.prototype.checkAreaLabelsConsistent=function(e){var t=this.getEdges();if(t.size()<=0)return!0;var n=t.size()-1,i=t.get(n).getLabel().getLocation(e,At.LEFT);te.isTrue(i!==T.NONE,"Found unlabelled area edge");for(var r=i,o=this.iterator();o.hasNext();){var a=o.next().getLabel();te.isTrue(a.isArea(e),"Found non-area edge");var s=a.getLocation(e,At.LEFT),l=a.getLocation(e,At.RIGHT);if(s===l)return!1;if(l!==r)return!1;r=s}return!0},Vn.prototype.findIndex=function(e){this.iterator();for(var t=0;t<this._edgeList.size();t++)if(this._edgeList.get(t)===e)return t;return-1},Vn.prototype.iterator=function(){return this.getEdges().iterator()},Vn.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new Ee(this._edgeMap.values())),this._edgeList},Vn.prototype.getLocation=function(e,t,n){return this._ptInAreaLocation[e]===T.NONE&&(this._ptInAreaLocation[e]=Gn.locate(t,n[e].getGeometry())),this._ptInAreaLocation[e]},Vn.prototype.toString=function(){var e=new D;e.append("EdgeEndStar:   "+this.getCoordinate()),e.append("\n");for(var t=this.iterator();t.hasNext();){var n=t.next();e.append(n),e.append("\n")}return e.toString()},Vn.prototype.computeEdgeEndLabels=function(e){for(var t=this.iterator();t.hasNext();)t.next().computeLabel(e)},Vn.prototype.computeLabelling=function(e){this.computeEdgeEndLabels(e[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var t=[!1,!1],n=this.iterator();n.hasNext();)for(var i=n.next().getLabel(),r=0;r<2;r++)i.isLine(r)&&i.getLocation(r)===T.BOUNDARY&&(t[r]=!0);for(var o=this.iterator();o.hasNext();)for(var a=o.next(),s=a.getLabel(),l=0;l<2;l++)if(s.isAnyNull(l)){var c=T.NONE;if(t[l])c=T.EXTERIOR;else{var u=a.getCoordinate();c=this.getLocation(l,u,e)}s.setAllLocationsIfNull(l,c)}},Vn.prototype.getDegree=function(){return this._edgeMap.size()},Vn.prototype.insertEdgeEnd=function(e,t){this._edgeMap.put(e,t),this._edgeList=null},Vn.prototype.interfaces_=function(){return[]},Vn.prototype.getClass=function(){return Vn};var Hn=function(e){function t(){e.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var e=null,t=null,n=this._SCANNING_FOR_INCOMING,i=0;i<this._resultAreaEdgeList.size();i++){var r=this._resultAreaEdgeList.get(i),o=r.getSym();if(r.getLabel().isArea())switch(null===e&&r.isInResult()&&(e=r),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;t=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!r.isInResult())continue;t.setNext(r),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===e)throw new Tt("no outgoing dirEdge found",this.getCoordinate());te.isTrue(e.isInResult(),"unable to link last incoming dirEdge"),t.setNext(e)}},t.prototype.insert=function(e){var t=e;this.insertEdgeEnd(t,t)},t.prototype.getRightmostEdge=function(){var e=this.getEdges(),t=e.size();if(t<1)return null;var n=e.get(0);if(1===t)return n;var i=e.get(t-1),r=n.getQuadrant(),o=i.getQuadrant();return Ut.isNorthern(r)&&Ut.isNorthern(o)?n:Ut.isNorthern(r)||Ut.isNorthern(o)?0!==n.getDy()?n:0!==i.getDy()?i:(te.shouldNeverReachHere("found two horizontal edges incident on node"),null):i},t.prototype.print=function(e){H.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var t=this.iterator();t.hasNext();){var n=t.next();e.print("out "),n.print(e),e.println(),e.print("in "),n.getSym().print(e),e.println()}},t.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new Ee;for(var e=this.iterator();e.hasNext();){var t=e.next();(t.isInResult()||t.getSym().isInResult())&&this._resultAreaEdgeList.add(t)}return this._resultAreaEdgeList},t.prototype.updateLabelling=function(e){for(var t=this.iterator();t.hasNext();){var n=t.next().getLabel();n.setAllLocationsIfNull(0,e.getLocation(0)),n.setAllLocationsIfNull(1,e.getLocation(1))}},t.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var e=null,t=null,n=this._edgeList.size()-1;n>=0;n--){var i=this._edgeList.get(n),r=i.getSym();null===t&&(t=r),null!==e&&r.setNext(e),e=i}t.setNext(e)},t.prototype.computeDepths=function(){if(1===arguments.length){var e=arguments[0],t=this.findIndex(e),n=e.getDepth(At.LEFT),i=e.getDepth(At.RIGHT),r=this.computeDepths(t+1,this._edgeList.size(),n);if(this.computeDepths(0,t,r)!==i)throw new Tt("depth mismatch at "+e.getCoordinate())}else if(3===arguments.length){for(var o=arguments[1],a=arguments[2],s=arguments[0];s<o;s++){var l=this._edgeList.get(s);l.setEdgeDepths(At.RIGHT,a),a=l.getDepth(At.LEFT)}return a}},t.prototype.mergeSymLabels=function(){for(var e=this.iterator();e.hasNext();){var t=e.next();t.getLabel().merge(t.getSym().getLabel())}},t.prototype.linkMinimalDirectedEdges=function(e){for(var t=null,n=null,i=this._SCANNING_FOR_INCOMING,r=this._resultAreaEdgeList.size()-1;r>=0;r--){var o=this._resultAreaEdgeList.get(r),a=o.getSym();switch(null===t&&o.getEdgeRing()===e&&(t=o),i){case this._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==e)continue;n=a,i=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==e)continue;n.setNextMin(o),i=this._SCANNING_FOR_INCOMING}}i===this._LINKING_TO_OUTGOING&&(te.isTrue(null!==t,"found null for first outgoing dirEdge"),te.isTrue(t.getEdgeRing()===e,"unable to link last incoming dirEdge"),n.setNextMin(t))},t.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var e=0,t=this.iterator();t.hasNext();)t.next().isInResult()&&e++;return e}if(1===arguments.length){for(var n=arguments[0],i=0,r=this.iterator();r.hasNext();)r.next().getEdgeRing()===n&&i++;return i}},t.prototype.getLabel=function(){return this._label},t.prototype.findCoveredLineEdges=function(){for(var e=T.NONE,t=this.iterator();t.hasNext();){var n=t.next(),i=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){e=T.INTERIOR;break}if(i.isInResult()){e=T.EXTERIOR;break}}}if(e===T.NONE)return null;for(var r=e,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getSym();a.isLineEdge()?a.getEdge().setCovered(r===T.INTERIOR):(a.isInResult()&&(r=T.EXTERIOR),s.isInResult()&&(r=T.INTERIOR))}},t.prototype.computeLabelling=function(t){e.prototype.computeLabelling.call(this,t),this._label=new Lt(T.NONE);for(var n=this.iterator();n.hasNext();)for(var i=n.next().getEdge().getLabel(),r=0;r<2;r++){var o=i.getLocation(r);o!==T.INTERIOR&&o!==T.BOUNDARY||this._label.setLocation(r,T.INTERIOR)}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Vn),qn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createNode=function(e){return new Ft(e,new Hn)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Vt),Wn=function e(){this._pts=null,this._orientation=null;var t=arguments[0];this._pts=t,this._orientation=e.orientation(t)};Wn.prototype.compareTo=function(e){var t=e;return Wn.compareOriented(this._pts,this._orientation,t._pts,t._orientation)},Wn.prototype.interfaces_=function(){return[w]},Wn.prototype.getClass=function(){return Wn},Wn.orientation=function(e){return 1===Ce.increasingDirection(e)},Wn.compareOriented=function(e,t,n,i){for(var r=t?1:-1,o=i?1:-1,a=t?e.length:-1,s=i?n.length:-1,l=t?0:e.length-1,c=i?0:n.length-1;;){var u=e[l].compareTo(n[c]);if(0!==u)return u;var h=(l+=r)===a,d=(c+=o)===s;if(h&&!d)return-1;if(!h&&d)return 1;if(h&&d)return 0}};var Xn=function(){this._edges=new Ee,this._ocaMap=new h};Xn.prototype.print=function(e){e.print("MULTILINESTRING ( ");for(var t=0;t<this._edges.size();t++){var n=this._edges.get(t);t>0&&e.print(","),e.print("(");for(var i=n.getCoordinates(),r=0;r<i.length;r++)r>0&&e.print(","),e.print(i[r].x+" "+i[r].y);e.println(")")}e.print(")  ")},Xn.prototype.addAll=function(e){for(var t=e.iterator();t.hasNext();)this.add(t.next())},Xn.prototype.findEdgeIndex=function(e){for(var t=0;t<this._edges.size();t++)if(this._edges.get(t).equals(e))return t;return-1},Xn.prototype.iterator=function(){return this._edges.iterator()},Xn.prototype.getEdges=function(){return this._edges},Xn.prototype.get=function(e){return this._edges.get(e)},Xn.prototype.findEqualEdge=function(e){var t=new Wn(e.getCoordinates());return this._ocaMap.get(t)},Xn.prototype.add=function(e){this._edges.add(e);var t=new Wn(e.getCoordinates());this._ocaMap.put(t,e)},Xn.prototype.interfaces_=function(){return[]},Xn.prototype.getClass=function(){return Xn};var Yn=function(){};Yn.prototype.processIntersections=function(e,t,n,i){},Yn.prototype.isDone=function(){},Yn.prototype.interfaces_=function(){return[]},Yn.prototype.getClass=function(){return Yn};var Kn=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var e=arguments[0];this._li=e};Kn.prototype.isTrivialIntersection=function(e,t,n,i){if(e===n&&1===this._li.getIntersectionNum()){if(Kn.isAdjacentSegments(t,i))return!0;if(e.isClosed()){var r=e.size()-1;if(0===t&&i===r||0===i&&t===r)return!0}}return!1},Kn.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Kn.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Kn.prototype.getLineIntersector=function(){return this._li},Kn.prototype.hasProperIntersection=function(){return this._hasProper},Kn.prototype.processIntersections=function(e,t,n,i){if(e===n&&t===i)return null;this.numTests++;var r=e.getCoordinates()[t],o=e.getCoordinates()[t+1],a=n.getCoordinates()[i],s=n.getCoordinates()[i+1];this._li.computeIntersection(r,o,a,s),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(e,t,n,i)||(this._hasIntersection=!0,e.addIntersections(this._li,t,0),n.addIntersections(this._li,i,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Kn.prototype.hasIntersection=function(){return this._hasIntersection},Kn.prototype.isDone=function(){return!1},Kn.prototype.hasInteriorIntersection=function(){return this._hasInterior},Kn.prototype.interfaces_=function(){return[Yn]},Kn.prototype.getClass=function(){return Kn},Kn.isAdjacentSegments=function(e,t){return 1===Math.abs(e-t)};var Zn=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var e=arguments[0],t=arguments[1],n=arguments[2];this.coord=new x(e),this.segmentIndex=t,this.dist=n};Zn.prototype.getSegmentIndex=function(){return this.segmentIndex},Zn.prototype.getCoordinate=function(){return this.coord},Zn.prototype.print=function(e){e.print(this.coord),e.print(" seg # = "+this.segmentIndex),e.println(" dist = "+this.dist)},Zn.prototype.compareTo=function(e){var t=e;return this.compare(t.segmentIndex,t.dist)},Zn.prototype.isEndPoint=function(e){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===e},Zn.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Zn.prototype.getDistance=function(){return this.dist},Zn.prototype.compare=function(e,t){return this.segmentIndex<e?-1:this.segmentIndex>e?1:this.dist<t?-1:this.dist>t?1:0},Zn.prototype.interfaces_=function(){return[w]},Zn.prototype.getClass=function(){return Zn};var Jn=function(){this._nodeMap=new h,this.edge=null;var e=arguments[0];this.edge=e};Jn.prototype.print=function(e){e.println("Intersections:");for(var t=this.iterator();t.hasNext();)t.next().print(e)},Jn.prototype.iterator=function(){return this._nodeMap.values().iterator()},Jn.prototype.addSplitEdges=function(e){this.addEndpoints();for(var t=this.iterator(),n=t.next();t.hasNext();){var i=t.next(),r=this.createSplitEdge(n,i);e.add(r),n=i}},Jn.prototype.addEndpoints=function(){var e=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[e],e,0)},Jn.prototype.createSplitEdge=function(e,t){var n=t.segmentIndex-e.segmentIndex+2,i=this.edge.pts[t.segmentIndex],r=t.dist>0||!t.coord.equals2D(i);r||n--;var o=new Array(n).fill(null),a=0;o[a++]=new x(e.coord);for(var s=e.segmentIndex+1;s<=t.segmentIndex;s++)o[a++]=this.edge.pts[s];return r&&(o[a]=t.coord),new ni(o,new Lt(this.edge._label))},Jn.prototype.add=function(e,t,n){var i=new Zn(e,t,n),r=this._nodeMap.get(i);return null!==r?r:(this._nodeMap.put(i,i),i)},Jn.prototype.isIntersection=function(e){for(var t=this.iterator();t.hasNext();)if(t.next().coord.equals(e))return!0;return!1},Jn.prototype.interfaces_=function(){return[]},Jn.prototype.getClass=function(){return Jn};var $n=function(){};$n.prototype.getChainStartIndices=function(e){var t=0,n=new Ee;n.add(new O(t));do{var i=this.findChainEnd(e,t);n.add(new O(i)),t=i}while(t<e.length-1);return $n.toIntArray(n)},$n.prototype.findChainEnd=function(e,t){for(var n=Ut.quadrant(e[t],e[t+1]),i=t+1;i<e.length&&Ut.quadrant(e[i-1],e[i])===n;)i++;return i-1},$n.prototype.interfaces_=function(){return[]},$n.prototype.getClass=function(){return $n},$n.toIntArray=function(e){for(var t=new Array(e.size()).fill(null),n=0;n<t.length;n++)t[n]=e.get(n).intValue();return t};var Qn=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new W,this.env2=new W;var e=arguments[0];this.e=e,this.pts=e.getCoordinates();var t=new $n;this.startIndex=t.getChainStartIndices(this.pts)};Qn.prototype.getCoordinates=function(){return this.pts},Qn.prototype.getMaxX=function(e){var t=this.pts[this.startIndex[e]].x,n=this.pts[this.startIndex[e+1]].x;return t>n?t:n},Qn.prototype.getMinX=function(e){var t=this.pts[this.startIndex[e]].x,n=this.pts[this.startIndex[e+1]].x;return t<n?t:n},Qn.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3];this.computeIntersectsForChain(this.startIndex[e],this.startIndex[e+1],t,t.startIndex[n],t.startIndex[n+1],i)}else if(6===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],l=arguments[4],c=arguments[5],u=this.pts[r],h=this.pts[o],d=a.pts[s],p=a.pts[l];if(o-r==1&&l-s==1)return c.addIntersections(this.e,r,a.e,s),null;if(this.env1.init(u,h),this.env2.init(d,p),!this.env1.intersects(this.env2))return null;var f=Math.trunc((r+o)/2),g=Math.trunc((s+l)/2);r<f&&(s<g&&this.computeIntersectsForChain(r,f,a,s,g,c),g<l&&this.computeIntersectsForChain(r,f,a,g,l,c)),f<o&&(s<g&&this.computeIntersectsForChain(f,o,a,s,g,c),g<l&&this.computeIntersectsForChain(f,o,a,g,l,c))}},Qn.prototype.getStartIndexes=function(){return this.startIndex},Qn.prototype.computeIntersects=function(e,t){for(var n=0;n<this.startIndex.length-1;n++)for(var i=0;i<e.startIndex.length-1;i++)this.computeIntersectsForChain(n,e,i,t)},Qn.prototype.interfaces_=function(){return[]},Qn.prototype.getClass=function(){return Qn};var ei=function e(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var t=0;t<2;t++)for(var n=0;n<3;n++)this._depth[t][n]=e.NULL_VALUE},ti={NULL_VALUE:{configurable:!0}};ei.prototype.getDepth=function(e,t){return this._depth[e][t]},ei.prototype.setDepth=function(e,t,n){this._depth[e][t]=n},ei.prototype.isNull=function(){if(0===arguments.length){for(var e=0;e<2;e++)for(var t=0;t<3;t++)if(this._depth[e][t]!==ei.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===ei.NULL_VALUE}if(2===arguments.length){var i=arguments[0],r=arguments[1];return this._depth[i][r]===ei.NULL_VALUE}},ei.prototype.normalize=function(){for(var e=0;e<2;e++)if(!this.isNull(e)){var t=this._depth[e][1];this._depth[e][2]<t&&(t=this._depth[e][2]),t<0&&(t=0);for(var n=1;n<3;n++){var i=0;this._depth[e][n]>t&&(i=1),this._depth[e][n]=i}}},ei.prototype.getDelta=function(e){return this._depth[e][At.RIGHT]-this._depth[e][At.LEFT]},ei.prototype.getLocation=function(e,t){return this._depth[e][t]<=0?T.EXTERIOR:T.INTERIOR},ei.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},ei.prototype.add=function(){if(1===arguments.length)for(var e=arguments[0],t=0;t<2;t++)for(var n=1;n<3;n++){var i=e.getLocation(t,n);i!==T.EXTERIOR&&i!==T.INTERIOR||(this.isNull(t,n)?this._depth[t][n]=ei.depthAtLocation(i):this._depth[t][n]+=ei.depthAtLocation(i))}else if(3===arguments.length){var r=arguments[0],o=arguments[1];arguments[2]===T.INTERIOR&&this._depth[r][o]++}},ei.prototype.interfaces_=function(){return[]},ei.prototype.getClass=function(){return ei},ei.depthAtLocation=function(e){return e===T.EXTERIOR?0:e===T.INTERIOR?1:ei.NULL_VALUE},ti.NULL_VALUE.get=function(){return-1},Object.defineProperties(ei,ti);var ni=function(e){function t(){if(e.call(this),this.pts=null,this._env=null,this.eiList=new Jn(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new ei,this._depthDelta=0,1===arguments.length){var n=arguments[0];t.call(this,n,null)}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.pts=i,this._label=r}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDepth=function(){return this._depth},t.prototype.getCollapsedEdge=function(){var e=new Array(2).fill(null);return e[0]=this.pts[0],e[1]=this.pts[1],new t(e,Lt.toLineLabel(this._label))},t.prototype.isIsolated=function(){return this._isIsolated},t.prototype.getCoordinates=function(){return this.pts},t.prototype.setIsolated=function(e){this._isIsolated=e},t.prototype.setName=function(e){this._name=e},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;if(this.pts.length!==n.pts.length)return!1;for(var i=!0,r=!0,o=this.pts.length,a=0;a<this.pts.length;a++)if(this.pts[a].equals2D(n.pts[a])||(i=!1),this.pts[a].equals2D(n.pts[--o])||(r=!1),!i&&!r)return!1;return!0},t.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var e=arguments[0];return this.pts[e]}},t.prototype.print=function(e){e.print("edge "+this._name+": "),e.print("LINESTRING (");for(var t=0;t<this.pts.length;t++)t>0&&e.print(","),e.print(this.pts[t].x+" "+this.pts[t].y);e.print(")  "+this._label+" "+this._depthDelta)},t.prototype.computeIM=function(e){t.updateIM(this._label,e)},t.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},t.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},t.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},t.prototype.getDepthDelta=function(){return this._depthDelta},t.prototype.getNumPoints=function(){return this.pts.length},t.prototype.printReverse=function(e){e.print("edge "+this._name+": ");for(var t=this.pts.length-1;t>=0;t--)e.print(this.pts[t]+" ");e.println("")},t.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new Qn(this)),this._mce},t.prototype.getEnvelope=function(){if(null===this._env){this._env=new W;for(var e=0;e<this.pts.length;e++)this._env.expandToInclude(this.pts[e])}return this._env},t.prototype.addIntersection=function(e,t,n,i){var r=new x(e.getIntersection(i)),o=t,a=e.getEdgeDistance(n,i),s=o+1;if(s<this.pts.length){var l=this.pts[s];r.equals2D(l)&&(o=s,a=0)}this.eiList.add(r,o,a)},t.prototype.toString=function(){var e=new D;e.append("edge "+this._name+": "),e.append("LINESTRING (");for(var t=0;t<this.pts.length;t++)t>0&&e.append(","),e.append(this.pts[t].x+" "+this.pts[t].y);return e.append(")  "+this._label+" "+this._depthDelta),e.toString()},t.prototype.isPointwiseEqual=function(e){if(this.pts.length!==e.pts.length)return!1;for(var t=0;t<this.pts.length;t++)if(!this.pts[t].equals2D(e.pts[t]))return!1;return!0},t.prototype.setDepthDelta=function(e){this._depthDelta=e},t.prototype.getEdgeIntersectionList=function(){return this.eiList},t.prototype.addIntersections=function(e,t,n){for(var i=0;i<e.getIntersectionNum();i++)this.addIntersection(e,t,n,i)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.updateIM=function(){if(2!==arguments.length)return e.prototype.updateIM.apply(this,arguments);var t=arguments[0],n=arguments[1];n.setAtLeastIfValid(t.getLocation(0,At.ON),t.getLocation(1,At.ON),1),t.isArea()&&(n.setAtLeastIfValid(t.getLocation(0,At.LEFT),t.getLocation(1,At.LEFT),2),n.setAtLeastIfValid(t.getLocation(0,At.RIGHT),t.getLocation(1,At.RIGHT),2))},t}(Nt),ii=function(e){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Xn,this._bufParams=e||null};ii.prototype.setWorkingPrecisionModel=function(e){this._workingPrecisionModel=e},ii.prototype.insertUniqueEdge=function(e){var t=this._edgeList.findEqualEdge(e);if(null!==t){var n=t.getLabel(),i=e.getLabel();t.isPointwiseEqual(e)||(i=new Lt(e.getLabel())).flip(),n.merge(i);var r=ii.depthDelta(i),o=t.getDepthDelta()+r;t.setDepthDelta(o)}else this._edgeList.add(e),e.setDepthDelta(ii.depthDelta(e.getLabel()))},ii.prototype.buildSubgraphs=function(e,t){for(var n=new Ee,i=e.iterator();i.hasNext();){var r=i.next(),o=r.getRightmostCoordinate(),a=new jn(n).getDepth(o);r.computeDepth(a),r.findResultEdges(),n.add(r),t.add(r.getDirectedEdges(),r.getNodes())}},ii.prototype.createSubgraphs=function(e){for(var t=new Ee,n=e.getNodes().iterator();n.hasNext();){var i=n.next();if(!i.isVisited()){var r=new It;r.create(i),t.add(r)}}return Qt.sort(t,Qt.reverseOrder()),t},ii.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},ii.prototype.getNoder=function(e){if(null!==this._workingNoder)return this._workingNoder;var t=new Pn,n=new re;return n.setPrecisionModel(e),t.setSegmentIntersector(new Kn(n)),t},ii.prototype.buffer=function(e,t){var n=this._workingPrecisionModel;null===n&&(n=e.getPrecisionModel()),this._geomFact=e.getFactory();var i=new On(n,this._bufParams),r=new Un(e,t,i).getCurves();if(r.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(r,n),this._graph=new Ht(new qn),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),a=new qt(this._geomFact);this.buildSubgraphs(o,a);var s=a.getPolygons();return s.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(s)},ii.prototype.computeNodedEdges=function(e,t){var n=this.getNoder(t);n.computeNodes(e);for(var i=n.getNodedSubstrings().iterator();i.hasNext();){var r=i.next(),o=r.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var a=r.getData(),s=new ni(r.getCoordinates(),new Lt(a));this.insertUniqueEdge(s)}}},ii.prototype.setNoder=function(e){this._workingNoder=e},ii.prototype.interfaces_=function(){return[]},ii.prototype.getClass=function(){return ii},ii.depthDelta=function(e){var t=e.getLocation(0,At.LEFT),n=e.getLocation(0,At.RIGHT);return t===T.INTERIOR&&n===T.EXTERIOR?1:t===T.EXTERIOR&&n===T.INTERIOR?-1:0},ii.convertSegStrings=function(e){for(var t=new yt,n=new Ee;e.hasNext();){var i=e.next(),r=t.createLineString(i.getCoordinates());n.add(r)}return t.buildGeometry(n)};var ri=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var e=arguments[0],t=arguments[1];this._noder=e,this._scaleFactor=t,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=i,this._offsetX=r,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};ri.prototype.rescale=function(){if(I(arguments[0],_e))for(var e=arguments[0].iterator();e.hasNext();){var t=e.next();this.rescale(t.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],i=0;i<n.length;i++)n[i].x=n[i].x/this._scaleFactor+this._offsetX,n[i].y=n[i].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&H.out.println(n)}},ri.prototype.scale=function(){if(I(arguments[0],_e)){for(var e=arguments[0],t=new Ee,n=e.iterator();n.hasNext();){var i=n.next();t.add(new fn(this.scale(i.getCoordinates()),i.getData()))}return t}if(arguments[0]instanceof Array){for(var r=arguments[0],o=new Array(r.length).fill(null),a=0;a<r.length;a++)o[a]=new x(Math.round((r[a].x-this._offsetX)*this._scaleFactor),Math.round((r[a].y-this._offsetY)*this._scaleFactor),r[a].z);return Ce.removeRepeatedPoints(o)}},ri.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},ri.prototype.getNodedSubstrings=function(){var e=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(e),e},ri.prototype.computeNodes=function(e){var t=e;this._isScaled&&(t=this.scale(e)),this._noder.computeNodes(t)},ri.prototype.interfaces_=function(){return[_n]},ri.prototype.getClass=function(){return ri};var oi=function(){this._li=new re,this._segStrings=null;var e=arguments[0];this._segStrings=e},ai={fact:{configurable:!0}};oi.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var t=e.next().getCoordinates();this.checkEndPtVertexIntersections(t[0],this._segStrings),this.checkEndPtVertexIntersections(t[t.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],i=arguments[1].iterator();i.hasNext();)for(var r=i.next().getCoordinates(),o=1;o<r.length-1;o++)if(r[o].equals(n))throw new Q("found endpt/interior pt intersection at index "+o+" :pt "+n)},oi.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();)for(var t=e.next(),n=this._segStrings.iterator();n.hasNext();){var i=n.next();this.checkInteriorIntersections(t,i)}else if(2===arguments.length)for(var r=arguments[0],o=arguments[1],a=r.getCoordinates(),s=o.getCoordinates(),l=0;l<a.length-1;l++)for(var c=0;c<s.length-1;c++)this.checkInteriorIntersections(r,l,o,c);else if(4===arguments.length){var u=arguments[0],h=arguments[1],d=arguments[2],p=arguments[3];if(u===d&&h===p)return null;var f=u.getCoordinates()[h],g=u.getCoordinates()[h+1],m=d.getCoordinates()[p],y=d.getCoordinates()[p+1];if(this._li.computeIntersection(f,g,m,y),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,f,g)||this.hasInteriorIntersection(this._li,m,y)))throw new Q("found non-noded intersection at "+f+"-"+g+" and "+m+"-"+y)}},oi.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},oi.prototype.checkCollapses=function(){if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var t=e.next();this.checkCollapses(t)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),i=0;i<n.length-2;i++)this.checkCollapse(n[i],n[i+1],n[i+2])},oi.prototype.hasInteriorIntersection=function(e,t,n){for(var i=0;i<e.getIntersectionNum();i++){var r=e.getIntersection(i);if(!r.equals(t)&&!r.equals(n))return!0}return!1},oi.prototype.checkCollapse=function(e,t,n){if(e.equals(n))throw new Q("found non-noded collapse at "+oi.fact.createLineString([e,t,n]))},oi.prototype.interfaces_=function(){return[]},oi.prototype.getClass=function(){return oi},ai.fact.get=function(){return new yt},Object.defineProperties(oi,ai);var si=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var e=arguments[0],t=arguments[1],n=arguments[2];if(this._originalPt=e,this._pt=e,this._scaleFactor=t,this._li=n,t<=0)throw new v("Scale factor must be non-zero");1!==t&&(this._pt=new x(this.scale(e.x),this.scale(e.y)),this._p0Scaled=new x,this._p1Scaled=new x),this.initCorners(this._pt)},li={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};si.prototype.intersectsScaled=function(e,t){var n=Math.min(e.x,t.x),i=Math.max(e.x,t.x),r=Math.min(e.y,t.y),o=Math.max(e.y,t.y),a=this._maxx<n||this._minx>i||this._maxy<r||this._miny>o;if(a)return!1;var s=this.intersectsToleranceSquare(e,t);return te.isTrue(!(a&&s),"Found bad envelope test"),s},si.prototype.initCorners=function(e){this._minx=e.x-.5,this._maxx=e.x+.5,this._miny=e.y-.5,this._maxy=e.y+.5,this._corner[0]=new x(this._maxx,this._maxy),this._corner[1]=new x(this._minx,this._maxy),this._corner[2]=new x(this._minx,this._miny),this._corner[3]=new x(this._maxx,this._miny)},si.prototype.intersects=function(e,t){return 1===this._scaleFactor?this.intersectsScaled(e,t):(this.copyScaled(e,this._p0Scaled),this.copyScaled(t,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},si.prototype.scale=function(e){return Math.round(e*this._scaleFactor)},si.prototype.getCoordinate=function(){return this._originalPt},si.prototype.copyScaled=function(e,t){t.x=this.scale(e.x),t.y=this.scale(e.y)},si.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var e=si.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new W(this._originalPt.x-e,this._originalPt.x+e,this._originalPt.y-e,this._originalPt.y+e)}return this._safeEnv},si.prototype.intersectsPixelClosure=function(e,t){return this._li.computeIntersection(e,t,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(e,t,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(e,t,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(e,t,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},si.prototype.intersectsToleranceSquare=function(e,t){var n=!1,i=!1;return this._li.computeIntersection(e,t,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(e,t,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(e,t,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(i=!0),this._li.computeIntersection(e,t,this._corner[3],this._corner[0]),this._li.isProper()||n&&i||e.equals(this._pt)||t.equals(this._pt)))))},si.prototype.addSnappedNode=function(e,t){var n=e.getCoordinate(t),i=e.getCoordinate(t+1);return!!this.intersects(n,i)&&(e.addIntersection(this.getCoordinate(),t),!0)},si.prototype.interfaces_=function(){return[]},si.prototype.getClass=function(){return si},li.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(si,li);var ci=function(){this.tempEnv1=new W,this.selectedSegment=new gn};ci.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var e=arguments[1];arguments[0].getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}},ci.prototype.interfaces_=function(){return[]},ci.prototype.getClass=function(){return ci};var ui=function(){this._index=null;var e=arguments[0];this._index=e},hi={HotPixelSnapAction:{configurable:!0}};ui.prototype.snap=function(){if(1===arguments.length){var e=arguments[0];return this.snap(e,null,-1)}if(3===arguments.length){var t=arguments[0],n=arguments[1],i=arguments[2],r=t.getSafeEnvelope(),o=new di(t,n,i);return this._index.query(r,{interfaces_:function(){return[Kt]},visitItem:function(e){e.select(r,o)}}),o.isNodeAdded()}},ui.prototype.interfaces_=function(){return[]},ui.prototype.getClass=function(){return ui},hi.HotPixelSnapAction.get=function(){return di},Object.defineProperties(ui,hi);var di=function(e){function t(){e.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var t=arguments[0],n=arguments[1],i=arguments[2];this._hotPixel=t,this._parentEdge=n,this._hotPixelVertexIndex=i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.isNodeAdded=function(){return this._isNodeAdded},t.prototype.select=function(){if(2!==arguments.length)return e.prototype.select.apply(this,arguments);var t=arguments[1],n=arguments[0].getContext();if(null!==this._parentEdge&&n===this._parentEdge&&t===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(n,t)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(ci),pi=function(){this._li=null,this._interiorIntersections=null;var e=arguments[0];this._li=e,this._interiorIntersections=new Ee};pi.prototype.processIntersections=function(e,t,n,i){if(e===n&&t===i)return null;var r=e.getCoordinates()[t],o=e.getCoordinates()[t+1],a=n.getCoordinates()[i],s=n.getCoordinates()[i+1];if(this._li.computeIntersection(r,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var l=0;l<this._li.getIntersectionNum();l++)this._interiorIntersections.add(this._li.getIntersection(l));e.addIntersections(this._li,t,0),n.addIntersections(this._li,i,1)}},pi.prototype.isDone=function(){return!1},pi.prototype.getInteriorIntersections=function(){return this._interiorIntersections},pi.prototype.interfaces_=function(){return[Yn]},pi.prototype.getClass=function(){return pi};var fi=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var e=arguments[0];this._pm=e,this._li=new re,this._li.setPrecisionModel(e),this._scaleFactor=e.getScale()};fi.prototype.checkCorrectness=function(e){var t=fn.getNodedSubstrings(e),n=new oi(t);try{n.checkValid()}catch(e){if(!(e instanceof G))throw e;e.printStackTrace()}},fi.prototype.getNodedSubstrings=function(){return fn.getNodedSubstrings(this._nodedSegStrings)},fi.prototype.snapRound=function(e,t){var n=this.findInteriorIntersections(e,t);this.computeIntersectionSnaps(n),this.computeVertexSnaps(e)},fi.prototype.findInteriorIntersections=function(e,t){var n=new pi(t);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(e),n.getInteriorIntersections()},fi.prototype.computeVertexSnaps=function(){if(I(arguments[0],_e))for(var e=arguments[0].iterator();e.hasNext();){var t=e.next();this.computeVertexSnaps(t)}else if(arguments[0]instanceof fn)for(var n=arguments[0],i=n.getCoordinates(),r=0;r<i.length;r++){var o=new si(i[r],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,r)&&n.addIntersection(i[r],r)}},fi.prototype.computeNodes=function(e){this._nodedSegStrings=e,this._noder=new Pn,this._pointSnapper=new ui(this._noder.getIndex()),this.snapRound(e,this._li)},fi.prototype.computeIntersectionSnaps=function(e){for(var t=e.iterator();t.hasNext();){var n=t.next(),i=new si(n,this._scaleFactor,this._li);this._pointSnapper.snap(i)}},fi.prototype.interfaces_=function(){return[_n]},fi.prototype.getClass=function(){return fi};var gi=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new xn,this._resultGeometry=null,this._saveException=null,1===arguments.length){var e=arguments[0];this._argGeom=e}else if(2===arguments.length){var t=arguments[0],n=arguments[1];this._argGeom=t,this._bufParams=n}},mi={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};gi.prototype.bufferFixedPrecision=function(e){var t=new ri(new fi(new pt(1)),e.getScale()),n=new ii(this._bufParams);n.setWorkingPrecisionModel(e),n.setNoder(t),this._resultGeometry=n.buffer(this._argGeom,this._distance)},gi.prototype.bufferReducedPrecision=function(){var e=this;if(0===arguments.length){for(var t=gi.MAX_PRECISION_DIGITS;t>=0;t--){try{e.bufferReducedPrecision(t)}catch(t){if(!(t instanceof Tt))throw t;e._saveException=t}if(null!==e._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],i=gi.precisionScaleFactor(this._argGeom,this._distance,n),r=new pt(i);this.bufferFixedPrecision(r)}},gi.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var e=this._argGeom.getFactory().getPrecisionModel();e.getType()===pt.FIXED?this.bufferFixedPrecision(e):this.bufferReducedPrecision()},gi.prototype.setQuadrantSegments=function(e){this._bufParams.setQuadrantSegments(e)},gi.prototype.bufferOriginalPrecision=function(){try{var e=new ii(this._bufParams);this._resultGeometry=e.buffer(this._argGeom,this._distance)}catch(e){if(!(e instanceof Q))throw e;this._saveException=e}},gi.prototype.getResultGeometry=function(e){return this._distance=e,this.computeGeometry(),this._resultGeometry},gi.prototype.setEndCapStyle=function(e){this._bufParams.setEndCapStyle(e)},gi.prototype.interfaces_=function(){return[]},gi.prototype.getClass=function(){return gi},gi.bufferOp=function(){if(2===arguments.length){var e=arguments[1];return new gi(arguments[0]).getResultGeometry(e)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof ue&&"number"==typeof arguments[1]){var t=arguments[1],n=arguments[2],i=new gi(arguments[0]);return i.setQuadrantSegments(n),i.getResultGeometry(t)}if(arguments[2]instanceof xn&&arguments[0]instanceof ue&&"number"==typeof arguments[1]){var r=arguments[1];return new gi(arguments[0],arguments[2]).getResultGeometry(r)}}else if(4===arguments.length){var o=arguments[1],a=arguments[2],s=arguments[3],l=new gi(arguments[0]);return l.setQuadrantSegments(a),l.setEndCapStyle(s),l.getResultGeometry(o)}},gi.precisionScaleFactor=function(e,t,n){var i=e.getEnvelopeInternal(),r=M.max(Math.abs(i.getMaxX()),Math.abs(i.getMaxY()),Math.abs(i.getMinX()),Math.abs(i.getMinY()))+2*(t>0?t:0),o=n-Math.trunc(Math.log(r)/Math.log(10)+1);return Math.pow(10,o)},mi.CAP_ROUND.get=function(){return xn.CAP_ROUND},mi.CAP_BUTT.get=function(){return xn.CAP_FLAT},mi.CAP_FLAT.get=function(){return xn.CAP_FLAT},mi.CAP_SQUARE.get=function(){return xn.CAP_SQUARE},mi.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(gi,mi);var yi=function(){this._pt=[new x,new x],this._distance=b.NaN,this._isNull=!0};yi.prototype.getCoordinates=function(){return this._pt},yi.prototype.getCoordinate=function(e){return this._pt[e]},yi.prototype.setMinimum=function(){if(1===arguments.length){var e=arguments[0];this.setMinimum(e._pt[0],e._pt[1])}else if(2===arguments.length){var t=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(t,n),null;var i=t.distance(n);i<this._distance&&this.initialize(t,n,i)}},yi.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var e=arguments[0],t=arguments[1];this._pt[0].setCoordinate(e),this._pt[1].setCoordinate(t),this._distance=e.distance(t),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(i),this._distance=r,this._isNull=!1}},yi.prototype.getDistance=function(){return this._distance},yi.prototype.setMaximum=function(){if(1===arguments.length){var e=arguments[0];this.setMaximum(e._pt[0],e._pt[1])}else if(2===arguments.length){var t=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(t,n),null;var i=t.distance(n);i>this._distance&&this.initialize(t,n,i)}},yi.prototype.interfaces_=function(){return[]},yi.prototype.getClass=function(){return yi};var vi=function(){};vi.prototype.interfaces_=function(){return[]},vi.prototype.getClass=function(){return vi},vi.computeDistance=function(){if(arguments[2]instanceof yi&&arguments[0]instanceof Ke&&arguments[1]instanceof x)for(var e=arguments[1],t=arguments[2],n=arguments[0].getCoordinates(),i=new gn,r=0;r<n.length-1;r++){i.setCoordinates(n[r],n[r+1]);var o=i.closestPoint(e);t.setMinimum(o,e)}else if(arguments[2]instanceof yi&&arguments[0]instanceof Qe&&arguments[1]instanceof x){var a=arguments[0],s=arguments[1],l=arguments[2];vi.computeDistance(a.getExteriorRing(),s,l);for(var c=0;c<a.getNumInteriorRing();c++)vi.computeDistance(a.getInteriorRingN(c),s,l)}else if(arguments[2]instanceof yi&&arguments[0]instanceof ue&&arguments[1]instanceof x){var u=arguments[0],h=arguments[1],d=arguments[2];if(u instanceof Ke)vi.computeDistance(u,h,d);else if(u instanceof Qe)vi.computeDistance(u,h,d);else if(u instanceof Ge)for(var p=u,f=0;f<p.getNumGeometries();f++){var g=p.getGeometryN(f);vi.computeDistance(g,h,d)}else d.setMinimum(u.getCoordinate(),h)}else if(arguments[2]instanceof yi&&arguments[0]instanceof gn&&arguments[1]instanceof x){var m=arguments[1],y=arguments[2],v=arguments[0].closestPoint(m);y.setMinimum(v,m)}};var bi=function(e){this._maxPtDist=new yi,this._inputGeom=e||null},_i={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};bi.prototype.computeMaxMidpointDistance=function(e){var t=new Pi(this._inputGeom);e.apply(t),this._maxPtDist.setMaximum(t.getMaxPointDistance())},bi.prototype.computeMaxVertexDistance=function(e){var t=new wi(this._inputGeom);e.apply(t),this._maxPtDist.setMaximum(t.getMaxPointDistance())},bi.prototype.findDistance=function(e){return this.computeMaxVertexDistance(e),this.computeMaxMidpointDistance(e),this._maxPtDist.getDistance()},bi.prototype.getDistancePoints=function(){return this._maxPtDist},bi.prototype.interfaces_=function(){return[]},bi.prototype.getClass=function(){return bi},_i.MaxPointDistanceFilter.get=function(){return wi},_i.MaxMidpointDistanceFilter.get=function(){return Pi},Object.defineProperties(bi,_i);var wi=function(e){this._maxPtDist=new yi,this._minPtDist=new yi,this._geom=e||null};wi.prototype.filter=function(e){this._minPtDist.initialize(),vi.computeDistance(this._geom,e,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},wi.prototype.getMaxPointDistance=function(){return this._maxPtDist},wi.prototype.interfaces_=function(){return[pe]},wi.prototype.getClass=function(){return wi};var Pi=function(e){this._maxPtDist=new yi,this._minPtDist=new yi,this._geom=e||null};Pi.prototype.filter=function(e,t){if(0===t)return null;var n=e.getCoordinate(t-1),i=e.getCoordinate(t),r=new x((n.x+i.x)/2,(n.y+i.y)/2);this._minPtDist.initialize(),vi.computeDistance(this._geom,r,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Pi.prototype.isDone=function(){return!1},Pi.prototype.isGeometryChanged=function(){return!1},Pi.prototype.getMaxPointDistance=function(){return this._maxPtDist},Pi.prototype.interfaces_=function(){return[Be]},Pi.prototype.getClass=function(){return Pi};var Ei=function(e){this._comps=e||null};Ei.prototype.filter=function(e){e instanceof Qe&&this._comps.add(e)},Ei.prototype.interfaces_=function(){return[ze]},Ei.prototype.getClass=function(){return Ei},Ei.getPolygons=function(){if(1===arguments.length){var e=arguments[0];return Ei.getPolygons(e,new Ee)}if(2===arguments.length){var t=arguments[0],n=arguments[1];return t instanceof Qe?n.add(t):t instanceof Ge&&t.apply(new Ei(n)),n}};var xi=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var e=arguments[0];this._lines=e}else if(2===arguments.length){var t=arguments[0],n=arguments[1];this._lines=t,this._isForcedToLineString=n}};xi.prototype.filter=function(e){if(this._isForcedToLineString&&e instanceof tt){var t=e.getFactory().createLineString(e.getCoordinateSequence());return this._lines.add(t),null}e instanceof Ke&&this._lines.add(e)},xi.prototype.setForceToLineString=function(e){this._isForcedToLineString=e},xi.prototype.interfaces_=function(){return[ce]},xi.prototype.getClass=function(){return xi},xi.getGeometry=function(){if(1===arguments.length){var e=arguments[0];return e.getFactory().buildGeometry(xi.getLines(e))}if(2===arguments.length){var t=arguments[0],n=arguments[1];return t.getFactory().buildGeometry(xi.getLines(t,n))}},xi.getLines=function(){if(1===arguments.length){var e=arguments[0];return xi.getLines(e,!1)}if(2===arguments.length){if(I(arguments[0],_e)&&I(arguments[1],_e)){for(var t=arguments[1],n=arguments[0].iterator();n.hasNext();){var i=n.next();xi.getLines(i,t)}return t}if(arguments[0]instanceof ue&&"boolean"==typeof arguments[1]){var r=arguments[0],o=arguments[1],a=new Ee;return r.apply(new xi(a,o)),a}if(arguments[0]instanceof ue&&I(arguments[1],_e)){var s=arguments[0],l=arguments[1];return s instanceof Ke?l.add(s):s.apply(new xi(l)),l}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&I(arguments[0],_e)&&I(arguments[1],_e)){for(var c=arguments[1],u=arguments[2],h=arguments[0].iterator();h.hasNext();){var d=h.next();xi.getLines(d,c,u)}return c}if("boolean"==typeof arguments[2]&&arguments[0]instanceof ue&&I(arguments[1],_e)){var p=arguments[1],f=arguments[2];return arguments[0].apply(new xi(p,f)),p}}};var Ai=function(){if(this._boundaryRule=fe.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(null===e)throw new v("Rule must be non-null");this._boundaryRule=e}};Ai.prototype.locateInternal=function(){if(arguments[0]instanceof x&&arguments[1]instanceof Qe){var e=arguments[0],t=arguments[1];if(t.isEmpty())return T.EXTERIOR;var n=t.getExteriorRing(),i=this.locateInPolygonRing(e,n);if(i===T.EXTERIOR)return T.EXTERIOR;if(i===T.BOUNDARY)return T.BOUNDARY;for(var r=0;r<t.getNumInteriorRing();r++){var o=t.getInteriorRingN(r),a=this.locateInPolygonRing(e,o);if(a===T.INTERIOR)return T.EXTERIOR;if(a===T.BOUNDARY)return T.BOUNDARY}return T.INTERIOR}if(arguments[0]instanceof x&&arguments[1]instanceof Ke){var s=arguments[0],l=arguments[1];if(!l.getEnvelopeInternal().intersects(s))return T.EXTERIOR;var c=l.getCoordinates();return l.isClosed()||!s.equals(c[0])&&!s.equals(c[c.length-1])?se.isOnLine(s,c)?T.INTERIOR:T.EXTERIOR:T.BOUNDARY}if(arguments[0]instanceof x&&arguments[1]instanceof Je){var u=arguments[0];return arguments[1].getCoordinate().equals2D(u)?T.INTERIOR:T.EXTERIOR}},Ai.prototype.locateInPolygonRing=function(e,t){return t.getEnvelopeInternal().intersects(e)?se.locatePointInRing(e,t.getCoordinates()):T.EXTERIOR},Ai.prototype.intersects=function(e,t){return this.locate(e,t)!==T.EXTERIOR},Ai.prototype.updateLocationInfo=function(e){e===T.INTERIOR&&(this._isIn=!0),e===T.BOUNDARY&&this._numBoundaries++},Ai.prototype.computeLocation=function(e,t){if(t instanceof Je&&this.updateLocationInfo(this.locateInternal(e,t)),t instanceof Ke)this.updateLocationInfo(this.locateInternal(e,t));else if(t instanceof Qe)this.updateLocationInfo(this.locateInternal(e,t));else if(t instanceof Ve)for(var n=t,i=0;i<n.getNumGeometries();i++){var r=n.getGeometryN(i);this.updateLocationInfo(this.locateInternal(e,r))}else if(t instanceof nt)for(var o=t,a=0;a<o.getNumGeometries();a++){var s=o.getGeometryN(a);this.updateLocationInfo(this.locateInternal(e,s))}else if(t instanceof Ge)for(var l=new Bn(t);l.hasNext();){var c=l.next();c!==t&&this.computeLocation(e,c)}},Ai.prototype.locate=function(e,t){return t.isEmpty()?T.EXTERIOR:t instanceof Ke||t instanceof Qe?this.locateInternal(e,t):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(e,t),this._boundaryRule.isInBoundary(this._numBoundaries)?T.BOUNDARY:this._numBoundaries>0||this._isIn?T.INTERIOR:T.EXTERIOR)},Ai.prototype.interfaces_=function(){return[]},Ai.prototype.getClass=function(){return Ai};var Ci=function e(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)e.call(this,arguments[0],e.INSIDE_AREA,arguments[1]);else if(3===arguments.length){var t=arguments[0],n=arguments[1],i=arguments[2];this._component=t,this._segIndex=n,this._pt=i}},Si={INSIDE_AREA:{configurable:!0}};Ci.prototype.isInsideArea=function(){return this._segIndex===Ci.INSIDE_AREA},Ci.prototype.getCoordinate=function(){return this._pt},Ci.prototype.getGeometryComponent=function(){return this._component},Ci.prototype.getSegmentIndex=function(){return this._segIndex},Ci.prototype.interfaces_=function(){return[]},Ci.prototype.getClass=function(){return Ci},Si.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Ci,Si);var Ti=function(e){this._pts=e||null};Ti.prototype.filter=function(e){e instanceof Je&&this._pts.add(e)},Ti.prototype.interfaces_=function(){return[ze]},Ti.prototype.getClass=function(){return Ti},Ti.getPoints=function(){if(1===arguments.length){var e=arguments[0];return e instanceof Je?Qt.singletonList(e):Ti.getPoints(e,new Ee)}if(2===arguments.length){var t=arguments[0],n=arguments[1];return t instanceof Je?n.add(t):t instanceof Ge&&t.apply(new Ti(n)),n}};var Ri=function(){this._locations=null;var e=arguments[0];this._locations=e};Ri.prototype.filter=function(e){(e instanceof Je||e instanceof Ke||e instanceof Qe)&&this._locations.add(new Ci(e,0,e.getCoordinate()))},Ri.prototype.interfaces_=function(){return[ze]},Ri.prototype.getClass=function(){return Ri},Ri.getLocations=function(e){var t=new Ee;return e.apply(new Ri(t)),t};var Ii=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Ai,this._minDistanceLocation=null,this._minDistance=b.MAX_VALUE,2===arguments.length){var e=arguments[0],t=arguments[1];this._geom=[e,t],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=i,this._terminateDistance=r}};Ii.prototype.computeContainmentDistance=function(){if(0===arguments.length){var e=new Array(2).fill(null);if(this.computeContainmentDistance(0,e),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,e)}else if(2===arguments.length){var t=arguments[0],n=arguments[1],i=1-t,r=Ei.getPolygons(this._geom[t]);if(r.size()>0){var o=Ri.getLocations(this._geom[i]);if(this.computeContainmentDistance(o,r,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[i]=n[0],this._minDistanceLocation[t]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&I(arguments[0],Pe)&&I(arguments[1],Pe)){for(var a=arguments[0],s=arguments[1],l=arguments[2],c=0;c<a.size();c++)for(var u=a.get(c),h=0;h<s.size();h++)if(this.computeContainmentDistance(u,s.get(h),l),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Ci&&arguments[1]instanceof Qe){var d=arguments[0],p=arguments[1],f=arguments[2],g=d.getCoordinate();if(T.EXTERIOR!==this._ptLocator.locate(g,p))return this._minDistance=0,f[0]=d,f[1]=new Ci(p,g),null}},Ii.prototype.computeMinDistanceLinesPoints=function(e,t,n){for(var i=0;i<e.size();i++)for(var r=e.get(i),o=0;o<t.size();o++){var a=t.get(o);if(this.computeMinDistance(r,a,n),this._minDistance<=this._terminateDistance)return null}},Ii.prototype.computeFacetDistance=function(){var e=new Array(2).fill(null),t=xi.getLines(this._geom[0]),n=xi.getLines(this._geom[1]),i=Ti.getPoints(this._geom[0]),r=Ti.getPoints(this._geom[1]);return this.computeMinDistanceLines(t,n,e),this.updateMinDistance(e,!1),this._minDistance<=this._terminateDistance?null:(e[0]=null,e[1]=null,this.computeMinDistanceLinesPoints(t,r,e),this.updateMinDistance(e,!1),this._minDistance<=this._terminateDistance?null:(e[0]=null,e[1]=null,this.computeMinDistanceLinesPoints(n,i,e),this.updateMinDistance(e,!0),this._minDistance<=this._terminateDistance?null:(e[0]=null,e[1]=null,this.computeMinDistancePoints(i,r,e),void this.updateMinDistance(e,!1))))},Ii.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Ii.prototype.updateMinDistance=function(e,t){if(null===e[0])return null;t?(this._minDistanceLocation[0]=e[1],this._minDistanceLocation[1]=e[0]):(this._minDistanceLocation[0]=e[0],this._minDistanceLocation[1]=e[1])},Ii.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Ii.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Ke&&arguments[1]instanceof Je){var e=arguments[0],t=arguments[1],n=arguments[2];if(e.getEnvelopeInternal().distance(t.getEnvelopeInternal())>this._minDistance)return null;for(var i=e.getCoordinates(),r=t.getCoordinate(),o=0;o<i.length-1;o++){var a=se.distancePointLine(r,i[o],i[o+1]);if(a<this._minDistance){this._minDistance=a;var s=new gn(i[o],i[o+1]).closestPoint(r);n[0]=new Ci(e,o,s),n[1]=new Ci(t,0,r)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Ke&&arguments[1]instanceof Ke){var l=arguments[0],c=arguments[1],u=arguments[2];if(l.getEnvelopeInternal().distance(c.getEnvelopeInternal())>this._minDistance)return null;for(var h=l.getCoordinates(),d=c.getCoordinates(),p=0;p<h.length-1;p++)for(var f=0;f<d.length-1;f++){var g=se.distanceLineLine(h[p],h[p+1],d[f],d[f+1]);if(g<this._minDistance){this._minDistance=g;var m=new gn(h[p],h[p+1]),y=new gn(d[f],d[f+1]),v=m.closestPoints(y);u[0]=new Ci(l,p,v[0]),u[1]=new Ci(c,f,v[1])}if(this._minDistance<=this._terminateDistance)return null}}},Ii.prototype.computeMinDistancePoints=function(e,t,n){for(var i=0;i<e.size();i++)for(var r=e.get(i),o=0;o<t.size();o++){var a=t.get(o),s=r.getCoordinate().distance(a.getCoordinate());if(s<this._minDistance&&(this._minDistance=s,n[0]=new Ci(r,0,r.getCoordinate()),n[1]=new Ci(a,0,a.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},Ii.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new v("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Ii.prototype.computeMinDistanceLines=function(e,t,n){for(var i=0;i<e.size();i++)for(var r=e.get(i),o=0;o<t.size();o++){var a=t.get(o);if(this.computeMinDistance(r,a,n),this._minDistance<=this._terminateDistance)return null}},Ii.prototype.interfaces_=function(){return[]},Ii.prototype.getClass=function(){return Ii},Ii.distance=function(e,t){return new Ii(e,t).distance()},Ii.isWithinDistance=function(e,t,n){return new Ii(e,t,n).distance()<=n},Ii.nearestPoints=function(e,t){return new Ii(e,t).nearestPoints()};var Mi=function(){this._pt=[new x,new x],this._distance=b.NaN,this._isNull=!0};Mi.prototype.getCoordinates=function(){return this._pt},Mi.prototype.getCoordinate=function(e){return this._pt[e]},Mi.prototype.setMinimum=function(){if(1===arguments.length){var e=arguments[0];this.setMinimum(e._pt[0],e._pt[1])}else if(2===arguments.length){var t=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(t,n),null;var i=t.distance(n);i<this._distance&&this.initialize(t,n,i)}},Mi.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var e=arguments[0],t=arguments[1];this._pt[0].setCoordinate(e),this._pt[1].setCoordinate(t),this._distance=e.distance(t),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(i),this._distance=r,this._isNull=!1}},Mi.prototype.toString=function(){return $.toLineString(this._pt[0],this._pt[1])},Mi.prototype.getDistance=function(){return this._distance},Mi.prototype.setMaximum=function(){if(1===arguments.length){var e=arguments[0];this.setMaximum(e._pt[0],e._pt[1])}else if(2===arguments.length){var t=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(t,n),null;var i=t.distance(n);i>this._distance&&this.initialize(t,n,i)}},Mi.prototype.interfaces_=function(){return[]},Mi.prototype.getClass=function(){return Mi};var Li=function(){};Li.prototype.interfaces_=function(){return[]},Li.prototype.getClass=function(){return Li},Li.computeDistance=function(){if(arguments[2]instanceof Mi&&arguments[0]instanceof Ke&&arguments[1]instanceof x)for(var e=arguments[0],t=arguments[1],n=arguments[2],i=new gn,r=e.getCoordinates(),o=0;o<r.length-1;o++){i.setCoordinates(r[o],r[o+1]);var a=i.closestPoint(t);n.setMinimum(a,t)}else if(arguments[2]instanceof Mi&&arguments[0]instanceof Qe&&arguments[1]instanceof x){var s=arguments[0],l=arguments[1],c=arguments[2];Li.computeDistance(s.getExteriorRing(),l,c);for(var u=0;u<s.getNumInteriorRing();u++)Li.computeDistance(s.getInteriorRingN(u),l,c)}else if(arguments[2]instanceof Mi&&arguments[0]instanceof ue&&arguments[1]instanceof x){var h=arguments[0],d=arguments[1],p=arguments[2];if(h instanceof Ke)Li.computeDistance(h,d,p);else if(h instanceof Qe)Li.computeDistance(h,d,p);else if(h instanceof Ge)for(var f=h,g=0;g<f.getNumGeometries();g++){var m=f.getGeometryN(g);Li.computeDistance(m,d,p)}else p.setMinimum(h.getCoordinate(),d)}else if(arguments[2]instanceof Mi&&arguments[0]instanceof gn&&arguments[1]instanceof x){var y=arguments[1],v=arguments[2],b=arguments[0].closestPoint(y);v.setMinimum(b,y)}};var Di=function(){this._g0=null,this._g1=null,this._ptDist=new Mi,this._densifyFrac=0;var e=arguments[0],t=arguments[1];this._g0=e,this._g1=t},Oi={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Di.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Di.prototype.setDensifyFraction=function(e){if(e>1||e<=0)throw new v("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=e},Di.prototype.compute=function(e,t){this.computeOrientedDistance(e,t,this._ptDist),this.computeOrientedDistance(t,e,this._ptDist)},Di.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Di.prototype.computeOrientedDistance=function(e,t,n){var i=new ji(t);if(e.apply(i),n.setMaximum(i.getMaxPointDistance()),this._densifyFrac>0){var r=new Ni(t,this._densifyFrac);e.apply(r),n.setMaximum(r.getMaxPointDistance())}},Di.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Di.prototype.interfaces_=function(){return[]},Di.prototype.getClass=function(){return Di},Di.distance=function(){if(2===arguments.length)return new Di(arguments[0],arguments[1]).distance();if(3===arguments.length){var e=arguments[2],t=new Di(arguments[0],arguments[1]);return t.setDensifyFraction(e),t.distance()}},Oi.MaxPointDistanceFilter.get=function(){return ji},Oi.MaxDensifiedByFractionDistanceFilter.get=function(){return Ni},Object.defineProperties(Di,Oi);var ji=function(){this._maxPtDist=new Mi,this._minPtDist=new Mi,this._euclideanDist=new Li,this._geom=null;var e=arguments[0];this._geom=e};ji.prototype.filter=function(e){this._minPtDist.initialize(),Li.computeDistance(this._geom,e,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},ji.prototype.getMaxPointDistance=function(){return this._maxPtDist},ji.prototype.interfaces_=function(){return[pe]},ji.prototype.getClass=function(){return ji};var Ni=function(){this._maxPtDist=new Mi,this._minPtDist=new Mi,this._geom=null,this._numSubSegs=0;var e=arguments[0],t=arguments[1];this._geom=e,this._numSubSegs=Math.trunc(Math.round(1/t))};Ni.prototype.filter=function(e,t){if(0===t)return null;for(var n=e.getCoordinate(t-1),i=e.getCoordinate(t),r=(i.x-n.x)/this._numSubSegs,o=(i.y-n.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var s=n.x+a*r,l=n.y+a*o,c=new x(s,l);this._minPtDist.initialize(),Li.computeDistance(this._geom,c,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},Ni.prototype.isDone=function(){return!1},Ni.prototype.isGeometryChanged=function(){return!1},Ni.prototype.getMaxPointDistance=function(){return this._maxPtDist},Ni.prototype.interfaces_=function(){return[Be]},Ni.prototype.getClass=function(){return Ni};var Fi=function(e,t,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=e||null,this._bufDistance=t||null,this._result=n||null},ki={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Fi.prototype.checkMaximumDistance=function(e,t,n){var i=new Di(t,e);if(i.setDensifyFraction(.25),this._maxDistanceFound=i.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var r=i.getCoordinates();this._errorLocation=r[1],this._errorIndicator=e.getFactory().createLineString(r),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+$.toLineString(r[0],r[1])+")"}},Fi.prototype.isValid=function(){var e=Math.abs(this._bufDistance),t=Fi.MAX_DISTANCE_DIFF_FRAC*e;return this._minValidDistance=e-t,this._maxValidDistance=e+t,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Fi.VERBOSE&&H.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Fi.prototype.checkNegativeValid=function(){if(!(this._input instanceof Qe||this._input instanceof nt||this._input instanceof Ge))return null;var e=this.getPolygonLines(this._input);if(this.checkMinimumDistance(e,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(e,this._result,this._maxValidDistance)},Fi.prototype.getErrorIndicator=function(){return this._errorIndicator},Fi.prototype.checkMinimumDistance=function(e,t,n){var i=new Ii(e,t,n);if(this._minDistanceFound=i.distance(),this._minDistanceFound<n){this._isValid=!1;var r=i.nearestPoints();this._errorLocation=i.nearestPoints()[1],this._errorIndicator=e.getFactory().createLineString(r),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+$.toLineString(r[0],r[1])+" )"}},Fi.prototype.checkPositiveValid=function(){var e=this._result.getBoundary();if(this.checkMinimumDistance(this._input,e,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,e,this._maxValidDistance)},Fi.prototype.getErrorLocation=function(){return this._errorLocation},Fi.prototype.getPolygonLines=function(e){for(var t=new Ee,n=new xi(t),i=Ei.getPolygons(e).iterator();i.hasNext();)i.next().apply(n);return e.getFactory().buildGeometry(t)},Fi.prototype.getErrorMessage=function(){return this._errMsg},Fi.prototype.interfaces_=function(){return[]},Fi.prototype.getClass=function(){return Fi},ki.VERBOSE.get=function(){return!1},ki.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Fi,ki);var Ui=function(e,t,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=e||null,this._distance=t||null,this._result=n||null},zi={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Ui.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},Ui.prototype.checkEnvelope=function(){if(this._distance<0)return null;var e=this._distance*Ui.MAX_ENV_DIFF_FRAC;0===e&&(e=.001);var t=new W(this._input.getEnvelopeInternal());t.expandBy(this._distance);var n=new W(this._result.getEnvelopeInternal());n.expandBy(e),n.contains(t)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},Ui.prototype.checkDistance=function(){var e=new Fi(this._input,this._distance,this._result);e.isValid()||(this._isValid=!1,this._errorMsg=e.getErrorMessage(),this._errorLocation=e.getErrorLocation(),this._errorIndicator=e.getErrorIndicator()),this.report("Distance")},Ui.prototype.checkArea=function(){var e=this._input.getArea(),t=this._result.getArea();this._distance>0&&e>t&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&e<t&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},Ui.prototype.checkPolygonal=function(){this._result instanceof Qe||this._result instanceof nt||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},Ui.prototype.getErrorIndicator=function(){return this._errorIndicator},Ui.prototype.getErrorLocation=function(){return this._errorLocation},Ui.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},Ui.prototype.report=function(e){if(!Ui.VERBOSE)return null;H.out.println("Check "+e+": "+(this._isValid?"passed":"FAILED"))},Ui.prototype.getErrorMessage=function(){return this._errorMsg},Ui.prototype.interfaces_=function(){return[]},Ui.prototype.getClass=function(){return Ui},Ui.isValidMsg=function(e,t,n){var i=new Ui(e,t,n);return i.isValid()?null:i.getErrorMessage()},Ui.isValid=function(e,t,n){return!!new Ui(e,t,n).isValid()},zi.VERBOSE.get=function(){return!1},zi.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Ui,zi);var Bi=function(){this._pts=null,this._data=null;var e=arguments[0],t=arguments[1];this._pts=e,this._data=t};Bi.prototype.getCoordinates=function(){return this._pts},Bi.prototype.size=function(){return this._pts.length},Bi.prototype.getCoordinate=function(e){return this._pts[e]},Bi.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Bi.prototype.getSegmentOctant=function(e){return e===this._pts.length-1?-1:hn.octant(this.getCoordinate(e),this.getCoordinate(e+1))},Bi.prototype.setData=function(e){this._data=e},Bi.prototype.getData=function(){return this._data},Bi.prototype.toString=function(){return $.toLineString(new lt(this._pts))},Bi.prototype.interfaces_=function(){return[dn]},Bi.prototype.getClass=function(){return Bi};var Gi=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new Ee,this._intersectionCount=0,this._keepIntersections=!0;var e=arguments[0];this._li=e,this._interiorIntersection=null};Gi.prototype.getInteriorIntersection=function(){return this._interiorIntersection},Gi.prototype.setCheckEndSegmentsOnly=function(e){this._isCheckEndSegmentsOnly=e},Gi.prototype.getIntersectionSegments=function(){return this._intSegments},Gi.prototype.count=function(){return this._intersectionCount},Gi.prototype.getIntersections=function(){return this._intersections},Gi.prototype.setFindAllIntersections=function(e){this._findAllIntersections=e},Gi.prototype.setKeepIntersections=function(e){this._keepIntersections=e},Gi.prototype.processIntersections=function(e,t,n,i){if(!this._findAllIntersections&&this.hasIntersection())return null;if(e===n&&t===i)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(e,t)&&!this.isEndSegment(n,i))return null;var r=e.getCoordinates()[t],o=e.getCoordinates()[t+1],a=n.getCoordinates()[i],s=n.getCoordinates()[i+1];this._li.computeIntersection(r,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=r,this._intSegments[1]=o,this._intSegments[2]=a,this._intSegments[3]=s,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},Gi.prototype.isEndSegment=function(e,t){return 0===t||t>=e.size()-2},Gi.prototype.hasIntersection=function(){return null!==this._interiorIntersection},Gi.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},Gi.prototype.interfaces_=function(){return[Yn]},Gi.prototype.getClass=function(){return Gi},Gi.createAllIntersectionsFinder=function(e){var t=new Gi(e);return t.setFindAllIntersections(!0),t},Gi.createAnyIntersectionFinder=function(e){return new Gi(e)},Gi.createIntersectionCounter=function(e){var t=new Gi(e);return t.setFindAllIntersections(!0),t.setKeepIntersections(!1),t};var Vi=function(){this._li=new re,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var e=arguments[0];this._segStrings=e};Vi.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},Vi.prototype.getIntersections=function(){return this._segInt.getIntersections()},Vi.prototype.isValid=function(){return this.execute(),this._isValid},Vi.prototype.setFindAllIntersections=function(e){this._findAllIntersections=e},Vi.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Gi(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var e=new Pn;if(e.setSegmentIntersector(this._segInt),e.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},Vi.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Tt(this.getErrorMessage(),this._segInt.getInteriorIntersection())},Vi.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var e=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+$.toLineString(e[0],e[1])+" and "+$.toLineString(e[2],e[3])},Vi.prototype.interfaces_=function(){return[]},Vi.prototype.getClass=function(){return Vi},Vi.computeIntersections=function(e){var t=new Vi(e);return t.setFindAllIntersections(!0),t.isValid(),t.getIntersections()};var Hi=function e(){this._nv=null;var t=arguments[0];this._nv=new Vi(e.toSegmentStrings(t))};Hi.prototype.checkValid=function(){this._nv.checkValid()},Hi.prototype.interfaces_=function(){return[]},Hi.prototype.getClass=function(){return Hi},Hi.toSegmentStrings=function(e){for(var t=new Ee,n=e.iterator();n.hasNext();){var i=n.next();t.add(new Bi(i.getCoordinates(),i))}return t},Hi.checkValid=function(e){new Hi(e).checkValid()};var qi=function(e){this._mapOp=e};qi.prototype.map=function(e){for(var t=new Ee,n=0;n<e.getNumGeometries();n++){var i=this._mapOp.map(e.getGeometryN(n));i.isEmpty()||t.add(i)}return e.getFactory().createGeometryCollection(yt.toGeometryArray(t))},qi.prototype.interfaces_=function(){return[]},qi.prototype.getClass=function(){return qi},qi.map=function(e,t){return new qi(t).map(e)};var Wi=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new Ee,this._resultLineList=new Ee;var e=arguments[0],t=arguments[1],n=arguments[2];this._op=e,this._geometryFactory=t,this._ptLocator=n};Wi.prototype.collectLines=function(e){for(var t=this._op.getGraph().getEdgeEnds().iterator();t.hasNext();){var n=t.next();this.collectLineEdge(n,e,this._lineEdgesList),this.collectBoundaryTouchEdge(n,e,this._lineEdgesList)}},Wi.prototype.labelIsolatedLine=function(e,t){var n=this._ptLocator.locate(e.getCoordinate(),this._op.getArgGeometry(t));e.getLabel().setLocation(t,n)},Wi.prototype.build=function(e){return this.findCoveredLineEdges(),this.collectLines(e),this.buildLines(e),this._resultLineList},Wi.prototype.collectLineEdge=function(e,t,n){var i=e.getLabel(),r=e.getEdge();e.isLineEdge()&&(e.isVisited()||!Cr.isResultOfOp(i,t)||r.isCovered()||(n.add(r),e.setVisitedEdge(!0)))},Wi.prototype.findCoveredLineEdges=function(){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();)e.next().getEdges().findCoveredLineEdges();for(var t=this._op.getGraph().getEdgeEnds().iterator();t.hasNext();){var n=t.next(),i=n.getEdge();if(n.isLineEdge()&&!i.isCoveredSet()){var r=this._op.isCoveredByA(n.getCoordinate());i.setCovered(r)}}},Wi.prototype.labelIsolatedLines=function(e){for(var t=e.iterator();t.hasNext();){var n=t.next(),i=n.getLabel();n.isIsolated()&&(i.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},Wi.prototype.buildLines=function(e){for(var t=this._lineEdgesList.iterator();t.hasNext();){var n=t.next(),i=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(i),n.setInResult(!0)}},Wi.prototype.collectBoundaryTouchEdge=function(e,t,n){var i=e.getLabel();return e.isLineEdge()||e.isVisited()||e.isInteriorAreaEdge()||e.getEdge().isInResult()?null:(te.isTrue(!(e.isInResult()||e.getSym().isInResult())||!e.getEdge().isInResult()),void(Cr.isResultOfOp(i,t)&&t===Cr.INTERSECTION&&(n.add(e.getEdge()),e.setVisitedEdge(!0))))},Wi.prototype.interfaces_=function(){return[]},Wi.prototype.getClass=function(){return Wi};var Xi=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new Ee;var e=arguments[0],t=arguments[1];this._op=e,this._geometryFactory=t};Xi.prototype.filterCoveredNodeToPoint=function(e){var t=e.getCoordinate();if(!this._op.isCoveredByLA(t)){var n=this._geometryFactory.createPoint(t);this._resultPointList.add(n)}},Xi.prototype.extractNonCoveredResultNodes=function(e){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();){var n=t.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&e!==Cr.INTERSECTION)){var i=n.getLabel();Cr.isResultOfOp(i,e)&&this.filterCoveredNodeToPoint(n)}}},Xi.prototype.build=function(e){return this.extractNonCoveredResultNodes(e),this._resultPointList},Xi.prototype.interfaces_=function(){return[]},Xi.prototype.getClass=function(){return Xi};var Yi=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Yi.prototype.transformPoint=function(e,t){return this._factory.createPoint(this.transformCoordinates(e.getCoordinateSequence(),e))},Yi.prototype.transformPolygon=function(e,t){var n=!0,i=this.transformLinearRing(e.getExteriorRing(),e);null!==i&&i instanceof tt&&!i.isEmpty()||(n=!1);for(var r=new Ee,o=0;o<e.getNumInteriorRing();o++){var a=this.transformLinearRing(e.getInteriorRingN(o),e);null===a||a.isEmpty()||(a instanceof tt||(n=!1),r.add(a))}if(n)return this._factory.createPolygon(i,r.toArray([]));var s=new Ee;return null!==i&&s.add(i),s.addAll(r),this._factory.buildGeometry(s)},Yi.prototype.createCoordinateSequence=function(e){return this._factory.getCoordinateSequenceFactory().create(e)},Yi.prototype.getInputGeometry=function(){return this._inputGeom},Yi.prototype.transformMultiLineString=function(e,t){for(var n=new Ee,i=0;i<e.getNumGeometries();i++){var r=this.transformLineString(e.getGeometryN(i),e);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)},Yi.prototype.transformCoordinates=function(e,t){return this.copy(e)},Yi.prototype.transformLineString=function(e,t){return this._factory.createLineString(this.transformCoordinates(e.getCoordinateSequence(),e))},Yi.prototype.transformMultiPoint=function(e,t){for(var n=new Ee,i=0;i<e.getNumGeometries();i++){var r=this.transformPoint(e.getGeometryN(i),e);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)},Yi.prototype.transformMultiPolygon=function(e,t){for(var n=new Ee,i=0;i<e.getNumGeometries();i++){var r=this.transformPolygon(e.getGeometryN(i),e);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)},Yi.prototype.copy=function(e){return e.copy()},Yi.prototype.transformGeometryCollection=function(e,t){for(var n=new Ee,i=0;i<e.getNumGeometries();i++){var r=this.transform(e.getGeometryN(i));null!==r&&(this._pruneEmptyGeometry&&r.isEmpty()||n.add(r))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(yt.toGeometryArray(n)):this._factory.buildGeometry(n)},Yi.prototype.transform=function(e){if(this._inputGeom=e,this._factory=e.getFactory(),e instanceof Je)return this.transformPoint(e,null);if(e instanceof et)return this.transformMultiPoint(e,null);if(e instanceof tt)return this.transformLinearRing(e,null);if(e instanceof Ke)return this.transformLineString(e,null);if(e instanceof Ve)return this.transformMultiLineString(e,null);if(e instanceof Qe)return this.transformPolygon(e,null);if(e instanceof nt)return this.transformMultiPolygon(e,null);if(e instanceof Ge)return this.transformGeometryCollection(e,null);throw new v("Unknown Geometry subtype: "+e.getClass().getName())},Yi.prototype.transformLinearRing=function(e,t){var n=this.transformCoordinates(e.getCoordinateSequence(),e);if(null===n)return this._factory.createLinearRing(null);var i=n.size();return i>0&&i<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},Yi.prototype.interfaces_=function(){return[]},Yi.prototype.getClass=function(){return Yi};var Ki=function e(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new gn,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Ke&&"number"==typeof arguments[1]){var t=arguments[1];e.call(this,arguments[0].getCoordinates(),t)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1];this._srcPts=n,this._isClosed=e.isClosed(n),this._snapTolerance=i}};Ki.prototype.snapVertices=function(e,t){for(var n=this._isClosed?e.size()-1:e.size(),i=0;i<n;i++){var r=e.get(i),o=this.findSnapForVertex(r,t);null!==o&&(e.set(i,new x(o)),0===i&&this._isClosed&&e.set(e.size()-1,new x(o)))}},Ki.prototype.findSnapForVertex=function(e,t){for(var n=0;n<t.length;n++){if(e.equals2D(t[n]))return null;if(e.distance(t[n])<this._snapTolerance)return t[n]}return null},Ki.prototype.snapTo=function(e){var t=new Ae(this._srcPts);return this.snapVertices(t,e),this.snapSegments(t,e),t.toCoordinateArray()},Ki.prototype.snapSegments=function(e,t){if(0===t.length)return null;var n=t.length;t[0].equals2D(t[t.length-1])&&(n=t.length-1);for(var i=0;i<n;i++){var r=t[i],o=this.findSegmentIndexToSnap(r,e);o>=0&&e.add(o+1,new x(r),!1)}},Ki.prototype.findSegmentIndexToSnap=function(e,t){for(var n=b.MAX_VALUE,i=-1,r=0;r<t.size()-1;r++){if(this._seg.p0=t.get(r),this._seg.p1=t.get(r+1),this._seg.p0.equals2D(e)||this._seg.p1.equals2D(e)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(e);o<this._snapTolerance&&o<n&&(n=o,i=r)}return i},Ki.prototype.setAllowSnappingToSourceVertices=function(e){this._allowSnappingToSourceVertices=e},Ki.prototype.interfaces_=function(){return[]},Ki.prototype.getClass=function(){return Ki},Ki.isClosed=function(e){return!(e.length<=1)&&e[0].equals2D(e[e.length-1])};var Zi=function(e){this._srcGeom=e||null},Ji={SNAP_PRECISION_FACTOR:{configurable:!0}};Zi.prototype.snapTo=function(e,t){var n=this.extractTargetCoordinates(e);return new $i(t,n).transform(this._srcGeom)},Zi.prototype.snapToSelf=function(e,t){var n=this.extractTargetCoordinates(this._srcGeom),i=new $i(e,n,!0).transform(this._srcGeom),r=i;return t&&I(r,$e)&&(r=i.buffer(0)),r},Zi.prototype.computeSnapTolerance=function(e){return this.computeMinimumSegmentLength(e)/10},Zi.prototype.extractTargetCoordinates=function(e){for(var t=new p,n=e.getCoordinates(),i=0;i<n.length;i++)t.add(n[i]);return t.toArray(new Array(0).fill(null))},Zi.prototype.computeMinimumSegmentLength=function(e){for(var t=b.MAX_VALUE,n=0;n<e.length-1;n++){var i=e[n].distance(e[n+1]);i<t&&(t=i)}return t},Zi.prototype.interfaces_=function(){return[]},Zi.prototype.getClass=function(){return Zi},Zi.snap=function(e,t,n){var i=new Array(2).fill(null),r=new Zi(e);i[0]=r.snapTo(t,n);var o=new Zi(t);return i[1]=o.snapTo(i[0],n),i},Zi.computeOverlaySnapTolerance=function(){if(1===arguments.length){var e=arguments[0],t=Zi.computeSizeBasedSnapTolerance(e),n=e.getPrecisionModel();if(n.getType()===pt.FIXED){var i=1/n.getScale()*2/1.415;i>t&&(t=i)}return t}if(2===arguments.length){var r=arguments[0],o=arguments[1];return Math.min(Zi.computeOverlaySnapTolerance(r),Zi.computeOverlaySnapTolerance(o))}},Zi.computeSizeBasedSnapTolerance=function(e){var t=e.getEnvelopeInternal();return Math.min(t.getHeight(),t.getWidth())*Zi.SNAP_PRECISION_FACTOR},Zi.snapToSelf=function(e,t,n){return new Zi(e).snapToSelf(t,n)},Ji.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Zi,Ji);var $i=function(e){function t(t,n,i){e.call(this),this._snapTolerance=t||null,this._snapPts=n||null,this._isSelfSnap=void 0!==i&&i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.snapLine=function(e,t){var n=new Ki(e,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(t)},t.prototype.transformCoordinates=function(e,t){var n=e.toCoordinateArray(),i=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(i)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Yi),Qi=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};Qi.prototype.getCommon=function(){return b.longBitsToDouble(this._commonBits)},Qi.prototype.add=function(e){var t=b.doubleToLongBits(e);return this._isFirst?(this._commonBits=t,this._commonSignExp=Qi.signExpBits(this._commonBits),this._isFirst=!1,null):Qi.signExpBits(t)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=Qi.numCommonMostSigMantissaBits(this._commonBits,t),void(this._commonBits=Qi.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},Qi.prototype.toString=function(){if(1===arguments.length){var e=arguments[0],t=b.longBitsToDouble(e),n="0000000000000000000000000000000000000000000000000000000000000000"+b.toBinaryString(e),i=n.substring(n.length-64);return i.substring(0,1)+"  "+i.substring(1,12)+"(exp) "+i.substring(12)+" [ "+t+" ]"}},Qi.prototype.interfaces_=function(){return[]},Qi.prototype.getClass=function(){return Qi},Qi.getBit=function(e,t){return 0!=(e&1<<t)?1:0},Qi.signExpBits=function(e){return e>>52},Qi.zeroLowerBits=function(e,t){return e&~((1<<t)-1)},Qi.numCommonMostSigMantissaBits=function(e,t){for(var n=0,i=52;i>=0;i--){if(Qi.getBit(e,i)!==Qi.getBit(t,i))return n;n++}return 52};var er=function(){this._commonCoord=null,this._ccFilter=new nr},tr={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};er.prototype.addCommonBits=function(e){var t=new ir(this._commonCoord);e.apply(t),e.geometryChanged()},er.prototype.removeCommonBits=function(e){if(0===this._commonCoord.x&&0===this._commonCoord.y)return e;var t=new x(this._commonCoord);t.x=-t.x,t.y=-t.y;var n=new ir(t);return e.apply(n),e.geometryChanged(),e},er.prototype.getCommonCoordinate=function(){return this._commonCoord},er.prototype.add=function(e){e.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},er.prototype.interfaces_=function(){return[]},er.prototype.getClass=function(){return er},tr.CommonCoordinateFilter.get=function(){return nr},tr.Translater.get=function(){return ir},Object.defineProperties(er,tr);var nr=function(){this._commonBitsX=new Qi,this._commonBitsY=new Qi};nr.prototype.filter=function(e){this._commonBitsX.add(e.x),this._commonBitsY.add(e.y)},nr.prototype.getCommonCoordinate=function(){return new x(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},nr.prototype.interfaces_=function(){return[pe]},nr.prototype.getClass=function(){return nr};var ir=function(){this.trans=null;var e=arguments[0];this.trans=e};ir.prototype.filter=function(e,t){var n=e.getOrdinate(t,0)+this.trans.x,i=e.getOrdinate(t,1)+this.trans.y;e.setOrdinate(t,0,n),e.setOrdinate(t,1,i)},ir.prototype.isDone=function(){return!1},ir.prototype.isGeometryChanged=function(){return!0},ir.prototype.interfaces_=function(){return[Be]},ir.prototype.getClass=function(){return ir};var rr=function(e,t){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=e,this._geom[1]=t,this.computeSnapTolerance()};rr.prototype.selfSnap=function(e){return new Zi(e).snapTo(e,this._snapTolerance)},rr.prototype.removeCommonBits=function(e){this._cbr=new er,this._cbr.add(e[0]),this._cbr.add(e[1]);var t=new Array(2).fill(null);return t[0]=this._cbr.removeCommonBits(e[0].copy()),t[1]=this._cbr.removeCommonBits(e[1].copy()),t},rr.prototype.prepareResult=function(e){return this._cbr.addCommonBits(e),e},rr.prototype.getResultGeometry=function(e){var t=this.snap(this._geom),n=Cr.overlayOp(t[0],t[1],e);return this.prepareResult(n)},rr.prototype.checkValid=function(e){e.isValid()||H.out.println("Snapped geometry is invalid")},rr.prototype.computeSnapTolerance=function(){this._snapTolerance=Zi.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},rr.prototype.snap=function(e){var t=this.removeCommonBits(e);return Zi.snap(t[0],t[1],this._snapTolerance)},rr.prototype.interfaces_=function(){return[]},rr.prototype.getClass=function(){return rr},rr.overlayOp=function(e,t,n){return new rr(e,t).getResultGeometry(n)},rr.union=function(e,t){return rr.overlayOp(e,t,Cr.UNION)},rr.intersection=function(e,t){return rr.overlayOp(e,t,Cr.INTERSECTION)},rr.symDifference=function(e,t){return rr.overlayOp(e,t,Cr.SYMDIFFERENCE)},rr.difference=function(e,t){return rr.overlayOp(e,t,Cr.DIFFERENCE)};var or=function(e,t){this._geom=new Array(2).fill(null),this._geom[0]=e,this._geom[1]=t};or.prototype.getResultGeometry=function(e){var t=null,n=!1,i=null;try{t=Cr.overlayOp(this._geom[0],this._geom[1],e),n=!0}catch(e){if(!(e instanceof Q))throw e;i=e}if(!n)try{t=rr.overlayOp(this._geom[0],this._geom[1],e)}catch(e){throw e instanceof Q?i:e}return t},or.prototype.interfaces_=function(){return[]},or.prototype.getClass=function(){return or},or.overlayOp=function(e,t,n){return new or(e,t).getResultGeometry(n)},or.union=function(e,t){return or.overlayOp(e,t,Cr.UNION)},or.intersection=function(e,t){return or.overlayOp(e,t,Cr.INTERSECTION)},or.symDifference=function(e,t){return or.overlayOp(e,t,Cr.SYMDIFFERENCE)},or.difference=function(e,t){return or.overlayOp(e,t,Cr.DIFFERENCE)};var ar=function(){this.mce=null,this.chainIndex=null;var e=arguments[0],t=arguments[1];this.mce=e,this.chainIndex=t};ar.prototype.computeIntersections=function(e,t){this.mce.computeIntersectsForChain(this.chainIndex,e.mce,e.chainIndex,t)},ar.prototype.interfaces_=function(){return[]},ar.prototype.getClass=function(){return ar};var sr=function e(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var t=arguments[0],n=arguments[1];this._eventType=e.DELETE,this._xValue=t,this._insertEvent=n}else if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this._eventType=e.INSERT,this._label=i,this._xValue=r,this._obj=o}},lr={INSERT:{configurable:!0},DELETE:{configurable:!0}};sr.prototype.isDelete=function(){return this._eventType===sr.DELETE},sr.prototype.setDeleteEventIndex=function(e){this._deleteEventIndex=e},sr.prototype.getObject=function(){return this._obj},sr.prototype.compareTo=function(e){var t=e;return this._xValue<t._xValue?-1:this._xValue>t._xValue?1:this._eventType<t._eventType?-1:this._eventType>t._eventType?1:0},sr.prototype.getInsertEvent=function(){return this._insertEvent},sr.prototype.isInsert=function(){return this._eventType===sr.INSERT},sr.prototype.isSameLabel=function(e){return null!==this._label&&this._label===e._label},sr.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},sr.prototype.interfaces_=function(){return[w]},sr.prototype.getClass=function(){return sr},lr.INSERT.get=function(){return 1},lr.DELETE.get=function(){return 2},Object.defineProperties(sr,lr);var cr=function(){};cr.prototype.interfaces_=function(){return[]},cr.prototype.getClass=function(){return cr};var ur=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var e=arguments[0],t=arguments[1],n=arguments[2];this._li=e,this._includeProper=t,this._recordIsolated=n};ur.prototype.isTrivialIntersection=function(e,t,n,i){if(e===n&&1===this._li.getIntersectionNum()){if(ur.isAdjacentSegments(t,i))return!0;if(e.isClosed()){var r=e.getNumPoints()-1;if(0===t&&i===r||0===i&&t===r)return!0}}return!1},ur.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},ur.prototype.setIsDoneIfProperInt=function(e){this._isDoneWhenProperInt=e},ur.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},ur.prototype.isBoundaryPointInternal=function(e,t){for(var n=t.iterator();n.hasNext();){var i=n.next().getCoordinate();if(e.isIntersection(i))return!0}return!1},ur.prototype.hasProperIntersection=function(){return this._hasProper},ur.prototype.hasIntersection=function(){return this._hasIntersection},ur.prototype.isDone=function(){return this._isDone},ur.prototype.isBoundaryPoint=function(e,t){return!(null===t||!this.isBoundaryPointInternal(e,t[0])&&!this.isBoundaryPointInternal(e,t[1]))},ur.prototype.setBoundaryNodes=function(e,t){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=e,this._bdyNodes[1]=t},ur.prototype.addIntersections=function(e,t,n,i){if(e===n&&t===i)return null;this.numTests++;var r=e.getCoordinates()[t],o=e.getCoordinates()[t+1],a=n.getCoordinates()[i],s=n.getCoordinates()[i+1];this._li.computeIntersection(r,o,a,s),this._li.hasIntersection()&&(this._recordIsolated&&(e.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(e,t,n,i)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(e.addIntersections(this._li,t,0),n.addIntersections(this._li,i,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},ur.prototype.interfaces_=function(){return[]},ur.prototype.getClass=function(){return ur},ur.isAdjacentSegments=function(e,t){return 1===Math.abs(e-t)};var hr=function(e){function t(){e.call(this),this.events=new Ee,this.nOverlaps=null}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.prepareEvents=function(){Qt.sort(this.events);for(var e=0;e<this.events.size();e++){var t=this.events.get(e);t.isDelete()&&t.getInsertEvent().setDeleteEventIndex(e)}},t.prototype.computeIntersections=function(){if(1===arguments.length){var e=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var t=0;t<this.events.size();t++){var n=this.events.get(t);if(n.isInsert()&&this.processOverlaps(t,n.getDeleteEventIndex(),n,e),e.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof ur&&I(arguments[0],Pe)&&I(arguments[1],Pe)){var i=arguments[0],r=arguments[1],o=arguments[2];this.addEdges(i,i),this.addEdges(r,r),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&I(arguments[0],Pe)&&arguments[1]instanceof ur){var a=arguments[0],s=arguments[1];arguments[2]?this.addEdges(a,null):this.addEdges(a),this.computeIntersections(s)}},t.prototype.addEdge=function(e,t){for(var n=e.getMonotoneChainEdge(),i=n.getStartIndexes(),r=0;r<i.length-1;r++){var o=new ar(n,r),a=new sr(t,n.getMinX(r),o);this.events.add(a),this.events.add(new sr(n.getMaxX(r),a))}},t.prototype.processOverlaps=function(e,t,n,i){for(var r=n.getObject(),o=e;o<t;o++){var a=this.events.get(o);if(a.isInsert()){var s=a.getObject();n.isSameLabel(a)||(r.computeIntersections(s,i),this.nOverlaps++)}}},t.prototype.addEdges=function(){if(1===arguments.length)for(var e=arguments[0].iterator();e.hasNext();){var t=e.next();this.addEdge(t,t)}else if(2===arguments.length)for(var n=arguments[1],i=arguments[0].iterator();i.hasNext();){var r=i.next();this.addEdge(r,n)}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(cr),dr=function(){this._min=b.POSITIVE_INFINITY,this._max=b.NEGATIVE_INFINITY},pr={NodeComparator:{configurable:!0}};dr.prototype.getMin=function(){return this._min},dr.prototype.intersects=function(e,t){return!(this._min>t||this._max<e)},dr.prototype.getMax=function(){return this._max},dr.prototype.toString=function(){return $.toLineString(new x(this._min,0),new x(this._max,0))},dr.prototype.interfaces_=function(){return[]},dr.prototype.getClass=function(){return dr},pr.NodeComparator.get=function(){return fr},Object.defineProperties(dr,pr);var fr=function(){};fr.prototype.compare=function(e,t){var n=e,i=t,r=(n._min+n._max)/2,o=(i._min+i._max)/2;return r<o?-1:r>o?1:0},fr.prototype.interfaces_=function(){return[E]},fr.prototype.getClass=function(){return fr};var gr=function(e){function t(){e.call(this),this._item=null;var t=arguments[0],n=arguments[1],i=arguments[2];this._min=t,this._max=n,this._item=i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.query=function(e,t,n){if(!this.intersects(e,t))return null;n.visitItem(this._item)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(dr),mr=function(e){function t(){e.call(this),this._node1=null,this._node2=null;var t=arguments[0],n=arguments[1];this._node1=t,this._node2=n,this.buildExtent(this._node1,this._node2)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.buildExtent=function(e,t){this._min=Math.min(e._min,t._min),this._max=Math.max(e._max,t._max)},t.prototype.query=function(e,t,n){if(!this.intersects(e,t))return null;null!==this._node1&&this._node1.query(e,t,n),null!==this._node2&&this._node2.query(e,t,n)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(dr),yr=function(){this._leaves=new Ee,this._root=null,this._level=0};yr.prototype.buildTree=function(){Qt.sort(this._leaves,new dr.NodeComparator);for(var e=this._leaves,t=null,n=new Ee;;){if(this.buildLevel(e,n),1===n.size())return n.get(0);t=e,e=n,n=t}},yr.prototype.insert=function(e,t,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new gr(e,t,n))},yr.prototype.query=function(e,t,n){this.init(),this._root.query(e,t,n)},yr.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},yr.prototype.printNode=function(e){H.out.println($.toLineString(new x(e._min,this._level),new x(e._max,this._level)))},yr.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},yr.prototype.buildLevel=function(e,t){this._level++,t.clear();for(var n=0;n<e.size();n+=2){var i=e.get(n);if(null===(n+1<e.size()?e.get(n):null))t.add(i);else{var r=new mr(e.get(n),e.get(n+1));t.add(r)}}},yr.prototype.interfaces_=function(){return[]},yr.prototype.getClass=function(){return yr};var vr=function(){this._items=new Ee};vr.prototype.visitItem=function(e){this._items.add(e)},vr.prototype.getItems=function(){return this._items},vr.prototype.interfaces_=function(){return[Kt]},vr.prototype.getClass=function(){return vr};var br=function(){this._index=null;var e=arguments[0];if(!I(e,$e))throw new v("Argument must be Polygonal");this._index=new Pr(e)},_r={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};br.prototype.locate=function(e){var t=new ae(e),n=new wr(t);return this._index.query(e.y,e.y,n),t.getLocation()},br.prototype.interfaces_=function(){return[zn]},br.prototype.getClass=function(){return br},_r.SegmentVisitor.get=function(){return wr},_r.IntervalIndexedGeometry.get=function(){return Pr},Object.defineProperties(br,_r);var wr=function(){this._counter=null;var e=arguments[0];this._counter=e};wr.prototype.visitItem=function(e){var t=e;this._counter.countSegment(t.getCoordinate(0),t.getCoordinate(1))},wr.prototype.interfaces_=function(){return[Kt]},wr.prototype.getClass=function(){return wr};var Pr=function(){this._index=new yr;var e=arguments[0];this.init(e)};Pr.prototype.init=function(e){for(var t=xi.getLines(e).iterator();t.hasNext();){var n=t.next().getCoordinates();this.addLine(n)}},Pr.prototype.addLine=function(e){for(var t=1;t<e.length;t++){var n=new gn(e[t-1],e[t]),i=Math.min(n.p0.y,n.p1.y),r=Math.max(n.p0.y,n.p1.y);this._index.insert(i,r,n)}},Pr.prototype.query=function(){if(2===arguments.length){var e=arguments[0],t=arguments[1],n=new vr;return this._index.query(e,t,n),n.getItems()}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this._index.query(i,r,o)}},Pr.prototype.interfaces_=function(){return[]},Pr.prototype.getClass=function(){return Pr};var Er=function(e){function t(){if(e.call(this),this._parentGeom=null,this._lineEdgeMap=new dt,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Ai,2===arguments.length){var t=arguments[0],n=arguments[1],i=fe.OGC_SFS_BOUNDARY_RULE;this._argIndex=t,this._parentGeom=n,this._boundaryNodeRule=i,null!==n&&this.add(n)}else if(3===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2];this._argIndex=r,this._parentGeom=o,this._boundaryNodeRule=a,null!==o&&this.add(o)}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.insertBoundaryPoint=function(e,n){var i=this._nodes.addNode(n).getLabel(),r=1;T.NONE,i.getLocation(e,At.ON)===T.BOUNDARY&&r++;var o=t.determineBoundary(this._boundaryNodeRule,r);i.setLocation(e,o)},t.prototype.computeSelfNodes=function(){if(2===arguments.length){var e=arguments[0],t=arguments[1];return this.computeSelfNodes(e,t,!1)}if(3===arguments.length){var n=arguments[1],i=arguments[2],r=new ur(arguments[0],!0,!1);r.setIsDoneIfProperInt(i);var o=this.createEdgeSetIntersector(),a=this._parentGeom instanceof tt||this._parentGeom instanceof Qe||this._parentGeom instanceof nt,s=n||!a;return o.computeIntersections(this._edges,r,s),this.addSelfIntersectionNodes(this._argIndex),r}},t.prototype.computeSplitEdges=function(e){for(var t=this._edges.iterator();t.hasNext();)t.next().eiList.addSplitEdges(e)},t.prototype.computeEdgeIntersections=function(e,t,n){var i=new ur(t,n,!0);return i.setBoundaryNodes(this.getBoundaryNodes(),e.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,e._edges,i),i},t.prototype.getGeometry=function(){return this._parentGeom},t.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},t.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},t.prototype.addPoint=function(){if(arguments[0]instanceof Je){var e=arguments[0].getCoordinate();this.insertPoint(this._argIndex,e,T.INTERIOR)}else if(arguments[0]instanceof x){var t=arguments[0];this.insertPoint(this._argIndex,t,T.INTERIOR)}},t.prototype.addPolygon=function(e){this.addPolygonRing(e.getExteriorRing(),T.EXTERIOR,T.INTERIOR);for(var t=0;t<e.getNumInteriorRing();t++){var n=e.getInteriorRingN(t);this.addPolygonRing(n,T.INTERIOR,T.EXTERIOR)}},t.prototype.addEdge=function(e){this.insertEdge(e);var t=e.getCoordinates();this.insertPoint(this._argIndex,t[0],T.BOUNDARY),this.insertPoint(this._argIndex,t[t.length-1],T.BOUNDARY)},t.prototype.addLineString=function(e){var t=Ce.removeRepeatedPoints(e.getCoordinates());if(t.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=t[0],null;var n=new ni(t,new Lt(this._argIndex,T.INTERIOR));this._lineEdgeMap.put(e,n),this.insertEdge(n),te.isTrue(t.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,t[0]),this.insertBoundaryPoint(this._argIndex,t[t.length-1])},t.prototype.getInvalidPoint=function(){return this._invalidPoint},t.prototype.getBoundaryPoints=function(){for(var e=this.getBoundaryNodes(),t=new Array(e.size()).fill(null),n=0,i=e.iterator();i.hasNext();){var r=i.next();t[n++]=r.getCoordinate().copy()}return t},t.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},t.prototype.addSelfIntersectionNode=function(e,t,n){if(this.isBoundaryNode(e,t))return null;n===T.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(e,t):this.insertPoint(e,t,n)},t.prototype.addPolygonRing=function(e,t,n){if(e.isEmpty())return null;var i=Ce.removeRepeatedPoints(e.getCoordinates());if(i.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=i[0],null;var r=t,o=n;se.isCCW(i)&&(r=n,o=t);var a=new ni(i,new Lt(this._argIndex,T.BOUNDARY,r,o));this._lineEdgeMap.put(e,a),this.insertEdge(a),this.insertPoint(this._argIndex,i[0],T.BOUNDARY)},t.prototype.insertPoint=function(e,t,n){var i=this._nodes.addNode(t),r=i.getLabel();null===r?i._label=new Lt(e,n):r.setLocation(e,n)},t.prototype.createEdgeSetIntersector=function(){return new hr},t.prototype.addSelfIntersectionNodes=function(e){for(var t=this._edges.iterator();t.hasNext();)for(var n=t.next(),i=n.getLabel().getLocation(e),r=n.eiList.iterator();r.hasNext();){var o=r.next();this.addSelfIntersectionNode(e,o.coord,i)}},t.prototype.add=function(){if(1!==arguments.length)return e.prototype.add.apply(this,arguments);var t=arguments[0];if(t.isEmpty())return null;if(t instanceof nt&&(this._useBoundaryDeterminationRule=!1),t instanceof Qe)this.addPolygon(t);else if(t instanceof Ke)this.addLineString(t);else if(t instanceof Je)this.addPoint(t);else if(t instanceof et)this.addCollection(t);else if(t instanceof Ve)this.addCollection(t);else if(t instanceof nt)this.addCollection(t);else{if(!(t instanceof Ge))throw new Error(t.getClass().getName());this.addCollection(t)}},t.prototype.addCollection=function(e){for(var t=0;t<e.getNumGeometries();t++){var n=e.getGeometryN(t);this.add(n)}},t.prototype.locate=function(e){return I(this._parentGeom,$e)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new br(this._parentGeom)),this._areaPtLocator.locate(e)):this._ptLocator.locate(e,this._parentGeom)},t.prototype.findEdge=function(){if(1===arguments.length){var t=arguments[0];return this._lineEdgeMap.get(t)}return e.prototype.findEdge.apply(this,arguments)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.determineBoundary=function(e,t){return e.isInBoundary(t)?T.BOUNDARY:T.INTERIOR},t}(Ht),xr=function(){if(this._li=new re,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var e=arguments[0];this.setComputationPrecision(e.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Er(0,e)}else if(2===arguments.length){var t=arguments[0],n=arguments[1],i=fe.OGC_SFS_BOUNDARY_RULE;t.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(t.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Er(0,t,i),this._arg[1]=new Er(1,n,i)}else if(3===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2];r.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(r.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Er(0,r,a),this._arg[1]=new Er(1,o,a)}};xr.prototype.getArgGeometry=function(e){return this._arg[e].getGeometry()},xr.prototype.setComputationPrecision=function(e){this._resultPrecisionModel=e,this._li.setPrecisionModel(this._resultPrecisionModel)},xr.prototype.interfaces_=function(){return[]},xr.prototype.getClass=function(){return xr};var Ar=function(){};Ar.prototype.interfaces_=function(){return[]},Ar.prototype.getClass=function(){return Ar},Ar.map=function(){if(arguments[0]instanceof ue&&I(arguments[1],Ar.MapOp)){for(var e=arguments[0],t=arguments[1],n=new Ee,i=0;i<e.getNumGeometries();i++){var r=t.map(e.getGeometryN(i));null!==r&&n.add(r)}return e.getFactory().buildGeometry(n)}if(I(arguments[0],_e)&&I(arguments[1],Ar.MapOp)){for(var o=arguments[0],a=arguments[1],s=new Ee,l=o.iterator();l.hasNext();){var c=l.next(),u=a.map(c);null!==u&&s.add(u)}return s}},Ar.MapOp=function(){};var Cr=function(e){function t(){var t=arguments[0],n=arguments[1];e.call(this,t,n),this._ptLocator=new Ai,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Xn,this._resultPolyList=new Ee,this._resultLineList=new Ee,this._resultPointList=new Ee,this._graph=new Ht(new qn),this._geomFact=t.getFactory()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.insertUniqueEdge=function(e){var t=this._edgeList.findEqualEdge(e);if(null!==t){var n=t.getLabel(),i=e.getLabel();t.isPointwiseEqual(e)||(i=new Lt(e.getLabel())).flip();var r=t.getDepth();r.isNull()&&r.add(n),r.add(i),n.merge(i)}else this._edgeList.add(e)},t.prototype.getGraph=function(){return this._graph},t.prototype.cancelDuplicateResultEdges=function(){for(var e=this._graph.getEdgeEnds().iterator();e.hasNext();){var t=e.next(),n=t.getSym();t.isInResult()&&n.isInResult()&&(t.setInResult(!1),n.setInResult(!1))}},t.prototype.isCoveredByLA=function(e){return!!this.isCovered(e,this._resultLineList)||!!this.isCovered(e,this._resultPolyList)},t.prototype.computeGeometry=function(e,n,i,r){var o=new Ee;return o.addAll(e),o.addAll(n),o.addAll(i),o.isEmpty()?t.createEmptyResult(r,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},t.prototype.mergeSymLabels=function(){for(var e=this._graph.getNodes().iterator();e.hasNext();)e.next().getEdges().mergeSymLabels()},t.prototype.isCovered=function(e,t){for(var n=t.iterator();n.hasNext();){var i=n.next();if(this._ptLocator.locate(e,i)!==T.EXTERIOR)return!0}return!1},t.prototype.replaceCollapsedEdges=function(){for(var e=new Ee,t=this._edgeList.iterator();t.hasNext();){var n=t.next();n.isCollapsed()&&(t.remove(),e.add(n.getCollapsedEdge()))}this._edgeList.addAll(e)},t.prototype.updateNodeLabelling=function(){for(var e=this._graph.getNodes().iterator();e.hasNext();){var t=e.next(),n=t.getEdges().getLabel();t.getLabel().merge(n)}},t.prototype.getResultGeometry=function(e){return this.computeOverlay(e),this._resultGeom},t.prototype.insertUniqueEdges=function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();this.insertUniqueEdge(n)}},t.prototype.computeOverlay=function(e){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var t=new Ee;this._arg[0].computeSplitEdges(t),this._arg[1].computeSplitEdges(t),this.insertUniqueEdges(t),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Hi.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(e),this.cancelDuplicateResultEdges();var n=new qt(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var i=new Wi(this,this._geomFact,this._ptLocator);this._resultLineList=i.build(e);var r=new Xi(this,this._geomFact,this._ptLocator);this._resultPointList=r.build(e),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,e)},t.prototype.labelIncompleteNode=function(e,t){var n=this._ptLocator.locate(e.getCoordinate(),this._arg[t].getGeometry());e.getLabel().setLocation(t,n)},t.prototype.copyPoints=function(e){for(var t=this._arg[e].getNodeIterator();t.hasNext();){var n=t.next();this._graph.addNode(n.getCoordinate()).setLabel(e,n.getLabel().getLocation(e))}},t.prototype.findResultAreaEdges=function(e){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var i=n.next(),r=i.getLabel();r.isArea()&&!i.isInteriorAreaEdge()&&t.isResultOfOp(r.getLocation(0,At.RIGHT),r.getLocation(1,At.RIGHT),e)&&i.setInResult(!0)}},t.prototype.computeLabelsFromDepths=function(){for(var e=this._edgeList.iterator();e.hasNext();){var t=e.next(),n=t.getLabel(),i=t.getDepth();if(!i.isNull()){i.normalize();for(var r=0;r<2;r++)n.isNull(r)||!n.isArea()||i.isNull(r)||(0===i.getDelta(r)?n.toLine(r):(te.isTrue(!i.isNull(r,At.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(r,At.LEFT,i.getLocation(r,At.LEFT)),te.isTrue(!i.isNull(r,At.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(r,At.RIGHT,i.getLocation(r,At.RIGHT))))}}},t.prototype.computeLabelling=function(){for(var e=this._graph.getNodes().iterator();e.hasNext();)e.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},t.prototype.labelIncompleteNodes=function(){for(var e=this._graph.getNodes().iterator();e.hasNext();){var t=e.next(),n=t.getLabel();t.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(t,0):this.labelIncompleteNode(t,1)),t.getEdges().updateLabelling(n)}},t.prototype.isCoveredByA=function(e){return!!this.isCovered(e,this._resultPolyList)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(xr);Cr.overlayOp=function(e,t,n){return new Cr(e,t).getResultGeometry(n)},Cr.intersection=function(e,t){if(e.isEmpty()||t.isEmpty())return Cr.createEmptyResult(Cr.INTERSECTION,e,t,e.getFactory());if(e.isGeometryCollection()){var n=t;return qi.map(e,{interfaces_:function(){return[Ar.MapOp]},map:function(e){return e.intersection(n)}})}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),or.overlayOp(e,t,Cr.INTERSECTION)},Cr.symDifference=function(e,t){if(e.isEmpty()||t.isEmpty()){if(e.isEmpty()&&t.isEmpty())return Cr.createEmptyResult(Cr.SYMDIFFERENCE,e,t,e.getFactory());if(e.isEmpty())return t.copy();if(t.isEmpty())return e.copy()}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),or.overlayOp(e,t,Cr.SYMDIFFERENCE)},Cr.resultDimension=function(e,t,n){var i=t.getDimension(),r=n.getDimension(),o=-1;switch(e){case Cr.INTERSECTION:o=Math.min(i,r);break;case Cr.UNION:o=Math.max(i,r);break;case Cr.DIFFERENCE:o=i;break;case Cr.SYMDIFFERENCE:o=Math.max(i,r)}return o},Cr.createEmptyResult=function(e,t,n,i){var r=null;switch(Cr.resultDimension(e,t,n)){case-1:r=i.createGeometryCollection(new Array(0).fill(null));break;case 0:r=i.createPoint();break;case 1:r=i.createLineString();break;case 2:r=i.createPolygon()}return r},Cr.difference=function(e,t){return e.isEmpty()?Cr.createEmptyResult(Cr.DIFFERENCE,e,t,e.getFactory()):t.isEmpty()?e.copy():(e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),or.overlayOp(e,t,Cr.DIFFERENCE))},Cr.isResultOfOp=function(){if(2===arguments.length){var e=arguments[0],t=arguments[1],n=e.getLocation(0),i=e.getLocation(1);return Cr.isResultOfOp(n,i,t)}if(3===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2];switch(r===T.BOUNDARY&&(r=T.INTERIOR),o===T.BOUNDARY&&(o=T.INTERIOR),a){case Cr.INTERSECTION:return r===T.INTERIOR&&o===T.INTERIOR;case Cr.UNION:return r===T.INTERIOR||o===T.INTERIOR;case Cr.DIFFERENCE:return r===T.INTERIOR&&o!==T.INTERIOR;case Cr.SYMDIFFERENCE:return r===T.INTERIOR&&o!==T.INTERIOR||r!==T.INTERIOR&&o===T.INTERIOR}return!1}},Cr.INTERSECTION=1,Cr.UNION=2,Cr.DIFFERENCE=3,Cr.SYMDIFFERENCE=4;var Sr=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Ai,this._seg=new gn;var e=arguments[0],t=arguments[1];this._g=e,this._boundaryDistanceTolerance=t,this._linework=this.extractLinework(e)};Sr.prototype.isWithinToleranceOfBoundary=function(e){for(var t=0;t<this._linework.getNumGeometries();t++)for(var n=this._linework.getGeometryN(t).getCoordinateSequence(),i=0;i<n.size()-1;i++)if(n.getCoordinate(i,this._seg.p0),n.getCoordinate(i+1,this._seg.p1),this._seg.distance(e)<=this._boundaryDistanceTolerance)return!0;return!1},Sr.prototype.getLocation=function(e){return this.isWithinToleranceOfBoundary(e)?T.BOUNDARY:this._ptLocator.locate(e,this._g)},Sr.prototype.extractLinework=function(e){var t=new Tr;e.apply(t);var n=t.getLinework(),i=yt.toLineStringArray(n);return e.getFactory().createMultiLineString(i)},Sr.prototype.interfaces_=function(){return[]},Sr.prototype.getClass=function(){return Sr};var Tr=function(){this._linework=null,this._linework=new Ee};Tr.prototype.getLinework=function(){return this._linework},Tr.prototype.filter=function(e){if(e instanceof Qe){var t=e;this._linework.add(t.getExteriorRing());for(var n=0;n<t.getNumInteriorRing();n++)this._linework.add(t.getInteriorRingN(n))}},Tr.prototype.interfaces_=function(){return[ze]},Tr.prototype.getClass=function(){return Tr};var Rr=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var e=arguments[0];this._g=e};Rr.prototype.extractPoints=function(e,t,n){for(var i=e.getCoordinates(),r=0;r<i.length-1;r++)this.computeOffsetPoints(i[r],i[r+1],t,n)},Rr.prototype.setSidesToGenerate=function(e,t){this._doLeft=e,this._doRight=t},Rr.prototype.getPoints=function(e){for(var t=new Ee,n=xi.getLines(this._g).iterator();n.hasNext();){var i=n.next();this.extractPoints(i,e,t)}return t},Rr.prototype.computeOffsetPoints=function(e,t,n,i){var r=t.x-e.x,o=t.y-e.y,a=Math.sqrt(r*r+o*o),s=n*r/a,l=n*o/a,c=(t.x+e.x)/2,u=(t.y+e.y)/2;if(this._doLeft){var h=new x(c-l,u+s);i.add(h)}if(this._doRight){var d=new x(c+l,u-s);i.add(d)}},Rr.prototype.interfaces_=function(){return[]},Rr.prototype.getClass=function(){return Rr};var Ir=function e(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=e.TOLERANCE,this._testCoords=new Ee;var t=arguments[0],n=arguments[1],i=arguments[2];this._boundaryDistanceTolerance=e.computeBoundaryDistanceTolerance(t,n),this._geom=[t,n,i],this._locFinder=[new Sr(this._geom[0],this._boundaryDistanceTolerance),new Sr(this._geom[1],this._boundaryDistanceTolerance),new Sr(this._geom[2],this._boundaryDistanceTolerance)]},Mr={TOLERANCE:{configurable:!0}};Ir.prototype.reportResult=function(e,t,n){H.out.println("Overlay result invalid - A:"+T.toLocationSymbol(t[0])+" B:"+T.toLocationSymbol(t[1])+" expected:"+(n?"i":"e")+" actual:"+T.toLocationSymbol(t[2]))},Ir.prototype.isValid=function(e){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(e)},Ir.prototype.checkValid=function(){if(1===arguments.length){for(var e=arguments[0],t=0;t<this._testCoords.size();t++){var n=this._testCoords.get(t);if(!this.checkValid(e,n))return this._invalidLocation=n,!1}return!0}if(2===arguments.length){var i=arguments[0],r=arguments[1];return this._location[0]=this._locFinder[0].getLocation(r),this._location[1]=this._locFinder[1].getLocation(r),this._location[2]=this._locFinder[2].getLocation(r),!!Ir.hasLocation(this._location,T.BOUNDARY)||this.isValidResult(i,this._location)}},Ir.prototype.addTestPts=function(e){var t=new Rr(e);this._testCoords.addAll(t.getPoints(5*this._boundaryDistanceTolerance))},Ir.prototype.isValidResult=function(e,t){var n=Cr.isResultOfOp(t[0],t[1],e),i=!(n^t[2]===T.INTERIOR);return i||this.reportResult(e,t,n),i},Ir.prototype.getInvalidLocation=function(){return this._invalidLocation},Ir.prototype.interfaces_=function(){return[]},Ir.prototype.getClass=function(){return Ir},Ir.hasLocation=function(e,t){for(var n=0;n<3;n++)if(e[n]===t)return!0;return!1},Ir.computeBoundaryDistanceTolerance=function(e,t){return Math.min(Zi.computeSizeBasedSnapTolerance(e),Zi.computeSizeBasedSnapTolerance(t))},Ir.isValid=function(e,t,n,i){return new Ir(e,t,i).isValid(n)},Mr.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Ir,Mr);var Lr=function e(t){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=e.extractFactory(t),this._inputGeoms=t};Lr.prototype.extractElements=function(e,t){if(null===e)return null;for(var n=0;n<e.getNumGeometries();n++){var i=e.getGeometryN(n);this._skipEmpty&&i.isEmpty()||t.add(i)}},Lr.prototype.combine=function(){for(var e=new Ee,t=this._inputGeoms.iterator();t.hasNext();){var n=t.next();this.extractElements(n,e)}return 0===e.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(e)},Lr.prototype.interfaces_=function(){return[]},Lr.prototype.getClass=function(){return Lr},Lr.combine=function(){if(1===arguments.length)return new Lr(arguments[0]).combine();if(2===arguments.length){var e=arguments[0],t=arguments[1];return new Lr(Lr.createList(e,t)).combine()}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];return new Lr(Lr.createList(n,i,r)).combine()}},Lr.extractFactory=function(e){return e.isEmpty()?null:e.iterator().next().getFactory()},Lr.createList=function(){if(2===arguments.length){var e=arguments[0],t=arguments[1],n=new Ee;return n.add(e),n.add(t),n}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],a=new Ee;return a.add(i),a.add(r),a.add(o),a}};var Dr=function(){this._inputPolys=null,this._geomFactory=null;var e=arguments[0];this._inputPolys=e,null===this._inputPolys&&(this._inputPolys=new Ee)},Or={STRTREE_NODE_CAPACITY:{configurable:!0}};Dr.prototype.reduceToGeometries=function(e){for(var t=new Ee,n=e.iterator();n.hasNext();){var i=n.next(),r=null;I(i,Pe)?r=this.unionTree(i):i instanceof ue&&(r=i),t.add(r)}return t},Dr.prototype.extractByEnvelope=function(e,t,n){for(var i=new Ee,r=0;r<t.getNumGeometries();r++){var o=t.getGeometryN(r);o.getEnvelopeInternal().intersects(e)?i.add(o):n.add(o)}return this._geomFactory.buildGeometry(i)},Dr.prototype.unionOptimized=function(e,t){var n=e.getEnvelopeInternal(),i=t.getEnvelopeInternal();if(!n.intersects(i))return Lr.combine(e,t);if(e.getNumGeometries()<=1&&t.getNumGeometries()<=1)return this.unionActual(e,t);var r=n.intersection(i);return this.unionUsingEnvelopeIntersection(e,t,r)},Dr.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var e=new an(Dr.STRTREE_NODE_CAPACITY),t=this._inputPolys.iterator();t.hasNext();){var n=t.next();e.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var i=e.itemsTree();return this.unionTree(i)},Dr.prototype.binaryUnion=function(){if(1===arguments.length){var e=arguments[0];return this.binaryUnion(e,0,e.size())}if(3===arguments.length){var t=arguments[0],n=arguments[1],i=arguments[2];if(i-n<=1){var r=Dr.getGeometry(t,n);return this.unionSafe(r,null)}if(i-n==2)return this.unionSafe(Dr.getGeometry(t,n),Dr.getGeometry(t,n+1));var o=Math.trunc((i+n)/2),a=this.binaryUnion(t,n,o),s=this.binaryUnion(t,o,i);return this.unionSafe(a,s)}},Dr.prototype.repeatedUnion=function(e){for(var t=null,n=e.iterator();n.hasNext();){var i=n.next();t=null===t?i.copy():t.union(i)}return t},Dr.prototype.unionSafe=function(e,t){return null===e&&null===t?null:null===e?t.copy():null===t?e.copy():this.unionOptimized(e,t)},Dr.prototype.unionActual=function(e,t){return Dr.restrictToPolygons(e.union(t))},Dr.prototype.unionTree=function(e){var t=this.reduceToGeometries(e);return this.binaryUnion(t)},Dr.prototype.unionUsingEnvelopeIntersection=function(e,t,n){var i=new Ee,r=this.extractByEnvelope(n,e,i),o=this.extractByEnvelope(n,t,i),a=this.unionActual(r,o);return i.add(a),Lr.combine(i)},Dr.prototype.bufferUnion=function(){if(1===arguments.length){var e=arguments[0];return e.get(0).getFactory().buildGeometry(e).buffer(0)}if(2===arguments.length){var t=arguments[0],n=arguments[1];return t.getFactory().createGeometryCollection([t,n]).buffer(0)}},Dr.prototype.interfaces_=function(){return[]},Dr.prototype.getClass=function(){return Dr},Dr.restrictToPolygons=function(e){if(I(e,$e))return e;var t=Ei.getPolygons(e);return 1===t.size()?t.get(0):e.getFactory().createMultiPolygon(yt.toPolygonArray(t))},Dr.getGeometry=function(e,t){return t>=e.size()?null:e.get(t)},Dr.union=function(e){return new Dr(e).union()},Or.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Dr,Or);var jr=function(){};jr.prototype.interfaces_=function(){return[]},jr.prototype.getClass=function(){return jr},jr.union=function(e,t){if(e.isEmpty()||t.isEmpty()){if(e.isEmpty()&&t.isEmpty())return Cr.createEmptyResult(Cr.UNION,e,t,e.getFactory());if(e.isEmpty())return t.copy();if(t.isEmpty())return e.copy()}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),or.overlayOp(e,t,Cr.UNION)},e.GeoJSONReader=Et,e.GeoJSONWriter=xt,e.OverlayOp=Cr,e.UnionOp=jr,e.BufferOp=gi,Object.defineProperty(e,"__esModule",{value:!0})}(t)},7840:e=>{function t(e,t){const n=new RegExp(t,"g"),i=e.match(n);return i?i.length:0}e.exports=t,e.exports.default=t},4635:(e,t,n)=>{const i=n(9622),r=n(2566),o=n(7840);function a(e,t,n){const a=n&&n.debug||!1,s=!(n&&!1===typeof n.nested),l=n&&n.startIndex||0;a&&console.log("[xml-utils] starting findTagByName with",t," and ",n);const c=i(e,`<${t}[ >/]`,l);if(a&&console.log("[xml-utils] start:",c),-1===c)return;const u=e.slice(c+t.length);let h=r(u,"^[^<]*[ /]>",0);const d=-1!==h&&"/"===u[h-1];if(a&&console.log("[xml-utils] selfClosing:",d),!1===d)if(s){let e=0,n=1,i=0;for(;-1!==(h=r(u,"[ /]"+t+">",e));){const r=u.substring(e,h+1);if(n+=o(r,"<"+t),i+=o(r,"/"+t+">"),i>=n)break;e=h}}else h=r(u,"[ /]"+t+">",0);const p=c+t.length+h+1;if(a&&console.log("[xml-utils] end:",p),-1===p)return;const f=e.slice(c,p);let g;return g=d?null:f.slice(f.indexOf(">")+1,f.lastIndexOf("<")),{inner:g,outer:f,start:c,end:p}}e.exports=a,e.exports.default=a},8602:(e,t,n)=>{const i=n(4635);function r(e,t,n){const r=[],o=n&&n.debug||!1,a=!n||"boolean"!=typeof n.nested||n.nested;let s,l=n&&n.startIndex||0;for(;s=i(e,t,{debug:o,startIndex:l});)l=a?s.start+1+t.length:s.end,r.push(s);return o&&console.log("findTagsByName found",r.length,"tags"),r}e.exports=r,e.exports.default=r},8330:e=>{function t(e,t,n){const i=n&&n.debug||!1;i&&console.log("getting "+t+" in "+e);const r="object"==typeof e?e.outer:e,o=`${t}\\="([^"]*)"`;i&&console.log("pattern:",o);const a=new RegExp(o).exec(r);if(i&&console.log("match:",a),a)return a[1]}e.exports=t,e.exports.default=t},2566:e=>{function t(e,t,n){const i=new RegExp(t).exec(e.slice(n));return i?n+i.index+i[0].length-1:-1}e.exports=t,e.exports.default=t},9622:e=>{function t(e,t,n){const i=new RegExp(t).exec(e.slice(n));return i?n+i.index:-1}e.exports=t,e.exports.default=t},9521:()=>{},3752:()=>{},3640:()=>{},2630:()=>{},7061:(e,t,n)=>{var i=n(8698).default;function r(){"use strict";e.exports=r=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},n=Object.prototype,o=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},l=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag";function h(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(e){h=function(e,t,n){return e[t]=n}}function d(e,t,n,i){var r=t&&t.prototype instanceof g?t:g,o=Object.create(r.prototype),s=new T(i||[]);return a(o,"_invoke",{value:x(e,n,s)}),o}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var f={};function g(){}function m(){}function y(){}var v={};h(v,l,(function(){return this}));var b=Object.getPrototypeOf,_=b&&b(b(R([])));_&&_!==n&&o.call(_,l)&&(v=_);var w=y.prototype=g.prototype=Object.create(v);function P(e){["next","throw","return"].forEach((function(t){h(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(r,a,s,l){var c=p(e[r],e,a);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==i(h)&&o.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,s,l)}),(function(e){n("throw",e,s,l)})):t.resolve(h).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,l)}))}l(c.arg)}var r;a(this,"_invoke",{value:function(e,i){function o(){return new t((function(t,r){n(e,i,t,r)}))}return r=r?r.then(o,o):o()}})}function x(e,t,n){var i="suspendedStart";return function(r,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw o;return{value:void 0,done:!0}}for(n.method=r,n.arg=o;;){var a=n.delegate;if(a){var s=A(a,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=p(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}function A(e,t){var n=t.method,i=e.iterator[n];if(void 0===i)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,A(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var r=p(i,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function R(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(o.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:I}}function I(){return{value:void 0,done:!0}}return m.prototype=y,a(w,"constructor",{value:y,configurable:!0}),a(y,"constructor",{value:m,configurable:!0}),m.displayName=h(y,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,h(e,u,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},P(E.prototype),h(E.prototype,c,(function(){return this})),t.AsyncIterator=E,t.async=function(e,n,i,r,o){void 0===o&&(o=Promise);var a=new E(d(e,n,i,r),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},P(w),h(w,u,"Generator"),h(w,l,(function(){return this})),h(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},t.values=R,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,i){return a.type="throw",a.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i],a=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var s=o.call(r,"catchLoc"),l=o.call(r,"finallyLoc");if(s&&l){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&o.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=e,a.arg=t,r?(this.method="next",this.next=r.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;S(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:R(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports},8698:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},4687:(e,t,n)=>{var i=n(7061)();e.exports=i;try{regeneratorRuntime=i}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=i:Function("r","regeneratorRuntime = r")(i)}},2499:(e,t,n)=>{"use strict";n.d(t,{Ie:()=>l,It:()=>o,L:()=>i,L5:()=>u,P1:()=>d,Qb:()=>h,pd:()=>c,sf:()=>s});const i={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},r={};for(const e in i)i.hasOwnProperty(e)&&(r[i[e]]=parseInt(e,10));const o=[r.BitsPerSample,r.ExtraSamples,r.SampleFormat,r.StripByteCounts,r.StripOffsets,r.StripRowCounts,r.TileByteCounts,r.TileOffsets,r.SubIFDs],a={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},s={};for(const e in a)a.hasOwnProperty(e)&&(s[a[e]]=parseInt(e,10));const l={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},c={Unspecified:0,Assocalpha:1,Unassalpha:2},u={Version:0,AddCompression:1},h={None:0,Deflate:1},d={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"},p={};for(const e in d)d.hasOwnProperty(e)&&(p[d[e]]=parseInt(e,10))}},o={};function a(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={exports:{}};return r[e].call(n.exports,n,n.exports,a),n.exports}a.m=r,a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(n,i){if(1&i&&(n=this(n)),8&i)return n;if("object"==typeof n&&n){if(4&i&&n.__esModule)return n;if(16&i&&"function"==typeof n.then)return n}var r=Object.create(null);a.r(r);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&n;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>o[e]=()=>n[e]));return o.default=()=>n,a.d(r,o),r},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((t,n)=>(a.f[n](e,t),t)),[])),a.u=e=>e+".js",a.miniCssF=e=>{},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n={},i="deck.gl-minimum-template:",a.l=(e,t,r,o)=>{if(n[e])n[e].push(t);else{var s,l;if(void 0!==r)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==e||h.getAttribute("data-webpack")==i+r){s=h;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,a.nc&&s.setAttribute("nonce",a.nc),s.setAttribute("data-webpack",i+r),s.src=e),n[e]=[t];var d=(t,i)=>{s.onerror=s.onload=null,clearTimeout(p);var r=n[e];if(delete n[e],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach((e=>e(i))),t)return t(i)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),l&&document.head.appendChild(s)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p="",(()=>{var e={804:0};a.f.j=(t,n)=>{var i=a.o(e,t)?e[t]:void 0;if(0!==i)if(i)n.push(i[2]);else{var r=new Promise(((n,r)=>i=e[t]=[n,r]));n.push(i[2]=r);var o=a.p+a.u(t),s=new Error;a.l(o,(n=>{if(a.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var r=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+r+": "+o+")",s.name="ChunkLoadError",s.type=r,s.request=o,i[1](s)}}),"chunk-"+t,t)}};var t=(t,n)=>{var i,r,[o,s,l]=n,c=0;if(o.some((t=>0!==e[t]))){for(i in s)a.o(s,i)&&(a.m[i]=s[i]);l&&l(a)}for(t&&t(n);c<o.length;c++)r=o[c],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0},n=self.webpackChunkdeck_gl_minimum_template=self.webpackChunkdeck_gl_minimum_template||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),(()=>{"use strict";var e=a(7294),t=a(745);function n(e,t,n,i,r,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,r)}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(s.push(i.value),s.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw r}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var o=a(4687),s=a.n(o);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==l(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!==l(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===l(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Math.PI,Math.PI;const u={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function h(e,{precision:t=u.precision}={}){return e=function(e){return Math.round(e/u.EPSILON)*u.EPSILON}(e),"".concat(parseFloat(e.toPrecision(t)))}function d(e){return Array.isArray(e)||ArrayBuffer.isView(e)&&!(e instanceof DataView)}function p(e,t,n){return function(e,t,n){if(d(e)){const i=e;n=n||function(e){return e.clone?e.clone():new Array(e.length)}(i);for(let r=0;r<n.length&&r<i.length;++r)n[r]=t(e[r],r,n);return n}return t(e)}(e,(e=>Math.max(t,Math.min(n,e))))}function f(e,t,n){return d(e)?e.map(((e,i)=>f(e,t[i],n))):n*t+(1-n)*e}function g(e,t,n){const i=u.EPSILON;n&&(u.EPSILON=n);try{if(e===t)return!0;if(d(e)&&d(t)){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!g(e[n],t[n]))return!1;return!0}return e&&e.equals?e.equals(t):t&&t.equals?t.equals(e):"number"==typeof e&&"number"==typeof t&&Math.abs(e-t)<=u.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))}finally{u.EPSILON=i}}function m(e,t){if(!e)throw new Error(t||"deck.gl: assertion failed.")}class y{constructor(e){c(this,"_propsToCompare",void 0),c(this,"_propsToExtract",void 0),c(this,"_requiredProps",void 0);const{compare:t,extract:n,required:i}=e;this._propsToCompare=t,this._propsToExtract=n||t,this._requiredProps=i}arePropsEqual(e,t){for(const n of this._propsToCompare)if(!(n in e)||!(n in t)||!g(e[n],t[n]))return!1;return!0}initializeProps(e,t){const n={},i={};for(const r of this._propsToExtract)(r in e||r in t)&&(n[r]=e[r],i[r]=t[r]);return this._checkRequiredProps(n),this._checkRequiredProps(i),{start:n,end:i}}getDuration(e,t){return t.transitionDuration}_checkRequiredProps(e){this._requiredProps&&this._requiredProps.forEach((t=>{const n=e[t];m(Number.isFinite(n)||Array.isArray(n),"".concat(t," is required for transition"))}))}}var v,b=1e-6,_="undefined"!=typeof Float32Array?Float32Array:Array;function w(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function P(e,t,n){var i=t[0],r=t[1],o=t[2],a=t[3];return e[0]=n[0]*i+n[4]*r+n[8]*o+n[12]*a,e[1]=n[1]*i+n[5]*r+n[9]*o+n[13]*a,e[2]=n[2]*i+n[6]*r+n[10]*o+n[14]*a,e[3]=n[3]*i+n[7]*r+n[11]*o+n[15]*a,e}function E(e,t){const n=P([],t,e);return w(n,n,1/n[3]),n}function x(e,t){const n=e%t;return n<0?t+n:n}function A(e,t,n){return e<t?t:e>n?n:e}Math.random,Math.PI,Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)}),v=new _(4),_!=Float32Array&&(v[0]=0,v[1]=0,v[2]=0,v[3]=0);const C=Math.log2||function(e){return Math.log(e)*Math.LOG2E};function S(e,t){var n=t[0],i=t[1],r=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],h=t[9],d=t[10],p=t[11],f=t[12],g=t[13],m=t[14],y=t[15],v=n*s-i*a,b=n*l-r*a,_=n*c-o*a,w=i*l-r*s,P=i*c-o*s,E=r*c-o*l,x=u*g-h*f,A=u*m-d*f,C=u*y-p*f,S=h*m-d*g,T=h*y-p*g,R=d*y-p*m,I=v*R-b*T+_*S+w*C-P*A+E*x;return I?(I=1/I,e[0]=(s*R-l*T+c*S)*I,e[1]=(r*T-i*R-o*S)*I,e[2]=(g*E-m*P+y*w)*I,e[3]=(d*P-h*E-p*w)*I,e[4]=(l*C-a*R-c*A)*I,e[5]=(n*R-r*C+o*A)*I,e[6]=(m*_-f*E-y*b)*I,e[7]=(u*E-d*_+p*b)*I,e[8]=(a*T-s*C+c*x)*I,e[9]=(i*C-n*T-o*x)*I,e[10]=(f*P-g*_+y*v)*I,e[11]=(h*_-u*P-p*v)*I,e[12]=(s*A-a*S-l*x)*I,e[13]=(n*S-i*A+r*x)*I,e[14]=(g*b-f*w-m*v)*I,e[15]=(u*w-h*b+d*v)*I,e):null}function T(e,t,n){var i=t[0],r=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=t[9],p=t[10],f=t[11],g=t[12],m=t[13],y=t[14],v=t[15],b=n[0],_=n[1],w=n[2],P=n[3];return e[0]=b*i+_*s+w*h+P*g,e[1]=b*r+_*l+w*d+P*m,e[2]=b*o+_*c+w*p+P*y,e[3]=b*a+_*u+w*f+P*v,b=n[4],_=n[5],w=n[6],P=n[7],e[4]=b*i+_*s+w*h+P*g,e[5]=b*r+_*l+w*d+P*m,e[6]=b*o+_*c+w*p+P*y,e[7]=b*a+_*u+w*f+P*v,b=n[8],_=n[9],w=n[10],P=n[11],e[8]=b*i+_*s+w*h+P*g,e[9]=b*r+_*l+w*d+P*m,e[10]=b*o+_*c+w*p+P*y,e[11]=b*a+_*u+w*f+P*v,b=n[12],_=n[13],w=n[14],P=n[15],e[12]=b*i+_*s+w*h+P*g,e[13]=b*r+_*l+w*d+P*m,e[14]=b*o+_*c+w*p+P*y,e[15]=b*a+_*u+w*f+P*v,e}function R(e,t,n){var i,r,o,a,s,l,c,u,h,d,p,f,g=n[0],m=n[1],y=n[2];return t===e?(e[12]=t[0]*g+t[4]*m+t[8]*y+t[12],e[13]=t[1]*g+t[5]*m+t[9]*y+t[13],e[14]=t[2]*g+t[6]*m+t[10]*y+t[14],e[15]=t[3]*g+t[7]*m+t[11]*y+t[15]):(i=t[0],r=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=t[9],p=t[10],f=t[11],e[0]=i,e[1]=r,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=c,e[7]=u,e[8]=h,e[9]=d,e[10]=p,e[11]=f,e[12]=i*g+s*m+h*y+t[12],e[13]=r*g+l*m+d*y+t[13],e[14]=o*g+c*m+p*y+t[14],e[15]=a*g+u*m+f*y+t[15]),e}function I(e,t,n){var i=n[0],r=n[1],o=n[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function M(e,t,n){var i=Math.sin(n),r=Math.cos(n),o=t[4],a=t[5],s=t[6],l=t[7],c=t[8],u=t[9],h=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*r+c*i,e[5]=a*r+u*i,e[6]=s*r+h*i,e[7]=l*r+d*i,e[8]=c*r-o*i,e[9]=u*r-a*i,e[10]=h*r-s*i,e[11]=d*r-l*i,e}function L(e,t,n){var i=Math.sin(n),r=Math.cos(n),o=t[0],a=t[1],s=t[2],l=t[3],c=t[4],u=t[5],h=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*r+c*i,e[1]=a*r+u*i,e[2]=s*r+h*i,e[3]=l*r+d*i,e[4]=c*r-o*i,e[5]=u*r-a*i,e[6]=h*r-s*i,e[7]=d*r-l*i,e}function D(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function O(e,t,n,i){var r=t[0],o=t[1];return e[0]=r+i*(n[0]-r),e[1]=o+i*(n[1]-o),e}var j=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e};function N(){var e=new _(3);return _!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function F(e,t,n){var i=new _(3);return i[0]=e,i[1]=t,i[2]=n,i}function k(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function U(e,t,n){var i=t[0],r=t[1],o=t[2],a=n[0],s=n[1],l=n[2];return e[0]=r*l-o*s,e[1]=o*a-i*l,e[2]=i*s-r*a,e}function z(e,t,n){var i=t[0],r=t[1],o=t[2],a=n[3]*i+n[7]*r+n[11]*o+n[15];return a=a||1,e[0]=(n[0]*i+n[4]*r+n[8]*o+n[12])/a,e[1]=(n[1]*i+n[5]*r+n[9]*o+n[13])/a,e[2]=(n[2]*i+n[6]*r+n[10]*o+n[14])/a,e}function B(e,t,n){var i=t[0],r=t[1],o=t[2];return e[0]=i*n[0]+r*n[3]+o*n[6],e[1]=i*n[1]+r*n[4]+o*n[7],e[2]=i*n[2]+r*n[5]+o*n[8],e}function G(e,t,n){var i=n[0],r=n[1],o=n[2],a=n[3],s=t[0],l=t[1],c=t[2],u=r*c-o*l,h=o*s-i*c,d=i*l-r*s,p=r*d-o*h,f=o*u-i*d,g=i*h-r*u,m=2*a;return u*=m,h*=m,d*=m,p*=2,f*=2,g*=2,e[0]=s+u+p,e[1]=l+h+f,e[2]=c+d+g,e}!function(){var e=new _(2);_!=Float32Array&&(e[0]=0,e[1]=0)}();var V=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e},H=function(e){var t=e[0],n=e[1],i=e[2];return Math.hypot(t,n,i)},q=function(e){var t=e[0],n=e[1],i=e[2];return t*t+n*n+i*i};function W(e,t){if(!e)throw new Error(t||"@math.gl/web-mercator: assertion failed.")}N();const X=Math.PI,Y=X/4,K=X/180,Z=180/X,J=512,$=4003e4,Q=85.051129,ee=1.5;function te(e){return Math.pow(2,e)}function ne(e){return C(e)}function ie(e){const[t,n]=e;W(Number.isFinite(t)),W(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude");const i=n*K;return[J*(t*K+X)/(2*X),J*(X+Math.log(Math.tan(Y+.5*i)))/(2*X)]}function re(e){const[t,n]=e,i=t/J*(2*X)-X,r=2*(Math.atan(Math.exp(n/J*(2*X)-X))-Y);return[i*Z,r*Z]}function oe(e){const t=Math.cos(e*K);return J/$/t}function ae(e){const{latitude:t,longitude:n,highPrecision:i=!1}=e;W(Number.isFinite(t)&&Number.isFinite(n));const r=J,o=Math.cos(t*K),a=r/360,s=a/o,l=r/$/o,c={unitsPerMeter:[l,l,l],metersPerUnit:[1/l,1/l,1/l],unitsPerDegree:[a,s,l],degreesPerUnit:[1/a,1/s,1/l]};if(i){const e=K*Math.tan(t*K)/o,n=a*e/2,i=r/$*e,u=i/s*l;c.unitsPerDegree2=[0,n,i],c.unitsPerMeter2=[u,0,u]}return c}function se(e,t){const[n,i,r]=e,[o,a,s]=t,{unitsPerMeter:l,unitsPerMeter2:c}=ae({longitude:n,latitude:i,highPrecision:!0}),u=ie(e);u[0]+=o*(l[0]+c[0]*a),u[1]+=a*(l[1]+c[1]*a);const h=re(u),d=(r||0)+(s||0);return Number.isFinite(r)||Number.isFinite(s)?[h[0],h[1],d]:h}function le(e){return 2*Math.atan(.5/e)*Z}function ce(e){return.5/Math.tan(.5*e*K)}function ue(e,t){const[n,i,r=0]=e;return W(Number.isFinite(n)&&Number.isFinite(i)&&Number.isFinite(r)),E(t,[n,i,r,1])}function he(e,t,n=0){const[i,r,o]=e;if(W(Number.isFinite(i)&&Number.isFinite(r),"invalid pixel coordinate"),Number.isFinite(o))return E(t,[i,r,o,1]);const a=E(t,[i,r,0,1]),s=E(t,[i,r,1,1]),l=a[2],c=s[2];return O([],a,s,l===c?0:((n||0)-l)/(c-l))}const de=Math.PI/180;function pe(e,t,n){const{pixelUnprojectionMatrix:i}=e,r=E(i,[t,0,1,1]),o=E(i,[t,e.height,1,1]),a=re(O([],r,o,(n*e.distanceScales.unitsPerMeter[2]-r[2])/(o[2]-r[2])));return a.push(n),a}const fe=.01,ge=["longitude","latitude","zoom"],me={curve:1.414,speed:1.2};function ye(e,t,n){const i=(n=Object.assign({},me,n)).curve,r=e.zoom,o=[e.longitude,e.latitude],a=te(r),s=t.zoom,l=[t.longitude,t.latitude],c=te(s-r),u=ie(o),h=ie(l),d=j([],h,u),p=Math.max(e.width,e.height),f=p/c,g=(E=(P=d)[0],x=P[1],Math.hypot(E,x)*a),m=Math.max(g,fe),y=i*i,v=(f*f-p*p+y*y*m*m)/(2*p*y*m),b=(f*f-p*p-y*y*m*m)/(2*f*y*m),_=Math.log(Math.sqrt(v*v+1)-v),w=Math.log(Math.sqrt(b*b+1)-b);var P,E,x;return{startZoom:r,startCenterXY:u,uDelta:d,w0:p,u1:g,S:(w-_)/i,rho:i,rho2:y,r0:_,r1:w}}const ve=["bearing","pitch"],be={speed:1.2,curve:1.414};class _e extends y{constructor(e={}){super({compare:["longitude","latitude","zoom","bearing","pitch"],extract:["width","height","longitude","latitude","zoom","bearing","pitch"],required:["width","height","latitude","longitude","zoom"]}),c(this,"opts",void 0),this.opts={...be,...e}}interpolateProps(e,t,n){const i=function(e,t,n,i){const{startZoom:r,startCenterXY:o,uDelta:a,w0:s,u1:l,S:c,rho:u,rho2:h,r0:d}=ye(e,t,i);if(l<fe){const i={};for(const r of ge){const o=e[r],a=t[r];i[r]=(p=n)*a+(1-p)*o}return i}var p;const f=n*c,g=Math.cosh(d)/Math.cosh(d+u*f),m=s*((Math.cosh(d)*Math.tanh(d+u*f)-Math.sinh(d))/h)/l,y=r+ne(1/g),v=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}([],a,m);D(v,v,o);const b=re(v);return{longitude:b[0],latitude:b[1],zoom:y}}(e,t,n,this.opts);for(const r of ve)i[r]=f(e[r]||0,t[r]||0,n);return i}getDuration(e,t){let{transitionDuration:n}=t;return"auto"===n&&(n=function(e,t,n){const i={...me,...n},{screenSpeed:r,speed:o,maxDuration:a}=i,{S:s,rho:l}=ye(e,t,i),c=1e3*s;let u;return u=Number.isFinite(r)?c/(r/l):c/o,Number.isFinite(a)&&u>a?0:u}(e,t,this.opts)),n}}let we=1,Pe=1;class Ee{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(e){const{delay:t=0,duration:n=Number.POSITIVE_INFINITY,rate:i=1,repeat:r=1}=e,o=we++,a={time:0,delay:t,duration:n,rate:i,repeat:r};return this._setChannelTime(a,this.time),this.channels.set(o,a),o}removeChannel(e){this.channels.delete(e);for(const[t,n]of this.animations)n.channel===e&&this.detachAnimation(t)}isFinished(e){const t=this.channels.get(e);return void 0!==t&&this.time>=t.delay+t.duration*t.repeat}getTime(e){if(void 0===e)return this.time;const t=this.channels.get(e);return void 0===t?-1:t.time}setTime(e){this.time=Math.max(0,e);const t=this.channels.values();for(const e of t)this._setChannelTime(e,this.time);const n=this.animations.values();for(const e of n){const{animation:t,channel:n}=e;t.setTime(this.getTime(n))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,t){const n=Pe++;return this.animations.set(n,{animation:e,channel:t}),e.setTime(this.getTime(t)),n}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,t){const n=t-e.delay;n>=e.duration*e.repeat?e.time=e.duration*e.rate:(e.time=Math.max(0,n)%e.duration,e.time*=e.rate)}}const xe=Symbol.for("component"),Ae=Symbol.for("propTypes"),Ce=Symbol.for("deprecatedProps"),Se=Symbol.for("asyncPropDefaults"),Te=Symbol.for("asyncPropOriginal"),Re=Symbol.for("asyncPropResolved");function Ie(e){if("undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof process&&"object"==typeof process.versions&&Boolean(process.versions.electron))return!0;const t="object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent,n=e||t;return!!(n&&n.indexOf("Electron")>=0)}function Me(){return!("object"==typeof process&&"[object process]"===String(process)&&!process.browser)||Ie()}const Le="undefined"!=typeof __VERSION__?__VERSION__:"untranspiled source";Me();class De{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";c(this,"storage",void 0),c(this,"id",void 0),c(this,"config",void 0),this.storage=function(e){try{const t=window[e],n="__storage_test__";return t.setItem(n,n),t.removeItem(n),t}catch(e){return null}}(n),this.id=e,this.config=t,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const e=JSON.stringify(this.config);this.storage.setItem(this.id,e)}}_loadConfiguration(){let e={};if(this.storage){const t=this.storage.getItem(this.id);e=t?JSON.parse(t):{}}return Object.assign(this.config,e),this}}function Oe(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600;const r=e.src.replace(/\(/g,"%28").replace(/\)/g,"%29");e.width>i&&(n=Math.min(n,i/e.width));const o=e.width*n,a=e.height*n,s=["font-size:1px;","padding:".concat(Math.floor(a/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(a,"px;"),"background:url(".concat(r,");"),"background-size:".concat(o,"px ").concat(a,"px;"),"color:transparent;"].join("");return["".concat(t," %c+"),s]}let je;function Ne(e){return"string"==typeof e?je[e.toUpperCase()]||je.WHITE:e}function Fe(e,t){if(!e)throw new Error(t||"Assertion failed")}!function(e){e[e.BLACK=30]="BLACK",e[e.RED=31]="RED",e[e.GREEN=32]="GREEN",e[e.YELLOW=33]="YELLOW",e[e.BLUE=34]="BLUE",e[e.MAGENTA=35]="MAGENTA",e[e.CYAN=36]="CYAN",e[e.WHITE=37]="WHITE",e[e.BRIGHT_BLACK=90]="BRIGHT_BLACK",e[e.BRIGHT_RED=91]="BRIGHT_RED",e[e.BRIGHT_GREEN=92]="BRIGHT_GREEN",e[e.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",e[e.BRIGHT_BLUE=94]="BRIGHT_BLUE",e[e.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",e[e.BRIGHT_CYAN=96]="BRIGHT_CYAN",e[e.BRIGHT_WHITE=97]="BRIGHT_WHITE"}(je||(je={}));const ke={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==a.g&&a.g,document:"undefined"!=typeof document&&document,process:"object"==typeof process&&process},Ue=(globalThis,ke.window||ke.self||ke.global),ze=ke.process||{};function Be(){let e;var t,n;if(Me&&"performance"in Ue)e=null==Ue||null===(t=Ue.performance)||void 0===t||null===(n=t.now)||void 0===n?void 0:n.call(t);else if("hrtime"in ze){var i;const t=null==ze||null===(i=ze.hrtime)||void 0===i?void 0:i.call(ze);e=1e3*t[0]+t[1]/1e6}else e=Date.now();return e}console;const Ge={debug:Me&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},Ve={enabled:!0,level:0};function He(){}const qe={},We={once:!0};class Xe{constructor(){let{id:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:""};c(this,"id",void 0),c(this,"VERSION",Le),c(this,"_startTs",Be()),c(this,"_deltaTs",Be()),c(this,"_storage",void 0),c(this,"userData",{}),c(this,"LOG_THROTTLE_TIMEOUT",0),this.id=e,this.userData={},this._storage=new De("__probe-".concat(this.id,"__"),Ve),this.timeStamp("".concat(this.id," started")),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"];const n=Object.getPrototypeOf(e),i=Object.getOwnPropertyNames(n);for(const n of i)"function"==typeof e[n]&&(t.find((e=>n===e))||(e[n]=e[n].bind(e)))}(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Be()-this._startTs).toPrecision(10))}getDelta(){return Number((Be()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._storage.setConfiguration({enabled:e}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,t){this._storage.setConfiguration({[e]:t})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,t){Fe(e,t)}warn(e){return this._getLogFunction(0,e,Ge.warn,arguments,We)}error(e){return this._getLogFunction(0,e,Ge.error,arguments)}deprecated(e,t){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(t,"` instead"))}removed(e,t){return this.error("`".concat(e,"` has been removed. Use `").concat(t,"` instead"))}probe(e,t){return this._getLogFunction(e,t,Ge.log,arguments,{time:!0,once:!0})}log(e,t){return this._getLogFunction(e,t,Ge.debug,arguments)}info(e,t){return this._getLogFunction(e,t,console.info,arguments)}once(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return this._getLogFunction(e,t,Ge.debug||Ge.info,arguments,We)}table(e,t,n){return t?this._getLogFunction(e,t,console.table||He,n&&[n],{tag:Ze(t)}):He}image(e){let{logLevel:t,priority:n,image:i,message:r="",scale:o=1}=e;return this._shouldLog(t||n)?Me?function(e){let{image:t,message:n="",scale:i=1}=e;if("string"==typeof t){const e=new Image;return e.onload=()=>{const t=Oe(e,n,i);console.log(...t)},e.src=t,He}const r=t.nodeName||"";if("img"===r.toLowerCase())return console.log(...Oe(t,n,i)),He;if("canvas"===r.toLowerCase()){const e=new Image;return e.onload=()=>console.log(...Oe(e,n,i)),e.src=t.toDataURL(),He}return He}({image:i,message:r,scale:o}):function(e){let{image:t,message:n="",scale:i=1}=e;return console.warn("removed"),He}({image:i,message:r,scale:o}):He}time(e,t){return this._getLogFunction(e,t,console.time?console.time:console.info)}timeEnd(e,t){return this._getLogFunction(e,t,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,t){return this._getLogFunction(e,t,console.timeStamp||He)}group(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1};const i=Ke({logLevel:e,message:t,opts:n}),{collapsed:r}=n;return i.method=(r?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.group(e,t,Object.assign({},n,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||He)}withGroup(e,t,n){this.group(e,t)();try{n()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=Ye(e)}_getLogFunction(e,t,n,i,r){if(this._shouldLog(e)){r=Ke({logLevel:e,message:t,args:i,opts:r}),Fe(n=n||r.method),r.total=this.getTotal(),r.delta=this.getDelta(),this._deltaTs=Be();const o=r.tag||r.message;if(r.once){if(qe[o])return He;qe[o]=Be()}return t=function(e,t,n){if("string"==typeof t){const i=n.time?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;const n=Math.max(t-e.length,0);return"".concat(" ".repeat(n)).concat(e)}(function(e){let t;return t=e<10?"".concat(e.toFixed(2),"ms"):e<100?"".concat(e.toFixed(1),"ms"):e<1e3?"".concat(e.toFixed(0),"ms"):"".concat((e/1e3).toFixed(2),"s"),t}(n.total)):"";t=function(e,t,n){return Me||"string"!=typeof e||(t&&(t=Ne(t),e="[".concat(t,"m").concat(e,"[39m")),n&&(t=Ne(n),e="[".concat(n+10,"m").concat(e,"[49m"))),e}(t=n.time?"".concat(e,": ").concat(i,"  ").concat(t):"".concat(e,": ").concat(t),n.color,n.background)}return t}(this.id,r.message,r),n.bind(console,t,...r.args)}return He}}function Ye(e){if(!e)return 0;let t;switch(typeof e){case"number":t=e;break;case"object":t=e.logLevel||e.priority||0;break;default:return 0}return Fe(Number.isFinite(t)&&t>=0),t}function Ke(e){const{logLevel:t,message:n}=e;e.logLevel=Ye(t);const i=e.args?Array.from(e.args):[];for(;i.length&&i.shift()!==n;);switch(typeof t){case"string":case"function":void 0!==n&&i.unshift(n),e.message=t;break;case"object":Object.assign(e,t)}"function"==typeof e.message&&(e.message=e.message());const r=typeof e.message;return Fe("string"===r||"object"===r),Object.assign(e,{args:i},e.opts)}function Ze(e){for(const t in e)for(const n in e[t])return n||"untitled";return"empty"}c(Xe,"VERSION",Le);const Je=new Xe({id:"deck"});let $e={};function Qe(e){$e=e}function et(e,t,n,i){Je.level>0&&$e[e]&&$e[e].call(null,t,n,i)}function tt(e,t=(()=>!0)){return Array.isArray(e)?nt(e,t,[]):t(e)?[e]:[]}function nt(e,t,n){let i=-1;for(;++i<e.length;){const r=e[i];Array.isArray(r)?nt(r,t,n):t(r)&&n.push(r)}return n}function it({target:e,source:t,start:n=0,count:i=1}){const r=t.length,o=i*r;let a=0;for(let i=n;a<r;a++)e[i++]=t[a];for(;a<o;)a<o-a?(e.copyWithin(n+a,n,n+a),a*=2):(e.copyWithin(n+a,n,n+o-a),a=o);return e}function rt(){let e;if("undefined"!=typeof window&&window.performance)e=window.performance.now();else if("undefined"!=typeof process&&process.hrtime){const t=process.hrtime();e=1e3*t[0]+t[1]/1e6}else e=Date.now();return e}class ot{constructor(e,t){c(this,"name",void 0),c(this,"type",void 0),c(this,"sampleSize",1),c(this,"time",void 0),c(this,"count",void 0),c(this,"samples",void 0),c(this,"lastTiming",void 0),c(this,"lastSampleTime",void 0),c(this,"lastSampleCount",void 0),c(this,"_count",0),c(this,"_time",0),c(this,"_samples",0),c(this,"_startTime",0),c(this,"_timerPending",!1),this.name=e,this.type=t,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=rt(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(rt()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class at{constructor(e){c(this,"id",void 0),c(this,"stats",{}),this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count";return this._getOrCreate({name:e,type:t})}get size(){return Object.keys(this.stats).length}reset(){for(const e in this.stats)this.stats[e].reset();return this}forEach(e){for(const t in this.stats)e(this.stats[t])}getTable(){const e={};return this.forEach((t=>{e[t.name]={time:t.time||0,count:t.count||0,average:t.getAverageTime()||0,hz:t.getHz()||0}})),e}_initializeStats(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((e=>this._getOrCreate(e)))}_getOrCreate(e){if(!e||!e.name)return null;const{name:t,type:n}=e;return this.stats[t]||(this.stats[t]=e instanceof ot?e:new ot(t,n)),this.stats[t]}}const st=e=>"function"==typeof e,lt=e=>null!==e&&"object"==typeof e,ct=e=>lt(e)&&e.constructor==={}.constructor,ut=e=>e&&"function"==typeof e[Symbol.iterator],ht=e=>e&&"function"==typeof e[Symbol.asyncIterator],dt=e=>"undefined"!=typeof Response&&e instanceof Response||e&&e.arrayBuffer&&e.text&&e.json,pt=e=>"undefined"!=typeof Blob&&e instanceof Blob,ft=e=>e&&"object"==typeof e&&e.isBuffer,gt=e=>(e=>"undefined"!=typeof ReadableStream&&e instanceof ReadableStream||lt(e)&&st(e.tee)&&st(e.cancel)&&st(e.getReader))(e)||(e=>lt(e)&&st(e.read)&&st(e.pipe)&&(e=>"boolean"==typeof e)(e.readable))(e);function mt(e,t){if(!e)throw new Error(t||"loader assertion failed.")}function yt(e){var t;return!!e&&(Array.isArray(e)&&(e=e[0]),Array.isArray(null===(t=e)||void 0===t?void 0:t.extensions))}function vt(e){var t,n;let i;return mt(e,"null loader"),mt(yt(e),"invalid loader"),Array.isArray(e)&&(i=e[1],e=e[0],e={...e,options:{...e.options,...i}}),(null!==(t=e)&&void 0!==t&&t.parseTextSync||null!==(n=e)&&void 0!==n&&n.parseText)&&(e.text=!0),e.text||(e.binary=!0),e}let bt="";const _t={},wt=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,Pt=/^([-\w.]+\/[-\w.+]+)/;function Et(e){const t=Pt.exec(e);return t?t[1]:e}function xt(e){const t=wt.exec(e);return t?t[1]:""}const At=/\?.*/;function Ct(e){if(dt(e)){const t=St(e.url||"");return{url:t,type:Et(e.headers.get("content-type")||"")||xt(t)}}return pt(e)?{url:St(e.name||""),type:e.type||""}:"string"==typeof e?{url:St(e),type:xt(e)}:{url:"",type:""}}function St(e){return e.replace(At,"")}async function Tt(e){if(dt(e))return e;const t={},n=function(e){return dt(e)?e.headers["content-length"]||-1:pt(e)?e.size:"string"==typeof e?e.length:e instanceof ArrayBuffer||ArrayBuffer.isView(e)?e.byteLength:-1}(e);n>=0&&(t["content-length"]=String(n));const{url:i,type:r}=Ct(e);r&&(t["content-type"]=r);const o=await async function(e){if("string"==typeof e)return"data:,".concat(e.slice(0,5));if(e instanceof Blob){const t=e.slice(0,5);return await new Promise((e=>{const n=new FileReader;n.onload=t=>{var n;return e(null==t||null===(n=t.target)||void 0===n?void 0:n.result)},n.readAsDataURL(t)}))}if(e instanceof ArrayBuffer){const t=function(e){let t="";const n=new Uint8Array(e);for(let e=0;e<n.byteLength;e++)t+=String.fromCharCode(n[e]);return btoa(t)}(e.slice(0,5));return"data:base64,".concat(t)}return null}(e);o&&(t["x-first-bytes"]=o),"string"==typeof e&&(e=(new TextEncoder).encode(e));const a=new Response(e,{headers:t});return Object.defineProperty(a,"url",{value:i}),a}async function Rt(e,t){if("string"==typeof e){e=function(e){for(const t in _t)if(e.startsWith(t)){const n=_t[t];e=e.replace(t,n)}return e.startsWith("http://")||e.startsWith("https://")||(e="".concat(bt).concat(e)),e}(e);let n=t;return null!=t&&t.fetch&&"function"!=typeof(null==t?void 0:t.fetch)&&(n=t.fetch),await fetch(e,n)}return await Tt(e)}const It=new Xe({id:"loaders.gl"});class Mt{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}"undefined"!=typeof self&&self,"undefined"!=typeof window&&window,void 0!==a.g&&a.g,"undefined"!=typeof document&&document;const Lt=Boolean("object"!=typeof process||"[object process]"!==String(process)||process.browser),Dt="undefined"!=typeof process&&process.version&&/v([0-9]*)/.exec(process.version),Ot=(Dt&&parseFloat(Dt[1]),{fetch:null,mimeType:void 0,nothrow:!1,log:new class{constructor(){c(this,"console",void 0),this.console=console}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.console.log.bind(this.console,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.console.info.bind(this.console,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.console.warn.bind(this.console,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.console.error.bind(this.console,...t)}},CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:Lt,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]}),jt={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function Nt(){globalThis.loaders=globalThis.loaders||{};const{loaders:e}=globalThis;return e._state=e._state||{},e._state}const Ft=()=>{const e=Nt();return e.globalOptions=e.globalOptions||{...Ot},e.globalOptions};function kt(e,t,n,i){return n=n||[],function(e,t){zt(e,null,Ot,jt,t);for(const n of t){const i=e&&e[n.id]||{},r=n.options&&n.options[n.id]||{},o=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};zt(i,n.id,r,o,t)}}(e,n=Array.isArray(n)?n:[n]),function(e,t,n){const i={...e.options||{}};return function(e,t){t&&!("baseUri"in e)&&(e.baseUri=t)}(i,n),null===i.log&&(i.log=new Mt),Gt(i,Ft()),Gt(i,t),i}(t,e,i)}function Ut(e,t){const n=Ft(),i=e||n;return"function"==typeof i.fetch?i.fetch:lt(i.fetch)?e=>Rt(e,i):null!=t&&t.fetch?null==t?void 0:t.fetch:Rt}function zt(e,t,n,i,r){const o=t||"Top level",a=t?"".concat(t,"."):"";for(const s in e){const l=!t&&lt(e[s]);if(!(s in n)&&("baseUri"!==s||t)&&("workerUrl"!==s||!t))if(s in i)It.warn("".concat(o," loader option '").concat(a).concat(s,"' no longer supported, use '").concat(i[s],"'"))();else if(!l){const e=Bt(s,r);It.warn("".concat(o," loader option '").concat(a).concat(s,"' not recognized. ").concat(e))()}}}function Bt(e,t){const n=e.toLowerCase();let i="";for(const r of t)for(const t in r.options){if(e===t)return"Did you mean '".concat(r.id,".").concat(t,"'?");const o=t.toLowerCase();(n.startsWith(o)||o.startsWith(n))&&(i=i||"Did you mean '".concat(r.id,".").concat(t,"'?"))}return i}function Gt(e,t){for(const n in t)if(n in t){const i=t[n];ct(i)&&ct(e[n])?e[n]={...e[n],...t[n]}:e[n]=t[n]}}function Vt(e,t){if(!e)throw new Error(t||"loaders.gl assertion failed.")}"undefined"!=typeof self&&self,"undefined"!=typeof window&&window,void 0!==a.g&&a.g,"undefined"!=typeof document&&document;const Ht="object"!=typeof process||"[object process]"!==String(process)||process.browser,qt="undefined"!=typeof window&&void 0!==window.orientation,Wt="undefined"!=typeof process&&process.version&&/v([0-9]*)/.exec(process.version);Wt&&parseFloat(Wt[1]);class Xt{terminate(){}}const Yt=new Map;function Kt(e){const t=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(t)}function Zt(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;const i=n||new Set;if(e)if(Jt(e))i.add(e);else if(Jt(e.buffer))i.add(e.buffer);else if(ArrayBuffer.isView(e));else if(t&&"object"==typeof e)for(const n in e)Zt(e[n],t,i);return void 0===n?Array.from(i):[]}function Jt(e){return!!e&&(e instanceof ArrayBuffer||"undefined"!=typeof MessagePort&&e instanceof MessagePort||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas)}const $t=()=>{};class Qt{static isSupported(){return"undefined"!=typeof Worker&&Ht||void 0!==Xt&&!Ht}constructor(e){c(this,"name",void 0),c(this,"source",void 0),c(this,"url",void 0),c(this,"terminated",!1),c(this,"worker",void 0),c(this,"onMessage",void 0),c(this,"onError",void 0),c(this,"_loadableURL","");const{name:t,source:n,url:i}=e;Vt(n||i),this.name=t,this.source=n,this.url=i,this.onMessage=$t,this.onError=e=>console.log(e),this.worker=Ht?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=$t,this.onError=$t,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(e,t){t=t||Zt(e),this.worker.postMessage(e,t)}_getErrorFromErrorEvent(e){let t="Failed to load ";return t+="worker ".concat(this.name," from ").concat(this.url,". "),e.message&&(t+="".concat(e.message," in ")),e.lineno&&(t+=":".concat(e.lineno,":").concat(e.colno)),new Error(t)}_createBrowserWorker(){this._loadableURL=function(e){Vt(e.source&&!e.url||!e.source&&e.url);let t=Yt.get(e.source||e.url);return t||(e.url&&(t=(n=e.url).startsWith("http")?Kt("try {\n  importScripts('".concat(n,"');\n} catch (error) {\n  console.error(error);\n  throw error;\n}")):n,Yt.set(e.url,t)),e.source&&(t=Kt(e.source),Yt.set(e.source,t))),Vt(t),t;var n}({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=e=>{e.data?this.onMessage(e.data):this.onError(new Error("No data received"))},e.onerror=e=>{this.onError(this._getErrorFromErrorEvent(e)),this.terminated=!0},e.onmessageerror=e=>console.error(e),e}_createNodeWorker(){let e;if(this.url){const t=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);e=new Xt(t,{eval:!1})}else{if(!this.source)throw new Error("no worker");e=new Xt(this.source,{eval:!0})}return e.on("message",(e=>{this.onMessage(e)})),e.on("error",(e=>{this.onError(e)})),e.on("exit",(e=>{})),e}}class en{constructor(e,t){c(this,"name",void 0),c(this,"workerThread",void 0),c(this,"isRunning",!0),c(this,"result",void 0),c(this,"_resolve",(()=>{})),c(this,"_reject",(()=>{})),this.name=e,this.workerThread=t,this.result=new Promise(((e,t)=>{this._resolve=e,this._reject=t}))}postMessage(e,t){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:t})}done(e){Vt(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){Vt(this.isRunning),this.isRunning=!1,this._reject(e)}}class tn{static isSupported(){return Qt.isSupported()}constructor(e){c(this,"name","unnamed"),c(this,"source",void 0),c(this,"url",void 0),c(this,"maxConcurrency",1),c(this,"maxMobileConcurrency",1),c(this,"onDebug",(()=>{})),c(this,"reuseWorkers",!0),c(this,"props",{}),c(this,"jobQueue",[]),c(this,"idleQueue",[]),c(this,"count",0),c(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach((e=>e.destroy())),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},void 0!==e.name&&(this.name=e.name),void 0!==e.maxConcurrency&&(this.maxConcurrency=e.maxConcurrency),void 0!==e.maxMobileConcurrency&&(this.maxMobileConcurrency=e.maxMobileConcurrency),void 0!==e.reuseWorkers&&(this.reuseWorkers=e.reuseWorkers),void 0!==e.onDebug&&(this.onDebug=e.onDebug)}async startJob(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e,t,n)=>e.done(n),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(e,t)=>e.error(t);const i=new Promise((i=>(this.jobQueue.push({name:e,onMessage:t,onError:n,onStart:i}),this)));return this._startQueuedJob(),await i}async _startQueuedJob(){if(!this.jobQueue.length)return;const e=this._getAvailableWorker();if(!e)return;const t=this.jobQueue.shift();if(t){this.onDebug({message:"Starting job",name:t.name,workerThread:e,backlog:this.jobQueue.length});const n=new en(t.name,e);e.onMessage=e=>t.onMessage(n,e.type,e.payload),e.onError=e=>t.onError(n,e),t.onStart(n);try{await n.result}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new Qt({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return qt?this.maxMobileConcurrency:this.maxConcurrency}}const nn={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class rn{static isSupported(){return Qt.isSupported()}static getWorkerFarm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return rn._workerFarm=rn._workerFarm||new rn({}),rn._workerFarm.setProps(e),rn._workerFarm}constructor(e){c(this,"props",void 0),c(this,"workerPools",new Map),this.props={...nn},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const e of this.workerPools.values())e.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:t,source:n,url:i}=e;let r=this.workerPools.get(t);return r||(r=new tn({name:t,source:n,url:i}),r.setProps(this._getWorkerPoolProps()),this.workerPools.set(t,r)),r}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}c(rn,"_workerFarm",void 0);const on="latest";async function an(e,t,n,i,r){const o=e.id,a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=t[e.id]||{},i="".concat(e.id,"-worker.js");let r=n.workerUrl;if(r||"compression"!==e.id||(r=t.workerUrl),"test"===t._workerType&&(r="modules/".concat(e.module,"/dist/").concat(i)),!r){let t=e.version;"latest"===t&&(t=on);const n=t?"@".concat(t):"";r="https://unpkg.com/@loaders.gl/".concat(e.module).concat(n,"/dist/").concat(i)}return Vt(r),r}(e,n),s=rn.getWorkerFarm(n).getWorkerPool({name:o,url:a});n=JSON.parse(JSON.stringify(n)),i=JSON.parse(JSON.stringify(i||{}));const l=await s.startJob("process-on-worker",sn.bind(null,r));l.postMessage("process",{input:t,options:n,context:i});const c=await l.result;return await c.result}async function sn(e,t,n,i){switch(n){case"done":t.done(i);break;case"error":t.error(new Error(i.error));break;case"process":const{id:r,input:o,options:a}=i;try{const n=await e(o,a);t.postMessage("done",{id:r,result:n})}catch(e){const n=e instanceof Error?e.message:"unknown error";t.postMessage("error",{id:r,error:n})}break;default:console.warn("parse-with-worker unknown message ".concat(n))}}const ln=262144,cn=262144,un=1048576;var hn=a(9521);function dn(e){if((t=e)&&"object"==typeof t&&t.isBuffer)return hn.toArrayBuffer(e);var t;if(e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return 0===e.byteOffset&&e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);if("string"==typeof e){const t=e;return(new TextEncoder).encode(t).buffer}if(e&&"object"==typeof e&&e._toArrayBuffer)return e._toArrayBuffer();throw new Error("toArrayBuffer")}function pn(e,t){return Lt?async function*(e,t){const n=e.getReader();let i;try{for(;;){const e=i||n.read();null!=t&&t._streamReadAhead&&(i=n.read());const{done:r,value:o}=await e;if(r)return;yield dn(o)}}catch(e){n.releaseLock()}}(e,t):async function*(e,t){for await(const t of e)yield dn(t)}(e)}const fn="Cannot convert supplied data type";async function gn(e,t,n){const i=e instanceof ArrayBuffer||ArrayBuffer.isView(e);if("string"==typeof e||i)return function(e,t,n){if(t.text&&"string"==typeof e)return e;if(ft(e)&&(e=e.buffer),e instanceof ArrayBuffer){const n=e;return t.text&&!t.binary?new TextDecoder("utf8").decode(n):n}if(ArrayBuffer.isView(e)){if(t.text&&!t.binary)return new TextDecoder("utf8").decode(e);let n=e.buffer;const i=e.byteLength||e.length;return 0===e.byteOffset&&i===n.byteLength||(n=n.slice(e.byteOffset,e.byteOffset+i)),n}throw new Error(fn)}(e,t);if(pt(e)&&(e=await Tt(e)),dt(e)){const n=e;return await async function(e){if(!e.ok){const t=await async function(e){let t="Failed to fetch resource ".concat(e.url," (").concat(e.status,"): ");try{const n=e.headers.get("Content-Type");let i=e.statusText;n.includes("application/json")&&(i+=" ".concat(await e.text())),t+=i,t=t.length>60?"".concat(t.slice(0,60),"..."):t}catch(e){}return t}(e);throw new Error(t)}}(n),t.binary?await n.arrayBuffer():await n.text()}if(gt(e)&&(e=function(e,t){if("string"==typeof e)return function*(e,t){const n=(null==t?void 0:t.chunkSize)||ln;let i=0;const r=new TextEncoder;for(;i<e.length;){const t=Math.min(e.length-i,n),o=e.slice(i,i+t);i+=t,yield r.encode(o)}}(e,t);if(e instanceof ArrayBuffer)return function*(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{chunkSize:n=cn}=t;let i=0;for(;i<e.byteLength;){const t=Math.min(e.byteLength-i,n),r=new ArrayBuffer(t),o=new Uint8Array(e,i,t);new Uint8Array(r).set(o),i+=t,yield r}}(e,t);if(pt(e))return async function*(e,t){const n=(null==t?void 0:t.chunkSize)||un;let i=0;for(;i<e.size;){const t=i+n,r=await e.slice(i,t).arrayBuffer();i=t,yield r}}(e,t);if(gt(e))return pn(e,t);if(dt(e))return pn(e.body,t);throw new Error("makeIterator")}(e,n)),ut(e)||ht(e))return async function(e){const t=[];for await(const n of e)t.push(n);return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=t.map((e=>e instanceof ArrayBuffer?new Uint8Array(e):e)),r=i.reduce(((e,t)=>e+t.byteLength),0),o=new Uint8Array(r);let a=0;for(const e of i)o.set(e,a),a+=e.byteLength;return o.buffer}(...t)}(e);throw new Error(fn)}const mn=new Xe({id:"loaders.gl"}),yn=()=>{const e=Nt();return e.loaderRegistry=e.loaderRegistry||[],e.loaderRegistry},vn=/\.([^.]+)$/;function bn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(!_n(e))return null;if(t&&!Array.isArray(t))return vt(t);let r=[];t&&(r=r.concat(t)),null!=n&&n.ignoreRegisteredLoaders||r.push(...yn()),function(e){for(const t of e)vt(t)}(r);const o=function(e,t,n,i){const{url:r,type:o}=Ct(e),a=r||(null==i?void 0:i.url);let s=null,l="";var c;return null!=n&&n.mimeType&&(s=Pn(t,null==n?void 0:n.mimeType),l="match forced by supplied MIME type ".concat(null==n?void 0:n.mimeType)),s=s||function(e,t){const n=t&&vn.exec(t),i=n&&n[1];return i?function(e,t){t=t.toLowerCase();for(const n of e)for(const e of n.extensions)if(e.toLowerCase()===t)return n;return null}(e,i):null}(t,a),l=l||(s?"matched url ".concat(a):""),s=s||Pn(t,o),l=l||(s?"matched MIME type ".concat(o):""),s=s||function(e,t){if(!t)return null;for(const n of e)if("string"==typeof t){if(En(t,n))return n}else if(ArrayBuffer.isView(t)){if(xn(t.buffer,t.byteOffset,n))return n}else if(t instanceof ArrayBuffer&&xn(t,0,n))return n;return null}(t,e),l=l||(s?"matched initial data ".concat(An(e)):""),s=s||Pn(t,null==n?void 0:n.fallbackMimeType),l=l||(s?"matched fallback MIME type ".concat(o):""),l&&mn.log(1,"selectLoader selected ".concat(null===(c=s)||void 0===c?void 0:c.name,": ").concat(l,".")),s}(e,r,n,i);if(!(o||null!=n&&n.nothrow))throw new Error(wn(e));return o}function _n(e){return!(e instanceof Response&&204===e.status)}function wn(e){const{url:t,type:n}=Ct(e);let i="No valid loader found (";i+=t?"".concat(function(e){const t=e&&e.lastIndexOf("/");return t>=0?e.substr(t+1):""}(t),", "):"no url provided, ",i+="MIME type: ".concat(n?'"'.concat(n,'"'):"not provided",", ");const r=e?An(e):"";return i+=r?' first bytes: "'.concat(r,'"'):"first bytes: not available",i+=")",i}function Pn(e,t){for(const n of e){if(n.mimeTypes&&n.mimeTypes.includes(t))return n;if(t==="application/x.".concat(n.id))return n}return null}function En(e,t){return t.testText?t.testText(e):(Array.isArray(t.tests)?t.tests:[t.tests]).some((t=>e.startsWith(t)))}function xn(e,t,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some((i=>function(e,t,n,i){if(i instanceof ArrayBuffer)return function(e,t,n){if(n=n||e.byteLength,e.byteLength<n||t.byteLength<n)return!1;const i=new Uint8Array(e),r=new Uint8Array(t);for(let e=0;e<i.length;++e)if(i[e]!==r[e])return!1;return!0}(i,e,i.byteLength);switch(typeof i){case"function":return i(e,n);case"string":return i===Cn(e,t,i.length);default:return!1}}(e,t,n,i)))}function An(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return"string"==typeof e?e.slice(0,t):ArrayBuffer.isView(e)?Cn(e.buffer,e.byteOffset,t):e instanceof ArrayBuffer?Cn(e,0,t):""}function Cn(e,t,n){if(e.byteLength<t+n)return"";const i=new DataView(e);let r="";for(let e=0;e<n;e++)r+=String.fromCharCode(i.getUint8(t+e));return r}async function Sn(e,t,n,i){Vt(!i||"object"==typeof i),!t||Array.isArray(t)||yt(t)||(i=void 0,n=t,t=void 0),e=await e,n=n||{};const{url:r}=Ct(e),o=function(e,t){if(!t&&e&&!Array.isArray(e))return e;let n;if(e&&(n=Array.isArray(e)?e:[e]),t&&t.loaders){const e=Array.isArray(t.loaders)?t.loaders:[t.loaders];n=n?[...n,...e]:e}return n&&n.length?n:null}(t,i),a=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(!_n(e))return null;let r=bn(e,t,{...n,nothrow:!0},i);if(r)return r;if(pt(e)&&(r=bn(e=await e.slice(0,10).arrayBuffer(),t,n,i)),!(r||null!=n&&n.nothrow))throw new Error(wn(e));return r}(e,o,n);return a?(i=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(n)return n;const i={fetch:Ut(t,e),...e};return Array.isArray(i.loaders)||(i.loaders=null),i}({url:r,parse:Sn,loaders:o},n=kt(n,a,o,r),i),await async function(e,t,n,i){if(function(e){Vt(e,"no worker provided");e.version}(e),dt(t)){const e=t,{ok:n,redirected:r,status:o,statusText:a,type:s,url:l}=e,c=Object.fromEntries(e.headers.entries());i.response={headers:c,ok:n,redirected:r,status:o,statusText:a,type:s,url:l}}if(t=await gn(t,e,n),e.parseTextSync&&"string"==typeof t)return n.dataType="text",e.parseTextSync(t,n,i,e);if(function(e,t){return!!rn.isSupported()&&!!(Ht||null!=t&&t._nodeWorkers)&&e.worker&&(null==t?void 0:t.worker)}(e,n))return await an(e,t,n,i,Sn);if(e.parseText&&"string"==typeof t)return await e.parseText(t,n,i,e);if(e.parse)return await e.parse(t,n,i,e);throw Vt(!e.parseSync),new Error("".concat(e.id," loader - no parser found and worker is disabled"))}(a,e,n,i)):null}async function Tn(e,t,n,i){Array.isArray(t)||yt(t)||(n=t,t=void 0);const r=Ut(n);let o=e;return"string"==typeof e&&(o=await r(e)),pt(e)&&(o=await r(e)),await Sn(o,t,n)}class Rn{constructor(e,t,n){c(this,"id",void 0),c(this,"context",void 0),c(this,"isLoaded",void 0),c(this,"persistent",void 0),c(this,"_loadCount",0),c(this,"_subscribers",new Set),c(this,"_data",void 0),c(this,"_loader",void 0),c(this,"_error",void 0),c(this,"_content",void 0),this.id=e,this.context=n,this.setData(t)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then((()=>this.getData()))}setData(e,t){if(e===this._data&&!t)return;this._data=e;const n=++this._loadCount;let i=e;"string"==typeof e&&(i=Tn(e)),i instanceof Promise?(this.isLoaded=!1,this._loader=i.then((e=>{this._loadCount===n&&(this.isLoaded=!0,this._error=void 0,this._content=e)})).catch((e=>{this._loadCount===n&&(this.isLoaded=!0,this._error=e||!0)}))):(this.isLoaded=!0,this._error=void 0,this._content=e);for(const e of this._subscribers)e.onChange(this.getData())}}class In{constructor({gl:e,protocol:t}){c(this,"protocol",void 0),c(this,"_context",void 0),c(this,"_resources",void 0),c(this,"_consumers",void 0),c(this,"_pruneRequest",void 0),this.protocol=t||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return!!e.startsWith(this.protocol)||e in this._resources}add({resourceId:e,data:t,forceUpdate:n=!1,persistent:i=!0}){let r=this._resources[e];r?r.setData(t,n):(r=new Rn(e,t,this._context),this._resources[e]=r),r.persistent=i}remove(e){const t=this._resources[e];t&&(t.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const t=this._consumers[e];if(t){for(const e in t){const n=t[e],i=this._resources[n.resourceId];i&&i.unsubscribe(n)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:t,consumerId:n,requestId:i="default"}){const{_resources:r,protocol:o}=this;e.startsWith(o)&&(r[e=e.replace(o,"")]||this.add({resourceId:e,data:null,persistent:!1}));const a=r[e];if(this._track(n,i,a,t),a)return a.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout((()=>this._prune()),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,t,n,i){const r=this._consumers,o=r[e]=r[e]||{},a=o[t]||{},s=a.resourceId&&this._resources[a.resourceId];s&&(s.unsubscribe(a),this.prune()),n&&(o[t]=a,a.onChange=i,a.resourceId=n.id,n.subscribe(a))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const t=this._resources[e];t.persistent||t.inUse()||(t.delete(),delete this._resources[e])}}}const Mn=new class{constructor(e={}){c(this,"_pool",[]),c(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,t,{size:n=1,type:i,padding:r=0,copy:o=!1,initialize:a=!1,maxCount:s}){const l=i||e&&e.constructor||Float32Array,c=t*n+r;if(ArrayBuffer.isView(e)){if(c<=e.length)return e;if(c*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new l(e.buffer,0,c)}let u=1/0;s&&(u=s*n+r);const h=this._allocate(l,c,a,u);return e&&o?h.set(e):a||h.fill(0,0,4),this._release(e),h}release(e){this._release(e)}_allocate(e,t,n,i){let r=Math.max(Math.ceil(t*this.opts.overAlloc),1);r>i&&(r=i);const o=this._pool,a=e.BYTES_PER_ELEMENT*r,s=o.findIndex((e=>e.byteLength>=a));if(s>=0){const t=new e(o.splice(s,1)[0],0,r);return n&&t.fill(0),t}return new e(r)}_release(e){if(!ArrayBuffer.isView(e))return;const t=this._pool,{buffer:n}=e,{byteLength:i}=n,r=t.findIndex((e=>e.byteLength>=i));r<0?t.push(n):(r>0||t.length<this.opts.poolSize)&&t.splice(r,0,n),t.length>this.opts.poolSize&&t.shift()}};class Ln extends(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Array)){clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){for(let n=0;n<this.ELEMENTS;++n)this[n]=e[n+t];return this.check()}toArray(e=[],t=0){for(let n=0;n<this.ELEMENTS;++n)e[t+n]=this[n];return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:d(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(u)}formatString(e){let t="";for(let n=0;n<this.ELEMENTS;++n)t+=(n>0?", ":"")+h(this[n],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(t,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(!g(this[t],e[t]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(this[t]!==e[t])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,t,n){if(void 0===n)return this.lerp(this,e,t);for(let i=0;i<this.ELEMENTS;++i){const r=e[i];this[i]=r+n*(t[i]-r)}return this.check()}min(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.min(e[t],this[t]);return this.check()}max(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.max(e[t],this[t]);return this.check()}clamp(e,t){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],e[n]),t[n]);return this.check()}add(...e){for(const t of e)for(let e=0;e<this.ELEMENTS;++e)this[e]+=t[e];return this.check()}subtract(...e){for(const t of e)for(let e=0;e<this.ELEMENTS;++e)this[e]-=t[e];return this.check()}scale(e){if("number"==typeof e)for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;else for(let t=0;t<this.ELEMENTS&&t<e.length;++t)this[t]*=e[t];return this.check()}multiplyByScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}check(){if(u.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let t=0;t<this.ELEMENTS;++t)e=e&&Number.isFinite(this[t]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=e;return this.check()}addScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,t){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],e),t);return this.check()}get elements(){return this}}function Dn(e){if(!Number.isFinite(e))throw new Error("Invalid number ".concat(e));return e}function On(e,t,n=""){if(u.debug&&!function(e,t){if(e.length!==t)return!1;for(let t=0;t<e.length;++t)if(!Number.isFinite(e[t]))return!1;return!0}(e,t))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return e}function jn(e,t){if(!e)throw new Error("math.gl assertion ".concat(t))}class Nn extends Ln{get x(){return this[0]}set x(e){this[0]=Dn(e)}get y(){return this[1]}set y(e){this[1]=Dn(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let t=0;t<this.ELEMENTS;++t)e+=this[t]*this[t];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let t=0;for(let n=0;n<this.ELEMENTS;++n){const i=this[n]-e[n];t+=i*i}return Dn(t)}dot(e){let t=0;for(let n=0;n<this.ELEMENTS;++n)t+=this[n]*e[n];return Dn(t)}normalize(){const e=this.magnitude();if(0!==e)for(let t=0;t<this.ELEMENTS;++t)this[t]/=e;return this.check()}multiply(...e){for(const t of e)for(let e=0;e<this.ELEMENTS;++e)this[e]*=t[e];return this.check()}divide(...e){for(const t of e)for(let e=0;e<this.ELEMENTS;++e)this[e]/=t[e];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return jn(e>=0&&e<this.ELEMENTS,"index is out of range"),Dn(this[e])}setComponent(e,t){return jn(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=t,this.check()}addVectors(e,t){return this.copy(e).add(t)}subVectors(e,t){return this.copy(e).subtract(t)}multiplyVectors(e,t){return this.copy(e).multiply(t)}addScaledVector(e,t){return this.add(new this.constructor(e).multiplyScalar(t))}}function Fn(e,t,n){const i=t[0],r=t[1],o=t[2],a=n[3]*i+n[7]*r+n[11]*o||1;return e[0]=(n[0]*i+n[4]*r+n[8]*o)/a,e[1]=(n[1]*i+n[5]*r+n[9]*o)/a,e[2]=(n[2]*i+n[6]*r+n[10]*o)/a,e}function kn(e,t,n){const i=t[0],r=t[1],o=t[2];return e[0]=n[0]*i+n[3]*r+n[6]*o,e[1]=n[1]*i+n[4]*r+n[7]*o,e[2]=n[2]*i+n[5]*r+n[8]*o,e[3]=t[3],e}const Un=[0,0,0];let zn;class Bn extends Nn{static get ZERO(){return zn||(zn=new Bn(0,0,0),Object.freeze(zn)),zn}constructor(e=0,t=0,n=0){super(-0,-0,-0),1===arguments.length&&d(e)?this.copy(e):(u.debug&&(Dn(e),Dn(t),Dn(n)),this[0]=e,this[1]=t,this[2]=n)}set(e,t,n){return this[0]=e,this[1]=t,this[2]=n,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return u.debug&&(Dn(e.x),Dn(e.y),Dn(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=Dn(e)}angle(e){return n=e,i=(t=this)[0],r=t[1],o=t[2],a=n[0],s=n[1],l=n[2],u=(c=Math.sqrt(i*i+r*r+o*o)*Math.sqrt(a*a+s*s+l*l))&&k(t,n)/c,Math.acos(Math.min(Math.max(u,-1),1));var t,n,i,r,o,a,s,l,c,u}cross(e){return U(this,this,e),this.check()}rotateX({radians:e,origin:t=Un}){return function(e,t,n,i){var r=[],o=[];r[0]=t[0]-n[0],r[1]=t[1]-n[1],r[2]=t[2]-n[2],o[0]=r[0],o[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),o[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2]}(this,this,t,e),this.check()}rotateY({radians:e,origin:t=Un}){return function(e,t,n,i){var r=[],o=[];r[0]=t[0]-n[0],r[1]=t[1]-n[1],r[2]=t[2]-n[2],o[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),o[1]=r[1],o[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2]}(this,this,t,e),this.check()}rotateZ({radians:e,origin:t=Un}){return function(e,t,n,i){var r=[],o=[];r[0]=t[0]-n[0],r[1]=t[1]-n[1],r[2]=t[2]-n[2],o[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),o[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),o[2]=r[2],e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2]}(this,this,t,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return z(this,this,e),this.check()}transformAsVector(e){return Fn(this,this,e),this.check()}transformByMatrix3(e){return B(this,this,e),this.check()}transformByMatrix2(e){return function(e,t,n){const i=t[0],r=t[1];e[0]=n[0]*i+n[2]*r,e[1]=n[1]*i+n[3]*r,e[2]=t[2]}(this,this,e),this.check()}transformByQuaternion(e){return G(this,this,e),this.check()}}const Gn=new Bn;function Vn(e,t,n,i){Gn.set(e,t,n);const r=Gn.len();return{distance:i/r,normal:new Bn(-e/r,-t/r,-n/r)}}let Hn;function qn(e,t){const{size:n=1,startIndex:i=0}=t,r=void 0!==t.endIndex?t.endIndex:e.length,o=(r-i)/n;Hn=Mn.allocate(Hn,o,{type:Float32Array,size:2*n});let a=i,s=0;for(;a<r;){for(let t=0;t<n;t++){const i=e[a++];Hn[s+t]=i,Hn[s+t+n]=(l=i)-Math.fround(l)}s+=2*n}var l;return Hn.subarray(0,o*n*2)}function Wn(e){let t=null,n=!1;for(const i of e)i&&(t?(n||(t=[[t[0][0],t[0][1]],[t[1][0],t[1][1]]],n=!0),t[0][0]=Math.min(t[0][0],i[0][0]),t[0][1]=Math.min(t[0][1],i[0][1]),t[1][0]=Math.max(t[1][0],i[1][0]),t[1][1]=Math.max(t[1][1],i[1][1])):t=i);return t}class Xn extends Ln{toString(){let e="[";if(u.printRowMajor){e+="row-major:";for(let t=0;t<this.RANK;++t)for(let n=0;n<this.RANK;++n)e+=" ".concat(this[n*this.RANK+t])}else{e+="column-major:";for(let t=0;t<this.ELEMENTS;++t)e+=" ".concat(this[t])}return e+="]",e}getElementIndex(e,t){return t*this.RANK+e}getElement(e,t){return this[t*this.RANK+e]}setElement(e,t,n){return this[t*this.RANK+e]=Dn(n),this}getColumn(e,t=new Array(this.RANK).fill(-0)){const n=e*this.RANK;for(let e=0;e<this.RANK;++e)t[e]=this[n+e];return t}setColumn(e,t){const n=e*this.RANK;for(let e=0;e<this.RANK;++e)this[n+e]=t[e];return this}}var Yn;!function(e){e[e.COL0ROW0=0]="COL0ROW0",e[e.COL0ROW1=1]="COL0ROW1",e[e.COL0ROW2=2]="COL0ROW2",e[e.COL0ROW3=3]="COL0ROW3",e[e.COL1ROW0=4]="COL1ROW0",e[e.COL1ROW1=5]="COL1ROW1",e[e.COL1ROW2=6]="COL1ROW2",e[e.COL1ROW3=7]="COL1ROW3",e[e.COL2ROW0=8]="COL2ROW0",e[e.COL2ROW1=9]="COL2ROW1",e[e.COL2ROW2=10]="COL2ROW2",e[e.COL2ROW3=11]="COL2ROW3",e[e.COL3ROW0=12]="COL3ROW0",e[e.COL3ROW1=13]="COL3ROW1",e[e.COL3ROW2=14]="COL3ROW2",e[e.COL3ROW3=15]="COL3ROW3"}(Yn||(Yn={}));const Kn=45*Math.PI/180,Zn=1,Jn=.1,$n=500,Qn=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class ei extends Xn{static get IDENTITY(){return ni||(ni=new ei,Object.freeze(ni)),ni}static get ZERO(){return ti||(ti=new ei([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(ti)),ti}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return Yn}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,t,n,i,r,o,a,s,l,c,u,h,d,p,f,g){return this[0]=e,this[1]=t,this[2]=n,this[3]=i,this[4]=r,this[5]=o,this[6]=a,this[7]=s,this[8]=l,this[9]=c,this[10]=u,this[11]=h,this[12]=d,this[13]=p,this[14]=f,this[15]=g,this.check()}setRowMajor(e,t,n,i,r,o,a,s,l,c,u,h,d,p,f,g){return this[0]=e,this[1]=r,this[2]=l,this[3]=d,this[4]=t,this[5]=o,this[6]=c,this[7]=p,this[8]=n,this[9]=a,this[10]=u,this[11]=f,this[12]=i,this[13]=s,this[14]=h,this[15]=g,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(Qn)}fromObject(e){return this.check()}fromQuaternion(e){return function(e,t){var n=t[0],i=t[1],r=t[2],o=t[3],a=n+n,s=i+i,l=r+r,c=n*a,u=i*a,h=i*s,d=r*a,p=r*s,f=r*l,g=o*a,m=o*s,y=o*l;e[0]=1-h-f,e[1]=u+y,e[2]=d-m,e[3]=0,e[4]=u-y,e[5]=1-c-f,e[6]=p+g,e[7]=0,e[8]=d+m,e[9]=p-g,e[10]=1-c-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1}(this,e),this.check()}frustum(e){const{left:t,right:n,bottom:i,top:r,near:o=Jn,far:a=$n}=e;return a===1/0?function(e,t,n,i,r,o){const a=2*o/(n-t),s=2*o/(r-i),l=(n+t)/(n-t),c=(r+i)/(r-i),u=-2*o;e[0]=a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=l,e[9]=c,e[10]=-1,e[11]=-1,e[12]=0,e[13]=0,e[14]=u,e[15]=0}(this,t,n,i,r,o):function(e,t,n,i,r,o,a){var s=1/(n-t),l=1/(r-i),c=1/(o-a);e[0]=2*o*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*l,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(r+i)*l,e[10]=(a+o)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*o*2*c,e[15]=0}(this,t,n,i,r,o,a),this.check()}lookAt(e){const{eye:t,center:n=[0,0,0],up:i=[0,1,0]}=e;return function(e,t,n,i){var r,o,a,s,l,c,u,h,d,p,f=t[0],g=t[1],m=t[2],y=i[0],v=i[1],_=i[2],w=n[0],P=n[1],E=n[2];Math.abs(f-w)<b&&Math.abs(g-P)<b&&Math.abs(m-E)<b?function(e){e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1}(e):(u=f-w,h=g-P,d=m-E,r=v*(d*=p=1/Math.hypot(u,h,d))-_*(h*=p),o=_*(u*=p)-y*d,a=y*h-v*u,(p=Math.hypot(r,o,a))?(r*=p=1/p,o*=p,a*=p):(r=0,o=0,a=0),s=h*a-d*o,l=d*r-u*a,c=u*o-h*r,(p=Math.hypot(s,l,c))?(s*=p=1/p,l*=p,c*=p):(s=0,l=0,c=0),e[0]=r,e[1]=s,e[2]=u,e[3]=0,e[4]=o,e[5]=l,e[6]=h,e[7]=0,e[8]=a,e[9]=c,e[10]=d,e[11]=0,e[12]=-(r*f+o*g+a*m),e[13]=-(s*f+l*g+c*m),e[14]=-(u*f+h*g+d*m),e[15]=1)}(this,t,n,i),this.check()}ortho(e){const{left:t,right:n,bottom:i,top:r,near:o=Jn,far:a=$n}=e;return function(e,t,n,i,r,o,a){var s=1/(t-n),l=1/(i-r),c=1/(o-a);e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*s,e[13]=(r+i)*l,e[14]=(a+o)*c,e[15]=1}(this,t,n,i,r,o,a),this.check()}orthographic(e){const{fovy:t=Kn,aspect:n=Zn,focalDistance:i=1,near:r=Jn,far:o=$n}=e;ii(t);const a=t/2,s=i*Math.tan(a),l=s*n;return this.ortho({left:-l,right:l,bottom:-s,top:s,near:r,far:o})}perspective(e){const{fovy:t=45*Math.PI/180,aspect:n=1,near:i=.1,far:r=500}=e;return ii(t),function(e,t,n,i,r){var o,a=1/Math.tan(t/2);e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=r&&r!==1/0?(o=1/(i-r),e[10]=(r+i)*o,e[14]=2*r*i*o):(e[10]=-1,e[14]=-2*i)}(this,t,n,i,r),this.check()}determinant(){return t=(e=this)[0],n=e[1],i=e[2],r=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11],p=e[12],f=e[13],g=e[14],(t*a-n*o)*(h*(m=e[15])-d*g)-(t*s-i*o)*(u*m-d*f)+(t*l-r*o)*(u*g-h*f)+(n*s-i*a)*(c*m-d*p)-(n*l-r*a)*(c*g-h*p)+(i*l-r*s)*(c*f-u*p);var e,t,n,i,r,o,a,s,l,c,u,h,d,p,f,g,m}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,t){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],t=t||[-0,-0,-0];const n=this.getScale(t),i=1/n[0],r=1/n[1],o=1/n[2];return e[0]=this[0]*i,e[1]=this[1]*r,e[2]=this[2]*o,e[3]=0,e[4]=this[4]*i,e[5]=this[5]*r,e[6]=this[6]*o,e[7]=0,e[8]=this[8]*i,e[9]=this[9]*r,e[10]=this[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,t){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0],t=t||[-0,-0,-0];const n=this.getScale(t),i=1/n[0],r=1/n[1],o=1/n[2];return e[0]=this[0]*i,e[1]=this[1]*r,e[2]=this[2]*o,e[3]=this[4]*i,e[4]=this[5]*r,e[5]=this[6]*o,e[6]=this[8]*i,e[7]=this[9]*r,e[8]=this[10]*o,e}transpose(){return function(e,t){if(e===t){var n=t[1],i=t[2],r=t[3],o=t[6],a=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=i,e[9]=o,e[11]=t[14],e[12]=r,e[13]=a,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15]}(this,this),this.check()}invert(){return S(this,this),this.check()}multiplyLeft(e){return T(this,e,this),this.check()}multiplyRight(e){return T(this,this,e),this.check()}rotateX(e){return M(this,this,e),this.check()}rotateY(e){return function(e,t,n){var i=Math.sin(n),r=Math.cos(n),o=t[0],a=t[1],s=t[2],l=t[3],c=t[8],u=t[9],h=t[10],d=t[11];t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*r-c*i,e[1]=a*r-u*i,e[2]=s*r-h*i,e[3]=l*r-d*i,e[8]=o*i+c*r,e[9]=a*i+u*r,e[10]=s*i+h*r,e[11]=l*i+d*r}(this,this,e),this.check()}rotateZ(e){return L(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,t){return function(e,t,n,i){var r,o,a,s,l,c,u,h,d,p,f,g,m,y,v,_,w,P,E,x,A,C,S,T,R=i[0],I=i[1],M=i[2],L=Math.hypot(R,I,M);L<b||(R*=L=1/L,I*=L,M*=L,r=Math.sin(n),a=1-(o=Math.cos(n)),s=t[0],l=t[1],c=t[2],u=t[3],h=t[4],d=t[5],p=t[6],f=t[7],g=t[8],m=t[9],y=t[10],v=t[11],_=R*R*a+o,w=I*R*a+M*r,P=M*R*a-I*r,E=R*I*a-M*r,x=I*I*a+o,A=M*I*a+R*r,C=R*M*a+I*r,S=I*M*a-R*r,T=M*M*a+o,e[0]=s*_+h*w+g*P,e[1]=l*_+d*w+m*P,e[2]=c*_+p*w+y*P,e[3]=u*_+f*w+v*P,e[4]=s*E+h*x+g*A,e[5]=l*E+d*x+m*A,e[6]=c*E+p*x+y*A,e[7]=u*E+f*x+v*A,e[8]=s*C+h*S+g*T,e[9]=l*C+d*S+m*T,e[10]=c*C+p*S+y*T,e[11]=u*C+f*S+v*T,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]))}(this,this,e,t),this.check()}scale(e){return I(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return R(this,this,e),this.check()}transform(e,t){return 4===e.length?(On(t=P(t||[-0,-0,-0,-0],e,this),4),t):this.transformAsPoint(e,t)}transformAsPoint(e,t){const{length:n}=e;let i;switch(n){case 2:i=function(e,t,n){var i=t[0],r=t[1];return e[0]=n[0]*i+n[4]*r+n[12],e[1]=n[1]*i+n[5]*r+n[13],e}(t||[-0,-0],e,this);break;case 3:i=z(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return On(i,e.length),i}transformAsVector(e,t){let n;switch(e.length){case 2:n=function(e,t,n){const i=t[0],r=t[1],o=n[3]*i+n[7]*r||1;return e[0]=(n[0]*i+n[4]*r)/o,e[1]=(n[1]*i+n[5]*r)/o,e}(t||[-0,-0],e,this);break;case 3:n=Fn(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return On(n,e.length),n}transformPoint(e,t){return this.transformAsPoint(e,t)}transformVector(e,t){return this.transformAsPoint(e,t)}transformDirection(e,t){return this.transformAsVector(e,t)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,t,n){return this.identity().translate([e,t,n])}}let ti,ni;function ii(e){if(e>2*Math.PI)throw Error("expected radians")}const ri={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(ri,"IDENTITY",{get:()=>(Je.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const oi={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},ai={common:0,meters:1,pixels:2},si={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},li=Math.PI/180,ci=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],ui=[0,0,0],hi={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};class di{constructor(e={}){c(this,"id",void 0),c(this,"x",void 0),c(this,"y",void 0),c(this,"width",void 0),c(this,"height",void 0),c(this,"padding",void 0),c(this,"isGeospatial",void 0),c(this,"zoom",void 0),c(this,"focalDistance",void 0),c(this,"position",void 0),c(this,"modelMatrix",void 0),c(this,"distanceScales",void 0),c(this,"scale",void 0),c(this,"center",void 0),c(this,"cameraPosition",void 0),c(this,"projectionMatrix",void 0),c(this,"viewMatrix",void 0),c(this,"viewMatrixUncentered",void 0),c(this,"viewMatrixInverse",void 0),c(this,"viewProjectionMatrix",void 0),c(this,"pixelProjectionMatrix",void 0),c(this,"pixelUnprojectionMatrix",void 0),c(this,"resolution",void 0),c(this,"_frustumPlanes",{}),this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.padding=e.padding,this.distanceScales=e.distanceScales||hi,this.focalDistance=e.focalDistance||1,this.position=e.position||ui,this.modelMatrix=e.modelMatrix||null;const{longitude:t,latitude:n}=e;this.isGeospatial=Number.isFinite(n)&&Number.isFinite(t),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?oi.WEB_MERCATOR:oi.WEB_MERCATOR_AUTO_OFFSET:oi.IDENTITY}equals(e){return e instanceof di&&(this===e||e.width===this.width&&e.height===this.height&&e.scale===this.scale&&g(e.projectionMatrix,this.projectionMatrix)&&g(e.viewMatrix,this.viewMatrix))}project(e,{topLeft:t=!0}={}){const n=ue(this.projectPosition(e),this.pixelProjectionMatrix),[i,r]=n,o=t?r:this.height-r;return 2===e.length?[i,o]:[i,o,n[2]]}unproject(e,{topLeft:t=!0,targetZ:n}={}){const[i,r,o]=e,a=t?r:this.height-r,s=n&&n*this.distanceScales.unitsPerMeter[2],l=he([i,a,o],this.pixelUnprojectionMatrix,s),[c,u,h]=this.unprojectPosition(l);return Number.isFinite(o)?[c,u,h]:Number.isFinite(n)?[c,u,n]:[c,u]}projectPosition(e){const[t,n]=this.projectFlat(e);return[t,n,(e[2]||0)*this.distanceScales.unitsPerMeter[2]]}unprojectPosition(e){const[t,n]=this.unprojectFlat(e);return[t,n,(e[2]||0)*this.distanceScales.metersPerUnit[2]]}projectFlat(e){if(this.isGeospatial){const t=ie(e);return t[1]=p(t[1],-318,830),t}return e}unprojectFlat(e){return this.isGeospatial?re(e):e}getBounds(e={}){const t={targetZ:e.z||0},n=this.unproject([0,0],t),i=this.unproject([this.width,0],t),r=this.unproject([0,this.height],t),o=this.unproject([this.width,this.height],t);return[Math.min(n[0],i[0],r[0],o[0]),Math.min(n[1],i[1],r[1],o[1]),Math.max(n[0],i[0],r[0],o[0]),Math.max(n[1],i[1],r[1],o[1])]}getDistanceScales(e){return e?ae({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:t,width:n=1,height:i=1}){return e<this.x+this.width&&this.x<e+n&&t<this.y+this.height&&this.y<t+i}getFrustumPlanes(){return this._frustumPlanes.near||Object.assign(this._frustumPlanes,{left:Vn((e=this.viewProjectionMatrix)[3]+e[0],e[7]+e[4],e[11]+e[8],e[15]+e[12]),right:Vn(e[3]-e[0],e[7]-e[4],e[11]-e[8],e[15]-e[12]),bottom:Vn(e[3]+e[1],e[7]+e[5],e[11]+e[9],e[15]+e[13]),top:Vn(e[3]-e[1],e[7]-e[5],e[11]-e[9],e[15]-e[13]),near:Vn(e[3]+e[2],e[7]+e[6],e[11]+e[10],e[15]+e[14]),far:Vn(e[3]-e[2],e[7]-e[6],e[11]-e[10],e[15]-e[14])}),this._frustumPlanes;var e}panByPosition(e,t){return null}_initProps(e){const t=e.longitude,n=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=function(e){const{latitude:t}=e;W(Number.isFinite(t));const n=Math.cos(t*K);return ne($*n)-9}({latitude:n})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||ae({latitude:n,longitude:t}));const i=Math.pow(2,this.zoom);this.scale=i;const{position:r,modelMatrix:o}=e;let a=ui;if(r&&(a=o?new ei(o).transformAsVector(r,[]):r),this.isGeospatial){const e=this.projectPosition([t,n,0]);this.center=new Bn(a).scale(this.distanceScales.unitsPerMeter).add(e)}else this.center=this.projectPosition(a)}_initMatrices(e){const{viewMatrix:t=ci,projectionMatrix:n=null,orthographic:i=!1,fovyRadians:r,fovy:o=75,near:a=.1,far:s=1e3,padding:l=null,focalDistance:c=1}=e;this.viewMatrixUncentered=t,this.viewMatrix=(new ei).multiplyRight(t).translate(new Bn(this.center).negate()),this.projectionMatrix=n||function({width:e,height:t,orthographic:n,fovyRadians:i,focalDistance:r,padding:o,near:a,far:s}){const l=e/t,c=n?(new ei).orthographic({fovy:i,aspect:l,focalDistance:r,near:a,far:s}):(new ei).perspective({fovy:i,aspect:l,near:a,far:s});if(o){const{left:n=0,right:i=0,top:r=0,bottom:a=0}=o,s=p((n+e-i)/2,0,e)-e/2,l=p((r+t-a)/2,0,t)-t/2;c[8]-=2*s/e,c[9]+=2*l/t}return c}({width:this.width,height:this.height,orthographic:i,fovyRadians:r||o*li,focalDistance:c,padding:l,near:a,far:s});const u=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];var h;T(u,u,this.projectionMatrix),T(u,u,this.viewMatrix),this.viewProjectionMatrix=u,this.viewMatrixInverse=S([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=[(h=this.viewMatrixInverse)[12],h[13],h[14]];const d=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];I(d,d,[this.width/2,-this.height/2,1]),R(d,d,[1,-1,0]),T(f,d,this.viewProjectionMatrix),this.pixelProjectionMatrix=f,this.pixelUnprojectionMatrix=S([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||Je.warn("Pixel project matrix not invertible")()}}c(di,"displayName","Viewport");const pi="vs",fi="fs";function gi(e,t){if(!e)throw new Error(t||"shadertools: assertion failed.")}const mi={number:{validate:(e,t)=>Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)},array:{validate:(e,t)=>Array.isArray(e)||ArrayBuffer.isView(e)}};function yi(e){let t=vi(e);return"object"===t?e?"type"in e?Object.assign({},e,mi[e.type]):"value"in e?(t=vi(e.value),Object.assign({type:t},e,mi[t])):{type:"object",value:e}:{type:"object",value:null}:Object.assign({type:t,value:e},mi[t])}function vi(e){return Array.isArray(e)||ArrayBuffer.isView(e)?"array":typeof e}class bi{constructor(e){let{name:t,vs:n,fs:i,dependencies:r=[],uniforms:o,getUniforms:a,deprecations:s=[],defines:l={},inject:c={},vertexShader:u,fragmentShader:h}=e;gi("string"==typeof t),this.name=t,this.vs=n||u,this.fs=i||h,this.getModuleUniforms=a,this.dependencies=r,this.deprecations=this._parseDeprecationDefinitions(s),this.defines=l,this.injections=function(e){const t={vs:{},fs:{}};for(const n in e){let i=e[n];"string"==typeof i&&(i={order:0,injection:i}),t[n.slice(0,2)][n]=i}return t}(c),o&&(this.uniforms=function(e){const t={};for(const n in e){const i=yi(e[n]);t[n]=i}return t}(o))}getModuleSource(e){let t;switch(e){case"vs":t=this.vs||"";break;case"fs":t=this.fs||"";break;default:gi(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),"\n").concat(t,"// END MODULE_").concat(this.name,"\n\n")}getUniforms(e,t){return this.getModuleUniforms?this.getModuleUniforms(e,t):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,t){this.deprecations.forEach((n=>{n.regex.test(e)&&(n.deprecated?t.deprecated(n.old,n.new)():t.removed(n.old,n.new)())}))}_parseDeprecationDefinitions(e){return e.forEach((e=>{"function"===e.type?e.regex=new RegExp("\\b".concat(e.old,"\\(")):e.regex=new RegExp("".concat(e.type," ").concat(e.old,";"))})),e}_defaultGetUniforms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={},n=this.uniforms;for(const i in n){const r=n[i];i in e&&!r.private?(r.validate&&gi(r.validate(e[i],r),"".concat(this.name,": invalid ").concat(i)),t[i]=e[i]):t[i]=r.value}return t}}function _i(e){return function(e){const t={},n={};return wi({modules:e,level:0,moduleMap:t,moduleDepth:n}),Object.keys(n).sort(((e,t)=>n[t]-n[e])).map((e=>t[e]))}(Pi(e))}function wi(e){let{modules:t,level:n,moduleMap:i,moduleDepth:r}=e;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(const e of t)i[e.name]=e,(void 0===r[e.name]||r[e.name]<n)&&(r[e.name]=n);for(const e of t)e.dependencies&&wi({modules:e.dependencies,level:n+1,moduleMap:i,moduleDepth:r})}function Pi(e,t){return e.map((e=>(e instanceof bi||(gi("string"!=typeof e,"Shader module use by name is deprecated. Import shader module '".concat(e,"' and use it directly.")),gi(e.name,"shader module has no name"),(e=new bi(e)).dependencies=Pi(e.dependencies)),e)))}const Ei=7936,xi=7937,Ai=7938,Ci=35724,Si={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Ti={};Object.keys(Si).forEach((e=>{Ti[e]=e}));const Ri={};function Ii(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=Si[t];if(gi(i,t),!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t="undefined"!=typeof window&&window.navigator||{},n=e.userAgent||t.userAgent||"",i=-1!==n.indexOf("MSIE "),r=-1!==n.indexOf("Trident/");return i||r}(n))return!0;if(t in Ri)return Ri[t];const r=i[0],o=n.behavior||"enable",a="#extension GL_".concat(r," : ").concat(o,"\nvoid main(void) {}"),s=e.createShader(35633);e.shaderSource(s,a),e.compileShader(s);const l=e.getShaderParameter(s,35713);return e.deleteShader(s),Ri[t]=l,l}function Mi(e,t){return(t=Array.isArray(t)?t:[t]).every((t=>function(e,t){const n=Si[t];gi(n,t);const i=function(e){return"undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||Boolean(e&&2===e._version)}(e)&&n[1]||n[0],r="string"==typeof i?Boolean(e.getExtension(i)):i;return gi(!1===r||!0===r),r}(e,t)))}const Li={[pi]:"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n",[fi]:"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"},Di="__LUMA_INJECT_DECLARATIONS__",Oi=/void\s+main\s*\([^)]*\)\s*\{\n?/,ji=/}\n?[^{}]*$/,Ni=[];function Fi(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=t===pi;for(const t in n){const i=n[t];i.sort(((e,t)=>e.order-t.order)),Ni.length=i.length;for(let e=0,t=i.length;e<t;++e)Ni[e]=i[e].injection;const o="".concat(Ni.join("\n"),"\n");switch(t){case"vs:#decl":r&&(e=e.replace(Di,o));break;case"vs:#main-start":r&&(e=e.replace(Oi,(e=>e+o)));break;case"vs:#main-end":r&&(e=e.replace(ji,(e=>o+e)));break;case"fs:#decl":r||(e=e.replace(Di,o));break;case"fs:#main-start":r||(e=e.replace(Oi,(e=>e+o)));break;case"fs:#main-end":r||(e=e.replace(ji,(e=>o+e)));break;default:e=e.replace(t,(e=>e+o))}}return e=e.replace(Di,""),i&&(e=e.replace(/\}\s*$/,(e=>e+Li[t]))),e}function ki(e){const t={};return gi(Array.isArray(e)&&e.length>1),e.forEach((e=>{for(const n in e)t[n]=t[n]?"".concat(t[n],"\n").concat(e[n]):e[n]})),t}function Ui(e){return new RegExp("\\b".concat(e,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const zi=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],Bi=[...zi,[Ui("attribute"),"in $1"],[Ui("varying"),"out $1"]],Gi=[...zi,[Ui("varying"),"in $1"]],Vi=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],Hi=[...Vi,[Ui("in"),"attribute $1"],[Ui("out"),"varying $1"]],qi=[...Vi,[Ui("in"),"varying $1"]],Wi="gl_FragColor",Xi=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,Yi=/void\s+main\s*\([^)]*\)\s*\{\n?/;function Ki(e,t){for(const[n,i]of t)e=e.replace(n,i);return e}const Zi="\n\n".concat(Di,"\n\n"),Ji={[pi]:"vertex",[fi]:"fragment"},$i="precision highp float;\n\n";function Qi(e,t){let{id:n,source:i,type:r,modules:o,defines:a={},hookFunctions:s=[],inject:l={},transpileToGLSL100:c=!1,prologue:u=!0,log:h}=t;gi("string"==typeof i,"shader source must be a string");const d=r===pi,p=i.split("\n");let f=100,g="",m=i;0===p[0].indexOf("#version ")?(f=300,g=p[0],m=p.slice(1).join("\n")):g="#version ".concat(f);const y={};o.forEach((e=>{Object.assign(y,e.getDefines())})),Object.assign(y,a);let v=u?"".concat(g,"\n").concat(function(e){let{id:t,source:n,type:i}=e;return t&&"string"==typeof t&&-1===n.indexOf("SHADER_NAME")?"\n#define SHADER_NAME ".concat(t,"_").concat(Ji[i],"\n\n"):""}({id:n,source:i,type:r}),"\n").concat(function(e){let{type:t}=e;return"\n#define SHADER_TYPE_".concat(Ji[t].toUpperCase(),"\n")}({type:r}),"\n").concat(function(e){const t=function(e){const t=e.getExtension("WEBGL_debug_renderer_info"),n=e.getParameter(t&&t.UNMASKED_VENDOR_WEBGL||Ei),i=e.getParameter(t&&t.UNMASKED_RENDERER_WEBGL||xi);return{gpuVendor:function(e,t){return e.match(/NVIDIA/i)||t.match(/NVIDIA/i)?"NVIDIA":e.match(/INTEL/i)||t.match(/INTEL/i)?"INTEL":e.match(/AMD/i)||t.match(/AMD/i)||e.match(/ATI/i)||t.match(/ATI/i)?"AMD":"UNKNOWN GPU"}(n,i),vendor:n,renderer:i,version:e.getParameter(Ai),shadingLanguageVersion:e.getParameter(Ci)}}(e);switch(t.gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}(e),"\n").concat(function(e,t,n){let i="#if (__VERSION__ > 120)\n\n# define FEATURE_GLSL_DERIVATIVES\n# define FEATURE_GLSL_DRAW_BUFFERS\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FEATURE_GLSL_TEXTURE_LOD\n\n// DEPRECATED FLAGS, remove in v9\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return Mi(e,Ti.GLSL_FRAG_DEPTH)&&(i+="\n// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),Mi(e,Ti.GLSL_DERIVATIVES)&&Ii(e,Ti.GLSL_DERIVATIVES)&&(i+="\n// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define FEATURE_GLSL_DERIVATIVES\n# define DERIVATIVES\n#endif\n"),Mi(e,Ti.GLSL_FRAG_DATA)&&Ii(e,Ti.GLSL_FRAG_DATA,{behavior:"require"})&&(i+="\n// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define FEATURE_GLSL_DRAW_BUFFERS\n#define DRAW_BUFFERS\n#endif\n"),Mi(e,Ti.GLSL_TEXTURE_LOD)&&(i+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n\n# define FEATURE_GLSL_TEXTURE_LOD\n# define TEXTURE_LOD\n\n#endif\n"),i}(e),"\n").concat(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=0,n="";for(const i in e){0===t&&(n+="\n// APPLICATION DEFINES\n"),t++;const r=e[i];(r||Number.isFinite(r))&&(n+="#define ".concat(i.toUpperCase()," ").concat(e[i],"\n"))}return 0===t&&(n+="\n"),n}(y),"\n").concat(d?"":$i,"\n"):"".concat(g,"\n");const b=function(e){const t={vs:{},fs:{}};return e.forEach((e=>{let n;"string"!=typeof e?(n=e,e=n.hook):n={},e=e.trim();const[i,r]=e.split(":"),o=e.replace(/\(.+/,"");t[i][o]=Object.assign(n,{signature:r})})),t}(s),_={},w={},P={};for(const e in l){const t="string"==typeof l[e]?{injection:l[e],order:0}:l[e],n=e.match(/^(v|f)s:(#)?([\w-]+)$/);if(n){const i=n[2],r=n[3];i?"decl"===r?w[e]=[t]:P[e]=[t]:_[e]=[t]}else P[e]=[t]}for(const e of o){h&&e.checkDeprecations(m,h),v+=e.getModuleSource(r,f);const t=e.injections[r];for(const e in t){const n=e.match(/^(v|f)s:#([\w-]+)$/);if(n){const i="decl"===n[2]?w:P;i[e]=i[e]||[],i[e].push(t[e])}else _[e]=_[e]||[],_[e].push(t[e])}}return v+=Zi,v=Fi(v,r,w),v+=function(e,t){let n="";for(const i in e){const r=e[i];if(n+="void ".concat(r.signature," {\n"),r.header&&(n+="  ".concat(r.header)),t[i]){const e=t[i];e.sort(((e,t)=>e.order-t.order));for(const t of e)n+="  ".concat(t.injection,"\n")}r.footer&&(n+="  ".concat(r.footer)),n+="}\n"}return n}(b[r],_),v+=m,v=Fi(v,r,P),v=function(e,t,n){switch(t){case 300:return n?Ki(e,Bi):function(e){const t=(e=Ki(e,Gi)).match(Xi);if(t){const n=t[1];e=e.replace(new RegExp("\\b".concat(Wi,"\\b"),"g"),n)}else{const t="fragmentColor";e=e.replace(Yi,(e=>"out vec4 ".concat(t,";\n").concat(e))).replace(new RegExp("\\b".concat(Wi,"\\b"),"g"),t)}return e}(e);case 100:return n?Ki(e,Hi):function(e){const t=(e=Ki(e,qi)).match(Xi);if(t){const n=t[1];e=e.replace(Xi,"").replace(new RegExp("\\b".concat(n,"\\b"),"g"),Wi)}return e}(e);default:throw new Error("unknown GLSL version ".concat(t))}}(v,c?100:f,d),v}function er(e){return function(t){const n={};for(const i of e){const e=i.getUniforms(t,n);Object.assign(n,e)}return n}}const tr=new Xe({id:"luma.gl"});function nr(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}const ir="Invalid WebGLRenderingContext",rr="Requires WebGL2";function or(e){return"undefined"!=typeof WebGLRenderingContext&&e instanceof WebGLRenderingContext||"undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||Boolean(e&&Number.isFinite(e._version))}function ar(e){return"undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||Boolean(e&&2===e._version)}function sr(e){return nr(or(e),ir),e}function lr(e){return nr(ar(e),rr),e}const cr={};const ur=function e(t){const n=t.gl;this.ext=t,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(t.maxVertexAttribs);for(let t=0;t<this.attribs.length;t++){const i=new e.VertexAttrib(n);this.attribs[t]=i}this.maxAttrib=0};(ur.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()}).prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const hr=function(e){const t=this;this.gl=e,function(e){const t=e.getError;e.getError=function(){let n;do{n=t.apply(e),0!==n&&(cr[n]=!0)}while(0!==n);for(n in cr)if(cr[n])return delete cr[n],parseInt(n,10);return 0}}(e);const n=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(e){return e===t.VERTEX_ARRAY_BINDING_OES?t.currentVertexArrayObject===t.defaultVertexArrayObject?null:t.currentVertexArrayObject:n.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(e){const i=t.currentVertexArrayObject;return i.maxAttrib=Math.max(i.maxAttrib,e),i.attribs[e].enabled=!0,n.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(e){const i=t.currentVertexArrayObject;return i.maxAttrib=Math.max(i.maxAttrib,e),i.attribs[e].enabled=!1,n.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(e,i){switch(e){case 34962:t.currentArrayBuffer=i;break;case 34963:t.currentVertexArrayObject.elementArrayBuffer=i}return n.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(e,i){const r=t.currentVertexArrayObject.attribs[e];switch(i){case 34975:return r.buffer;case 34338:return r.enabled;case 34339:return r.size;case 34340:return r.stride;case 34341:return r.type;case 34922:return r.normalized;default:return n.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(e,i,r,o,a,s){const l=t.currentVertexArrayObject;l.maxAttrib=Math.max(l.maxAttrib,e);const c=l.attribs[e];return c.buffer=t.currentArrayBuffer,c.size=i,c.type=r,c.normalized=o,c.stride=a,c.offset=s,c.recache(),n.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",(()=>{globalThis.console&&globalThis.console.log&&globalThis.console.log("OESVertexArrayObject emulation library context restored"),t.reset_()}),!0),this.reset_()};hr.prototype.VERTEX_ARRAY_BINDING_OES=34229,hr.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(let e=0;e<this.vertexArrayObjects.length;++e)this.vertexArrayObjects.isAlive=!1;const e=this.gl;this.maxVertexAttribs=e.getParameter(34921),this.defaultVertexArrayObject=new ur(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},hr.prototype.createVertexArrayOES=function(){const e=new ur(this);return this.vertexArrayObjects.push(e),e},hr.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)},hr.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof ur&&e.hasBeenBound&&e.ext===this)},hr.prototype.bindVertexArrayOES=function(e){const t=this.gl;if(e&&!e.isAlive)return n="bindVertexArrayOES: attempt to bind deleted arrayObject",cr[1282]=!0,void(void 0!==n&&(i=n,globalThis.console&&globalThis.console.error&&globalThis.console.error(i)));var n,i;const r=this.original,o=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const a=this.currentVertexArrayObject;if(o===a)return;o&&a.elementArrayBuffer===o.elementArrayBuffer||r.bindBuffer.call(t,34963,a.elementArrayBuffer);let s=this.currentArrayBuffer;const l=Math.max(o?o.maxAttrib:0,a.maxAttrib);for(let e=0;e<=l;e++){const n=a.attribs[e],i=o?o.attribs[e]:null;if(o&&n.enabled===i.enabled||(n.enabled?r.enableVertexAttribArray.call(t,e):r.disableVertexAttribArray.call(t,e)),n.enabled){let a=!1;o&&n.buffer===i.buffer||(s!==n.buffer&&(r.bindBuffer.call(t,34962,n.buffer),s=n.buffer),a=!0),(a||n.cached!==i.cached)&&r.vertexAttribPointer.call(t,e,n.size,n.type,n.normalized,n.stride,n.offset)}}this.currentArrayBuffer!==s&&r.bindBuffer.call(t,34962,this.currentArrayBuffer)};const dr="OES_element_index",pr="WEBGL_draw_buffers",fr="WEBGL_debug_renderer_info",gr=e=>ar(e)?void 0:0,mr={3074:e=>ar(e)?void 0:36064,35723:e=>ar(e)?void 0:4352,35977:gr,32937:gr,36795:(e,t)=>{const n=ar(e)?e.getExtension("EXT_disjoint_timer_query_webgl2"):e.getExtension("EXT_disjoint_timer_query");return n&&n.GPU_DISJOINT_EXT?t(n.GPU_DISJOINT_EXT):0},37445:(e,t)=>{const n=e.getExtension(fr);return t(n&&n.UNMASKED_VENDOR_WEBGL||7936)},37446:(e,t)=>{const n=e.getExtension(fr);return t(n&&n.UNMASKED_RENDERER_WEBGL||7937)},34047:(e,t)=>{const n=e.luma.extensions.EXT_texture_filter_anisotropic;return n?t(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:gr,35071:gr,37447:gr,36063:(e,t)=>{if(!ar(e)){const n=e.getExtension(pr);return n?t(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:gr,35374:gr,35377:gr,34852:e=>{if(!ar(e)){const t=e.getExtension(pr);return t?t.MAX_DRAW_BUFFERS_WEBGL:0}},36203:e=>e.getExtension(dr)?2147483647:65535,33001:e=>e.getExtension(dr)?16777216:65535,33e3:e=>16777216,37157:gr,35373:gr,35657:gr,36183:gr,37137:gr,34045:gr,35978:gr,35979:gr,35968:gr,35376:gr,35375:gr,35659:gr,37154:gr,35371:gr,35658:gr,35076:gr,35077:gr,35380:gr},yr="ANGLE_instanced_arrays",vr={OES_vertex_array_object:{meta:{suffix:"OES"},createVertexArray:()=>{nr(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[yr]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(e,t){nr(0===t,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},WEBGL_draw_buffers:{meta:{suffix:"WEBGL"},drawBuffers:()=>{nr(!1)}},EXT_disjoint_timer_query:{meta:{suffix:"EXT"},createQuery:()=>{nr(!1)},deleteQuery:()=>{nr(!1)},beginQuery:()=>{nr(!1)},endQuery:()=>{},getQuery(e,t){return this.getQueryObject(e,t)},getQueryParameter(e,t){return this.getQueryObject(e,t)},getQueryObject:()=>{}}},br={readBuffer:(e,t,n)=>{ar(e)&&t(n)},getVertexAttrib:(e,t,n,i)=>{const{webgl2:r,ext:o}=function(e,t){return{webgl2:ar(e),ext:e.getExtension(t)}}(e,yr);let a;switch(i){case 35069:a=!!r&&void 0;break;case 35070:a=r||o?void 0:0}return void 0!==a?a:t(n,i)},getProgramParameter:(e,t,n,i)=>{if(!ar(e))switch(i){case 35967:return 35981;case 35971:case 35382:return 0}return t(n,i)},getInternalformatParameter:(e,t,n,i,r)=>ar(e)||32937!==r?e.getInternalformatParameter(n,i,r):new Int32Array([0]),getTexParameter(e,t,n,i){if(34046===i){const{extensions:t}=e.luma,n=t.EXT_texture_filter_anisotropic;i=n&&n.TEXTURE_MAX_ANISOTROPY_EXT||34046}return t(n,i)},getParameter:function(e,t,n){const i=mr[n],r="function"==typeof i?i(e,t,n):i;return void 0!==r?r:t(n)},hint:(e,t,n,i)=>t(n,i)};function _r(e,t){let{extension:n,target:i,target2:r}=t;const o=vr[n];nr(o);const{meta:a={}}=o,{suffix:s=""}=a,l=e.getExtension(n);for(const t of Object.keys(o)){const n="".concat(t).concat(s);let a=null;"meta"===t||"function"==typeof e[t]||(l&&"function"==typeof l[n]?a=function(){return l[n](...arguments)}:"function"==typeof o[t]&&(a=o[t].bind(i))),a&&(i[t]=a,r[t]=a)}}globalThis.polyfillContext=function(e){e.luma=e.luma||{};const{luma:t}=e;return t.polyfilled||(function(e){if("function"==typeof e.createVertexArray)return;const t=e.getSupportedExtensions;e.getSupportedExtensions=function(){const e=t.call(this)||[];return e.indexOf("OES_vertex_array_object")<0&&e.push("OES_vertex_array_object"),e};const n=e.getExtension;e.getExtension=function(t){return n.call(this,t)||("OES_vertex_array_object"!==t?null:(e.__OESVertexArrayObject||(this.__OESVertexArrayObject=new hr(this)),this.__OESVertexArrayObject))}}(e),function(e){e.luma.extensions={};const t=e.getSupportedExtensions()||[];for(const n of t)e.luma[n]=e.getExtension(n)}(e),function(e,t){for(const n of Object.getOwnPropertyNames(t))"overrides"!==n&&_r(e,{extension:n,target:e.luma,target2:e})}(e,vr),function(e,t){let{target:n,target2:i}=t;Object.keys(br).forEach((t=>{if("function"==typeof br[t]){const r=e[t]?e[t].bind(e):()=>{},o=br[t].bind(null,e,r);n[t]=o,i[t]=o}}))}(e,{target:t,target2:e}),t.polyfilled=!0),e};const wr={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},Pr=(e,t,n)=>t?e.enable(n):e.disable(n),Er=(e,t,n)=>e.hint(n,t),xr=(e,t,n)=>e.pixelStorei(n,t);function Ar(e){return Array.isArray(e)||ArrayBuffer.isView(e)}const Cr={3042:Pr,32773:(e,t)=>e.blendColor(...t),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(e,t)=>e.clearColor(...t),3107:(e,t)=>e.colorMask(...t),2884:Pr,2885:(e,t)=>e.cullFace(t),2929:Pr,2931:(e,t)=>e.clearDepth(t),2932:(e,t)=>e.depthFunc(t),2928:(e,t)=>e.depthRange(...t),2930:(e,t)=>e.depthMask(t),3024:Pr,35723:Er,36006:(e,t)=>{const n=ar(e)?36009:36160;return e.bindFramebuffer(n,t)},2886:(e,t)=>e.frontFace(t),33170:Er,2849:(e,t)=>e.lineWidth(t),32823:Pr,32824:"polygonOffset",10752:"polygonOffset",35977:Pr,32938:"sampleCoverage",32939:"sampleCoverage",3089:Pr,3088:(e,t)=>e.scissor(...t),2960:Pr,2961:(e,t)=>e.clearStencil(t),2968:(e,t)=>e.stencilMaskSeparate(1028,t),36005:(e,t)=>e.stencilMaskSeparate(1029,t),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(e,t)=>e.viewport(...t),3333:xr,3317:xr,37440:xr,37441:xr,37443:xr,3330:xr,3332:xr,3331:xr,36010:(e,t)=>e.bindFramebuffer(36008,t),3314:xr,32878:xr,3316:xr,3315:xr,32877:xr,framebuffer:(e,t)=>{const n=t&&"handle"in t?t.handle:t;return e.bindFramebuffer(36160,n)},blend:(e,t)=>t?e.enable(3042):e.disable(3042),blendColor:(e,t)=>e.blendColor(...t),blendEquation:(e,t)=>{t=Ar(t)?t:[t,t],e.blendEquationSeparate(...t)},blendFunc:(e,t)=>{t=Ar(t)&&2===t.length?[...t,...t]:t,e.blendFuncSeparate(...t)},clearColor:(e,t)=>e.clearColor(...t),clearDepth:(e,t)=>e.clearDepth(t),clearStencil:(e,t)=>e.clearStencil(t),colorMask:(e,t)=>e.colorMask(...t),cull:(e,t)=>t?e.enable(2884):e.disable(2884),cullFace:(e,t)=>e.cullFace(t),depthTest:(e,t)=>t?e.enable(2929):e.disable(2929),depthFunc:(e,t)=>e.depthFunc(t),depthMask:(e,t)=>e.depthMask(t),depthRange:(e,t)=>e.depthRange(...t),dither:(e,t)=>t?e.enable(3024):e.disable(3024),derivativeHint:(e,t)=>{e.hint(35723,t)},frontFace:(e,t)=>e.frontFace(t),mipmapHint:(e,t)=>e.hint(33170,t),lineWidth:(e,t)=>e.lineWidth(t),polygonOffsetFill:(e,t)=>t?e.enable(32823):e.disable(32823),polygonOffset:(e,t)=>e.polygonOffset(...t),sampleCoverage:(e,t)=>e.sampleCoverage(...t),scissorTest:(e,t)=>t?e.enable(3089):e.disable(3089),scissor:(e,t)=>e.scissor(...t),stencilTest:(e,t)=>t?e.enable(2960):e.disable(2960),stencilMask:(e,t)=>{t=Ar(t)?t:[t,t];const[n,i]=t;e.stencilMaskSeparate(1028,n),e.stencilMaskSeparate(1029,i)},stencilFunc:(e,t)=>{t=Ar(t)&&3===t.length?[...t,...t]:t;const[n,i,r,o,a,s]=t;e.stencilFuncSeparate(1028,n,i,r),e.stencilFuncSeparate(1029,o,a,s)},stencilOp:(e,t)=>{t=Ar(t)&&3===t.length?[...t,...t]:t;const[n,i,r,o,a,s]=t;e.stencilOpSeparate(1028,n,i,r),e.stencilOpSeparate(1029,o,a,s)},viewport:(e,t)=>e.viewport(...t)};function Sr(e,t,n){return void 0!==t[e]?t[e]:n[e]}const Tr={blendEquation:(e,t,n)=>e.blendEquationSeparate(Sr(32777,t,n),Sr(34877,t,n)),blendFunc:(e,t,n)=>e.blendFuncSeparate(Sr(32969,t,n),Sr(32968,t,n),Sr(32971,t,n),Sr(32970,t,n)),polygonOffset:(e,t,n)=>e.polygonOffset(Sr(32824,t,n),Sr(10752,t,n)),sampleCoverage:(e,t,n)=>e.sampleCoverage(Sr(32938,t,n),Sr(32939,t,n)),stencilFuncFront:(e,t,n)=>e.stencilFuncSeparate(1028,Sr(2962,t,n),Sr(2967,t,n),Sr(2963,t,n)),stencilFuncBack:(e,t,n)=>e.stencilFuncSeparate(1029,Sr(34816,t,n),Sr(36003,t,n),Sr(36004,t,n)),stencilOpFront:(e,t,n)=>e.stencilOpSeparate(1028,Sr(2964,t,n),Sr(2965,t,n),Sr(2966,t,n)),stencilOpBack:(e,t,n)=>e.stencilOpSeparate(1029,Sr(34817,t,n),Sr(34818,t,n),Sr(34819,t,n))},Rr={enable:(e,t)=>e({[t]:!0}),disable:(e,t)=>e({[t]:!1}),pixelStorei:(e,t,n)=>e({[t]:n}),hint:(e,t,n)=>e({[t]:n}),bindFramebuffer:(e,t,n)=>{switch(t){case 36160:return e({36006:n,36010:n});case 36009:return e({36006:n});case 36008:return e({36010:n});default:return null}},blendColor:(e,t,n,i,r)=>e({32773:new Float32Array([t,n,i,r])}),blendEquation:(e,t)=>e({32777:t,34877:t}),blendEquationSeparate:(e,t,n)=>e({32777:t,34877:n}),blendFunc:(e,t,n)=>e({32969:t,32968:n,32971:t,32970:n}),blendFuncSeparate:(e,t,n,i,r)=>e({32969:t,32968:n,32971:i,32970:r}),clearColor:(e,t,n,i,r)=>e({3106:new Float32Array([t,n,i,r])}),clearDepth:(e,t)=>e({2931:t}),clearStencil:(e,t)=>e({2961:t}),colorMask:(e,t,n,i,r)=>e({3107:[t,n,i,r]}),cullFace:(e,t)=>e({2885:t}),depthFunc:(e,t)=>e({2932:t}),depthRange:(e,t,n)=>e({2928:new Float32Array([t,n])}),depthMask:(e,t)=>e({2930:t}),frontFace:(e,t)=>e({2886:t}),lineWidth:(e,t)=>e({2849:t}),polygonOffset:(e,t,n)=>e({32824:t,10752:n}),sampleCoverage:(e,t,n)=>e({32938:t,32939:n}),scissor:(e,t,n,i,r)=>e({3088:new Int32Array([t,n,i,r])}),stencilMask:(e,t)=>e({2968:t,36005:t}),stencilMaskSeparate:(e,t,n)=>e({[1028===t?2968:36005]:n}),stencilFunc:(e,t,n,i)=>e({2962:t,2967:n,2963:i,34816:t,36003:n,36004:i}),stencilFuncSeparate:(e,t,n,i,r)=>e({[1028===t?2962:34816]:n,[1028===t?2967:36003]:i,[1028===t?2963:36004]:r}),stencilOp:(e,t,n,i)=>e({2964:t,2965:n,2966:i,34817:t,34818:n,34819:i}),stencilOpSeparate:(e,t,n,i,r)=>e({[1028===t?2964:34817]:n,[1028===t?2965:34818]:i,[1028===t?2966:34819]:r}),viewport:(e,t,n,i,r)=>e({2978:[t,n,i,r]})},Ir=(e,t)=>e.isEnabled(t),Mr={3042:Ir,2884:Ir,2929:Ir,3024:Ir,32823:Ir,32926:Ir,32928:Ir,3089:Ir,2960:Ir,35977:Ir};function Lr(e){for(const t in e)return!1;return!0}function Dr(e,t){if(e===t)return!0;const n=Array.isArray(e)||ArrayBuffer.isView(e),i=Array.isArray(t)||ArrayBuffer.isView(t);if(n&&i&&e.length===t.length){for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}return!1}function Or(e,t){const n=e[t].bind(e);e[t]=function(){const t=arguments.length<=0?void 0:arguments[0];return t in e.state.cache&&e.state.enable?e.state.cache[t]:n(...arguments)},Object.defineProperty(e[t],"name",{value:"".concat(t,"-from-cache"),configurable:!1})}function jr(e,t,n){const i=e[t].bind(e);e[t]=function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];const{valueChanged:a,oldValue:s}=n(e.state._updateCache,...r);return a&&i(...r),s},Object.defineProperty(e[t],"name",{value:"".concat(t,"-to-cache"),configurable:!1})}class Nr{constructor(e){let{copyState:t=!1,log:n=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=t?function(e,t){if("number"==typeof(t=t||wr)){const n=t,i=Mr[n];return i?i(e,n):e.getParameter(n)}const n=Array.isArray(t)?t:Object.keys(t),i={};for(const t of n){const n=Mr[t];i[t]=n?n(e,Number(t)):e.getParameter(Number(t))}return i}(e):Object.assign({},wr),this.log=n,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){nr(this.stateStack.length>0);const e=this.stateStack[this.stateStack.length-1];Ur(this.gl,e),this.stateStack.pop()}_updateCache(e){let t,n=!1;const i=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const r in e){nr(void 0!==r);const o=e[r],a=this.cache[r];Dr(o,a)||(n=!0,t=a,i&&!(r in i)&&(i[r]=a),this.cache[r]=o)}return{valueChanged:n,oldValue:t}}}function Fr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{enable:n=!0,copyState:i}=t;if(nr(void 0!==i),!e.state){const{polyfillContext:t}=globalThis;t&&t(e),e.state=new Nr(e,{copyState:i}),function(e){const t=e.useProgram.bind(e);e.useProgram=function(n){e.state.program!==n&&(t(n),e.state.program=n)}}(e);for(const t in Rr)jr(e,t,Rr[t]);Or(e,"getParameter"),Or(e,"isEnabled")}return e.state.enable=n,e}function kr(e){nr(e.state),e.state.pop()}function Ur(e,t){if(nr(or(e),"setParameters requires a WebGL context"),Lr(t))return;const n={};for(const i in t){const r=Number(i),o=Cr[i];o&&("string"==typeof o?n[o]=!0:o(e,t[i],r))}const i=e.state&&e.state.cache;if(i)for(const r in n)(0,Tr[r])(e,t,i)}function zr(e,t,n){if(Lr(t))return n(e);const{nocatch:i=!0}=t;let r;if(function(e){e.state||Fr(e,{copyState:!1}),e.state.push()}(e),Ur(e,t),i)r=n(e),kr(e);else try{r=n(e)}finally{kr(e)}return r}function Br(e){const{luma:t}=e;if(e.canvas&&t){const{clientWidth:n}=t.canvasSizeInfo;return n?e.drawingBufferWidth/n:1}return 1}function Gr(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function(e,t,n,i,r){const o=Vr(e[0],t,n);let a=Hr(e[1],t,i,r),s=Vr(e[0]+1,t,n);const l=s===n-1?s:s-1;let c;return s=Hr(e[1]+1,t,i,r),r?(s=0===s?s:s+1,c=a,a=s):c=s===i-1?s:s-1,{x:o,y:a,width:Math.max(l-o+1,1),height:Math.max(c-a+1,1)}}(t,Br(e),e.drawingBufferWidth,e.drawingBufferHeight,n)}function Vr(e,t,n){return Math.min(Math.round(e*t),n-1)}function Hr(e,t,n,i){return i?Math.max(0,n-1-Math.round(e*t)):Math.min(Math.round(e*t),n-1)}const qr=Me(),Wr=qr&&"undefined"!=typeof document,Xr={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function Yr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};nr(qr,"createGLContext only available in the browser.\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils"),e=Object.assign({},Xr,e);const{width:t,height:n}=e;function i(t){if(e.throwOnError)throw new Error(t);return console.error(t),null}let r;e.onError=i;const{canvas:o}=e,a=function(e){let t,{canvas:n,width:i=800,height:r=600,onError:o}=e;return"string"==typeof n?(Wr&&"complete"===document.readyState||o("createGLContext called on canvas '".concat(n,"' before page was loaded")),t=document.getElementById(n)):n?t=n:(t=document.createElement("canvas"),t.id="lumagl-canvas",t.style.width=Number.isFinite(i)?"".concat(i,"px"):"100%",t.style.height=Number.isFinite(r)?"".concat(r,"px"):"100%",document.body.insertBefore(t,document.body.firstChild)),t}({canvas:o,width:t,height:n,onError:i});return r=function(e,t){const{onError:n}=t;let i=null;const r=e=>i=e.statusMessage||i;e.addEventListener("webglcontextcreationerror",r,!1);const{webgl1:o=!0,webgl2:a=!0}=t;let s=null;return a&&(s=s||e.getContext("webgl2",t),s=s||e.getContext("experimental-webgl2",t)),o&&(s=s||e.getContext("webgl",t),s=s||e.getContext("experimental-webgl",t)),e.removeEventListener("webglcontextcreationerror",r,!1),s?(t.onContextLost&&e.addEventListener("webglcontextlost",t.onContextLost,!1),t.onContextRestored&&e.addEventListener("webglcontextrestored",t.onContextRestored,!1),s):n("Failed to create ".concat(a&&!o?"WebGL2":"WebGL"," context: ").concat(i||"Unknown error"))}(a,e),r?(r=Kr(r,e),function(e){const t=ar(e)?"WebGL2":"WebGL1",n=function(e){const t=e.getParameter(7936),n=e.getParameter(7937),i=e.getExtension("WEBGL_debug_renderer_info");return{vendor:i&&e.getParameter(i.UNMASKED_VENDOR_WEBGL||7936)||t,renderer:i&&e.getParameter(i.UNMASKED_RENDERER_WEBGL||7937)||n,vendorMasked:t,rendererMasked:n,version:e.getParameter(7938),shadingLanguageVersion:e.getParameter(35724)}}(e),i=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",r=e.debug?" debug":"";tr.info(1,"".concat(t).concat(r," context ").concat(i))()}(r),r):null}function Kr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||e._instrumented)return e;e._version=e._version||function(e){return"undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext?2:1}(e),e.luma=e.luma||{},e.luma.canvasSizeInfo=e.luma.canvasSizeInfo||{},t=Object.assign({},Xr,t);const{manageState:n,debug:i}=t;return n&&Fr(e,{copyState:!1,log:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return tr.log(1,...t)()}}),qr&&i&&(globalThis.makeDebugContext?(e=globalThis.makeDebugContext(e,t),tr.level=Math.max(tr.level,1)):tr.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),e._instrumented=!0,e}const Zr="8.5.18",Jr=new class{constructor(){this.stats=new Map}get(e){return this.stats.has(e)||this.stats.set(e,new at({id:e})),this.stats.get(e)}};if(globalThis.luma&&globalThis.luma.VERSION!==Zr)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(Zr));function $r(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}function Qr(e,t){if("string"!=typeof t)return t;const n=Number(t);if(!isNaN(n))return n;const i=e[t=t.replace(/^.*\./,"")];return $r(void 0!==i,"Accessing undefined constant GL.".concat(t)),i}function eo(e,t){t=Number(t);for(const n in e)if(e[n]===t)return"GL.".concat(n);return String(t)}globalThis.luma||(Me()&&tr.log(1,"luma.gl ".concat(Zr," - ").concat("set luma.log.level=1 (or higher) to trace rendering"))(),globalThis.luma=globalThis.luma||{VERSION:Zr,version:Zr,log:tr,stats:Jr,globals:{modules:{},nodeIO:{}}}),globalThis.luma;const to={};function no(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";to[e]=to[e]||1;const t=to[e]++;return"".concat(e,"-").concat(t)}function io(e){return $r("number"==typeof e,"Input must be a number"),e&&0==(e&e-1)}function ro(e){let t=!0;for(const n in e){t=!1;break}return t}function oo(e,t,n,i){const r="See luma.gl ".concat(n," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),o=Object.getPrototypeOf(e);i.forEach((e=>{o.methodName||(o[e]=()=>{throw tr.removed("Calling removed method ".concat(t,".").concat(e,": "),r)(),new Error(e)})}))}const ao="Resource subclass must define virtual methods";class so{get[Symbol.toStringTag](){return"Resource"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};sr(e);const{id:n,userData:i={}}=t;this.gl=e,this.gl2=e,this.id=n||no(this[Symbol.toStringTag]),this.userData=i,this._bound=!1,this._handle=t.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,t&&e&&t.filter(Boolean).forEach((e=>e.delete())),this}bind(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!=typeof t?(this._bindHandle(t),this):(this._bound?e=t():(this._bindHandle(this.handle),this._bound=!0,e=t(),this._bound=!1,this._bindHandle(null)),e)}unbind(){this.bind(null)}getParameter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};$r(e=Qr(this.gl,e));const n=(this.constructor.PARAMETERS||{})[e];if(n){const e=ar(this.gl);if("webgl2"in n&&!e||"extension"in n&&!this.gl.getExtension(n.extension)){const t=n.webgl1,i="webgl2"in n?n.webgl2:n.webgl1;return e?i:t}}return this._getParameter(e,t)}getParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{parameters:t,keys:n}=e,i=this.constructor.PARAMETERS||{},r=ar(this.gl),o={},a=t||Object.keys(i);for(const t of a){const a=i[t];if(a&&(!("webgl2"in a)||r)&&(!("extension"in a)||this.gl.getExtension(a.extension))){const i=n?eo(this.gl,t):t;o[i]=this.getParameter(t,e),n&&"GLenum"===a.type&&(o[i]=eo(this.gl,o[i]))}}return o}setParameter(e,t){$r(e=Qr(this.gl,e));const n=(this.constructor.PARAMETERS||{})[e];if(n){const e=ar(this.gl);if("webgl2"in n&&!e||"extension"in n&&!this.gl.getExtension(n.extension))throw new Error("Parameter not available on this platform");"GLenum"===n.type&&(t=Qr(t))}return this._setParameter(e,t),this}setParameters(e){for(const t in e)this.setParameter(t,e[t]);return this}stubRemovedMethods(e,t,n){return oo(this,e,t,n)}initialize(e){}_createHandle(){throw new Error(ao)}_deleteHandle(){throw new Error(ao)}_bindHandle(e){throw new Error(ao)}_getOptsFromHandle(){throw new Error(ao)}_getParameter(e,t){throw new Error(ao)}_setParameter(e,t){throw new Error(ao)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const e=this[Symbol.toStringTag],t=Jr.get("Resource Counts");t.get("Resources Created").incrementCount(),t.get("".concat(e,"s Created")).incrementCount(),t.get("".concat(e,"s Active")).incrementCount()}_removeStats(){const e=this[Symbol.toStringTag];Jr.get("Resource Counts").get("".concat(e,"s Active")).decrementCount()}_trackAllocatedMemory(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];this._trackAllocatedMemoryForContext(e,t),this._trackAllocatedMemoryForContext(e,t,this.gl.canvas&&this.gl.canvas.id),this.byteLength=e}_trackAllocatedMemoryForContext(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const i=Jr.get("Memory Usage".concat(n));i.get("GPU Memory").addCount(e),i.get("".concat(t," Memory")).addCount(e)}_trackDeallocatedMemory(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];this._trackDeallocatedMemoryForContext(e),this._trackDeallocatedMemoryForContext(e,this.gl.canvas&&this.gl.canvas.id),this.byteLength=0}_trackDeallocatedMemoryForContext(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=Jr.get("Memory Usage".concat(t));n.get("GPU Memory").subtractCount(this.byteLength),n.get("".concat(e," Memory")).subtractCount(this.byteLength)}}const lo="Failed to deduce GL constant from typed array";function co(e){switch(ArrayBuffer.isView(e)?e.constructor:e){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(lo)}}function uo(e){let{clamped:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(e){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return t?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function ho(e){let{data:t,width:n,height:i}=e;const r=Math.round(n/2),o=Math.round(i/2),a=new Uint8Array(r*o*4);for(let e=0;e<o;e++)for(let i=0;i<r;i++)for(let o=0;o<4;o++)a[4*(e*r+i)+o]=t[4*(2*e*n+2*i)+o];return{data:a,width:r,height:o}}function po(e,t,n){const{removedProps:i={},deprecatedProps:r={},replacedProps:o={}}=n;for(const n in i)if(n in t){const t=i[n]?"".concat(e,".").concat(i[n]):"N/A";tr.removed("".concat(e,".").concat(n),t)()}for(const n in r)if(n in t){const t=r[n];tr.deprecated("".concat(e,".").concat(n),"".concat(e,".").concat(t))()}let a=null;for(const n in o)if(n in t){const i=o[n];tr.deprecated("".concat(e,".").concat(n),"".concat(e,".").concat(i))(),a=a||Object.assign({},t),a[i]=t[n],delete a[n]}return a||t}const fo={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},go={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class mo{static getBytesPerElement(e){return uo(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return $r(e.size),uo(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new mo(...[fo,...t])}constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach((e=>this._assign(e))),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return mo.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return mo.getBytesPerVertex(this)}_assign(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=po("Accessor",e,go),void 0!==e.type&&(this.type=e.type,5124!==e.type&&5125!==e.type||(this.integer=!0)),void 0!==e.size&&(this.size=e.size),void 0!==e.offset&&(this.offset=e.offset),void 0!==e.stride&&(this.stride=e.stride),void 0!==e.normalized&&(this.normalized=e.normalized),void 0!==e.integer&&(this.integer=e.integer),void 0!==e.divisor&&(this.divisor=e.divisor),void 0!==e.buffer&&(this.buffer=e.buffer),void 0!==e.index&&("boolean"==typeof e.index?this.index=e.index?1:0:this.index=e.index),void 0!==e.instanced&&(this.divisor=e.instanced?1:0),void 0!==e.isInstanced&&(this.divisor=e.isInstanced?1:0),this}}const yo={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},vo={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:yo},bo={removedProps:yo};class _o extends so{get[Symbol.toStringTag](){return"Buffer"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,t),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=t.target||(this.gl.webgl2?36662:34962),this.initialize(t),Object.seal(this)}getElementCount(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/mo.getBytesPerElement(e))}getVertexCount(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/mo.getBytesPerVertex(e))}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=po("Buffer",e,vo),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return"accessor"in(e=po("Buffer",e,bo))&&this.setAccessor(e.accessor),this}setAccessor(e){return delete(e=Object.assign({},e)).buffer,this.accessor=new mo(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});const{data:t,offset:n=0,srcOffset:i=0}=e,r=e.byteLength||e.length;$r(t);const o=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(o,this.handle),0!==i||void 0!==r?(lr(this.gl),this.gl.bufferSubData(this.target,n,t,i,r)):this.gl.bufferSubData(o,n,t),this.gl.bindBuffer(o,null),this.debugData=null,this._inferType(t),this}copyData(e){let{sourceBuffer:t,readOffset:n=0,writeOffset:i=0,size:r}=e;const{gl:o}=this;return lr(o),o.bindBuffer(36662,t.handle),o.bindBuffer(36663,this.handle),o.copyBufferSubData(36662,36663,n,i,r),o.bindBuffer(36662,null),o.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:e=null,srcByteOffset:t=0,dstOffset:n=0,length:i=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};lr(this.gl);const r=uo(this.accessor.type||5126,{clamped:!1}),o=this._getAvailableElementCount(t),a=n;let s,l;e?(l=e.length,s=l-a):(s=Math.min(o,i||o),l=a+s);const c=Math.min(o,s);return i=i||c,$r(i<=c),e=e||new r(l),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,t,e,n,i),this.gl.bindBuffer(36662,null),e}bind(){let{target:e=this.target,index:t=this.accessor&&this.accessor.index,offset:n=0,size:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===e||35982===e?void 0!==i?this.gl.bindBufferRange(e,t,this.handle,n,i):($r(0===n),this.gl.bindBufferBase(e,t,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind(){let{target:e=this.target,index:t=this.accessor&&this.accessor.index}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===e||35982===e?this.gl.bindBufferBase(e,t,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.byteLength+t;$r(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();const i=this._getTarget();this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,n,this.usage),this.gl.bufferSubData(i,t,e),this.gl.bindBuffer(i,null),this.debugData=e.slice(0,10),this.bytesUsed=n,this._trackAllocatedMemory(n);const r=co(e);return $r(r),this.setAccessor(new mo(this.accessor,{type:r})),this}_setByteLength(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;$r(e>=0),this._trackDeallocatedMemory();let n=e;0===e&&(n=new Float32Array(0));const i=this._getTarget();return this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,n,t),this.gl.bindBuffer(i,null),this.usage=t,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){const t=e/uo(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-t}_inferType(e){this.accessor.type||this.setAccessor(new mo(this.accessor,{type:co(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);const t=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),t}get type(){return tr.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return tr.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return tr.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return tr.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new mo(this.accessor,e),this}}const wo={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},Po={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},Eo={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1},xo=[9729,9728],Ao=globalThis.WebGLBuffer||function(){};class Co extends so{get[Symbol.toStringTag](){return"Texture"}static isSupported(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{format:n,linearFiltering:i}=t;let r=!0;return n&&(r=r&&function(e,t){const n=wo[t];if(!n)return!1;if(void 0===n.gl1&&void 0===n.gl2)return!0;const i=ar(e)&&n.gl2||n.gl1;return"string"==typeof i?e.getExtension(i):i}(e,n),r=r&&(!i||function(e,t){const n=wo[t];switch(n&&n.types[0]){case 5126:return e.getExtension("OES_texture_float_linear");case 5131:return e.getExtension("OES_texture_half_float_linear");default:return!0}}(e,n))),r}constructor(e,t){const{id:n=no("texture"),handle:i,target:r}=t;super(e,{id:n,handle:i}),this.target=r,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data;if(t instanceof Promise)return t.then((t=>this.initialize(Object.assign({},e,{pixels:t,data:t})))),this;const n="undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement;if(n&&t.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,t.addEventListener("loadeddata",(()=>this.initialize(e))),this;const{pixels:i=null,format:r=6408,border:o=0,recreate:a=!1,parameters:s={},pixelStore:l={},textureUnit:c}=e;t||(t=i);let{width:u,height:h,dataFormat:d,type:p,compressed:f=!1,mipmaps:g=!0}=e;const{depth:m=0}=e;return({width:u,height:h,compressed:f,dataFormat:d,type:p}=this._deduceParameters({format:r,type:p,dataFormat:d,compressed:f,data:t,width:u,height:h})),this.width=u,this.height=h,this.depth=m,this.format=r,this.type=p,this.dataFormat=d,this.border=o,this.textureUnit=c,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),g&&this._isNPOT()&&(tr.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),g=!1,this._updateForNPOT(s)),this.mipmaps=g,this.setImageData({data:t,width:u,height:h,depth:m,format:r,type:p,dataFormat:d,border:o,mipmaps:g,parameters:l,compressed:f}),g&&this.generateMipmap(),this.setParameters(s),a&&(this.data=t),n&&(this._video={video:t,parameters:s,lastTime:t.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?t.currentTime:-1}),this}update(){if(this._video){const{video:e,parameters:t,lastTime:n}=this._video;if(n===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:t}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}resize(e){let{height:t,width:n,mipmaps:i=!1}=e;return n!==this.width||t!==this.height?this.initialize({width:n,height:t,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:i}):this}generateMipmap(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isNPOT()?(tr.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),zr(this.gl,e,(()=>{this.gl.generateMipmap(this.target)})),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");const{target:t=this.target,pixels:n=null,level:i=0,format:r=this.format,border:o=this.border,offset:a=0,parameters:s={}}=e;let{data:l=null,type:c=this.type,width:u=this.width,height:h=this.height,dataFormat:d=this.dataFormat,compressed:p=!1}=e;l||(l=n),({type:c,dataFormat:d,compressed:p,width:u,height:h}=this._deduceParameters({format:r,type:c,dataFormat:d,compressed:p,data:l,width:u,height:h}));const{gl:f}=this;f.bindTexture(this.target,this.handle);let g,m=null;({data:l,dataType:m}=this._getDataType({data:l,compressed:p}));let y=0;if(zr(this.gl,s,(()=>{switch(m){case"null":f.texImage2D(t,i,r,u,h,o,d,c,l);break;case"typed-array":f.texImage2D(t,i,r,u,h,o,d,c,l,a);break;case"buffer":g=lr(f),g.bindBuffer(35052,l.handle||l),g.texImage2D(t,i,r,u,h,o,d,c,a),g.bindBuffer(35052,null);break;case"browser-object":ar(f)?f.texImage2D(t,i,r,u,h,o,d,c,l):f.texImage2D(t,i,r,d,c,l);break;case"compressed":for(const[e,n]of l.entries())f.compressedTexImage2D(t,e,n.format,n.width,n.height,o,n.data),y+=n.levelSize;break;default:$r(!1,"Unknown image data type")}})),"compressed"===m)this._trackAllocatedMemory(y,"Texture");else if(l&&l.byteLength)this._trackAllocatedMemory(l.byteLength,"Texture");else{const e=Po[this.dataFormat]||4,t=Eo[this.type]||1;this._trackAllocatedMemory(this.width*this.height*e*t,"Texture")}return this.loaded=!0,this}setSubImageData(e){let{target:t=this.target,pixels:n=null,data:i=null,x:r=0,y:o=0,width:a=this.width,height:s=this.height,level:l=0,format:c=this.format,type:u=this.type,dataFormat:h=this.dataFormat,compressed:d=!1,offset:p=0,border:f=this.border,parameters:g={}}=e;if(({type:u,dataFormat:h,compressed:d,width:a,height:s}=this._deduceParameters({format:c,type:u,dataFormat:h,compressed:d,data:i,width:a,height:s})),$r(0===this.depth,"texSubImage not supported for 3D textures"),i||(i=n),i&&i.data){const e=i;i=e.data,a=e.shape[0],s=e.shape[1]}i instanceof _o&&(i=i.handle),this.gl.bindTexture(this.target,this.handle),zr(this.gl,g,(()=>{if(d)this.gl.compressedTexSubImage2D(t,l,r,o,a,s,c,i);else if(null===i)this.gl.texSubImage2D(t,l,r,o,a,s,h,u,null);else if(ArrayBuffer.isView(i))this.gl.texSubImage2D(t,l,r,o,a,s,h,u,i,p);else if(i instanceof Ao){const e=lr(this.gl);e.bindBuffer(35052,i),e.texSubImage2D(t,l,r,o,a,s,h,u,p),e.bindBuffer(35052,null)}else ar(this.gl)?lr(this.gl).texSubImage2D(t,l,r,o,a,s,h,u,i):this.gl.texSubImage2D(t,l,r,o,h,u,i)})),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return tr.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:t}=this;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,this.handle),e}unbind(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:t}=this;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,null),e}_getDataType(e){let{data:t,compressed:n=!1}=e;return n?{data:t,dataType:"compressed"}:null===t?{data:t,dataType:"null"}:ArrayBuffer.isView(t)?{data:t,dataType:"typed-array"}:t instanceof _o?{data:t.handle,dataType:"buffer"}:t instanceof Ao?{data:t,dataType:"buffer"}:{data:t,dataType:"browser-object"}}_deduceParameters(e){const{format:t,data:n}=e;let{width:i,height:r,dataFormat:o,type:a,compressed:s}=e;const l=wo[t];return o=o||l&&l.dataFormat,a=a||l&&l.types[0],s=s||l&&l.compressed,({width:i,height:r}=this._deduceImageSize(n,i,r)),{dataFormat:o,type:a,compressed:s,width:i,height:r,format:t,data:n}}_deduceImageSize(e,t,n){let i;return i="undefined"!=typeof ImageData&&e instanceof ImageData?{width:e.width,height:e.height}:"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement?{width:e.naturalWidth,height:e.naturalHeight}:"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?{width:e.width,height:e.height}:"undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e?{width:t,height:n}:{width:t>=0?t:1,height:n>=0?n:1},$r(i,"Could not deduced texture size"),$r(void 0===t||i.width===t,"Deduced texture width does not match supplied width"),$r(void 0===n||i.height===n,"Deduced texture height does not match supplied height"),i}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const t=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),t}}_setParameter(e,t){switch(this.gl.bindTexture(this.target,this.handle),t=this._getNPOTParam(e,t),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,t);break;case 4096:case 4097:$r(!1);break;default:this.gl.texParameteri(this.target,e,t)}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return!(ar(this.gl)||!this.width||!this.height||io(this.width)&&io(this.height))}_updateForNPOT(e){void 0===e[this.gl.TEXTURE_MIN_FILTER]&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===e[this.gl.TEXTURE_WRAP_S]&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===e[this.gl.TEXTURE_WRAP_T]&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(e,t){if(this._isNPOT())switch(e){case 10241:-1===xo.indexOf(t)&&(t=9729);break;case 10242:case 10243:33071!==t&&(t=33071)}return t}}class So extends Co{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(e,t){return Co.isSupported(e,t)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;sr(e),(t instanceof Promise||"string"==typeof t)&&(t={data:t}),"string"==typeof t.data&&(t=Object.assign({},t,{data:(n=t.data,$r("string"==typeof n),n=""+n,new Promise(((e,t)=>{try{const i=new Image;i.onload=()=>e(i),i.onerror=()=>t(new Error("Could not load image ".concat(n,"."))),i.crossOrigin="anonymous",i.src=n}catch(e){t(e)}})))})),super(e,Object.assign({},t,{target:3553})),this.initialize(t),Object.seal(this)}}const To="EXT_color_buffer_float",Ro={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:To,bpp:2},33327:{gl2:To,bpp:4},34842:{gl2:To,bpp:8},33326:{gl2:To,bpp:4},33328:{gl2:To,bpp:8},34836:{gl2:To,bpp:16},35898:{gl2:To,bpp:4}};class Io extends so{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(e){let{format:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{format:null};return!t||function(e,t,n){const i=n[t];if(!i)return!1;const r=ar(e)&&i.gl2||i.gl1;return"string"==typeof r?e.getExtension(r):r}(e,t,Ro)}static getSamplesForFormat(e,t){let{format:n}=t;return e.getInternalformatParameter(36161,n,32937)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,t),this.initialize(t),Object.seal(this)}initialize(e){let{format:t,width:n=1,height:i=1,samples:r=0}=e;return $r(t,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==r&&ar(this.gl)?this.gl.renderbufferStorageMultisample(36161,r,t,n,i):this.gl.renderbufferStorage(36161,t,n,i),this.format=t,this.width=n,this.height=i,this.samples=r,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*Ro[this.format].bpp),this}resize(e){let{width:t,height:n}=e;return t!==this.width||n!==this.height?this.initialize({width:t,height:n,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}const Mo=256,Lo=1024,Do=16384,Oo=6144,jo=6145,No=6146,Fo=34041,ko="clear: bad arguments";function Uo(e){let{framebuffer:t=null,color:n=null,depth:i=null,stencil:r=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o={};t&&(o.framebuffer=t);let a=0;n&&(a|=Do,!0!==n&&(o.clearColor=n)),i&&(a|=Mo,!0!==i&&(o.clearDepth=i)),r&&(a|=Lo,!0!==i&&(o.clearStencil=i)),$r(0!==a,ko),zr(e,o,(()=>{e.clear(a)}))}const zo=[34069,34070,34071,34072,34073,34074];class Bo extends Co{get[Symbol.toStringTag](){return"TextureCube"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};sr(e),super(e,Object.assign({},t,{target:34067})),this.initialize(t),Object.seal(this)}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mipmaps:t=!0,parameters:n={}}=e;return this.opts=e,this.setCubeMapImageData(e).then((()=>{this.loaded=!0,t&&this.generateMipmap(e),this.setParameters(n)})),this}subImage(e){let{face:t,data:n,x:i=0,y:r=0,mipmapLevel:o=0}=e;return this._subImage({target:t,data:n,x:i,y:r,mipmapLevel:o})}async setCubeMapImageData(e){let{width:t,height:n,pixels:i,data:r,border:o=0,format:a=6408,type:s=5121}=e;const{gl:l}=this,c=i||r,u=await Promise.all(zo.map((e=>{const t=c[e];return Promise.all(Array.isArray(t)?t:[t])})));this.bind(),zo.forEach(((e,i)=>{u[i].length>1&&!1!==this.opts.mipmaps&&tr.warn("".concat(this.id," has mipmap and multiple LODs."))(),u[i].forEach(((i,r)=>{t&&n?l.texImage2D(e,r,a,t,n,o,a,s,i):l.texImage2D(e,r,a,a,s,i)}))})),this.unbind()}setImageDataForFace(e){const{face:t,width:n,height:i,pixels:r,data:o,border:a=0,format:s=6408,type:l=5121}=e,{gl:c}=this,u=r||o;return this.bind(),u instanceof Promise?u.then((n=>this.setImageDataForFace(Object.assign({},e,{face:t,data:n,pixels:n})))):this.width||this.height?c.texImage2D(t,0,s,n,i,a,s,l,u):c.texImage2D(t,0,s,s,l,u),this}}Bo.FACES=zo;class Go extends Co{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(e){return ar(e)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};lr(e),t=Object.assign({depth:1},t,{target:32879,unpackFlipY:!1}),super(e,t),this.initialize(t),Object.seal(this)}setImageData(e){let{level:t=0,dataFormat:n=6408,width:i,height:r,depth:o=1,border:a=0,format:s,type:l=5121,offset:c=0,data:u,parameters:h={}}=e;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),zr(this.gl,h,(()=>{ArrayBuffer.isView(u)&&this.gl.texImage3D(this.target,t,n,i,r,o,a,s,l,u),u instanceof _o&&(this.gl.bindBuffer(35052,u.handle),this.gl.texImage3D(this.target,t,n,i,r,o,a,s,l,c))})),u&&u.byteLength)this._trackAllocatedMemory(u.byteLength,"Texture");else{const e=Po[this.dataFormat]||4,t=Eo[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*e*t,"Texture")}return this.loaded=!0,this}}function Vo(e,t){const{gl:n,width:i,height:r,id:o}=e;return new ea(n,Object.assign({},t,{id:"framebuffer-for-".concat(o),width:i,height:r,attachments:{36064:e}}))}function Ho(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{sourceX:n=0,sourceY:i=0,sourceFormat:r=6408}=t;let{sourceAttachment:o=36064,target:a=null,sourceWidth:s,sourceHeight:l,sourceType:c}=t;const{framebuffer:u,deleteFramebuffer:h}=Wo(e);$r(u);const{gl:d,handle:p,attachments:f}=u;s=s||u.width,l=l||u.height,36064===o&&null===p&&(o=1028),$r(f[o]),c=c||f[o].type,a=function(e,t,n,i,r){if(e)return e;const o=uo(t=t||5121,{clamped:!1}),a=function(e){switch(e){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return $r(!1),0}}(n);return new o(i*r*a)}(a,c,r,s,l),c=c||co(a);const g=d.bindFramebuffer(36160,p);return d.readPixels(n,i,s,l,r,c,a),d.bindFramebuffer(36160,g||null),h&&u.delete(),a}function qo(e){let{sourceAttachment:t=36064,targetMaxHeight:n=Number.MAX_SAFE_INTEGER}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Ho(e,{sourceAttachment:t}),{width:r,height:o}=e;for(;o>n;)({data:i,width:r,height:o}=ho({data:i,width:r,height:o}));!function(e){let{data:t,width:n,height:i,bytesPerPixel:r=4,temp:o}=e;const a=n*r;o=o||new Uint8Array(a);for(let e=0;e<i/2;++e){const n=e*a,r=(i-e-1)*a;o.set(t.subarray(n,n+a)),t.copyWithin(n,r,r+a),t.set(o,r)}}({data:i,width:r,height:o});const a=document.createElement("canvas");a.width=r,a.height=o;const s=a.getContext("2d"),l=s.createImageData(r,o);return l.data.set(i),s.putImageData(l,0,0),a.toDataURL()}function Wo(e){return e instanceof ea?{framebuffer:e,deleteFramebuffer:!1}:{framebuffer:Vo(e),deleteFramebuffer:!0}}const Xo="TIMER_QUERY",Yo="ELEMENT_INDEX_UINT32",Ko={WEBGL2:[!1,!0],VERTEX_ARRAY_OBJECT:["OES_vertex_array_object",!0],[Xo]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],INSTANCED_RENDERING:["ANGLE_instanced_arrays",!0],MULTIPLE_RENDER_TARGETS:["WEBGL_draw_buffers",!0],[Yo]:["OES_element_index_uint",!0],BLEND_EQUATION_MINMAX:["EXT_blend_minmax",!0],FLOAT_BLEND:["EXT_float_blend"],COLOR_ENCODING_SRGB:["EXT_sRGB",!0],TEXTURE_DEPTH:["WEBGL_depth_texture",!0],TEXTURE_FLOAT:["OES_texture_float",!0],TEXTURE_HALF_FLOAT:["OES_texture_half_float",!0],TEXTURE_FILTER_LINEAR_FLOAT:["OES_texture_float_linear"],TEXTURE_FILTER_LINEAR_HALF_FLOAT:["OES_texture_half_float_linear"],TEXTURE_FILTER_ANISOTROPIC:["EXT_texture_filter_anisotropic"],COLOR_ATTACHMENT_RGBA32F:[function(e){const t=new So(e,{format:6408,type:5126,dataFormat:6408}),n=new ea(e,{id:"test-framebuffer",check:!1,attachments:{36064:t}}),i=n.getStatus();return t.delete(),n.delete(),36053===i},"EXT_color_buffer_float"],COLOR_ATTACHMENT_FLOAT:[!1,"EXT_color_buffer_float"],COLOR_ATTACHMENT_HALF_FLOAT:["EXT_color_buffer_half_float"],GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Zo=2;function Jo(e,t){return(t=Array.isArray(t)?t:[t]).every((t=>$o(e,t)))}function $o(e,t){return e.luma=e.luma||{},e.luma.caps=e.luma.caps||{},void 0===e.luma.caps[t]&&(e.luma.caps[t]=function(e,t){const n=Ko[t];let i;$r(n,t);const r=ar(e)&&n[1]||n[0];if("function"==typeof r)i=r(e);else if(Array.isArray(r)){i=!0;for(const t of r)i=i&&Boolean(e.getExtension(t))}else"string"==typeof r?i=Boolean(e.getExtension(r)):"boolean"==typeof r?i=r:$r(!1);return i}(e,t)),e.luma.caps[t]||tr.log(Zo,"Feature: ".concat(t," not supported"))(),e.luma.caps[t]}const Qo="Multiple render targets not supported";class ea extends so{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{colorBufferFloat:n,colorBufferHalfFloat:i}=t;let r=!0;return n&&(r=Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),i&&(r=r&&Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("EXT_color_buffer_half_float"))),r}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new ea(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const e=lr(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const e=lr(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,t),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(t),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(e){let{width:t=1,height:n=1,attachments:i=null,color:r=!0,depth:o=!0,stencil:a=!1,check:s=!0,readBuffer:l,drawBuffers:c}=e;if($r(t>=0&&n>=0,"Width and height need to be integers"),this.width=t,this.height=n,i)for(const e in i){const r=i[e];(Array.isArray(r)?r[0]:r).resize({width:t,height:n})}else i=this._createDefaultAttachments(r,o,a,t,n);this.update({clearAttachments:!0,attachments:i,readBuffer:l,drawBuffers:c}),i&&s&&this.checkStatus()}delete(){for(const e of this.ownResources)e.delete();return super.delete(),this}update(e){let{attachments:t={},readBuffer:n,drawBuffers:i,clearAttachments:r=!1,resizeAttachments:o=!0}=e;this.attach(t,{clearAttachments:r,resizeAttachments:o});const{gl:a}=this,s=a.bindFramebuffer(36160,this.handle);return n&&this._setReadBuffer(n),i&&this._setDrawBuffers(i),a.bindFramebuffer(36160,s||null),this}resize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{width:t,height:n}=e;if(null===this.handle)return $r(void 0===t&&void 0===n),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;void 0===t&&(t=this.gl.drawingBufferWidth),void 0===n&&(n=this.gl.drawingBufferHeight),t!==this.width&&n!==this.height&&tr.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(t,"x").concat(n))();for(const e in this.attachments)this.attachments[e].resize({width:t,height:n});return this.width=t,this.height=n,this}attach(e){let{clearAttachments:t=!1,resizeAttachments:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i={};t&&Object.keys(this.attachments).forEach((e=>{i[e]=null})),Object.assign(i,e);const r=this.gl.bindFramebuffer(36160,this.handle);for(const e in i){$r(void 0!==e,"Misspelled framebuffer binding point?");const t=Number(e),r=i[t];let o=r;if(o)if(o instanceof Io)this._attachRenderbuffer({attachment:t,renderbuffer:o});else if(Array.isArray(r)){const[e,n=0,i=0]=r;o=e,this._attachTexture({attachment:t,texture:e,layer:n,level:i})}else this._attachTexture({attachment:t,texture:o,layer:0,level:0});else this._unattach(t);n&&o&&o.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,r||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter((e=>!this.attachments[e])).forEach((e=>{delete this.attachments[e]}))}checkStatus(){const{gl:e}=this,t=this.getStatus();if(36053!==t)throw new Error(function(e){return(ea.STATUS||{})[e]||"Framebuffer error ".concat(e)}(t));return this}getStatus(){const{gl:e}=this,t=e.bindFramebuffer(36160,this.handle),n=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,t||null),n}clear(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{color:t,depth:n,stencil:i,drawBuffers:r=[]}=e,o=this.gl.bindFramebuffer(36160,this.handle);return(t||n||i)&&Uo(this.gl,{color:t,depth:n,stencil:i}),r.forEach(((e,t)=>{!function(e){let{framebuffer:t=null,buffer:n=Oo,drawBuffer:i=0,value:r=[0,0,0,0]}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};lr(e),zr(e,{framebuffer:t},(()=>{switch(n){case Oo:switch(r.constructor){case Int32Array:e.clearBufferiv(n,i,r);break;case Uint32Array:e.clearBufferuiv(n,i,r);break;case Float32Array:default:e.clearBufferfv(n,i,r)}break;case jo:e.clearBufferfv(jo,0,[r]);break;case No:e.clearBufferiv(No,0,[r]);break;case Fo:const[t,o]=r;e.clearBufferfi(Fo,0,t,o);break;default:$r(!1,ko)}}))}(this.gl,{drawBuffer:t,value:e})})),this.gl.bindFramebuffer(36160,o||null),this}readPixels(){return tr.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return tr.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return tr.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return tr.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return tr.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return tr.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(e){let{attachments:t=[],x:n=0,y:i=0,width:r,height:o}=e;const a=lr(this.gl),s=a.bindFramebuffer(36008,this.handle);return 0===n&&0===i&&void 0===r&&void 0===o?a.invalidateFramebuffer(36008,t):a.invalidateFramebuffer(36008,t,n,i,r,o),a.bindFramebuffer(36008,s),this}getAttachmentParameter(e,t,n){let i=this._getAttachmentParameterFallback(t);return null===i&&(this.gl.bindFramebuffer(36160,this.handle),i=this.gl.getFramebufferAttachmentParameter(36160,e,t),this.gl.bindFramebuffer(36160,null)),n&&i>1e3&&(i=eo(this.gl,i)),i}getAttachmentParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const i={};for(const r of n)i[t?eo(this.gl,r):r]=this.getAttachmentParameter(e,r,t);return i}getParameters(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=Object.keys(this.attachments),n={};for(const i of t){const t=Number(i);n[e?eo(this.gl,t):t]=this.getAttachmentParameters(t,e)}return n}show(){return"undefined"!=typeof window&&window.open(qo(this),"luma-debug-texture"),this}log(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e>tr.level||"undefined"==typeof window)return this;t=t||"Framebuffer ".concat(this.id);const n=qo(this,{targetMaxHeight:100});return tr.image({logLevel:e,message:t,image:n},t)(),this}bind(){let{target:e=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(e,this.handle),this}unbind(){let{target:e=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,t,n,i,r){let o=null;return e&&(o=o||{},o[36064]=new So(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:i,height:r,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(o[36064])),t&&n?(o=o||{},o[33306]=new Io(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:i,height:111}),this.ownResources.push(o[33306])):t?(o=o||{},o[36096]=new Io(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:i,height:r}),this.ownResources.push(o[36096])):n&&$r(!1),o}_unattach(e){const t=this.attachments[e];t&&(t instanceof Io?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer(e){let{attachment:t=36064,renderbuffer:n}=e;const{gl:i}=this;i.framebufferRenderbuffer(36160,t,36161,n.handle),this.attachments[t]=n}_attachTexture(e){let{attachment:t=36064,texture:n,layer:i,level:r}=e;const{gl:o}=this;switch(o.bindTexture(n.target,n.handle),n.target){case 35866:case 32879:lr(o).framebufferTextureLayer(36160,t,n.target,r,i);break;case 34067:const e=function(e){return e<34069?e+34069:e}(i);o.framebufferTexture2D(36160,t,e,n.handle,r);break;case 3553:o.framebufferTexture2D(36160,t,3553,n.handle,r);break;default:$r(!1,"Illegal texture type")}o.bindTexture(n.target,null),this.attachments[t]=n}_setReadBuffer(e){const t=ar(n=this.gl)?n:null;var n;t?t.readBuffer(e):$r(36064===e||1029===e,Qo),this.readBuffer=e}_setDrawBuffers(e){const{gl:t}=this,n=lr(t);if(n)n.drawBuffers(e);else{const n=t.getExtension("WEBGL_draw_buffers");n?n.drawBuffersWEBGL(e):$r(1===e.length&&(36064===e[0]||1029===e[0]),Qo)}this.drawBuffers=e}_getAttachmentParameterFallback(e){const t=function(e){e.luma=e.luma||{},e.luma.caps=e.luma.caps||{};for(const t in Ko)void 0===e.luma.caps[t]&&(e.luma.caps[t]=$o(e,t));return e.luma.caps}(this.gl);switch(e){case 36052:return t.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return t.WEBGL2?null:8;case 33297:return t.WEBGL2?null:5125;case 33296:return t.WEBGL2||t.EXT_sRGB?null:9729;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}}ea.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];const ta={5126:ga.bind(null,"uniform1fv",sa,1,ma),35664:ga.bind(null,"uniform2fv",sa,2,ma),35665:ga.bind(null,"uniform3fv",sa,3,ma),35666:ga.bind(null,"uniform4fv",sa,4,ma),5124:ga.bind(null,"uniform1iv",la,1,ma),35667:ga.bind(null,"uniform2iv",la,2,ma),35668:ga.bind(null,"uniform3iv",la,3,ma),35669:ga.bind(null,"uniform4iv",la,4,ma),35670:ga.bind(null,"uniform1iv",la,1,ma),35671:ga.bind(null,"uniform2iv",la,2,ma),35672:ga.bind(null,"uniform3iv",la,3,ma),35673:ga.bind(null,"uniform4iv",la,4,ma),35674:ga.bind(null,"uniformMatrix2fv",sa,4,ya),35675:ga.bind(null,"uniformMatrix3fv",sa,9,ya),35676:ga.bind(null,"uniformMatrix4fv",sa,16,ya),35678:fa,35680:fa,5125:ga.bind(null,"uniform1uiv",ca,1,ma),36294:ga.bind(null,"uniform2uiv",ca,2,ma),36295:ga.bind(null,"uniform3uiv",ca,3,ma),36296:ga.bind(null,"uniform4uiv",ca,4,ma),35685:ga.bind(null,"uniformMatrix2x3fv",sa,6,ya),35686:ga.bind(null,"uniformMatrix2x4fv",sa,8,ya),35687:ga.bind(null,"uniformMatrix3x2fv",sa,6,ya),35688:ga.bind(null,"uniformMatrix3x4fv",sa,12,ya),35689:ga.bind(null,"uniformMatrix4x2fv",sa,8,ya),35690:ga.bind(null,"uniformMatrix4x3fv",sa,12,ya),35678:fa,35680:fa,35679:fa,35682:fa,36289:fa,36292:fa,36293:fa,36298:fa,36299:fa,36300:fa,36303:fa,36306:fa,36307:fa,36308:fa,36311:fa},na={},ia={},ra={},oa=[0];function aa(e,t,n,i){1===t&&"boolean"==typeof e&&(e=e?1:0),Number.isFinite(e)&&(oa[0]=e,e=oa);const r=e.length;if(r%t&&tr.warn("Uniform size should be multiples of ".concat(t),e)(),e instanceof n)return e;let o=i[r];o||(o=new n(r),i[r]=o);for(let t=0;t<r;t++)o[t]=e[t];return o}function sa(e,t){return aa(e,t,Float32Array,na)}function la(e,t){return aa(e,t,Int32Array,ia)}function ca(e,t){return aa(e,t,Uint32Array,ra)}function ua(e,t,n){const i=ta[n.type];if(!i)throw new Error("Unknown GLSL uniform type ".concat(n.type));return i().bind(null,e,t)}function ha(e){if("]"!==e[e.length-1])return{name:e,length:1,isArray:!1};const t=e.match(/([^[]*)(\[[0-9]+\])?/);if(!t||t.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(e));return{name:t[1],length:t[2]||1,isArray:Boolean(t[2])}}function da(e){return Array.isArray(e)||ArrayBuffer.isView(e)?function(e){if(0===e.length)return!1;const t=Math.min(e.length,16);for(let n=0;n<t;++n)if(!Number.isFinite(e[n]))return!1;return!0}(e):!!isFinite(e)||!0===e||!1===e||e instanceof Co||e instanceof Io||e instanceof ea&&Boolean(e.texture)}function pa(e,t,n){if(Array.isArray(n)||ArrayBuffer.isView(n))if(e[t]){const i=e[t];for(let e=0,t=n.length;e<t;++e)i[e]=n[e]}else e[t]=n.slice();else e[t]=n}function fa(){let e=null;return(t,n,i)=>{const r=e!==i;return r&&(t.uniform1i(n,i),e=i),r}}function ga(e,t,n,i){let r=null,o=null;return(a,s,l)=>{const c=t(l,n),u=c.length;let h=!1;if(null===r)r=new Float32Array(u),o=u,h=!0;else{$r(o===u,"Uniform length cannot change.");for(let e=0;e<u;++e)if(c[e]!==r[e]){h=!0;break}}return h&&(i(a,e,s,c),r.set(c)),h}}function ma(e,t,n,i){e[t](n,i)}function ya(e,t,n,i){e[t](n,!1,i)}function va(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed";const n=e.match(/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/);return n?n[1]:t}const ba=35632,_a=35633;function wa(e,t){let n="";for(let i=0;i<t.length;i++){const r=t[i];if((e[i+3]||e[i+2]||e[i+1])&&(n+="".concat(r,"\n"),e[i+1])){const t=e[i+1],r=t.split(":",3),o=r[0],a=parseInt(r[1],10)||0,s=t.substring(r.join(":").length+1).trim();n+=Pa("^^^ ".concat(o,": ").concat(s,"\n\n"),a)}}return n}function Pa(e,t){let n="";for(let e=0;e<t;++e)n+=" ";return"".concat(n).concat(e)}class Ea extends so{get[Symbol.toStringTag](){return"Shader"}static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return $r(!1),"unknown"}}constructor(e,t){sr(e),$r("string"==typeof t.source,"Shader: GLSL source code must be a JavaScript string"),super(e,{id:va(t.source,null)||t.id||no("unnamed ".concat(Ea.getTypeName(t.shaderType)))}),this.shaderType=t.shaderType,this.source=t.source,this.initialize(t)}initialize(e){let{source:t}=e;const n=va(t,null);n&&(this.id=no(n)),this._compile(t)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return"".concat(Ea.getTypeName(this.shaderType),":").concat(this.id)}getName(){return va(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.source;if(e.startsWith("#version ")||(e="#version 100\n".concat(e)),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const e=this.gl.getShaderInfoLog(this.handle),{shaderName:t,errors:n,warnings:i}=function(e,t,n,i){const r=e.split(/\r?\n/),o={},a={},s=i||va(t)||"(unnamed)",l="".concat(function(e){switch(e){case ba:return"fragment";case _a:return"vertex";default:return"unknown type"}}(n)," shader ").concat(s);for(let t=0;t<r.length;t++){const n=r[t];if(n.length<=1)continue;const i=n.split(":"),s=i[0],c=parseInt(i[2],10);if(isNaN(c))throw new Error("GLSL compilation error in ".concat(l,": ").concat(e));"WARNING"!==s?o[c]=n:a[c]=n}const c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ";const i=e.split(/\r?\n/),r=String(i.length+t-1).length;return i.map(((e,i)=>{const o=String(i+t),a=o.length;return Pa(o,r-a)+n+e}))}(t);return{shaderName:l,errors:wa(o,c),warnings:wa(a,c)}}(e,this.source,this.shaderType,this.id);throw tr.error("GLSL compilation errors in ".concat(t,"\n").concat(n))(),tr.warn("GLSL compilation warnings in ".concat(t,"\n").concat(i))(),new Error("GLSL compilation errors in ".concat(t))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class xa extends Ea{get[Symbol.toStringTag](){return"VertexShader"}constructor(e,t){"string"==typeof t&&(t={source:t}),super(e,Object.assign({},t,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class Aa extends Ea{get[Symbol.toStringTag](){return"FragmentShader"}constructor(e,t){"string"==typeof t&&(t={source:t}),super(e,Object.assign({},t,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const Ca=5120,Sa=5121,Ta=5122,Ra=5123,Ia=0,Ma=1,La=2,Da=3,Oa=4,ja=5,Na=6,Fa=5126,ka=5124,Ua=5125,za={[Fa]:[Fa,1,"float"],35664:[Fa,2,"vec2"],35665:[Fa,3,"vec3"],35666:[Fa,4,"vec4"],[ka]:[ka,1,"int"],35667:[ka,2,"ivec2"],35668:[ka,3,"ivec3"],35669:[ka,4,"ivec4"],[Ua]:[Ua,1,"uint"],36294:[Ua,2,"uvec2"],36295:[Ua,3,"uvec3"],36296:[Ua,4,"uvec4"],35670:[Fa,1,"bool"],35671:[Fa,2,"bvec2"],35672:[Fa,3,"bvec3"],35673:[Fa,4,"bvec4"],35674:[Fa,8,"mat2"],35685:[Fa,8,"mat2x3"],35686:[Fa,8,"mat2x4"],35675:[Fa,12,"mat3"],35687:[Fa,12,"mat3x2"],35688:[Fa,12,"mat3x4"],35676:[Fa,16,"mat4"],35689:[Fa,16,"mat4x2"],35690:[Fa,16,"mat4x3"]};function Ba(e){const t=za[e];if(!t)return null;const[n,i]=t;return{type:n,components:i}}function Ga(e,t){switch(e){case Ca:case Sa:case Ta:case Ra:e=Fa}for(const n in za){const[i,r,o]=za[n];if(i===e&&r===t)return{glType:n,name:o}}return null}class Va{constructor(e){this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}getAttributeInfo(e){const t=Number(e);return Number.isFinite(t)?this.attributeInfosByLocation[t]:this.attributeInfosByName[e]||null}getAttributeLocation(e){const t=this.getAttributeInfo(e);return t?t.location:-1}getAttributeAccessor(e){const t=this.getAttributeInfo(e);return t?t.accessor:null}getVaryingInfo(e){const t=Number(e);return Number.isFinite(t)?this.varyingInfos[t]:this.varyingInfosByName[e]||null}getVaryingIndex(e){const t=this.getVaryingInfo();return t?t.location:-1}getVaryingAccessor(e){const t=this.getVaryingInfo();return t?t.accessor:null}_readAttributesFromProgram(e){const{gl:t}=e,n=t.getProgramParameter(e.handle,35721);for(let i=0;i<n;i++){const{name:n,type:r,size:o}=t.getActiveAttrib(e.handle,i),a=t.getAttribLocation(e.handle,n);a>=0&&this._addAttribute(a,n,r,o)}this.attributeInfos.sort(((e,t)=>e.location-t.location))}_readVaryingsFromProgram(e){const{gl:t}=e;if(!ar(t))return;const n=t.getProgramParameter(e.handle,35971);for(let i=0;i<n;i++){const{name:n,type:r,size:o}=t.getTransformFeedbackVarying(e.handle,i);this._addVarying(i,n,r,o)}this.varyingInfos.sort(((e,t)=>e.location-t.location))}_addAttribute(e,t,n,i){const{type:r,components:o}=Ba(n),a={type:r,size:i*o};this._inferProperties(e,t,a);const s={location:e,name:t,accessor:new mo(a)};this.attributeInfos.push(s),this.attributeInfosByLocation[e]=s,this.attributeInfosByName[s.name]=s}_inferProperties(e,t,n){/instance/i.test(t)&&(n.divisor=1)}_addVarying(e,t,n,i){const{type:r,components:o}=Ba(n),a={location:e,name:t,accessor:new mo({type:r,size:i*o})};this.varyingInfos.push(a),this.varyingInfosByName[a.name]=a}}const Ha=35981,qa=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class Wa extends so{get[Symbol.toStringTag](){return"Program"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,t),this.stubRemovedMethods("Program","v6.0",qa),this._isCached=!1,this.initialize(t),Object.seal(this),this._setId(t.id)}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{hash:t,vs:n,fs:i,varyings:r,bufferMode:o=Ha}=e;return this.hash=t||"",this.vs="string"==typeof n?new xa(this.gl,{id:"".concat(e.id,"-vs"),source:n}):n,this.fs="string"==typeof i?new Aa(this.gl,{id:"".concat(e.id,"-fs"),source:i}):i,$r(this.vs instanceof xa),$r(this.fs instanceof Aa),this.uniforms={},this._textureUniforms={},r&&r.length>0&&(lr(this.gl),this.varyings=r,this.gl2.transformFeedbackVaryings(this.handle,r,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new Va(this),this.setProps(e)}delete(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isCached?this:super.delete(e)}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw(e){let{logPriority:t,drawMode:n=4,vertexCount:i,offset:r=0,start:o,end:a,isIndexed:s=!1,indexType:l=5123,instanceCount:c=0,isInstanced:u=c>0,vertexArray:h=null,transformFeedback:d,framebuffer:p,parameters:f={},uniforms:g,samplers:m}=e;if((g||m)&&(tr.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(g||{})),tr.priority>=t){const e=p?p.id:"default",r="mode=".concat(eo(this.gl,n)," verts=").concat(i," ")+"instances=".concat(c," indexType=").concat(eo(this.gl,l)," ")+"isInstanced=".concat(u," isIndexed=").concat(s," ")+"Framebuffer=".concat(e);tr.log(t,r)()}return $r(h),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===i||u&&0===c||(h.bindForDraw(i,c,(()=>{if(void 0!==p&&(f=Object.assign({},f,{framebuffer:p})),d){const e=function(e){switch(e){case Ia:return Ia;case Ma:case Da:case La:return Ma;case Oa:case ja:case Na:return Oa;default:return $r(!1),0}}(n);d.begin(e)}this._bindTextures(),zr(this.gl,f,(()=>{s&&u?this.gl2.drawElementsInstanced(n,i,l,r,c):s&&ar(this.gl)&&!isNaN(o)&&!isNaN(a)?this.gl2.drawRangeElements(n,o,a,i,l,r):s?this.gl.drawElements(n,i,l,r):u?this.gl2.drawArraysInstanced(n,r,i,c):this.gl.drawArrays(n,r,i)})),d&&d.end()})),0))}setUniforms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};tr.priority>=2&&function(e,t,n){for(const i in e){const r=e[i];if((!n||Boolean(n[i]))&&!da(r))throw t=t?"".concat(t," "):"",console.error("".concat(t," Bad uniform ").concat(i),r),new Error("".concat(t," Bad uniform ").concat(i))}}(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const t in e){const n=e[t],i=this._uniformSetters[t];if(i){let e=n,r=!1;if(e instanceof ea&&(e=e.texture),e instanceof Co)if(r=this.uniforms[t]!==n,r){void 0===i.textureIndex&&(i.textureIndex=this._textureIndexCounter++);const n=e,{textureIndex:r}=i;n.bind(r),e=r,this._textureUniforms[t]=n}else e=i.textureIndex;else this._textureUniforms[t]&&delete this._textureUniforms[t];(i(e)||r)&&pa(this.uniforms,t,n)}}return this}_areTexturesRenderable(){let e=!0;for(const t in this._textureUniforms){const n=this._textureUniforms[t];n.update(),e=e&&n.loaded}return e}_bindTextures(){for(const e in this._textureUniforms){const t=this._uniformSetters[e].textureIndex;this._textureUniforms[e].bind(t)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){const t=this.gl.getAttachedShaders(e),n={};for(const e of t)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:n.vs=new xa({handle:e});break;case 35632:n.fs=new Aa({handle:e})}return n}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){const e=this._getName();this.id=no(e)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?"".concat(e,"-program"):"program",e}_compileAndLink(){const{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),tr.time(4,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),tr.timeEnd(4,"linkProgram for ".concat(this._getName()))(),e.debug||tr.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)));if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(e.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let t=0;t<this._uniformCount;t++){const n=this.gl.getActiveUniform(this.handle,t),{name:i}=ha(n.name);let r=e.getUniformLocation(this.handle,i);if(this._uniformSetters[i]=ua(e,r,n),n.size>1)for(let t=0;t<n.size;t++)r=e.getUniformLocation(this.handle,"".concat(i,"[").concat(t,"]")),this._uniformSetters["".concat(i,"[").concat(t,"]")]=ua(e,r,n)}this._textureIndexCounter=0}getActiveUniforms(e,t){return this.gl2.getActiveUniforms(this.handle,e,t)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,t){return this.gl2.getActiveUniformBlockParameter(this.handle,e,t)}uniformBlockBinding(e,t){this.gl2.uniformBlockBinding(this.handle,e,t)}}class Xa{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new Xa(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find((t=>t.name===e.name))||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){const t="string"==typeof e?e:e.name;this._defaultModules=this._defaultModules.filter((e=>e.name!==t)),this.stateHash++}addShaderHook(e,t){t&&(e=Object.assign(t,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{vs:t="",fs:n="",defines:i={},inject:r={},varyings:o=[],bufferMode:a=35981,transpileToGLSL100:s=!1}=e,l=this._getModuleList(e.modules),c=this._getHash(t),u=this._getHash(n),h=l.map((e=>this._getHash(e.name))).sort(),d=o.map((e=>this._getHash(e))),p=Object.keys(i).sort(),f=Object.keys(r).sort(),g=[],m=[];for(const e of p)g.push(this._getHash(e)),g.push(this._getHash(i[e]));for(const e of f)m.push(this._getHash(e)),m.push(this._getHash(r[e]));const y="".concat(c,"/").concat(u,"D").concat(g.join("/"),"M").concat(h.join("/"),"I").concat(m.join("/"),"V").concat(d.join("/"),"H").concat(this.stateHash,"B").concat(a).concat(s?"T":"");if(!this._programCache[y]){const e=function(e,t){const{vs:n,fs:i}=t,r=_i(t.modules||[]);return{gl:e,vs:Qi(e,Object.assign({},t,{source:n,type:pi,modules:r})),fs:Qi(e,Object.assign({},t,{source:i,type:fi,modules:r})),getUniforms:er(r)}}(this.gl,{vs:t,fs:n,modules:l,inject:r,defines:i,hookFunctions:this._hookFunctions,transpileToGLSL100:s});this._programCache[y]=new Wa(this.gl,{hash:y,vs:e.vs,fs:e.fs,varyings:o,bufferMode:a}),this._getUniforms[y]=e.getUniforms||(e=>{}),this._useCounts[y]=0}return this._useCounts[y]++,this._programCache[y]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){const t=e.hash;this._useCounts[t]--,0===this._useCounts[t]&&(this._programCache[t].delete(),delete this._programCache[t],delete this._getUniforms[t],delete this._useCounts[t])}_getHash(e){return void 0===this._hashes[e]&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=new Array(this._defaultModules.length+e.length),n={};let i=0;for(let e=0,r=this._defaultModules.length;e<r;++e){const r=this._defaultModules[e],o=r.name;t[i++]=r,n[o]=!0}for(let r=0,o=e.length;r<o;++r){const o=e[r],a=o.name;n[a]||(t[i++]=o,n[a]=!0)}return t.length=i,t}}const Ya="#define SMOOTH_EDGE_RADIUS 0.5",Ka={name:"geometry",vs:"\n".concat(Ya,"\n\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry = VertexGeometry(\n  vec4(0.0, 0.0, 1.0, 0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec2(0.0),\n  vec3(0.0)\n);\n"),fs:"\n".concat(Ya,"\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n")},Za=Object.keys(ri).map((e=>"const int COORDINATE_SYSTEM_".concat(e," = ").concat(ri[e],";"))).join(""),Ja=Object.keys(oi).map((e=>"const int PROJECTION_MODE_".concat(e," = ").concat(oi[e],";"))).join(""),$a=Object.keys(ai).map((e=>"const int UNIT_".concat(e.toUpperCase()," = ").concat(ai[e],";"))).join(""),Qa="".concat(Za,"\n").concat(Ja,"\n").concat($a,"\n\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\nuniform vec3 project_uCommonOrigin;\nuniform bool project_uPseudoMeters;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0;\nconst float GLOBE_RADIUS = 256.0;\nfloat project_size_at_latitude(float lat) {\n  float y = clamp(lat, -89.9, 89.9);\n  return 1.0 / cos(radians(y));\n}\n\nfloat project_size() {\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&\n    project_uPseudoMeters == false) {\n    \n    if (geometry.position.w == 0.0) {\n      return project_size_at_latitude(geometry.worldPosition.y);\n    }\n  \n    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;\n    float y2 = y * y;\n    float y4 = y2 * y2;\n    float y6 = y4 * y2;\n    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;\n  }\n  return 1.0;\n}\n\nfloat project_size_at_latitude(float meters, float lat) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);\n}\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size();\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy * project_size();\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter * project_size();\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\nmat3 project_get_orientation_matrix(vec3 up) {\n  vec3 uz = normalize(up);\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\n  vec3 uy = cross(uz, ux);\n  return mat3(ux, uy, uz);\n}\n\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    transform = project_get_orientation_matrix(commonPosition);\n    return true;\n  }\n  return false;\n}\nvec3 project_normal(vec3 vector) {\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n  mat3 rotation;\n  if (project_needs_rotation(geometry.position.xyz, rotation)) {\n    n = rotation * n;\n  }\n  return n;\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x + 180., 360.0) - 180.;\n  }\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\nvec3 project_globe_(vec3 lnglatz) {\n  float lambda = radians(lnglatz.x);\n  float phi = radians(lnglatz.y);\n  float cosPhi = cos(phi);\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\n\n  return vec3(\n    sin(lambda) * cosPhi,\n    -cos(lambda) * cosPhi,\n    sin(phi)\n  ) * D;\n}\nvec4 project_position(vec4 position, vec3 position64Low) {\n  vec4 position_world = project_uModelMatrix * position;\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_mercator_(position_world.xy),\n        project_size_at_latitude(position_world.z, position_world.y),\n        position_world.w\n      );\n    }\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\n      position_world.xyz += project_uCoordinateOrigin;\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_globe_(position_world.xyz),\n        position_world.w\n      );\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {\n        return vec4(\n          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,\n          project_size(position_world.z),\n          position_world.w\n        );\n      }\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\n    position_world.xyz -= project_uCoordinateOrigin;\n  }\n  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_LOW);\n}\n\nvec3 project_position(vec3 position, vec3 position64Low) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\n  return projected_position.xy;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  return viewProjectionMatrix * position + center;\n}\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters) * project_uScale;\n}\nfloat project_size_to_pixel(float size, int unit) {\n  if (unit == UNIT_METERS) return project_size_to_pixel(size);\n  if (unit == UNIT_COMMON) return size * project_uScale;\n  return size;\n}\nfloat project_pixel_size(float pixels) {\n  return pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels / project_uScale;\n}\n");function es(e,t){if(e===t)return!0;if(Array.isArray(e)){const n=e.length;if(!t||t.length!==n)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}return!1}function ts(e){let t,n={};return i=>{for(const r in i)if(!es(i[r],n[r])){t=e(i),n=i;break}return t}}const ns=[0,0,0,0],is=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],rs=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],os=[0,0,0],as=[0,0,0],ss=ts((function({viewport:e,devicePixelRatio:t,coordinateSystem:n,coordinateOrigin:i}){const{projectionCenter:r,viewProjectionMatrix:o,originCommon:a,cameraPosCommon:s,shaderCoordinateOrigin:l,geospatialOrigin:c}=function(e,t,n){const{viewMatrixUncentered:i,projectionMatrix:r}=e;let{viewMatrix:o,viewProjectionMatrix:a}=e,s=ns,l=ns,c=e.cameraPosition;const{geospatialOrigin:u,shaderCoordinateOrigin:h,offsetMode:d}=ls(e,t,n);return d&&(l=e.projectPosition(u||h),c=[c[0]-l[0],c[1]-l[1],c[2]-l[2]],l[3]=1,s=P([],l,a),o=i||o,a=T([],r,o),a=T([],a,is)),{viewMatrix:o,viewProjectionMatrix:a,projectionCenter:s,originCommon:l,cameraPosCommon:c,shaderCoordinateOrigin:h,geospatialOrigin:u}}(e,n,i),u=e.getDistanceScales(),h=[e.width*t,e.height*t],d=P([],[0,0,-e.focalDistance,1],e.projectionMatrix)[3]||1,p={project_uCoordinateSystem:n,project_uProjectionMode:e.projectionMode,project_uCoordinateOrigin:l,project_uCommonOrigin:a.slice(0,3),project_uCenter:r,project_uPseudoMeters:Boolean(e._pseudoMeters),project_uViewportSize:h,project_uDevicePixelRatio:t,project_uFocalDistance:d,project_uCommonUnitsPerMeter:u.unitsPerMeter,project_uCommonUnitsPerWorldUnit:u.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:os,project_uScale:e.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:o,project_uModelMatrix:rs,project_uCameraPosition:s};if(c){const t=e.getDistanceScales(c);switch(n){case ri.METER_OFFSETS:p.project_uCommonUnitsPerWorldUnit=t.unitsPerMeter,p.project_uCommonUnitsPerWorldUnit2=t.unitsPerMeter2;break;case ri.LNGLAT:case ri.LNGLAT_OFFSETS:e._pseudoMeters||(p.project_uCommonUnitsPerMeter=t.unitsPerMeter),p.project_uCommonUnitsPerWorldUnit=t.unitsPerDegree,p.project_uCommonUnitsPerWorldUnit2=t.unitsPerDegree2;break;case ri.CARTESIAN:p.project_uCommonUnitsPerWorldUnit=[1,1,t.unitsPerMeter[2]],p.project_uCommonUnitsPerWorldUnit2=[0,0,t.unitsPerMeter2[2]]}}return p}));function ls(e,t,n=as){n.length<3&&(n=[n[0],n[1],0]);let i,r=n,o=!0;switch(i=t===ri.LNGLAT_OFFSETS||t===ri.METER_OFFSETS?n:e.isGeospatial?[Math.fround(e.longitude),Math.fround(e.latitude),0]:null,e.projectionMode){case oi.WEB_MERCATOR:t!==ri.LNGLAT&&t!==ri.CARTESIAN||(i=[0,0,0],o=!1);break;case oi.WEB_MERCATOR_AUTO_OFFSET:t===ri.LNGLAT?r=i:t===ri.CARTESIAN&&(r=[Math.fround(e.center[0]),Math.fround(e.center[1]),0],i=e.unprojectPosition(r),r[0]-=n[0],r[1]-=n[1],r[2]-=n[2]);break;case oi.IDENTITY:r=e.position.map(Math.fround),r[2]=r[2]||0;break;case oi.GLOBE:o=!1,i=null;break;default:o=!1}return{geospatialOrigin:i,shaderCoordinateOrigin:r,offsetMode:o}}const cs={},us={name:"project",dependencies:[{name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 1.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 1.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null},Ka],vs:Qa,getUniforms:function(e=cs){return"viewport"in e?function({viewport:e,devicePixelRatio:t=1,modelMatrix:n=null,coordinateSystem:i=ri.DEFAULT,coordinateOrigin:r=as,autoWrapLongitude:o=!1}){i===ri.DEFAULT&&(i=e.isGeospatial?ri.LNGLAT:ri.CARTESIAN);const a=ss({viewport:e,devicePixelRatio:t,coordinateSystem:i,coordinateOrigin:r});return a.project_uWrapLongitude=o,a.project_uModelMatrix=n||rs,a}(e):{}}},hs=[us],ds=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function ps(e){const t=Xa.getDefaultProgramManager(e);for(const e of hs)t.addDefaultModule(e);for(const e of ds)t.addShaderHook(e);return t}class fs{constructor(e,{deck:t,stats:n,viewport:i,timeline:r}={}){c(this,"layers",void 0),c(this,"context",void 0),c(this,"resourceManager",void 0),c(this,"_lastRenderedLayers",[]),c(this,"_needsRedraw",!1),c(this,"_needsUpdate",!1),c(this,"_nextLayers",null),c(this,"_debug",!1),c(this,"activateViewport",(e=>{et("layerManager.activateViewport",this,e),e&&(this.context.viewport=e)})),this.layers=[],this.resourceManager=new In({gl:e,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:e,deck:t,programManager:e&&ps(e),stats:n||new at({id:"deck.gl"}),viewport:i||new di({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:r||new Ee,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const n of this.layers){const i=n.getNeedsRedraw(e);t=t||i}return t}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e}={}){return e?this.layers.filter((t=>e.find((e=>0===t.id.indexOf(e))))):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,t){et("layerManager.setLayers",this,t,e),this._lastRenderedLayers=e;const n=tt(e,Boolean);for(const e of n)e.context=this.context;this._updateLayers(this.layers,n)}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}_handleError(e,t,n){n.raiseError(t,"".concat(e," of ").concat(n))}_updateLayers(e,t){const n={};for(const t of e)n[t.id]?Je.warn("Multiple old layers with same id ".concat(t.id))():n[t.id]=t;const i=[];this._updateSublayersRecursively(t,n,i),this._finalizeOldLayers(n);let r=!1;for(const e of i)if(e.hasUniformTransition()){r="Uniform transition in ".concat(e);break}this._needsUpdate=r,this.layers=i}_updateSublayersRecursively(e,t,n){for(const i of e){i.context=this.context;const e=t[i.id];null===e&&Je.warn("Multiple new layers with same id ".concat(i.id))(),t[i.id]=null;let r=null;try{this._debug&&e!==i&&i.validateProps(),e?(this._transferLayerState(e,i),this._updateLayer(i)):this._initializeLayer(i),n.push(i),r=i.isComposite?i.getSubLayers():null}catch(e){this._handleError("matching",e,i)}r&&this._updateSublayersRecursively(r,t,n)}}_finalizeOldLayers(e){for(const t in e){const n=e[t];n&&this._finalizeLayer(n)}}_initializeLayer(e){try{e._initialize(),e.lifecycle="Initialized"}catch(t){this._handleError("initialization",t,e)}}_transferLayerState(e,t){t._transferState(e),t.lifecycle="Matched. State transferred from previous layer",t!==e&&(e.lifecycle="Discarded. Awaiting garbage collection")}_updateLayer(e){try{e._update()}catch(t){this._handleError("update",t,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(e),e.lifecycle="No longer matched. Awaiting garbage collection";try{e._finalize(),e.lifecycle="Finalized! Awaiting garbage collection"}catch(t){this._handleError("finalization",t,e)}}}function gs(e,t,n){if(e===t)return!0;if(!n||!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!gs(e[i],t[i],n-1))return!1;return!0}if(Array.isArray(t))return!1;if("object"==typeof e&&"object"==typeof t){const i=Object.keys(e),r=Object.keys(t);if(i.length!==r.length)return!1;for(const r of i){if(!t.hasOwnProperty(r))return!1;if(!gs(e[r],t[r],n-1))return!1}return!0}return!1}class ms{constructor(e){c(this,"width",void 0),c(this,"height",void 0),c(this,"views",void 0),c(this,"viewState",void 0),c(this,"controllers",void 0),c(this,"timeline",void 0),c(this,"_viewports",void 0),c(this,"_viewportMap",void 0),c(this,"_isUpdating",void 0),c(this,"_needsRedraw",void 0),c(this,"_needsUpdate",void 0),c(this,"_eventManager",void 0),c(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers){const t=this.controllers[e];t&&t.finalize()}this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const t=this.controllers[e];t&&t.updateTransition()}}getViewports(e){return e?this._viewports.filter((t=>t.containsPixel(e))):this._viewports}getViews(){const e={};return this.views.forEach((t=>{e[t.id]=t})),e}getView(e){return this.views.find((t=>t.id===e))}getViewState(e){const t="string"==typeof e?this.getView(e):e,n=t&&this.viewState[t.getViewStateId()]||this.viewState;return t?t.filterViewState(n):n}getViewport(e){return this._viewportMap[e]}unproject(e,t){const n=this.getViewports(),i={x:e[0],y:e[1]};for(let r=n.length-1;r>=0;--r){const o=n[r];if(o.containsPixel(i)){const n=e.slice();return n[0]-=o.x,n[1]-=o.y,o.unproject(n,t)}}return null}setProps(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,t){e===this.width&&t===this.height||(this.width=e,this.height=t,this.setNeedsUpdate("Size changed"))}_setViews(e){e=tt(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!gs(e,this.viewState,3)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):Je.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(e,t){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...t,viewId:e})}_createController(e,t){return new(0,t.type)({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,t.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:t=>{var n;return null===(n=this.getView(e.id))||void 0===n?void 0:n.makeViewport({viewState:t,width:this.width,height:this.height})}})}_updateController(e,t,n,i){const r=e.controller;if(r){const o={...t,...r,id:e.id,x:n.x,y:n.y,width:n.width,height:n.height};return i||(i=this._createController(e,o)),i&&i.setProps(o),i}return null}_rebuildViewports(){const{views:e}=this,t=this.controllers;this._viewports=[],this.controllers={};let n=!1;for(let i=e.length;i--;){const r=e[i],o=this.getViewState(r),a=r.makeViewport({viewState:o,width:this.width,height:this.height});let s=t[r.id];const l=Boolean(r.controller);l&&!s&&(n=!0),!n&&l||!s||(s.finalize(),s=null),this.controllers[r.id]=this._updateController(r,o,a,s),this._viewports.unshift(a)}for(const e in t){const n=t[e];n&&!this.controllers[e]&&n.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach((e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)}))}_diffViews(e,t){return e.length!==t.length||e.some(((n,i)=>!e[i].equals(t[i])))}}const ys=/([0-9]+\.?[0-9]*)(%|px)/;function vs(e){switch(typeof e){case"number":return{position:e,relative:!1};case"string":const t=ys.exec(e);if(t&&t.length>=3){const e="%"===t[2],n=parseFloat(t[1]);return{position:e?n/100:n,relative:e}}default:throw new Error("Could not parse position string ".concat(e))}}function bs(e,t){return e.relative?Math.round(e.position*t):e.position}class _s{constructor(e){c(this,"id",void 0),c(this,"viewportInstance",void 0),c(this,"_x",void 0),c(this,"_y",void 0),c(this,"_width",void 0),c(this,"_height",void 0),c(this,"_padding",void 0),c(this,"props",void 0);const{id:t,x:n=0,y:i=0,width:r="100%",height:o="100%",padding:a=null,viewportInstance:s}=e||{};m(!s||s instanceof di),this.viewportInstance=s,this.id=t||this.constructor.displayName||"view",this.props={...e,id:this.id},this._x=vs(n),this._y=vs(i),this._width=vs(r),this._height=vs(o),this._padding=a&&{left:vs(a.left||0),right:vs(a.right||0),top:vs(a.top||0),bottom:vs(a.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e||(this.viewportInstance?!!e.viewportInstance&&this.viewportInstance.equals(e.viewportInstance):this.ViewportType===e.ViewportType&&gs(this.props,e.props,2))}makeViewport({width:e,height:t,viewState:n}){if(this.viewportInstance)return this.viewportInstance;n=this.filterViewState(n);const i=this.getDimensions({width:e,height:t});return new this.ViewportType({...n,...this.props,...i})}getViewStateId(){const{viewState:e}=this.props;return"string"==typeof e?e:(null==e?void 0:e.id)||this.id}filterViewState(e){if(this.props.viewState&&"object"==typeof this.props.viewState){if(!this.props.viewState.id)return this.props.viewState;const t={...e};for(const e in this.props.viewState)"id"!==e&&(t[e]=this.props.viewState[e]);return t}return e}getDimensions({width:e,height:t}){const n={x:bs(this._x,e),y:bs(this._y,t),width:bs(this._width,e),height:bs(this._height,t)};return this._padding&&(n.padding={left:bs(this._padding.left,e),top:bs(this._padding.top,t),right:bs(this._padding.right,e),bottom:bs(this._padding.bottom,t)}),n}get controller(){const e=this.props.controller;return e?!0===e?{type:this.ControllerType}:"function"==typeof e?{type:e}:{type:this.ControllerType,...e}:null}}class ws extends di{constructor(e={}){const{latitude:t=0,longitude:n=0,zoom:i=0,pitch:r=0,bearing:o=0,nearZMultiplier:a=.1,farZMultiplier:s=1.01,orthographic:l=!1,projectionMatrix:u,repeat:h=!1,worldOffset:d=0,position:f,padding:g,legacyMeterSizes:m=!1}=e;let{width:y,height:v,altitude:b=1.5}=e;const _=Math.pow(2,i);let w;y=y||1,v=v||1;let P=null;if(u)b=u[5]/2,w=le(b);else{let n;if(e.fovy?(w=e.fovy,b=ce(w)):w=le(b),g){const{top:e=0,bottom:t=0}=g;n=[0,p((e+v-t)/2,0,v)-v/2]}P=function(e){const{width:t,height:n,altitude:i,pitch:r=0,offset:o,center:a,scale:s,nearZMultiplier:l=1,farZMultiplier:c=1}=e;let{fovy:u=le(ee)}=e;void 0!==i&&(u=le(i));const h=u*K,d=r*K,p=ce(u);let f=p;a&&(f+=a[2]*s/Math.cos(d)/n);const g=h*(.5+(o?o[1]:0)/n),m=Math.sin(g)*f/Math.sin(A(Math.PI/2-d-g,.01,Math.PI-.01)),y=Math.sin(d)*m+f,v=10*f;return{fov:h,aspect:t/n,focalDistance:p,near:l,far:Math.min(y*c,v)}}({width:y,height:v,scale:_,center:f&&[0,0,f[2]*oe(t)],offset:n,pitch:r,fovy:w,nearZMultiplier:a,farZMultiplier:s})}let E=function(e){const{height:t,pitch:n,bearing:i,altitude:r,scale:o,center:a}=e,s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];R(s,s,[0,0,-r]),M(s,s,-n*K),L(s,s,i*K);const l=o/t;return I(s,s,[l,l,l]),a&&R(s,s,function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}([],a)),s}({height:v,pitch:r,bearing:o,scale:_,altitude:b});d&&(E=(new ei).translate([512*d,0,0]).multiplyLeft(E)),super({...e,width:y,height:v,viewMatrix:E,longitude:n,latitude:t,zoom:i,...P,fovy:w,focalDistance:b}),c(this,"longitude",void 0),c(this,"latitude",void 0),c(this,"pitch",void 0),c(this,"bearing",void 0),c(this,"altitude",void 0),c(this,"fovy",void 0),c(this,"orthographic",void 0),c(this,"_subViewports",void 0),c(this,"_pseudoMeters",void 0),this.latitude=t,this.longitude=n,this.zoom=i,this.pitch=r,this.bearing=o,this.altitude=b,this.fovy=w,this.orthographic=l,this._subViewports=h?[]:null,this._pseudoMeters=m,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),t=Math.floor((e[0]+180)/360),n=Math.ceil((e[2]-180)/360);for(let e=t;e<=n;e++){const t=e?new ws({...this,worldOffset:e}):this;this._subViewports.push(t)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);const[t,n]=this.projectFlat(e);return[t,n,(e[2]||0)*oe(e[1])]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);const[t,n]=this.unprojectFlat(e);return[t,n,(e[2]||0)/oe(n)]}addMetersToLngLat(e,t){return se(e,t)}panByPosition(e,t){const n=he(t,this.pixelUnprojectionMatrix),i=D([],this.projectFlat(e),function(e,t){return e[0]=-t[0],e[1]=-t[1],e}([],n)),r=D([],this.center,i),[o,a]=this.unprojectFlat(r);return{longitude:o,latitude:a}}getBounds(e={}){const t=function(e,t=0){const{width:n,height:i,unproject:r}=e,o={targetZ:t},a=r([0,i],o),s=r([n,i],o);let l,c;return(e.fovy?.5*e.fovy*de:Math.atan(.5/e.altitude))>(90-e.pitch)*de-.01?(l=pe(e,0,t),c=pe(e,n,t)):(l=r([0,0],o),c=r([n,0],o)),[a,s,c,l]}(this,e.z||0);return[Math.min(t[0][0],t[1][0],t[2][0],t[3][0]),Math.min(t[0][1],t[1][1],t[2][1],t[3][1]),Math.max(t[0][0],t[1][0],t[2][0],t[3][0]),Math.max(t[0][1],t[1][1],t[2][1],t[3][1])]}fitBounds(e,t={}){const{width:n,height:i}=this,{longitude:r,latitude:o,zoom:a}=function(e){const{width:t,height:n,bounds:i,minExtent:r=0,maxZoom:o=24,offset:a=[0,0]}=e,[[s,l],[c,u]]=i,h=function(e=0){return"number"==typeof e?{top:e,bottom:e,left:e,right:e}:(W(Number.isFinite(e.top)&&Number.isFinite(e.bottom)&&Number.isFinite(e.left)&&Number.isFinite(e.right)),e)}(e.padding),d=ie([s,A(u,-Q,Q)]),p=ie([c,A(l,-Q,Q)]),f=[Math.max(Math.abs(p[0]-d[0]),r),Math.max(Math.abs(p[1]-d[1]),r)],g=[t-h.left-h.right-2*Math.abs(a[0]),n-h.top-h.bottom-2*Math.abs(a[1])];W(g[0]>0&&g[1]>0);const m=g[0]/f[0],y=g[1]/f[1],v=(h.right-h.left)/2/m,b=(h.top-h.bottom)/2/y,_=re([(p[0]+d[0])/2+v,(p[1]+d[1])/2+b]),w=Math.min(o,C(Math.abs(Math.min(m,y))));return W(Number.isFinite(w)),{longitude:_[0],latitude:_[1],zoom:w}}({width:n,height:i,bounds:e,...t});return new ws({width:n,height:i,longitude:r,latitude:o,zoom:a})}}c(ws,"displayName","WebMercatorViewport");class Ps{constructor(e){c(this,"_inProgress",void 0),c(this,"_handle",void 0),c(this,"_timeline",void 0),c(this,"time",void 0),c(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=e,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(e){var t,n;this.cancel(),this.settings=e,this._inProgress=!0,null===(t=(n=this.settings).onStart)||void 0===t||t.call(n,this)}end(){var e,t;this._inProgress&&(this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,null===(e=(t=this.settings).onEnd)||void 0===e||e.call(t,this))}cancel(){var e,t;this._inProgress&&(null===(e=(t=this.settings).onInterrupt)||void 0===e||e.call(t,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){var e,t;if(!this._inProgress)return!1;if(null===this._handle){const{_timeline:e,settings:t}=this;this._handle=e.addChannel({delay:e.getTime(),duration:t.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),null===(e=(t=this.settings).onUpdate)||void 0===e||e.call(t,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const Es=()=>{},xs=e=>e;class As{constructor(e){c(this,"getControllerState",void 0),c(this,"props",void 0),c(this,"propsInTransition",void 0),c(this,"transition",void 0),c(this,"onViewStateChange",void 0),c(this,"onStateChange",void 0),c(this,"_onTransitionUpdate",(e=>{const{time:t,settings:{interpolator:n,startProps:i,endProps:r,duration:o,easing:a}}=e,s=a(t/o),l=n.interpolateProps(i,r,s);this.propsInTransition=this.getControllerState({...this.props,...l}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})})),this.getControllerState=e.getControllerState,this.propsInTransition=null,this.transition=new Ps(e.timeline),this.onViewStateChange=e.onViewStateChange||Es,this.onStateChange=e.onStateChange||Es}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let t=!1;const n=this.props;if(this.props=e,!n||this._shouldIgnoreViewportChange(n,e))return!1;if(this._isTransitionEnabled(e)){let i=n;if(this.transition.inProgress){const{interruption:e,endProps:t}=this.transition.settings;i={...n,...2===e?t:this.propsInTransition||n}}this._triggerTransition(i,e),t=!0}else this.transition.cancel();return t}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:t,transitionInterpolator:n}=e;return(t>0||"auto"===t)&&Boolean(n)}_isUpdateDueToCurrentTransition(e){return!(!this.transition.inProgress||!this.propsInTransition)&&this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition)}_shouldIgnoreViewportChange(e,t){return this.transition.inProgress?3===this.transition.settings.interruption||this._isUpdateDueToCurrentTransition(t):!this._isTransitionEnabled(t)||t.transitionInterpolator.arePropsEqual(e,t)}_triggerTransition(e,t){const n=this.getControllerState(e),i=this.getControllerState(t).shortestPathFrom(n),r=t.transitionInterpolator,o=r.getDuration?r.getDuration(e,t):t.transitionDuration;if(0===o)return;const a=r.initializeProps(e,i);this.propsInTransition={};const s={duration:o,easing:t.transitionEasing||xs,interpolator:r,interruption:t.transitionInterruption||1,startProps:a.start,endProps:a.end,onStart:t.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(t.onTransitionInterrupt),onEnd:this._onTransitionEnd(t.onTransitionEnd)};this.transition.start(s),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return t=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),null==e||e(t)}}}const Cs=["longitude","latitude","zoom","bearing","pitch"],Ss=["longitude","latitude","zoom"];class Ts extends y{constructor(e={}){const t=Array.isArray(e)?e:e.transitionProps,n=Array.isArray(e)?{}:e;n.transitionProps=Array.isArray(t)?{compare:t,required:t}:t||{compare:Cs,required:Ss},super(n.transitionProps),c(this,"opts",void 0),this.opts=n}initializeProps(e,t){const n=super.initializeProps(e,t),{makeViewport:i,around:r}=this.opts;if(i&&r){const o=i(e),a=i(t),s=o.unproject(r);n.start.around=r,Object.assign(n.end,{around:a.project(s),aroundPosition:s,width:t.width,height:t.height})}return n}interpolateProps(e,t,n){const i={};for(const r of this._propsToExtract)i[r]=f(e[r]||0,t[r]||0,n);if(t.aroundPosition&&this.opts.makeViewport){const r=this.opts.makeViewport({...t,...i});Object.assign(i,r.panByPosition(t.aroundPosition,f(e.around,t.around,n)))}return i}}const Rs={transitionDuration:0},Is=e=>1-(1-e)*(1-e),Ms=["wheel"],Ls=["panstart","panmove","panend"],Ds=["pinchstart","pinchmove","pinchend"],Os=["tripanstart","tripanmove","tripanend"],js=["doubletap"],Ns=["keydown"],Fs={};class ks{constructor(e){c(this,"props",void 0),c(this,"state",{}),c(this,"transitionManager",void 0),c(this,"eventManager",void 0),c(this,"onViewStateChange",void 0),c(this,"onStateChange",void 0),c(this,"makeViewport",void 0),c(this,"_controllerState",void 0),c(this,"_events",{}),c(this,"_interactionState",{isDragging:!1}),c(this,"_customEvents",[]),c(this,"_eventStartBlocked",null),c(this,"_panMove",!1),c(this,"invertPan",!1),c(this,"dragMode","rotate"),c(this,"inertia",0),c(this,"scrollZoom",!0),c(this,"dragPan",!0),c(this,"dragRotate",!0),c(this,"doubleClickZoom",!0),c(this,"touchZoom",!0),c(this,"touchRotate",!1),c(this,"keyboard",!0),this.transitionManager=new As({...e,getControllerState:e=>new this.ControllerState(e),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=e.eventManager,this.onViewStateChange=e.onViewStateChange||(()=>{}),this.onStateChange=e.onStateChange||(()=>{}),this.makeViewport=e.makeViewport}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}finalize(){for(const t in this._events){var e;this._events[t]&&(null===(e=this.eventManager)||void 0===e||e.off(t,this.handleEvent))}this.transitionManager.finalize()}handleEvent(e){this._controllerState=void 0;const t=this._eventStartBlocked;switch(e.type){case"panstart":return!t&&this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return!t&&this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return!t&&this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(e){const{x:t,y:n}=this.props,{offsetCenter:i}=e;return[i.x-t,i.y-n]}isPointInBounds(e,t){const{width:n,height:i}=this.props;if(t&&t.handled)return!1;const r=e[0]>=0&&e[0]<=n&&e[1]>=0&&e[1]<=i;return r&&t&&t.stopPropagation(),r}isFunctionKeyPressed(e){const{srcEvent:t}=e;return Boolean(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(e){const t=setTimeout((()=>{this._eventStartBlocked===t&&(this._eventStartBlocked=null)}),e);this._eventStartBlocked=t}setProps(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);const{inertia:t}=e;this.inertia=Number.isFinite(t)?t:!0===t?300:0;const{scrollZoom:n=!0,dragPan:i=!0,dragRotate:r=!0,doubleClickZoom:o=!0,touchZoom:a=!0,touchRotate:s=!1,keyboard:l=!0}=e,c=Boolean(this.onViewStateChange);this.toggleEvents(Ms,c&&n),this.toggleEvents(Ls,c&&(i||r)),this.toggleEvents(Ds,c&&(a||s)),this.toggleEvents(Os,c&&s),this.toggleEvents(js,c&&o),this.toggleEvents(Ns,c&&l),this.scrollZoom=n,this.dragPan=i,this.dragRotate=r,this.doubleClickZoom=o,this.touchZoom=a,this.touchRotate=s,this.keyboard=l}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,t){this.eventManager&&e.forEach((e=>{this._events[e]!==t&&(this._events[e]=t,t?this.eventManager.on(e,this.handleEvent):this.eventManager.off(e,this.handleEvent))}))}updateViewport(e,t=null,n={}){const i={...e.getViewportProps(),...t},r=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(n),r){const e=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:i,interactionState:this._interactionState,oldViewState:e})}}_onTransition(e){this.onViewStateChange({...e,interactionState:this._interactionState})}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}_onPanStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;let n=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||"pan"===this.dragMode)&&(n=!n);const i=this.controllerState[n?"panStart":"rotateStart"]({pos:t});return this._panMove=n,this.updateViewport(i,Rs,{isDragging:!0}),!0}_onPan(e){return!!this.isDragging()&&(this._panMove?this._onPanMove(e):this._onPanRotate(e))}_onPanEnd(e){return!!this.isDragging()&&(this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e))}_onPanMove(e){if(!this.dragPan)return!1;const t=this.getCenter(e),n=this.controllerState.pan({pos:t});return this.updateViewport(n,Rs,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:t}=this;if(this.dragPan&&t&&e.velocity){const n=this.getCenter(e),i=[n[0]+e.velocityX*t/2,n[1]+e.velocityY*t/2],r=this.controllerState.pan({pos:i}).panEnd();this.updateViewport(r,{...this._getTransitionProps(),transitionDuration:t,transitionEasing:Is},{isDragging:!1,isPanning:!0})}else{const e=this.controllerState.panEnd();this.updateViewport(e,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const t=this.getCenter(e),n=this.controllerState.rotate({pos:t});return this.updateViewport(n,Rs,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:t}=this;if(this.dragRotate&&t&&e.velocity){const n=this.getCenter(e),i=[n[0]+e.velocityX*t/2,n[1]+e.velocityY*t/2],r=this.controllerState.rotate({pos:i}).rotateEnd();this.updateViewport(r,{...this._getTransitionProps(),transitionDuration:t,transitionEasing:Is},{isDragging:!1,isRotating:!0})}else{const e=this.controllerState.rotateEnd();this.updateViewport(e,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;e.srcEvent.preventDefault();const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const{speed:n=.01,smooth:i=!1}=!0===this.scrollZoom?{}:this.scrollZoom,{delta:r}=e;let o=2/(1+Math.exp(-Math.abs(r*n)));r<0&&0!==o&&(o=1/o);const a=this.controllerState.zoom({pos:t,scale:o});return this.updateViewport(a,{...this._getTransitionProps({around:t}),transitionDuration:i?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const n=this.controllerState.rotateStart({pos:t});return this.updateViewport(n,Rs,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate)return!1;if(!this.isDragging())return!1;const t=this.getCenter(e);t[0]-=e.deltaX;const n=this.controllerState.rotate({pos:t});return this.updateViewport(n,Rs,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;const{inertia:t}=this;if(this.touchRotate&&t&&e.velocityY){const n=this.getCenter(e),i=[n[0],n[1]+=e.velocityY*t/2],r=this.controllerState.rotate({pos:i});this.updateViewport(r,{...this._getTransitionProps(),transitionDuration:t,transitionEasing:Is},{isDragging:!1,isRotating:!0}),this.blockEvents(t)}else{const e=this.controllerState.rotateEnd();this.updateViewport(e,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const n=this.controllerState.zoomStart({pos:t}).rotateStart({pos:t});return Fs._startPinchRotation=e.rotation,Fs._lastPinchEvent=e,this.updateViewport(n,Rs,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate)return!1;if(!this.isDragging())return!1;let t=this.controllerState;if(this.touchZoom){const{scale:n}=e,i=this.getCenter(e);t=t.zoom({pos:i,scale:n})}if(this.touchRotate){const{rotation:n}=e;t=t.rotate({deltaAngleX:Fs._startPinchRotation-n})}return this.updateViewport(t,Rs,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),Fs._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:t}=this,{_lastPinchEvent:n}=Fs;if(this.touchZoom&&t&&n&&e.scale!==n.scale){const i=this.getCenter(e);let r=this.controllerState.rotateEnd();const o=Math.log2(e.scale),a=(o-Math.log2(n.scale))/(e.deltaTime-n.deltaTime),s=Math.pow(2,o+a*t/2);r=r.zoom({pos:i,scale:s}).zoomEnd(),this.updateViewport(r,{...this._getTransitionProps({around:i}),transitionDuration:t,transitionEasing:Is},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(t)}else{const e=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(e,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return Fs._startPinchRotation=null,Fs._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const n=this.isFunctionKeyPressed(e),i=this.controllerState.zoom({pos:t,scale:n?.5:2});return this.updateViewport(i,this._getTransitionProps({around:t}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const t=this.isFunctionKeyPressed(e),{zoomSpeed:n,moveSpeed:i,rotateSpeedX:r,rotateSpeedY:o}=!0===this.keyboard?{}:this.keyboard,{controllerState:a}=this;let s;const l={};switch(e.srcEvent.code){case"Minus":s=t?a.zoomOut(n).zoomOut(n):a.zoomOut(n),l.isZooming=!0;break;case"Equal":s=t?a.zoomIn(n).zoomIn(n):a.zoomIn(n),l.isZooming=!0;break;case"ArrowLeft":t?(s=a.rotateLeft(r),l.isRotating=!0):(s=a.moveLeft(i),l.isPanning=!0);break;case"ArrowRight":t?(s=a.rotateRight(r),l.isRotating=!0):(s=a.moveRight(i),l.isPanning=!0);break;case"ArrowUp":t?(s=a.rotateUp(o),l.isRotating=!0):(s=a.moveUp(i),l.isPanning=!0);break;case"ArrowDown":t?(s=a.rotateDown(o),l.isRotating=!0):(s=a.moveDown(i),l.isPanning=!0);break;default:return!1}return this.updateViewport(s,this._getTransitionProps(),l),!0}_getTransitionProps(e){const{transition:t}=this;return t&&t.transitionInterpolator?e?{...t,transitionInterpolator:new Ts({...e,...t.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:t:Rs}}class Us{constructor(e,t){c(this,"_viewportProps",void 0),c(this,"_state",void 0),this._viewportProps=this.applyConstraints(e),this._state=t}getViewportProps(){return this._viewportProps}getState(){return this._state}}class zs extends Us{constructor(e){const{width:t,height:n,latitude:i,longitude:r,zoom:o,bearing:a=0,pitch:s=0,altitude:l=1.5,position:u=[0,0,0],maxZoom:h=20,minZoom:d=0,maxPitch:p=60,minPitch:f=0,startPanLngLat:g,startZoomLngLat:y,startRotatePos:v,startBearing:b,startPitch:_,startZoom:w,normalize:P=!0}=e;m(Number.isFinite(r)),m(Number.isFinite(i)),m(Number.isFinite(o)),super({width:t,height:n,latitude:i,longitude:r,zoom:o,bearing:a,pitch:s,altitude:l,maxZoom:h,minZoom:d,maxPitch:p,minPitch:f,normalize:P,position:u},{startPanLngLat:g,startZoomLngLat:y,startRotatePos:v,startBearing:b,startPitch:_,startZoom:w}),c(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:t}){const n=this.getState().startPanLngLat||this._unproject(t);if(!n)return this;const i=this.makeViewport(this.getViewportProps()).panByPosition(n,e);return this._getUpdatedState(i)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:e,deltaAngleX:t=0,deltaAngleY:n=0}){const{startRotatePos:i,startBearing:r,startPitch:o}=this.getState();if(!i||void 0===r||void 0===o)return this;let a;return a=e?this._getNewRotation(e,i,o,r):{bearing:r+t,pitch:o+n},this._getUpdatedState(a)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:t,scale:n}){let{startZoom:i,startZoomLngLat:r}=this.getState();if(r||(i=this.getViewportProps().zoom,r=this._unproject(t)||this._unproject(e)),!r)return this;const{maxZoom:o,minZoom:a}=this.getViewportProps();let s=i+Math.log2(n);s=p(s,a,o);const l=this.makeViewport({...this.getViewportProps(),zoom:s});return this._getUpdatedState({zoom:s,...l.panByPosition(r,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}shortestPathFrom(e){const t=e.getViewportProps(),n={...this.getViewportProps()},{bearing:i,longitude:r}=n;return Math.abs(i-t.bearing)>180&&(n.bearing=i<0?i+360:i-360),Math.abs(r-t.longitude)>180&&(n.longitude=r<0?r+360:r-360),n}applyConstraints(e){const{maxZoom:t,minZoom:n,zoom:i}=e;e.zoom=p(i,n,t);const{maxPitch:r,minPitch:o,pitch:a}=e;e.pitch=p(a,o,r);const{normalize:s=!0}=e;return s&&Object.assign(e,function(e){const{width:t,height:n,pitch:i=0}=e;let{longitude:r,latitude:o,zoom:a,bearing:s=0}=e;(r<-180||r>180)&&(r=x(r+180,360)-180),(s<-180||s>180)&&(s=x(s+180,360)-180);const l=C(n/512);if(a<=l)a=l,o=0;else{const e=n/2/Math.pow(2,a),t=re([0,e])[1];if(o<t)o=t;else{const t=re([0,512-e])[1];o>t&&(o=t)}}return{width:t,height:n,longitude:r,latitude:o,zoom:a,pitch:i,bearing:s}}(e)),e}_zoomFromCenter(e){const{width:t,height:n}=this.getViewportProps();return this.zoom({pos:[t/2,n/2],scale:e})}_panFromCenter(e){const{width:t,height:n}=this.getViewportProps();return this.pan({startPos:[t/2,n/2],pos:[t/2+e[0],n/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}_unproject(e){const t=this.makeViewport(this.getViewportProps());return e&&t.unproject(e)}_getNewRotation(e,t,n,i){const r=e[0]-t[0],o=e[1]-t[1],a=e[1],s=t[1],{width:l,height:c}=this.getViewportProps(),u=r/l;let h=0;o>0?Math.abs(c-s)>5&&(h=o/(s-c)*1.2):o<0&&s>5&&(h=1-a/s),h=p(h,-1,1);const{minPitch:d,maxPitch:f}=this.getViewportProps();let g=n;return h>0?g=n+h*(f-n):h<0&&(g=n-h*(d-n)),{pitch:g,bearing:i+180*u}}}class Bs extends ks{constructor(...e){super(...e),c(this,"ControllerState",zs),c(this,"transition",{transitionDuration:300,transitionInterpolator:new Ts({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),c(this,"dragMode","pan")}setProps(e){e.position=e.position||[0,0,0];const t=this.props;super.setProps(e),(!t||t.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...e,...this.state}))}}class Gs extends _s{get ViewportType(){return ws}get ControllerType(){return Bs}}c(Gs,"displayName","MapView");const Vs=[255,255,255],Hs=1;let qs=0;class Ws{constructor(e={}){c(this,"id",void 0),c(this,"color",void 0),c(this,"intensity",void 0),c(this,"type","ambient");const{color:t=Vs}=e,{intensity:n=Hs}=e;this.id=e.id||"ambient-".concat(qs++),this.color=t,this.intensity=n}}const Xs=[255,255,255],Ys=1,Ks=[0,0,-1];let Zs=0;class Js{constructor(e={}){c(this,"id",void 0),c(this,"color",void 0),c(this,"intensity",void 0),c(this,"type","directional"),c(this,"direction",void 0),c(this,"shadow",void 0);const{color:t=Xs}=e,{intensity:n=Ys}=e,{direction:i=Ks}=e,{_shadow:r=!1}=e;this.id=e.id||"directional-".concat(Zs++),this.color=t,this.intensity=n,this.type="directional",this.direction=new Bn(i).normalize().toArray(),this.shadow=r}getProjectedLight(e){return this}}class $s{constructor(e,t={id:"pass"}){c(this,"id",void 0),c(this,"gl",void 0),c(this,"props",void 0);const{id:n}=t;this.id=n,this.gl=e,this.props={...t}}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}}class Qs extends $s{constructor(...e){super(...e),c(this,"_lastRenderIndex",-1)}render(e){return Ur(this.gl,{framebuffer:e.target}),this._drawLayers(e)}_drawLayers(e){const{target:t,moduleParameters:n,viewports:i,views:r,onViewportActive:o,clearStack:a=!0,clearCanvas:s=!0}=e;e.pass=e.pass||"unknown";const l=this.gl;s&&function(e,t){Ur(e,{viewport:[0,0,t?t.width:e.drawingBufferWidth,t?t.height:e.drawingBufferHeight]}),e.clear(16640)}(l,t),a&&(this._lastRenderIndex=-1);const c=[];for(const a of i){const i=r&&r[a.id];null==o||o(a);const s=this._getDrawLayerParams(a,e),u=a.subViewports||[a];for(const r of u){const o=this._drawLayersInViewport(l,{target:t,moduleParameters:n,viewport:r,view:i,pass:e.pass,layers:e.layers},s);c.push(o)}}return c}_getDrawLayerParams(e,{layers:t,pass:n,isPicking:i=!1,layerFilter:r,cullRect:o,effects:a,moduleParameters:s},l=!1){const c=[],u=el(this._lastRenderIndex+1),h={layer:t[0],viewport:e,isPicking:i,renderPass:n,cullRect:o},d={};for(let i=0;i<t.length;i++){const o=t[i],p=this._shouldDrawLayer(o,h,r,d),f={shouldDrawLayer:p};p&&!l&&(f.layerRenderIndex=u(o,p),f.moduleParameters=this._getModuleParameters(o,a,n,s),f.layerParameters=this.getLayerParameters(o,i,e)),c[i]=f}return c}_drawLayersInViewport(e,{layers:t,moduleParameters:n,pass:i,target:r,viewport:o,view:a},s){const l=function(e,{moduleParameters:t,target:n,viewport:i}){const r=n&&"default-framebuffer"!==n.id,o=t&&t.devicePixelRatio||Br(e),a=r?n.height:e.drawingBufferHeight,s=i;return[s.x*o,a-(s.y+s.height)*o,s.width*o,s.height*o]}(e,{moduleParameters:n,target:r,viewport:o});if(a&&a.props.clear){const t=!0===a.props.clear?{color:!0,depth:!0}:a.props.clear;zr(e,{scissorTest:!0,scissor:l},(()=>Uo(e,t)))}const c={totalCount:t.length,visibleCount:0,compositeCount:0,pickableCount:0};Ur(e,{viewport:l});for(let e=0;e<t.length;e++){const n=t[e],{shouldDrawLayer:r,layerRenderIndex:a,moduleParameters:l,layerParameters:u}=s[e];if(r&&n.props.pickable&&c.pickableCount++,n.isComposite)c.compositeCount++;else if(r){c.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,a),l.viewport=o;try{n._drawLayer({moduleParameters:l,uniforms:{layerIndex:a},parameters:u})}catch(e){n.raiseError(e,"drawing ".concat(n," to ").concat(i))}}}return c}shouldDrawLayer(e){return!0}getModuleParameters(e,t){return null}getLayerParameters(e,t,n){return e.props.parameters}_shouldDrawLayer(e,t,n,i){if(!e.props.visible||!this.shouldDrawLayer(e))return!1;t.layer=e;let r=e.parent;for(;r;){if(!r.props.visible||!r.filterSubLayer(t))return!1;t.layer=r,r=r.parent}if(n){const e=t.layer.id;if(e in i||(i[e]=n(t)),!i[e])return!1}return e.activateViewport(t.viewport),!0}_getModuleParameters(e,t,n,i){var r;const o=Object.assign(Object.create((null===(r=e.internalState)||void 0===r?void 0:r.propsInTransition)||e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:Br(this.gl)});if(t)for(const n of t){var a;Object.assign(o,null===(a=n.getModuleParameters)||void 0===a?void 0:a.call(n,e))}return Object.assign(o,this.getModuleParameters(e,t),i)}}function el(e=0,t={}){const n={},i=(r,o)=>{const a=r.props._offset,s=r.id,l=r.parent&&r.parent.id;let c;if(l&&!(l in t)&&i(r.parent,!1),l in n){const e=n[l]=n[l]||el(t[l],t);c=e(r,o),n[s]=e}else Number.isFinite(a)?(c=a+(t[l]||0),n[s]=null):c=e;return o&&c>=e&&(e=c+1),t[s]=c,c};return i}class tl extends Qs{constructor(e,t){super(e,t),c(this,"shadowMap",void 0),c(this,"depthBuffer",void 0),c(this,"fbo",void 0),this.shadowMap=new So(e,{width:1,height:1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.depthBuffer=new Io(e,{format:33189,width:1,height:1}),this.fbo=new ea(e,{id:"shadowmap",width:1,height:1,attachments:{36064:this.shadowMap,36096:this.depthBuffer}})}render(e){const t=this.fbo;zr(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},(()=>{const n=e.viewports[0],i=Br(this.gl),r=n.width*i,o=n.height*i;r===t.width&&o===t.height||t.resize({width:r,height:o}),super.render({...e,target:t,pass:"shadow"})}))}shouldDrawLayer(e){return!1!==e.props.shadowEnabled}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const nl=ts((function({viewport:e,center:t}){return new ei(e.viewProjectionMatrix).invert().transform(t)})),il=ts((function({viewport:e,shadowMatrices:t}){const n=[],i=e.pixelUnprojectionMatrix,r=e.isGeospatial?void 0:1,o=[[0,0,r],[e.width,0,r],[0,e.height,r],[e.width,e.height,r],[0,0,-1],[e.width,0,-1],[0,e.height,-1],[e.width,e.height,-1]].map((e=>function(e,t){const[n,i,r]=e,o=he([n,i,r],t);return Number.isFinite(r)?o:[o[0],o[1],0]}(e,i)));for(const i of t){const t=i.clone().translate(new Bn(e.center).negate()),r=o.map((e=>t.transform(e))),a=(new ei).ortho({left:Math.min(...r.map((e=>e[0]))),right:Math.max(...r.map((e=>e[0]))),bottom:Math.min(...r.map((e=>e[1]))),top:Math.max(...r.map((e=>e[1]))),near:Math.min(...r.map((e=>-e[2]))),far:Math.max(...r.map((e=>-e[2])))});n.push(a.multiplyRight(i))}return n})),rl=[0,0,0,1],ol=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],al={name:"shadow",dependencies:[us],vs:"\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",fs:"\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:(e={},t={})=>"viewport"in e&&(e.drawToShadowMap||e.shadowMaps&&e.shadowMaps.length>0)?function(e,t){const{shadowEnabled:n=!0}=e;if(!n||!e.shadowMatrices||!e.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const i={shadow_uDrawShadowMap:Boolean(e.drawToShadowMap),shadow_uUseShadowMap:!!e.shadowMaps&&e.shadowMaps.length>0,shadow_uColor:e.shadowColor||rl,shadow_uLightId:e.shadowLightId||0,shadow_uLightCount:e.shadowMatrices.length},r=nl({viewport:e.viewport,center:t.project_uCenter}),o=[],a=il({shadowMatrices:e.shadowMatrices,viewport:e.viewport}).slice();for(let n=0;n<e.shadowMatrices.length;n++){const i=a[n],s=i.clone().translate(new Bn(e.viewport.center).negate());t.project_uCoordinateSystem===ri.LNGLAT&&t.project_uProjectionMode===oi.WEB_MERCATOR?(a[n]=s,o[n]=r):(a[n]=i.clone().multiplyRight(ol),o[n]=s.transform(r))}for(let t=0;t<a.length;t++)i["shadow_uViewProjectionMatrices[".concat(t,"]")]=a[t],i["shadow_uProjectCenters[".concat(t,"]")]=o[t],e.shadowMaps&&e.shadowMaps.length>0?i["shadow_uShadowMap".concat(t)]=e.shadowMaps[t]:i["shadow_uShadowMap".concat(t)]=e.dummyShadowMap;return i}(e,t):{}},sl={color:[255,255,255],intensity:1},ll=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],cl=[0,0,0,200/255];class ul{constructor(e={}){c(this,"id","lighting-effect"),c(this,"props",void 0),c(this,"shadowColor",cl),c(this,"shadow",void 0),c(this,"ambientLight",void 0),c(this,"directionalLights",void 0),c(this,"pointLights",void 0),c(this,"shadowPasses",[]),c(this,"shadowMaps",[]),c(this,"dummyShadowMap",null),c(this,"programManager",void 0),c(this,"shadowMatrices",void 0),this.setProps(e)}setProps(e){this.ambientLight=null,this.directionalLights=[],this.pointLights=[];for(const t in e){const n=e[t];switch(n.type){case"ambient":this.ambientLight=n;break;case"directional":this.directionalLights.push(n);break;case"point":this.pointLights.push(n)}}this._applyDefaultLights(),this.shadow=this.directionalLights.some((e=>e.shadow)),this.props=e}preRender(e,{layers:t,layerFilter:n,viewports:i,onViewportActive:r,views:o}){if(this.shadow){this.shadowMatrices=this._calculateMatrices(),0===this.shadowPasses.length&&this._createShadowPasses(e),this.programManager||(this.programManager=Xa.getDefaultProgramManager(e),al&&this.programManager.addDefaultModule(al)),this.dummyShadowMap||(this.dummyShadowMap=new So(e,{width:1,height:1}));for(let e=0;e<this.shadowPasses.length;e++)this.shadowPasses[e].render({layers:t,layerFilter:n,viewports:i,onViewportActive:r,views:o,moduleParameters:{shadowLightId:e,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(e){const t=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return t.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map((t=>t.getProjectedLight({layer:e}))),pointLights:this.pointLights.map((t=>t.getProjectedLight({layer:e})))},t}cleanup(){for(const e of this.shadowPasses)e.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(al),this.programManager=null)}_calculateMatrices(){const e=[];for(const t of this.directionalLights){const n=(new ei).lookAt({eye:new Bn(t.direction).negate()});e.push(n)}return e}_createShadowPasses(e){for(let t=0;t<this.directionalLights.length;t++){const n=new tl(e);this.shadowPasses[t]=n,this.shadowMaps[t]=n.shadowMap}}_applyDefaultLights(){const{ambientLight:e,pointLights:t,directionalLights:n}=this;e||0!==t.length||0!==n.length||(this.ambientLight=new Ws(sl),this.directionalLights.push(new Js(ll[0]),new Js(ll[1])))}}const hl=new ul;class dl{constructor(){c(this,"effects",void 0),c(this,"_resolvedEffects",[]),c(this,"_defaultEffects",[]),c(this,"_needsRedraw",void 0),this.effects=[],this._needsRedraw="Initial render",this._setEffects([])}addDefaultEffect(e){const t=this._defaultEffects;if(!t.find((t=>t.id===e.id))){const n=t.findIndex((t=>{return n=e,(null!==(i=t.order)&&void 0!==i?i:1/0)-(null!==(r=n.order)&&void 0!==r?r:1/0)>0;var n,i,r}));n<0?t.push(e):t.splice(n,0,e),this._setEffects(this.effects)}}setProps(e){"effects"in e&&(gs(e.effects,this.effects,1)||this._setEffects(e.effects))}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}getEffects(){return this._resolvedEffects}_setEffects(e){const t={};for(const e of this.effects)t[e.id]=e;const n=[];for(const i of e){const e=t[i.id];e&&e!==i?e.setProps?(e.setProps(i.props),n.push(e)):(e.cleanup(),n.push(i)):n.push(i),delete t[i.id]}for(const e in t)t[e].cleanup();this.effects=n,this._resolvedEffects=n.concat(this._defaultEffects),e.some((e=>e instanceof ul))||this._resolvedEffects.push(hl),this._needsRedraw="effects changed"}finalize(){for(const e of this._resolvedEffects)e.cleanup();this.effects.length=0,this._resolvedEffects.length=0,this._defaultEffects.length=0}}class pl extends Qs{shouldDrawLayer(e){const{operation:t}=e.props;return t.includes("draw")||t.includes("terrain")}}const fl={blendFunc:[1,0,32771,0],blendEquation:32774};class gl extends Qs{constructor(...e){super(...e),c(this,"pickZ",void 0),c(this,"_colorEncoderState",null)}render(e){return"pickingFBO"in e?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer({layers:e,layerFilter:t,views:n,viewports:i,onViewportActive:r,pickingFBO:o,deviceRect:{x:a,y:s,width:l,height:c},cullRect:u,effects:h,pass:d="picking",pickZ:p,moduleParameters:f}){const g=this.gl;this.pickZ=p;const m=this._resetColorEncoder(p),y=zr(g,{scissorTest:!0,scissor:[a,s,l,c],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...fl,blend:!p},(()=>super.render({target:o,layers:e,layerFilter:t,views:n,viewports:i,onViewportActive:r,cullRect:u,effects:null==h?void 0:h.filter((e=>e.useInPicking)),pass:d,isPicking:!0,moduleParameters:f})));return this._colorEncoderState=null,{decodePickingColor:m&&ml.bind(null,m),stats:y}}shouldDrawLayer(e){const{pickable:t,operation:n}=e.props;return t&&n.includes("draw")||n.includes("terrain")}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(e,t,n){const i={...e.props.parameters},{pickable:r,operation:o}=e.props;return this._colorEncoderState?r&&o.includes("draw")&&(Object.assign(i,fl),i.blend=!0,i.blendColor=function(e,t,n){const{byLayer:i,byAlpha:r}=e;let o,a=i.get(t);return a?(a.viewports.push(n),o=a.a):(o=i.size+1,o<=255?(a={a:o,layer:t,viewports:[n]},i.set(t,a),r[o]=a):(Je.warn("Too many pickable layers, only picking the first 255")(),o=0)),[0,0,0,o/255]}(this._colorEncoderState,e,n)):i.blend=!1,o.includes("terrain")&&(i.blend=!1),i}_resetColorEncoder(e){return this._colorEncoderState=e?null:{byLayer:new Map,byAlpha:[]},this._colorEncoderState}}function ml(e,t){const n=e.byAlpha[t[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(t)}}class yl{constructor(e){c(this,"gl",void 0),c(this,"layerFilter",void 0),c(this,"drawPickingColors",void 0),c(this,"drawLayersPass",void 0),c(this,"pickLayersPass",void 0),c(this,"renderCount",void 0),c(this,"_needsRedraw",void 0),c(this,"renderBuffers",void 0),c(this,"lastPostProcessEffect",void 0),this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new pl(e),this.pickLayersPass=new gl(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){const t=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,n={layerFilter:this.layerFilter,isPicking:this.drawPickingColors,...e,target:e.target||ea.getDefaultFramebuffer(this.gl)};n.effects&&this._preRender(n.effects,n);const i=this.lastPostProcessEffect?this.renderBuffers[0]:n.target,r=t.render({...n,target:i});n.effects&&this._postRender(n.effects,n),this.renderCount++,et("deckRenderer.renderLayers",this,r,e)}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}finalize(){const{renderBuffers:e}=this;for(const t of e)t.delete();e.length=0}_preRender(e,t){this.lastPostProcessEffect=null,t.preRenderStats=t.preRenderStats||{};for(const n of e)t.preRenderStats[n.id]=n.preRender(this.gl,t),n.postRender&&(this.lastPostProcessEffect=n.id);this.lastPostProcessEffect&&this._resizeRenderBuffers()}_resizeRenderBuffers(){const{renderBuffers:e}=this;0===e.length&&e.push(new ea(this.gl),new ea(this.gl));for(const t of e)t.resize()}_postRender(e,t){const{renderBuffers:n}=this,i={...t,inputBuffer:n[0],swapBuffer:n[1],target:null};for(const r of e)if(r.postRender){if(r.id===this.lastPostProcessEffect){i.target=t.target,r.postRender(this.gl,i);break}const e=r.postRender(this.gl,i);i.inputBuffer=e,i.swapBuffer=e===n[0]?n[1]:n[0]}}}const vl={pickedColor:null,pickedObjectIndex:-1};function bl({pickedColors:e,decodePickingColor:t,deviceX:n,deviceY:i,deviceRadius:r,deviceRect:o}){const{x:a,y:s,width:l,height:c}=o;let u=r*r,h=-1,d=0;for(let t=0;t<c;t++){const r=t+s-i,o=r*r;if(o>u)d+=4*l;else for(let t=0;t<l;t++){if(e[d+3]-1>=0){const e=t+a-n,i=e*e+o;i<=u&&(u=i,h=d)}d+=4}}if(h>=0){const n=e.slice(h,h+4),i=t(n);if(i){const e=Math.floor(h/4/l),t=h/4-e*l;return{...i,pickedColor:n,pickedX:a+t,pickedY:s+e}}Je.error("Picked non-existent layer. Is picking buffer corrupt?")()}return vl}function _l({pickInfo:e,viewports:t,pixelRatio:n,x:i,y:r,z:o}){let a,s=t[0];if(t.length>1&&(s=function(e,t){for(let n=e.length-1;n>=0;n--){const i=e[n];if(i.containsPixel(t))return i}return e[0]}((null==e?void 0:e.pickedViewports)||t,{x:i,y:r})),s){const e=[i-s.x,r-s.y];void 0!==o&&(e[2]=o),a=s.unproject(e)}return{color:null,layer:null,viewport:s,index:-1,picked:!1,x:i,y:r,pixel:[i,r],coordinate:a,devicePixel:e&&"pickedX"in e?[e.pickedX,e.pickedY]:void 0,pixelRatio:n}}function wl(e){const{pickInfo:t,lastPickedInfo:n,mode:i,layers:r}=e,{pickedColor:o,pickedLayer:a,pickedObjectIndex:s}=t,l=a?[a]:[];if("hover"===i){const e=n.index,t=n.layerId,i=a?a.props.id:null;if(i!==t||s!==e){if(i!==t){const e=r.find((e=>e.props.id===t));e&&l.unshift(e)}n.layerId=i,n.index=s,n.info=null}}const c=_l(e),u=new Map;return u.set(null,c),l.forEach((e=>{let t={...c};e===a&&(t.color=o,t.index=s,t.picked=!0),t=Pl({layer:e,info:t,mode:i});const r=t.layer;e===a&&"hover"===i&&(n.info=t),u.set(r.id,t),"hover"===i&&r.updateAutoHighlight(t)})),u}function Pl({layer:e,info:t,mode:n}){for(;e&&t;){const i=t.layer||null;t.sourceLayer=i,t.layer=e,t=e.getPickingInfo({info:t,mode:n,sourceLayer:i}),e=e.parent}return t}class El{constructor(e){c(this,"gl",void 0),c(this,"pickingFBO",void 0),c(this,"depthFBO",void 0),c(this,"pickLayersPass",void 0),c(this,"layerFilter",void 0),c(this,"lastPickedInfo",void 0),c(this,"_pickable",!0),this.gl=e,this.pickLayersPass=new gl(e),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:t,layers:n,viewports:i},r=this.lastPickedInfo.info){const o=r&&r.layer&&r.layer.id,a=r&&r.viewport&&r.viewport.id,s=o?n.find((e=>e.id===o)):null,l=a&&i.find((e=>e.id===a))||i[0],c=l&&l.unproject([e-l.x,t-l.y]),u={x:e,y:t,viewport:l,coordinate:c,layer:s};return{...r,...u}}_resizeBuffer(){var e,t;const{gl:n}=this;if(!this.pickingFBO&&(this.pickingFBO=new ea(n),ea.isSupported(n,{colorBufferFloat:!0}))){const e=new ea(n);e.attach({36064:new So(n,{format:ar(n)?34836:6408,type:5126})}),this.depthFBO=e}null===(e=this.pickingFBO)||void 0===e||e.resize({width:n.canvas.width,height:n.canvas.height}),null===(t=this.depthFBO)||void 0===t||t.resize({width:n.canvas.width,height:n.canvas.height})}_getPickable(e){if(!1===this._pickable)return null;const t=e.filter((e=>this.pickLayersPass.shouldDrawLayer(e)&&!e.isComposite));return t.length?t:null}_pickClosestObject({layers:e,views:t,viewports:n,x:i,y:r,radius:o=0,depth:a=1,mode:s="query",unproject3D:l,onViewportActive:c,effects:u}){const h=this._getPickable(e),d=Br(this.gl);if(!h)return{result:[],emptyInfo:_l({viewports:n,x:i,y:r,pixelRatio:d})};this._resizeBuffer();const p=Gr(this.gl,[i,r],!0),f=[p.x+Math.floor(p.width/2),p.y+Math.floor(p.height/2)],g=Math.round(o*d),{width:m,height:y}=this.pickingFBO,v=this._getPickingRect({deviceX:f[0],deviceY:f[1],deviceRadius:g,deviceWidth:m,deviceHeight:y}),b={x:i-o,y:r-o,width:2*o+1,height:2*o+1};let _;const w=[],P=new Set;for(let e=0;e<a;e++){let o,p;if(o=v?bl({...this._drawAndSample({layers:h,views:t,viewports:n,onViewportActive:c,deviceRect:v,cullRect:b,effects:u,pass:"picking:".concat(s)}),deviceX:f[0],deviceY:f[1],deviceRadius:g,deviceRect:v}):{pickedColor:null,pickedObjectIndex:-1},o.pickedLayer&&l&&this.depthFBO){const{pickedColors:e}=this._drawAndSample({layers:[o.pickedLayer],views:t,viewports:n,onViewportActive:c,deviceRect:{x:o.pickedX,y:o.pickedY,width:1,height:1},cullRect:b,effects:u,pass:"picking:".concat(s,":z")},!0);e[3]&&(p=e[0])}o.pickedLayer&&e+1<a&&(P.add(o.pickedLayer),o.pickedLayer.disablePickingIndex(o.pickedObjectIndex)),_=wl({pickInfo:o,lastPickedInfo:this.lastPickedInfo,mode:s,layers:h,viewports:n,x:i,y:r,z:p,pixelRatio:d});for(const e of _.values())e.layer&&w.push(e);if(!o.pickedColor)break}for(const e of P)e.restorePickingColors();return{result:w,emptyInfo:_.get(null)}}_pickVisibleObjects({layers:e,views:t,viewports:n,x:i,y:r,width:o=1,height:a=1,mode:s="query",maxObjects:l=null,onViewportActive:c,effects:u}){const h=this._getPickable(e);if(!h)return[];this._resizeBuffer();const d=Br(this.gl),p=Gr(this.gl,[i,r],!0),f=p.x,g=p.y+p.height,m=Gr(this.gl,[i+o,r+a],!0),y=m.x+m.width,v=m.y,b={x:f,y:v,width:y-f,height:g-v},_=function({pickedColors:e,decodePickingColor:t}){const n=new Map;if(e)for(let i=0;i<e.length;i+=4)if(e[i+3]-1>=0){const r=e.slice(i,i+4),o=r.join(",");if(!n.has(o)){const e=t(r);e?n.set(o,{...e,color:r}):Je.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return Array.from(n.values())}(this._drawAndSample({layers:h,views:t,viewports:n,onViewportActive:c,deviceRect:b,cullRect:{x:i,y:r,width:o,height:a},effects:u,pass:"picking:".concat(s)})),w=new Map,P=Number.isFinite(l);for(let e=0;e<_.length&&!(P&&l&&w.size>=l);e++){const t=_[e];let n={color:t.pickedColor,layer:null,index:t.pickedObjectIndex,picked:!0,x:i,y:r,pixelRatio:d};n=Pl({layer:t.pickedLayer,info:n,mode:s}),w.has(n.object)||w.set(n.object,n)}return Array.from(w.values())}_drawAndSample({layers:e,views:t,viewports:n,onViewportActive:i,deviceRect:r,cullRect:o,effects:a,pass:s},l=!1){const c=l?this.depthFBO:this.pickingFBO,u={layers:e,layerFilter:this.layerFilter,views:t,viewports:n,onViewportActive:i,pickingFBO:c,deviceRect:r,cullRect:o,effects:a,pass:s,pickZ:l,preRenderStats:{}};for(const e of a)e.useInPicking&&(u.preRenderStats[e.id]=e.preRender(this.gl,u));const{decodePickingColor:h}=this.pickLayersPass.render(u),{x:d,y:p,width:f,height:g}=r,m=new(l?Float32Array:Uint8Array)(f*g*4);return Ho(c,{sourceX:d,sourceY:p,sourceWidth:f,sourceHeight:g,target:m}),{pickedColors:m,decodePickingColor:h}}_getPickingRect({deviceX:e,deviceY:t,deviceRadius:n,deviceWidth:i,deviceHeight:r}){const o=Math.max(0,e-n),a=Math.max(0,t-n),s=Math.min(i,e+n+1)-o,l=Math.min(r,t+n+1)-a;return s<=0||l<=0?null:{x:o,y:a,width:s,height:l}}}const xl={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class Al{constructor(e){c(this,"el",null),c(this,"isVisible",!1);const t=e.parentElement;t&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,xl),t.appendChild(this.el))}setTooltip(e,t,n){const i=this.el;if(i){if("string"==typeof e)i.innerText=e;else{if(!e)return this.isVisible=!1,void(i.style.display="none");e.text&&(i.innerText=e.text),e.html&&(i.innerHTML=e.html),e.className&&(i.className=e.className),Object.assign(i.style,e.style)}this.isVisible=!0,i.style.display="block",i.style.transform="translate(".concat(t,"px, ").concat(n,"px)")}}remove(){this.el&&(this.el.remove(),this.el=null)}}const{_parseImageNode:Cl}=globalThis,Sl="undefined"!=typeof Image,Tl="undefined"!=typeof ImageBitmap,Rl=Boolean(Cl),Il=!!Lt||Rl;function Ml(e){const t=function(e){return"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?"imagebitmap":"undefined"!=typeof Image&&e instanceof Image?"image":e&&"object"==typeof e&&e.data&&e.width&&e.height?"data":null}(e);if(!t)throw new Error("Not an image");return t}const Ll=/^data:image\/svg\+xml/,Dl=/\.svg((\?|#).*)?$/;function Ol(e){return e&&(Ll.test(e)||Dl.test(e))}function jl(e,t){if(Ol(t))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(e)])}async function Nl(e,t,n){const i=function(e,t){if(Ol(t)){let t=(new TextDecoder).decode(e);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(t=unescape(encodeURIComponent(t)))}catch(e){throw new Error(e.message)}return"data:image/svg+xml;base64,".concat(btoa(t))}return jl(e,t)}(e,n),r=self.URL||self.webkitURL,o="string"!=typeof i&&r.createObjectURL(i);try{return await async function(e,t){const n=new Image;return n.src=e,t.image&&t.image.decode&&n.decode?(await n.decode(),n):await new Promise(((t,i)=>{try{n.onload=()=>t(n),n.onerror=t=>i(new Error("Could not load image ".concat(e,": ").concat(t)))}catch(e){i(e)}}))}(o||i,t)}finally{o&&r.revokeObjectURL(o)}}const Fl={};let kl=!0;const Ul=!1,zl=!0;function Bl(e){const t=Gl(e);return function(e){const t=Gl(e);return t.byteLength>=24&&2303741511===t.getUint32(0,Ul)?{mimeType:"image/png",width:t.getUint32(16,Ul),height:t.getUint32(20,Ul)}:null}(t)||function(e){const t=Gl(e);if(!(t.byteLength>=3&&65496===t.getUint16(0,Ul)&&255===t.getUint8(2)))return null;const{tableMarkers:n,sofMarkers:i}=function(){const e=new Set([65499,65476,65484,65501,65534]);for(let t=65504;t<65520;++t)e.add(t);return{tableMarkers:e,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}();let r=2;for(;r+9<t.byteLength;){const e=t.getUint16(r,Ul);if(i.has(e))return{mimeType:"image/jpeg",height:t.getUint16(r+5,Ul),width:t.getUint16(r+7,Ul)};if(!n.has(e))return null;r+=2,r+=t.getUint16(r,Ul)}return null}(t)||function(e){const t=Gl(e);return t.byteLength>=10&&1195984440===t.getUint32(0,Ul)?{mimeType:"image/gif",width:t.getUint16(6,zl),height:t.getUint16(8,zl)}:null}(t)||function(e){const t=Gl(e);return t.byteLength>=14&&16973===t.getUint16(0,Ul)&&t.getUint32(2,zl)===t.byteLength?{mimeType:"image/bmp",width:t.getUint32(18,zl),height:t.getUint32(22,zl)}:null}(t)}function Gl(e){if(e instanceof DataView)return e;if(ArrayBuffer.isView(e))return new DataView(e.buffer);if(e instanceof ArrayBuffer)return new DataView(e);throw new Error("toDataView")}const Vl={id:"image",module:"images",name:"Images",version:"3.3.1",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg"],parse:async function(e,t,n){const i=((t=t||{}).image||{}).type||"auto",{url:r}=n||{};let o;switch(function(e){switch(e){case"auto":case"data":return function(){if(Tl)return"imagebitmap";if(Sl)return"image";if(Il)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function(e){switch(e){case"auto":return Tl||Sl||Il;case"imagebitmap":return Tl;case"image":return Sl;case"data":return Il;default:throw new Error("@loaders.gl/images: image ".concat(e," not supported in this environment"))}}(e),e}}(i)){case"imagebitmap":o=await async function(e,t,n){let i;i=Ol(n)?await Nl(e,t,n):jl(e,n);const r=t&&t.imagebitmap;return await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!function(e){for(const t in e||Fl)return!1;return!0}(t)&&kl||(t=null),t)try{return await createImageBitmap(e,t)}catch(e){console.warn(e),kl=!1}return await createImageBitmap(e)}(i,r)}(e,t,r);break;case"image":o=await Nl(e,t,r);break;case"data":o=await async function(e,t){const{mimeType:n}=Bl(e)||{},i=globalThis._parseImageNode;return mt(i),await i(e,n)}(e);break;default:mt(!1)}return"data"===i&&(o=function(e){switch(Ml(e)){case"data":return e;case"image":case"imagebitmap":const t=document.createElement("canvas"),n=t.getContext("2d");if(!n)throw new Error("getImageData");return t.width=e.width,t.height=e.height,n.drawImage(e,0,0),n.getImageData(0,0,e.width,e.height);default:throw new Error("getImageData")}}(o)),o},tests:[e=>Boolean(Bl(new DataView(e)))],options:{image:{type:"auto",decode:!0}}},Hl={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:function(e){const t=e[0],n=e[e.length-1];return"{"===t&&"}"===n||"["===t&&"]"===n},parseTextSync:JSON.parse},ql=function(){const e="8.9.2",t=globalThis.deck&&globalThis.deck.VERSION;if(t&&t!==e)throw new Error("deck.gl - multiple versions detected: ".concat(t," vs ").concat(e));return t||(Je.log(1,"deck.gl ".concat(e))(),globalThis.deck={...globalThis.deck,VERSION:e,version:e,log:Je,_registerLoggers:Qe},function(e){const t=yn();e=Array.isArray(e)?e:[e];for(const n of e){const e=vt(n);t.find((t=>e===t))||t.unshift(e)}}([Hl,[Vl,{imagebitmap:{premultiplyAlpha:"none"}}]])),e}(),Wl=globalThis;function Xl(e){if(!e&&!Me())return"Node";if(Ie(e))return"Electron";const t="undefined"!=typeof navigator?navigator:{},n=e||t.userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";const i=-1!==n.indexOf("MSIE "),r=-1!==n.indexOf("Trident/");return i||r?"IE":Wl.chrome?"Chrome":Wl.safari?"Safari":Wl.mozInnerScreenX?"Firefox":"Unknown"}class Yl extends so{get[Symbol.toStringTag](){return"Query"}static isSupported(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=ar(e),i=Jo(e,Xo);let r=n||i;for(const e of t)switch(e){case"queries":r=r&&n;break;case"timers":r=r&&i;break;default:$r(!1)}return r}constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(35007)}beginOcclusionQuery(){let{conservative:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.begin(e?36202:35887)}beginTransformFeedbackQuery(){return this.begin(35976)}begin(e){return this._queryPending||(this.target=e,this.gl2.beginQuery(this.target,this.handle)),this}end(){return this._queryPending||this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this}isResultAvailable(){if(!this._queryPending)return!1;const e=this.gl2.getQueryParameter(this.handle,34919);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(36795)}getResult(){return this.gl2.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let t=0;return this._pollingPromise=new Promise(((n,i)=>{const r=()=>{this.isResultAvailable()?(n(this.getResult()),this._pollingPromise=null):t++>e?(i("Timed out"),this._pollingPromise=null):requestAnimationFrame(r)};requestAnimationFrame(r)})),this._pollingPromise}_createHandle(){return Yl.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}const Kl=Me()&&"undefined"!=typeof document;let Zl=0;class Jl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{onCreateContext:t=(e=>Yr(e)),onAddHTML:n=null,onInitialize:i=(()=>{}),onRender:r=(()=>{}),onFinalize:o=(()=>{}),onError:a,gl:s=null,glOptions:l={},debug:c=!1,createFramebuffer:u=!1,autoResizeViewport:h=!0,autoResizeDrawingBuffer:d=!0,stats:p=Jr.get("animation-loop-".concat(Zl++))}=e;let{useDevicePixels:f=!0}=e;"useDevicePixelRatio"in e&&(tr.deprecated("useDevicePixelRatio","useDevicePixels")(),f=e.useDevicePixelRatio),this.props={onCreateContext:t,onAddHTML:n,onInitialize:i,onRender:r,onFinalize:o,onError:a,gl:s,glOptions:l,debug:c,createFramebuffer:u},this.gl=s,this.needsRedraw=null,this.timeline=null,this.stats=p,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:h,autoResizeDrawingBuffer:d,useDevicePixels:f}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(e){return $r("string"==typeof e),this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._running)return this;this._running=!0;const t=this._getPageLoadPromise().then((()=>!this._running||this._initialized?null:(this._createWebGLContext(e),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=Yl.isSupported(this.gl,["timers"])?new Yl(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps)))).then((e=>{this._running&&(this._addCallbackData(e||{}),!1!==e&&this._startLoop())}));return this.props.onError&&t.catch(this.props.onError),this}redraw(){return this.isContextLost()||(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers()),this}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise((e=>{this._resolveNextFrame=e}))),this._nextFramePromise}async toDataURL(){return this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.gl.canvas.toDataURL()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=document.getElementById(e);return n?Number(n.value):t}setViewParameters(){return tr.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const e=()=>{this._running&&(this.redraw(),this._animationFrameId=this._requestAnimationFrame(e))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=Kl?new Promise(((e,t)=>{Kl&&"complete"===document.readyState?e(document):window.addEventListener("load",(()=>{e(document)}))})):Promise.resolve({})),this._pageLoadPromise}_setDisplay(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_cancelAnimationFrame(e){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(e):(t=e,"undefined"!=typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t));var t}_requestAnimationFrame(e){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(e):(t=e,"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60));var t}_renderFrame(){this.display?this.display._renderFrame(...arguments):this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:e,height:t,aspect:n}=this._getSizeAndAspect();e===this.animationProps.width&&t===this.animationProps.height||this.setNeedsRedraw("drawing buffer resized"),n!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=t,this.animationProps.aspect=n,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(e){"object"==typeof e&&null!==e&&(this.animationProps=Object.assign({},this.animationProps,e))}_createWebGLContext(e){if(this.offScreen=e.canvas&&"undefined"!=typeof OffscreenCanvas&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?Kr(this.props.gl,e):this.onCreateContext(e),!or(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");Ur(this.gl,wr),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const t=document.createElement("div");t.style.position="absolute",t.style.left="10px",t.style.bottom="10px",t.style.width="300px",t.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(t);const n=this.props.onAddHTML(t);n&&(t.innerHTML=n)}}_getSizeAndAspect(){const e=this.gl.drawingBufferWidth,t=this.gl.drawingBufferHeight;let n=1;const{canvas:i}=this.gl;return i&&i.clientHeight?n=i.clientWidth/i.clientHeight:e>0&&t>0&&(n=e/t),{width:e,height:t,aspect:n}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.canvas)return void function(e,t,n){let i="width"in n?n.width:e.canvas.clientWidth,r="height"in n?n.height:e.canvas.clientHeight;i&&r||(tr.log(1,"Canvas clientWidth/clientHeight is 0")(),t=1,i=e.canvas.width||1,r=e.canvas.height||1),e.luma=e.luma||{},e.luma.canvasSizeInfo=e.luma.canvasSizeInfo||{};const o=e.luma.canvasSizeInfo;if(o.clientWidth!==i||o.clientHeight!==r||o.devicePixelRatio!==t){let n=t;const o=Math.floor(i*n),a=Math.floor(r*n);e.canvas.width=o,e.canvas.height=a,e.drawingBufferWidth===o&&e.drawingBufferHeight===a||(tr.warn("Device pixel ratio clamped")(),n=Math.min(e.drawingBufferWidth/i,e.drawingBufferHeight/r),e.canvas.width=Math.floor(i*n),e.canvas.height=Math.floor(r*n)),Object.assign(e.luma.canvasSizeInfo,{clientWidth:i,clientHeight:r,devicePixelRatio:t})}}(e,function(e){const t="undefined"==typeof window?1:window.devicePixelRatio||1;return Number.isFinite(e)?e<=0?1:e:e?t:1}(t.useDevicePixels),t);const n=e.getExtension("STACKGL_resize_drawingbuffer");n&&"width"in t&&"height"in t&&n.resize(t.width,t.height)}(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new ea(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:e}=this.gl;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}_onMouseleave(e){this.animationProps._mousePosition=null}}var $l=a(840);const Ql={mousedown:1,mousemove:2,mouseup:4};!function(e){const t=e.prototype.handler;e.prototype.handler=function(e){const n=this.store;e.button>0&&"pointerdown"===e.type&&(function(t,n){for(let n=0;n<t.length;n++)if(t[n].pointerId===e.pointerId)return!0;return!1}(n)||n.push(e)),t.call(this,e)}}($l.PointerEventInput),$l.MouseInput.prototype.handler=function(e){let t=Ql[e.type];1&t&&e.button>=0&&(this.pressed=!0),2&t&&0===e.which&&(t=4),this.pressed&&(4&t&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))};const ec=$l.Manager,tc=$l;class nc{constructor(e,t,n){this.element=e,this.callback=t,this.options={enable:!0,...n}}}const ic=tc?[[tc.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[tc.Rotate,{enable:!1}],[tc.Pinch,{enable:!1}],[tc.Swipe,{enable:!1}],[tc.Pan,{threshold:0,enable:!1}],[tc.Press,{enable:!1}],[tc.Tap,{event:"doubletap",taps:2,enable:!1}],[tc.Tap,{event:"anytap",enable:!1}],[tc.Tap,{enable:!1}]]:null,rc={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},oc={doubletap:["tap"]},ac={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},sc={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},lc={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},cc={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},uc="undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",hc="undefined"!=typeof window?window:a.g;void 0!==a.g?a.g:window,"undefined"!=typeof document&&document;let dc=!1;try{const e={get passive(){return dc=!0,!0}};hc.addEventListener("test",null,e),hc.removeEventListener("test",null)}catch(e){dc=!1}const pc=-1!==uc.indexOf("firefox"),{WHEEL_EVENTS:fc}=sc,gc="wheel",mc=4.000244140625;class yc extends nc{constructor(e,t,n){super(e,t,n),this.handleEvent=e=>{if(!this.options.enable)return;let t=e.deltaY;hc.WheelEvent&&(pc&&e.deltaMode===hc.WheelEvent.DOM_DELTA_PIXEL&&(t/=hc.devicePixelRatio),e.deltaMode===hc.WheelEvent.DOM_DELTA_LINE&&(t*=40)),0!==t&&t%mc==0&&(t=Math.floor(t/mc)),e.shiftKey&&t&&(t*=.25),this.callback({type:gc,center:{x:e.clientX,y:e.clientY},delta:-t,srcEvent:e,pointerType:"mouse",target:e.target})},this.events=(this.options.events||[]).concat(fc),this.events.forEach((t=>e.addEventListener(t,this.handleEvent,!!dc&&{passive:!1})))}destroy(){this.events.forEach((e=>this.element.removeEventListener(e,this.handleEvent)))}enableEventType(e,t){e===gc&&(this.options.enable=t)}}const{MOUSE_EVENTS:vc}=sc,bc="pointermove",_c="pointerover",wc="pointerout",Pc="pointerenter",Ec="pointerleave";class xc extends nc{constructor(e,t,n){super(e,t,n),this.handleEvent=e=>{this.handleOverEvent(e),this.handleOutEvent(e),this.handleEnterEvent(e),this.handleLeaveEvent(e),this.handleMoveEvent(e)},this.pressed=!1;const{enable:i}=this.options;this.enableMoveEvent=i,this.enableLeaveEvent=i,this.enableEnterEvent=i,this.enableOutEvent=i,this.enableOverEvent=i,this.events=(this.options.events||[]).concat(vc),this.events.forEach((t=>e.addEventListener(t,this.handleEvent)))}destroy(){this.events.forEach((e=>this.element.removeEventListener(e,this.handleEvent)))}enableEventType(e,t){e===bc&&(this.enableMoveEvent=t),e===_c&&(this.enableOverEvent=t),e===wc&&(this.enableOutEvent=t),e===Pc&&(this.enableEnterEvent=t),e===Ec&&(this.enableLeaveEvent=t)}handleOverEvent(e){this.enableOverEvent&&"mouseover"===e.type&&this._emit(_c,e)}handleOutEvent(e){this.enableOutEvent&&"mouseout"===e.type&&this._emit(wc,e)}handleEnterEvent(e){this.enableEnterEvent&&"mouseenter"===e.type&&this._emit(Pc,e)}handleLeaveEvent(e){this.enableLeaveEvent&&"mouseleave"===e.type&&this._emit(Ec,e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":0===e.which&&(this.pressed=!1),this.pressed||this._emit(bc,e);break;case"mouseup":this.pressed=!1}}_emit(e,t){this.callback({type:e,center:{x:t.clientX,y:t.clientY},srcEvent:t,pointerType:"mouse",target:t.target})}}const{KEY_EVENTS:Ac}=sc,Cc="keydown",Sc="keyup";class Tc extends nc{constructor(e,t,n){super(e,t,n),this.handleEvent=e=>{const t=e.target||e.srcElement;"INPUT"===t.tagName&&"text"===t.type||"TEXTAREA"===t.tagName||(this.enableDownEvent&&"keydown"===e.type&&this.callback({type:Cc,srcEvent:e,key:e.key,target:e.target}),this.enableUpEvent&&"keyup"===e.type&&this.callback({type:Sc,srcEvent:e,key:e.key,target:e.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(Ac),e.tabIndex=this.options.tabIndex||0,e.style.outline="none",this.events.forEach((t=>e.addEventListener(t,this.handleEvent)))}destroy(){this.events.forEach((e=>this.element.removeEventListener(e,this.handleEvent)))}enableEventType(e,t){e===Cc&&(this.enableDownEvent=t),e===Sc&&(this.enableUpEvent=t)}}const Rc="contextmenu";class Ic extends nc{constructor(e,t,n){super(e,t,n),this.handleEvent=e=>{this.options.enable&&this.callback({type:Rc,center:{x:e.clientX,y:e.clientY},srcEvent:e,pointerType:"mouse",target:e.target})},e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,t){e===Rc&&(this.options.enable=t)}}const Mc=1,Lc=2,Dc=4,Oc={pointerdown:Mc,pointermove:Lc,pointerup:Dc,mousedown:Mc,mousemove:Lc,mouseup:Dc},jc=1,Nc=2,Fc=3,kc=0,Uc=1,zc=2,Bc=1,Gc=2,Vc=4;function Hc(e){const t=Oc[e.srcEvent.type];if(!t)return null;const{buttons:n,button:i,which:r}=e.srcEvent;let o=!1,a=!1,s=!1;return t===Dc||t===Lc&&!Number.isFinite(n)?(o=r===jc,a=r===Nc,s=r===Fc):t===Lc?(o=Boolean(n&Bc),a=Boolean(n&Vc),s=Boolean(n&Gc)):t===Mc&&(o=i===kc,a=i===Uc,s=i===zc),{leftButton:o,middleButton:a,rightButton:s}}function qc(e,t){const n=e.center;if(!n)return null;const i=t.getBoundingClientRect(),r=i.width/t.offsetWidth||1,o=i.height/t.offsetHeight||1;return{center:n,offsetCenter:{x:(n.x-i.left-t.clientLeft)/r,y:(n.y-i.top-t.clientTop)/o}}}const Wc={srcElement:"root",priority:0};class Xc{constructor(e){this.handleEvent=e=>{if(this.isEmpty())return;const t=this._normalizeEvent(e);let n=e.srcEvent.target;for(;n&&n!==t.rootElement;){if(this._emit(t,n),t.handled)return;n=n.parentNode}this._emit(t,"root")},this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,t,n,i=!1,r=!1){const{handlers:o,handlersByElement:a}=this;let s=Wc;"string"==typeof n||n&&n.addEventListener?s={...Wc,srcElement:n}:n&&(s={...Wc,...n});let l=a.get(s.srcElement);l||(l=[],a.set(s.srcElement,l));const c={type:e,handler:t,srcElement:s.srcElement,priority:s.priority};i&&(c.once=!0),r&&(c.passive=!0),o.push(c),this._active=this._active||!c.passive;let u=l.length-1;for(;u>=0&&!(l[u].priority>=c.priority);)u--;l.splice(u+1,0,c)}remove(e,t){const{handlers:n,handlersByElement:i}=this;for(let r=n.length-1;r>=0;r--){const o=n[r];if(o.type===e&&o.handler===t){n.splice(r,1);const e=i.get(o.srcElement);e.splice(e.indexOf(o),1),0===e.length&&i.delete(o.srcElement)}}this._active=n.some((e=>!e.passive))}_emit(e,t){const n=this.handlersByElement.get(t);if(n){let t=!1;const i=()=>{e.handled=!0},r=()=>{e.handled=!0,t=!0},o=[];for(let a=0;a<n.length;a++){const{type:s,handler:l,once:c}=n[a];if(l({...e,type:s,stopPropagation:i,stopImmediatePropagation:r}),c&&o.push(n[a]),t)break}for(let e=0;e<o.length;e++){const{type:t,handler:n}=o[e];this.remove(t,n)}}}_normalizeEvent(e){const t=this.eventManager.getElement();return{...e,...Hc(e),...qc(e,t),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:t}}}const Yc={events:null,recognizers:null,recognizerOptions:{},Manager:ec,touchAction:"none",tabIndex:0};class Kc{constructor(e=null,t){this._onBasicInput=e=>{const{srcEvent:t}=e,n=ac[t.type];n&&this.manager.emit(n,e)},this._onOtherEvent=e=>{this.manager.emit(e.type,e)},this.options={...Yc,...t},this.events=new Map,this.setElement(e);const{events:n}=this.options;n&&this.on(n)}getElement(){return this.element}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;const{options:t}=this,n=t.Manager;this.manager=new n(e,{touchAction:t.touchAction,recognizers:t.recognizers||ic}).on("hammer.input",this._onBasicInput),t.recognizers||Object.keys(rc).forEach((e=>{const t=this.manager.get(e);t&&rc[e].forEach((e=>{t.recognizeWith(e)}))}));for(const e in t.recognizerOptions){const n=this.manager.get(e);if(n){const i=t.recognizerOptions[e];delete i.enable,n.set(i)}}this.wheelInput=new yc(e,this._onOtherEvent,{enable:!1}),this.moveInput=new xc(e,this._onOtherEvent,{enable:!1}),this.keyInput=new Tc(e,this._onOtherEvent,{enable:!1,tabIndex:t.tabIndex}),this.contextmenuInput=new Ic(e,this._onOtherEvent,{enable:!1});for(const[e,t]of this.events)t.isEmpty()||(this._toggleRecognizer(t.recognizerName,!0),this.manager.on(e,t.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,t,n){this._addEventHandler(e,t,n,!1)}once(e,t,n){this._addEventHandler(e,t,n,!0)}watch(e,t,n){this._addEventHandler(e,t,n,!1,!0)}off(e,t){this._removeEventHandler(e,t)}_toggleRecognizer(e,t){const{manager:n}=this;if(!n)return;const i=n.get(e);if(i&&i.options.enable!==t){i.set({enable:t});const r=oc[e];r&&!this.options.recognizers&&r.forEach((r=>{const o=n.get(r);t?(o.requireFailure(e),i.dropRequireFailure(r)):o.dropRequireFailure(e)}))}this.wheelInput.enableEventType(e,t),this.moveInput.enableEventType(e,t),this.keyInput.enableEventType(e,t),this.contextmenuInput.enableEventType(e,t)}_addEventHandler(e,t,n,i,r){if("string"!=typeof e){n=t;for(const t in e)this._addEventHandler(t,e[t],n,i,r);return}const{manager:o,events:a}=this,s=cc[e]||e;let l=a.get(s);l||(l=new Xc(this),a.set(s,l),l.recognizerName=lc[s]||s,o&&o.on(s,l.handleEvent)),l.add(e,t,n,i,r),l.isEmpty()||this._toggleRecognizer(l.recognizerName,!0)}_removeEventHandler(e,t){if("string"!=typeof e){for(const t in e)this._removeEventHandler(t,e[t]);return}const{events:n}=this,i=cc[e]||e,r=n.get(i);if(r&&(r.remove(e,t),r.isEmpty())){const{recognizerName:e}=r;let t=!1;for(const i of n.values())if(i.recognizerName===e&&!i.isEmpty()){t=!0;break}t||this._toggleRecognizer(e,!1)}}}function Zc(){}const Jc={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:Zc,onResize:Zc,onViewStateChange:Zc,onInteractionStateChange:Zc,onBeforeRender:Zc,onAfterRender:Zc,onLoad:Zc,onError:e=>Je.error(e.message)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:({isDragging:e})=>e?"grabbing":"grab",getTooltip:null,debug:!1,drawPickingColors:!1};class $c{constructor(e){c(this,"props",void 0),c(this,"width",0),c(this,"height",0),c(this,"userData",{}),c(this,"canvas",null),c(this,"viewManager",null),c(this,"layerManager",null),c(this,"effectManager",null),c(this,"deckRenderer",null),c(this,"deckPicker",null),c(this,"eventManager",null),c(this,"tooltip",null),c(this,"metrics",void 0),c(this,"animationLoop",void 0),c(this,"stats",void 0),c(this,"viewState",void 0),c(this,"cursorState",void 0),c(this,"_needsRedraw",void 0),c(this,"_pickRequest",void 0),c(this,"_lastPointerDownInfo",null),c(this,"_metricsCounter",void 0),c(this,"_onPointerMove",(e=>{const{_pickRequest:t}=this;if("pointerleave"===e.type)t.x=-1,t.y=-1,t.radius=0;else{if(e.leftButton||e.rightButton)return;{const n=e.offsetCenter;if(!n)return;t.x=n.x,t.y=n.y,t.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:t.x,y:t.y}),t.event=e})),c(this,"_onEvent",(e=>{const t=si[e.type],n=e.offsetCenter;if(!t||!n||!this.layerManager)return;const i=this.layerManager.getLayers(),r=this.deckPicker.getLastPickedObject({x:n.x,y:n.y,layers:i,viewports:this.getViewports(n)},this._lastPointerDownInfo),{layer:o}=r,a=o&&(o[t.handler]||o.props[t.handler]),s=this.props[t.handler];let l=!1;a&&(l=a.call(o,r,e)),!l&&s&&s(r,e)})),c(this,"_onPointerDown",(e=>{const t=e.offsetCenter,n=this._pick("pickObject","pickObject Time",{x:t.x,y:t.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=n.result[0]||n.emptyInfo})),this.props={...Jc,...e},e=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},e.viewState&&e.initialViewState&&Je.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),"IE"===Xl()&&Je.warn("IE 11 is not supported")(),this.viewState=e.initialViewState,e.gl||"undefined"!=typeof document&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new at({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&Mn.setOptions(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){var e,t,n,i,r,o,a,s;this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,null===(e=this.layerManager)||void 0===e||e.finalize(),this.layerManager=null,null===(t=this.viewManager)||void 0===t||t.finalize(),this.viewManager=null,null===(n=this.effectManager)||void 0===n||n.finalize(),this.effectManager=null,null===(i=this.deckRenderer)||void 0===i||i.finalize(),this.deckRenderer=null,null===(r=this.deckPicker)||void 0===r||r.finalize(),this.deckPicker=null,null===(o=this.eventManager)||void 0===o||o.destroy(),this.eventManager=null,null===(a=this.tooltip)||void 0===a||a.remove(),this.tooltip=null,this.props.canvas||this.props.gl||!this.canvas||(null===(s=this.canvas.parentElement)||void 0===s||s.removeChild(this.canvas),this.canvas=null)}setProps(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&Je.removed("onLayerHover","onHover")(),"onLayerClick"in e&&Je.removed("onLayerClick","onClick")(),e.initialViewState&&!gs(this.props.initialViewState,e.initialViewState,3)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const t=Object.create(this.props);Object.assign(t,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(t),this.layerManager&&(this.viewManager.setProps(t),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(t),this.effectManager.setProps(t),this.deckRenderer.setProps(t),this.deckPicker.setProps(t)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const n=this.viewManager.needsRedraw(e),i=this.layerManager.needsRedraw(e),r=this.effectManager.needsRedraw(e),o=this.deckRenderer.needsRedraw(e);return t=t||n||i||r||o,t}redraw(e){if(!this.layerManager)return;let t=this.needsRedraw({clearRedrawFlags:!0});t=e||t,t&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(t):this._drawLayers(t))}get isInitialized(){return null!==this.viewManager}getViews(){return m(this.viewManager),this.viewManager.views}getViewports(e){return m(this.viewManager),this.viewManager.getViewports(e)}pickObject(e){const t=this._pick("pickObject","pickObject Time",e).result;return t.length?t[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,t=!1){for(const n in e)this.layerManager.resourceManager.add({resourceId:n,data:e[n],forceUpdate:t})}_removeResources(e){for(const t of e)this.layerManager.resourceManager.remove(t)}_addDefaultEffect(e){this.effectManager.addDefaultEffect(e)}_pick(e,t,n){m(this.deckPicker);const{stats:i}=this;i.get("Pick Count").incrementCount(),i.get(t).timeStart();const r=this.deckPicker[e]({layers:this.layerManager.getLayers(n),views:this.viewManager.getViews(),viewports:this.getViewports(n),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...n});return i.get(t).timeEnd(),r}_createCanvas(e){let t=e.canvas;return"string"==typeof t&&(t=document.getElementById(t),m(t)),t||(t=document.createElement("canvas"),t.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(t)),Object.assign(t.style,e.style),t}_setCanvasSize(e){if(!this.canvas)return;const{width:t,height:n}=e;if(t||0===t){const e=Number.isFinite(t)?"".concat(t,"px"):t;this.canvas.style.width=e}if(n||0===n){var i;const t=Number.isFinite(n)?"".concat(n,"px"):n;this.canvas.style.position=(null===(i=e.style)||void 0===i?void 0:i.position)||"absolute",this.canvas.style.height=t}}_updateCanvasSize(){const{canvas:e}=this;if(!e)return;const t=e.clientWidth||e.width,n=e.clientHeight||e.height;var i;t===this.width&&n===this.height||(this.width=t,this.height=n,null===(i=this.viewManager)||void 0===i||i.setProps({width:t,height:n}),this.props.onResize({width:t,height:n}))}_createAnimationLoop(e){const{width:t,height:n,gl:i,glOptions:r,debug:o,onError:a,onBeforeRender:s,onAfterRender:l,useDevicePixels:c}=e;return new Jl({width:t,height:n,useDevicePixels:c,autoResizeViewport:!1,gl:i,onCreateContext:e=>Yr({...r,...e,canvas:this.canvas,debug:o,onContextLost:()=>this._onContextLost()}),onInitialize:e=>this._setGLContext(e.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:s,onAfterRender:l,onError:a})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let e=this.props.views||[new Gs({id:"default-view"})];return e=Array.isArray(e)?e:[e],e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:e}=this;if(e.event){const{result:n,emptyInfo:i}=this._pick("pickObject","pickObject Time",e);this.cursorState.isHovering=n.length>0;let r=i,o=!1;for(const i of n){var t;r=i,o=(null===(t=i.layer)||void 0===t?void 0:t.onHover(i,e.event))||o}if(!o&&this.props.onHover&&this.props.onHover(r,e.event),this.props.getTooltip&&this.tooltip){const e=this.props.getTooltip(r);this.tooltip.setTooltip(e,r.x,r.y)}e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(e){if(this.layerManager)return;this.canvas||(this.canvas=e.canvas,Kr(e,{enable:!0,copyState:!0})),this.tooltip=new Al(this.canvas),Ur(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);const t=new Ee;t.play(),this.animationLoop.attachTimeline(t),this.eventManager=new Kc(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const e in si)this.eventManager.on(e,this._onEvent);this.viewManager=new ms({timeline:t,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const n=this.viewManager.getViewports()[0];this.layerManager=new fs(e,{deck:this,stats:this.stats,viewport:n,timeline:t}),this.effectManager=new dl,this.deckRenderer=new yl(e),this.deckPicker=new El(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,t){const{gl:n}=this.layerManager.context;Ur(n,this.props.parameters),this.props.onBeforeRender({gl:n}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",effects:this.effectManager.getEffects(),...t}),this.props.onAfterRender({gl:n})}_onRenderFrame(e){this._getFrameStats(),this._metricsCounter++%60==0&&(this._getMetrics(),this.stats.reset(),Je.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const t=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:t},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const t=this.animationLoop.stats;e.get("GPU Time").addTime(t.get("GPU Time").lastTiming),e.get("CPU Time").addTime(t.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:t}=this;e.fps=t.get("frameRate").getHz(),e.setPropsTime=t.get("setProps Time").time,e.updateAttributesTime=t.get("Update Attributes").time,e.framesRedrawn=t.get("Redraw Count").count,e.pickTime=t.get("pickObject Time").time+t.get("pickMultipleObjects Time").time+t.get("pickObjects Time").time,e.pickCount=t.get("Pick Count").count,e.gpuTime=t.get("GPU Time").time,e.cpuTime=t.get("CPU Time").time,e.gpuTimePerFrame=t.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=t.get("CPU Time").getAverageTime();const n=Jr.get("Memory Usage");e.bufferMemory=n.get("Buffer Memory").count,e.textureMemory=n.get("Texture Memory").count,e.renderbufferMemory=n.get("Renderbuffer Memory").count,e.gpuMemory=n.get("GPU Memory").count}}c($c,"defaultProps",Jc),c($c,"VERSION",ql);const Qc="undefined"!=typeof window?e.useLayoutEffect:e.useEffect;function eu(e,t){for(;e;){if(e===t)return!0;e=Object.getPrototypeOf(e)}return!1}class tu{constructor(e,t){c(this,"opts",void 0),c(this,"source",void 0),this.opts=t,this.source=e}get value(){return this.source.value}getValue(){const e=this.source.getBuffer(),t=this.getAccessor();if(e)return[e,t];const{value:n}=this.source,{size:i}=t;let r=n;if(n&&n.length!==i){r=new Float32Array(i);const e=t.elementOffset||0;for(let t=0;t<i;++t)r[t]=n[e+t]}return r}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}function nu(e){return e.stride||e.size*e.bytesPerElement}function iu(e,t){t.offset&&Je.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const n=nu(e),i=(void 0!==t.vertexOffset?t.vertexOffset:e.vertexOffset||0)*n+(t.elementOffset||0)*e.bytesPerElement+(e.offset||0);return{...t,offset:i,stride:n}}class ru{constructor(e,t,n){c(this,"gl",void 0),c(this,"id",void 0),c(this,"size",void 0),c(this,"settings",void 0),c(this,"value",void 0),c(this,"doublePrecision",void 0),c(this,"_buffer",void 0),c(this,"state",void 0),this.gl=e,this.id=t.id||"",this.size=t.size||1;const i=t.logicalType||t.type,r=5130===i;let o,{defaultValue:a}=t;a=Number.isFinite(a)?[a]:a||new Array(this.size).fill(0),o=r?5126:!i&&t.isIndexed?e&&function(e,t){return Jo(e,t)}(e,Yo)?5125:5123:i||5126;let s=function(e){switch(e){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}(i||o||5126);this.doublePrecision=r,r&&!1===t.fp64&&(s=Float32Array),this.value=null,this.settings={...t,defaultType:s,defaultValue:a,logicalType:i,type:o,size:this.size,bytesPerElement:s.BYTES_PER_ELEMENT},this.state={...n,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:e,type:t}=this.settings;this._buffer=new _o(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:t}})}return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*nu(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),Mn.release(this.state.allocatedValue)}getShaderAttributes(e,t){if(this.doublePrecision){const n={},i=this.value instanceof Float64Array,r=function(e,t){const n=iu(e,t);return{high:n,low:{...n,offset:n.offset+4*e.size}}}(this.getAccessor(),t||{});return n[e]=new tu(this,r.high),n["".concat(e,"64Low")]=i?new tu(this,r.low):new Float32Array(this.size),n}if(t){const n=iu(this.getAccessor(),t);return{[e]:new tu(this,n)}}return{[e]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){const t=Array.from(this.value);e=[t,t]}else{const{value:t,numInstances:n,size:i}=this,r=n*i;if(t&&r&&t.length>=r){const n=new Array(i).fill(1/0),o=new Array(i).fill(-1/0);for(let e=0;e<r;)for(let r=0;r<i;r++){const i=t[e++];i<n[r]&&(n[r]=i),i>o[r]&&(o[r]=i)}e=[n,o]}}return this.state.bounds=e,e}setData(e){const{state:t}=this;let n;n=ArrayBuffer.isView(e)?{value:e}:e instanceof _o?{buffer:e}:e;const i={...this.settings,...n};if(t.bufferAccessor=i,t.bounds=null,n.constant){let e=n.value;if(e=this._normalizeValue(e,[],0),this.settings.normalized&&(e=this.normalizeConstant(e)),t.constant&&this._areValuesEqual(e,this.value))return!1;t.externalBuffer=null,t.constant=!0,this.value=e}else if(n.buffer){const e=n.buffer;t.externalBuffer=e,t.constant=!1,this.value=n.value||null;const r=n.value instanceof Float64Array;i.type=n.type||e.accessor.type,i.bytesPerElement=e.accessor.BYTES_PER_ELEMENT*(r?2:1),i.stride=nu(i)}else if(n.value){this._checkExternalBuffer(n);let e=n.value;t.externalBuffer=null,t.constant=!1,this.value=e,i.bytesPerElement=e.BYTES_PER_ELEMENT,i.stride=nu(i);const{buffer:r,byteOffset:o}=this;this.doublePrecision&&e instanceof Float64Array&&(e=qn(e,i));const a=e.byteLength+o+2*i.stride;r.byteLength<a&&r.reallocate(a),r.setAccessor(null),r.subData({data:e,offset:o}),i.type=n.type||r.accessor.type}return!0}updateSubBuffer(e={}){this.state.bounds=null;const t=this.value,{startOffset:n=0,endOffset:i}=e;this.buffer.subData({data:this.doublePrecision&&t instanceof Float64Array?qn(t,{size:this.size,startIndex:n,endIndex:i}):t.subarray(n,i),offset:n*t.BYTES_PER_ELEMENT+this.byteOffset})}allocate(e,t=!1){const{state:n}=this,i=n.allocatedValue,r=Mn.allocate(i,e+1,{size:this.size,type:this.settings.defaultType,copy:t});this.value=r;const{buffer:o,byteOffset:a}=this;return o.byteLength<r.byteLength+a&&(o.reallocate(r.byteLength+a),t&&i&&o.subData({data:i instanceof Float64Array?qn(i,this):i,offset:a})),n.allocatedValue=r,n.constant=!1,n.externalBuffer=null,n.bufferAccessor=this.settings,!0}_checkExternalBuffer(e){const{value:t}=e;if(!ArrayBuffer.isView(t))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const n=this.settings.defaultType;let i=!1;if(this.doublePrecision&&(i=t.BYTES_PER_ELEMENT<4),i)throw new Error("Attribute ".concat(this.id," does not support ").concat(t.constructor.name));t instanceof n||!this.settings.normalized||"normalized"in e||Je.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(e){switch(this.settings.type){case 5120:return new Float32Array(e).map((e=>(e+128)/255*2-1));case 5122:return new Float32Array(e).map((e=>(e+32768)/65535*2-1));case 5121:return new Float32Array(e).map((e=>e/255));case 5123:return new Float32Array(e).map((e=>e/65535));default:return e}}_normalizeValue(e,t,n){const{defaultValue:i,size:r}=this.settings;if(Number.isFinite(e))return t[n]=e,t;if(!e)return t[n]=i[0],t;switch(r){case 4:t[n+3]=Number.isFinite(e[3])?e[3]:i[3];case 3:t[n+2]=Number.isFinite(e[2])?e[2]:i[2];case 2:t[n+1]=Number.isFinite(e[1])?e[1]:i[1];case 1:t[n+0]=Number.isFinite(e[0])?e[0]:i[0];break;default:let o=r;for(;--o>=0;)t[n+o]=Number.isFinite(e[o])?e[o]:i[o]}return t}_areValuesEqual(e,t){if(!e||!t)return!1;const{size:n}=this;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}}const ou=[],au=[];function su(e,t=0,n=1/0){let i=ou;const r={index:-1,data:e,target:[]};return e?"function"==typeof e[Symbol.iterator]?i=e:e.length>0&&(au.length=e.length,i=au):i=ou,(t>0||Number.isFinite(n))&&(i=(Array.isArray(i)?i:Array.from(i)).slice(t,n),r.index=t-1),{iterable:i,objectInfo:r}}function lu(e){return e&&e[Symbol.asyncIterator]}function cu(e,t){const{size:n,stride:i,offset:r,startIndices:o,nested:a}=t,s=e.BYTES_PER_ELEMENT,l=i?i/s:n,c=r?r/s:0,u=Math.floor((e.length-c)/l);return(t,{index:i,target:r})=>{if(!o){const t=i*l+c;for(let i=0;i<n;i++)r[i]=e[t+i];return r}const s=o[i],h=o[i+1]||u;let d;if(a){d=new Array(h-s);for(let t=s;t<h;t++){const i=t*l+c;r=new Array(n);for(let t=0;t<n;t++)r[t]=e[i+t];d[t-s]=r}}else if(l===n)d=e.subarray(s*n+c,h*n+c);else{d=new e.constructor((h-s)*n);let t=0;for(let i=s;i<h;i++){const r=i*l+c;for(let i=0;i<n;i++)d[t++]=e[r+i]}}return d}}const uu=[],hu=[[0,1/0]];function du(e){const{source:t,target:n,start:i=0,size:r,getData:o}=e,a=e.end||n.length,s=t.length,l=a-i;if(s>l)return void n.set(t.subarray(0,l),i);if(n.set(t,i),!o)return;let c=s;for(;c<l;){const e=o(c,t);for(let t=0;t<r;t++)n[i+c]=e[t]||0,c++}}const pu={interpolation:{duration:0,easing:e=>e},spring:{stiffness:.05,damping:.5}};function fu(e,t){if(!e)return null;Number.isFinite(e)&&(e={type:"interpolation",duration:e});const n=e.type||"interpolation";return{...pu[n],...t,...e,type:n}}function gu(e,t){const n=t.getBuffer();return n?[n,{divisor:0,size:t.size,normalized:t.settings.normalized}]:t.value}function mu(e){switch(e){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(e,'"'))}}function yu(e){e.push(e.shift())}function vu(e,t){const{doublePrecision:n,settings:i,value:r,size:o}=e,a=n&&r instanceof Float64Array?2:1;return(i.noAlloc?r.length:t*o)*a}function bu({buffer:e,numInstances:t,attribute:n,fromLength:i,fromStartIndices:r,getData:o=(e=>e)}){const a=n.doublePrecision&&n.value instanceof Float64Array?2:1,s=n.size*a,l=n.byteOffset,c=n.startIndices,u=r&&c,h=vu(n,t),d=n.isConstant;if(!u&&i>=h)return;const p=d?n.value:n.getBuffer().getData({srcByteOffset:l});if(n.settings.normalized&&!d){const e=o;o=(t,i)=>n.normalizeConstant(e(t,i))}const f=d?(e,t)=>o(p,t):(e,t)=>o(p.subarray(e,e+s),t),g=e.getData({length:i}),m=new Float32Array(h);!function({source:e,target:t,size:n,getData:i,sourceStartIndices:r,targetStartIndices:o}){if(!Array.isArray(o))return du({source:e,target:t,size:n,getData:i}),t;let a=0,s=0;const l=i&&((e,t)=>i(e+s,t)),c=Math.min(r.length,o.length);for(let i=1;i<c;i++){const c=r[i]*n,u=o[i]*n;du({source:e.subarray(a,c),target:t,start:s,end:u,size:n,getData:l}),a=c,s=u}s<t.length&&du({source:[],target:t,start:s,size:n,getData:l})}({source:g,target:m,sourceStartIndices:r,targetStartIndices:c,size:s,getData:f}),e.byteLength<m.byteLength+l&&e.reallocate(m.byteLength+l),e.subData({data:m,offset:l})}class _u extends ru{constructor(e,t){super(e,t,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:hu}),c(this,"constant",!1),this.settings.update=t.update||(t.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const t=this.state.needsRedraw;return this.state.needsRedraw=t&&!e,t}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat("function"!=typeof e&&e||[])}supportsTransition(){return Boolean(this.settings.transition)}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:t}=this.settings,n=this.settings.transition;return fu(Array.isArray(t)?e[t.find((t=>e[t]))]:e[t],n)}setNeedsUpdate(e=this.id,t){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),t){const{startRow:e=0,endRow:n=1/0}=t;this.state.updateRanges=function(e,t){if(e===hu)return e;if(t[0]<0&&(t[0]=0),t[0]>=t[1])return e;const n=[],i=e.length;let r=0;for(let o=0;o<i;o++){const i=e[o];i[1]<t[0]?(n.push(i),r=o+1):i[0]>t[1]?n.push(i):t=[Math.min(i[0],t[0]),Math.max(i[1],t[1])]}return n.splice(r,0,t),n}(this.state.updateRanges,[e,n])}else this.state.updateRanges=hu}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=uu}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){const{state:t,settings:n}=this;return!n.noAlloc&&!!n.update&&(super.allocate(e,t.updateRanges!==hu),!0)}updateBuffer({numInstances:e,data:t,props:n,context:i}){if(!this.needsUpdate())return!1;const{state:{updateRanges:r},settings:{update:o,noAlloc:a}}=this;let s=!0;if(o){for(const[a,s]of r)o.call(i,this,{data:t,startRow:a,endRow:s,props:n,numInstances:e});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[t,n]of r){const i=Number.isFinite(t)?this.getVertexOffset(t):0,r=Number.isFinite(n)?this.getVertexOffset(n):a||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:i,endOffset:r})}this._checkAttributeArray()}else s=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),s}setConstantValue(e){return void 0!==e&&"function"!=typeof e&&(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){const{state:t}=this;return e?(this.clearNeedsUpdate(),t.lastExternalBuffer===e||(t.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(t.lastExternalBuffer=null,!1)}setBinaryValue(e,t=null){const{state:n,settings:i}=this;if(!e)return n.binaryValue=null,n.binaryAccessor=null,!1;if(i.noAlloc)return!1;if(n.binaryValue===e)return this.clearNeedsUpdate(),!0;if(n.binaryValue=e,this.setNeedsRedraw(),i.transform||t!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});const r=e;m(ArrayBuffer.isView(r.value),"invalid ".concat(i.accessor));const o=Boolean(r.size)&&r.size!==this.size;return n.binaryAccessor=cu(r.value,{size:r.size||this.size,stride:r.stride,offset:r.offset,startIndices:t,nested:o}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:t}=this;return(t?e<t.length?t[e]:this.numInstances:e)*this.size}getShaderAttributes(){const e=this.settings.shaderAttributes||{[this.id]:null},t={};for(const n in e)Object.assign(t,super.getShaderAttributes(n,e[n]));return t}_autoUpdater(e,{data:t,startRow:n,endRow:i,props:r,numInstances:o}){if(e.constant)return;const{settings:a,state:s,value:l,size:c,startIndices:u}=e,{accessor:h,transform:d}=a,p=s.binaryAccessor||("function"==typeof h?h:r[h]);m("function"==typeof p,'accessor "'.concat(h,'" is not a function'));let f=e.getVertexOffset(n);const{iterable:g,objectInfo:y}=su(t,n,i);for(const t of g){y.index++;let n=p(t,y);if(d&&(n=d.call(this,n)),u){const t=(y.index<u.length-1?u[y.index+1]:o)-u[y.index];if(n&&Array.isArray(n[0])){let t=f;for(const i of n)e._normalizeValue(i,l,t),t+=c}else n&&n.length>c?l.set(n,f):(e._normalizeValue(n,y.target,0),it({target:l,source:y.target,start:f,count:t}));f+=t*c}else e._normalizeValue(n,l,f),f+=c}}_validateAttributeUpdaters(){const{settings:e}=this;if(!e.noAlloc&&"function"!=typeof e.update)throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:e}=this,t=Math.min(4,this.size);if(e&&e.length>=t){let n=!0;switch(t){case 4:n=n&&Number.isFinite(e[3]);case 3:n=n&&Number.isFinite(e[2]);case 2:n=n&&Number.isFinite(e[1]);case 1:n=n&&Number.isFinite(e[0]);break;default:n=!1}if(!n)throw new Error("Illegal attribute generated for ".concat(this.id))}}}const wu="void main() {gl_FragColor = vec4(0);}",Pu="out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}",Eu="#version 300 es\n".concat(Pu);function xu(e,t){t=Array.isArray(t)?t:[t];const n=e.replace(/^\s+/,"").split(/\s+/),[i,r,o]=n;return t.includes(i)&&r&&o?{qualifier:i,type:r,name:o.split(";")[0]}:null}function Au(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{version:t=100,input:n,inputType:i,output:r}=e;if(!n)return 300===t?Eu:t>300?"#version ".concat(t,"\n").concat(Pu):wu;const o=function(e,t){switch(t){case"float":return"vec4(".concat(e,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(e,", 0.0, 1.0)");case"vec3":return"vec4(".concat(e,", 1.0)");case"vec4":return e;default:return gi(!1),null}}(n,i);return t>=300?"#version ".concat(t," ").concat(300===t?"es":"","\nin ").concat(i," ").concat(n,";\nout vec4 ").concat(r,";\nvoid main() {\n  ").concat(r," = ").concat(o,";\n}"):"varying ".concat(i," ").concat(n,";\nvoid main() {\n  gl_FragColor = ").concat(o,";\n}")}class Cu extends so{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(e){return ar(e)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};lr(e),super(e,t),this.initialize(t),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,ro(this.buffers)||this.bind((()=>this._unbindBuffers())),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind((()=>{for(const t in e)this.setBuffer(t,e[t])})),this}setBuffer(e,t){const n=this._getVaryingIndex(e),{buffer:i,byteSize:r,byteOffset:o}=this._getBufferParams(t);return n<0?(this.unused[e]=i,tr.warn("".concat(this.id," unused varying buffer ").concat(e))(),this):(this.buffers[n]=t,this.bindOnUse||this._bindBuffer(n,i,o,r),this)}begin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let t,n,i;return e instanceof _o==0?(i=e.buffer,n=e.byteSize,t=e.byteOffset):i=e,void 0===t&&void 0===n||(t=t||0,n=n||i.byteLength-t),{buffer:i,byteOffset:t,byteSize:n}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;const t=Number(e);return Number.isFinite(t)?t:-1}_bindBuffers(){if(this.bindOnUse)for(const e in this.buffers){const{buffer:t,byteSize:n,byteOffset:i}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,t,i,n)}}_unbindBuffers(){if(this.bindOnUse)for(const e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;const r=t&&t.handle;return r&&void 0!==i?this.gl.bindBufferRange(35982,e,r,n,i):this.gl.bindBufferBase(35982,e,r),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}}class Su{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(t),Object.seal(this)}setupResources(e){for(const t of this.bindings)this._setupTransformFeedback(t,e)}updateModelProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyings:t}=this;return t.length>0&&(e=Object.assign({},e,{varyings:t})),e}getDrawOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this.bindings[this.currentIndex],{sourceBuffers:n,transformFeedback:i}=t;return{attributes:Object.assign({},n,e.attributes),transformFeedback:i}}swap(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(e)}getBuffer(e){const{feedbackBuffers:t}=this.bindings[this.currentIndex],n=e?t[e]:null;return n?n instanceof _o?n:n.buffer:null}getData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyingName:t}=e,n=this.getBuffer(t);return n?n.getData():null}delete(){for(const e in this.resources)this.resources[e].delete()}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&$r(ar(this.gl))}_getFeedbackBuffers(e){const{sourceBuffers:t={}}=e,n={};if(this.bindings[this.currentIndex]&&Object.assign(n,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const e in this.feedbackMap){const i=this.feedbackMap[e];e in t&&(n[i]=e)}Object.assign(n,e.feedbackBuffers);for(const e in n){const i=n[e];if("string"==typeof i){const r=t[i],{byteLength:o,usage:a,accessor:s}=r;n[e]=this._createNewBuffer(e,{byteLength:o,usage:a,accessor:s})}}return n}_setupBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:t=null}=e;Object.assign(this.feedbackMap,e.feedbackMap);const n=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:t,feedbackBuffers:n})}_setupTransformFeedback(e,t){let{model:n}=t;const{program:i}=n;e.transformFeedback=new Cu(this.gl,{program:i,buffers:e.feedbackBuffers})}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){const{sourceBuffers:e,feedbackBuffers:t}=this._swapBuffers(this.bindings[this.currentIndex]),n=this._getNextIndex();this.bindings[n]=this._updateBinding(this.bindings[n],{sourceBuffers:e,feedbackBuffers:t})}}_updateBinding(e,t){return e?(Object.assign(e.sourceBuffers,t.sourceBuffers),Object.assign(e.feedbackBuffers,t.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},t.sourceBuffers),feedbackBuffers:Object.assign({},t.feedbackBuffers)}}_swapBuffers(e){if(!this.feedbackMap)return null;const t=Object.assign({},e.sourceBuffers),n=Object.assign({},e.feedbackBuffers);for(const i in this.feedbackMap){const r=this.feedbackMap[i];t[i]=e.feedbackBuffers[r],n[r]=e.sourceBuffers[i],$r(n[r]instanceof _o)}return{sourceBuffers:t,feedbackBuffers:n}}_createNewBuffer(e,t){const n=new _o(this.gl,t);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=n,n}_getNextIndex(){return(this.currentIndex+1)%2}}function Tu(e){let t=100;const n=e.match(/[^\s]+/g);if(n.length>=2&&"#version"===n[0]){const e=parseInt(n[1],10);Number.isFinite(e)&&(t=e)}return t}const Ru={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null},Iu="transform_uSampler_",Mu="transform_uSize_",Lu="transform_position";const Du={10241:9728,10240:9728,10242:33071,10243:33071};class Ou{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(t),Object.seal(this)}updateModelProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this._processVertexShader(e);return Object.assign({},e,t)}getDrawOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:t,sourceTextures:n,framebuffer:i,targetTexture:r}=this.bindings[this.currentIndex],o=Object.assign({},t,e.attributes),a=Object.assign({},e.uniforms),s=Object.assign({},e.parameters);let l=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){o.transform_elementID=this.elementIDBuffer;for(const e in this.samplerTextureMap){const t=this.samplerTextureMap[e];a[e]=n[t]}this._setSourceTextureParameters();const e=function(e){let{sourceTextureMap:t,targetTextureVarying:n,targetTexture:i}=e;const r={};let o,a;n&&(({width:o,height:a}=i),r["".concat(Mu).concat(n)]=[o,a]);for(const e in t)({width:o,height:a}=t[e]),r["".concat(Mu).concat(e)]=[o,a];return r}({sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:r});Object.assign(a,e)}return this.hasTargetTexture&&(l=!1,s.viewport=[0,0,i.width,i.height]),{attributes:o,framebuffer:i,uniforms:a,discard:l,parameters:s}}swap(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupTextures(e)}getTargetTexture(){const{targetTexture:e}=this.bindings[this.currentIndex];return e}getData(){let{packed:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{framebuffer:t}=this.bindings[this.currentIndex],n=Ho(t);if(!e)return n;const i=n.constructor,r=function(e){switch(e){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return gi(!1),null}}(this.targetTextureType),o=new i(n.length*r/4);let a=0;for(let e=0;e<n.length;e+=4)for(let t=0;t<r;t++)o[a++]=n[e+t];return o}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{_targetTextureVarying:t,_swapTexture:n}=e;this._swapTexture=n,this.targetTextureVarying=t,this.hasTargetTexture=t,this._setupTextures(e)}_createTargetTexture(e){const{sourceTextures:t,textureOrReference:n}=e;if(n instanceof So)return n;const i=t[n];return i?(this._targetRefTexName=n,this._createNewTexture(i)):null}_setupTextures(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:t,_sourceTextures:n={},_targetTexture:i}=e,r=this._createTargetTexture({sourceTextures:n,textureOrReference:i});this.hasSourceTextures=this.hasSourceTextures||n&&Object.keys(n).length>0,this._updateBindings({sourceBuffers:t,sourceTextures:n,targetTexture:r}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}_updateElementIDBuffer(e){if("number"!=typeof e||this.elementCount>=e)return;const t=new Float32Array(e);t.forEach(((e,t,n)=>{n[t]=t})),this.elementIDBuffer?this.elementIDBuffer.setData({data:t}):this.elementIDBuffer=new _o(this.gl,{data:t,accessor:{size:1}}),this.elementCount=e}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){const{sourceTextures:e,targetTexture:t}=this._swapTextures(this.bindings[this.currentIndex]),n=this._getNextIndex();this.bindings[n]=this._updateBinding(this.bindings[n],{sourceTextures:e,targetTexture:t})}}_updateBinding(e,t){const{sourceBuffers:n,sourceTextures:i,targetTexture:r}=t;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,i),Object.assign(e.sourceBuffers,n),r){e.targetTexture=r;const{width:t,height:n}=r,{framebuffer:i}=e;i?(i.update({attachments:{36064:r},resizeAttachments:!1}),i.resize({width:t,height:n})):e.framebuffer=new ea(this.gl,{id:"transform-framebuffer",width:t,height:n,attachments:{36064:r}})}return e}_setSourceTextureParameters(){const e=this.currentIndex,{sourceTextures:t}=this.bindings[e];for(const e in t)t[e].setParameters(Du)}_swapTextures(e){if(!this._swapTexture)return null;const t=Object.assign({},e.sourceTextures);return t[this._swapTexture]=e.targetTexture,{sourceTextures:t,targetTexture:e.sourceTextures[this._swapTexture]}}_createNewTexture(e){const t=function(e,t){$r(e instanceof So||e instanceof Bo||e instanceof Go);const n=e.constructor,{gl:i,width:r,height:o,format:a,type:s,dataFormat:l,border:c,mipmaps:u}=e;return new n(i,Object.assign({width:r,height:o,format:a,type:s,dataFormat:l,border:c,mipmaps:u},{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}}))}(e);return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=t,t}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceTextures:t,targetTexture:n}=this.bindings[this.currentIndex],{vs:i,uniforms:r,targetTextureType:o,inject:a,samplerTextureMap:s}=function(e){let{vs:t,sourceTextureMap:n,targetTextureVarying:i,targetTexture:r}=e,o=Object.keys(n).length,a=null;const s={};let l=t,c={};if(o>0||i){const e=l.split("\n"),t=e.slice();if(e.forEach(((e,r,l)=>{if(o>0){const i=function(e,t){const n={},i=function(e){return xu(e,["attribute","in"])}(e);if(!i)return null;const{type:r,name:o}=i;if(o&&t[o]){const t="// ".concat(e," => Replaced by Transform with a sampler"),{samplerName:i,sizeName:a,uniformDeclerations:s}=function(e){const t="".concat(Iu).concat(e),n="".concat(Mu).concat(e);return{samplerName:t,sizeName:n,uniformDeclerations:"  uniform sampler2D ".concat(t,";\n  uniform vec2 ").concat(n,";")}}(o),l=function(e){switch(e){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return gi(!1),null}}(r),c="  ".concat(r," ").concat(o," = transform_getInput(").concat(i,", ").concat(a,").").concat(l,";\n");return n[i]=o,{updatedLine:t,inject:{"vs:#decl":s,"vs:#main-start":c},samplerTextureMap:n}}return null}(e,n);if(i){const{updatedLine:e,inject:n}=i;t[r]=e,c=ki([c,n]),Object.assign(s,i.samplerTextureMap),o--}}i&&!a&&(a=function(e,t){const n=xu(e,["varying","out"]);return n&&n.name===t?n.type:null}(e,i))})),i){$r(r);const e="".concat(Mu).concat(i),t="uniform vec2 ".concat(e,";\n"),n="     vec2 ".concat(Lu," = transform_getPos(").concat(e,");\n     gl_Position = vec4(").concat(Lu,", 0, 1.);\n");c=ki([c,{"vs:#decl":t,"vs:#main-start":n}])}l=t.join("\n")}return{vs:l,targetTextureType:a,inject:c,samplerTextureMap:s}}({vs:e.vs,sourceTextureMap:t,targetTextureVarying:this.targetTextureVarying,targetTexture:n}),l=ki([e.inject||{},a]);return this.targetTextureType=o,this.samplerTextureMap=s,{vs:i,fs:e._fs||Au({version:Tu(i),input:this.targetTextureVarying,inputType:o,output:"transform_output"}),modules:this.hasSourceTextures||this.targetTextureVarying?[Ru].concat(e.modules||[]):e.modules,uniforms:r,inject:l}}}let ju=null;class Nu extends so{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(e){return!(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).constantAttributeZero||ar(e)||"Chrome"===Xl()}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new Nu(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return Nu.MAX_ATTRIBUTES=Nu.MAX_ATTRIBUTES||e.getParameter(34921),Nu.MAX_ATTRIBUTES}static setConstant(e,t,n){switch(n.constructor){case Float32Array:Nu._setConstantFloatArray(e,t,n);break;case Int32Array:Nu._setConstantIntArray(e,t,n);break;case Uint32Array:Nu._setConstantUintArray(e,t,n);break;default:$r(!1)}}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=t.id||t.program&&t.program.id;super(e,Object.assign({},t,{id:n})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=t.isDefaultArray||!1,this.gl2=e,this.initialize(t),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return Nu.getMaxAttributes(this.gl)}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.setProps(e)}setProps(e){return this}setElementBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return $r(!e||34963===e.target,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.bind((()=>{this.gl.bindBuffer(34963,e?e.handle:null)})),this}setBuffer(e,t,n){if(34963===t.target)return this.setElementBuffer(t,n);const{size:i,type:r,stride:o,offset:a,normalized:s,integer:l,divisor:c}=n,{gl:u,gl2:h}=this;return e=Number(e),this.bind((()=>{u.bindBuffer(34962,t.handle),l?($r(ar(u)),h.vertexAttribIPointer(e,i,r,o,a)):u.vertexAttribPointer(e,i,r,s,o,a),u.enableVertexAttribArray(e),h.vertexAttribDivisor(e,c||0)})),this}enable(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!t&&0===e&&!Nu.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind((()=>t?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e)))),this}getConstantBuffer(e,t){const n=this._normalizeConstantArrayValue(t),i=n.byteLength*e,r=n.length*e;let o=!this.buffer;if(this.buffer=this.buffer||new _o(this.gl,i),o=o||this.buffer.reallocate(i),o=o||!this._compareConstantArrayValues(n,this.bufferValue),o){const e=function(e,t){var n;return new e((n=e.BYTES_PER_ELEMENT*t,(!ju||ju.byteLength<n)&&(ju=new ArrayBuffer(n)),ju),0,t)}(t.constructor,r);!function(e){let{target:t,source:n,start:i=0,count:r=1}=e;const o=n.length,a=r*o;let s=0;for(let e=i;s<o;s++)t[e++]=n[s];for(;s<a;)s<a-s?(t.copyWithin(i+s,i,i+s),s*=2):(t.copyWithin(i+s,i,i+a-s),s=a)}({target:e,source:n,start:0,count:r}),this.buffer.subData(e),this.bufferValue=t}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,t){if(!e||!t||e.length!==t.length||e.constructor!==t.constructor)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}static _setConstantFloatArray(e,t,n){switch(n.length){case 1:e.vertexAttrib1fv(t,n);break;case 2:e.vertexAttrib2fv(t,n);break;case 3:e.vertexAttrib3fv(t,n);break;case 4:e.vertexAttrib4fv(t,n);break;default:$r(!1)}}static _setConstantIntArray(e,t,n){switch($r(ar(e)),n.length){case 1:e.vertexAttribI1iv(t,n);break;case 2:e.vertexAttribI2iv(t,n);break;case 3:e.vertexAttribI3iv(t,n);break;case 4:e.vertexAttribI4iv(t,n);break;default:$r(!1)}}static _setConstantUintArray(e,t,n){switch($r(ar(e)),n.length){case 1:e.vertexAttribI1uiv(t,n);break;case 2:e.vertexAttribI2uiv(t,n);break;case 3:e.vertexAttribI3uiv(t,n);break;case 4:e.vertexAttribI4uiv(t,n);break;default:$r(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,t){let{location:n}=t;return $r(Number.isFinite(n)),this.bind((()=>34373===e?this.gl.getVertexAttribOffset(n,e):this.gl.getVertexAttrib(n,e)))}}const Fu=/^(.+)__LOCATION_([0-9]+)$/,ku=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class Uu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=t.id||t.program&&t.program.id;this.id=n,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new Nu(e),oo(this,"VertexArray","v6.0",ku),this.initialize(t),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:e}=this.vertexArrayObject;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(e){return Object.assign(this.attributes,e),this.vertexArrayObject.bind((()=>{for(const t in e){const n=e[t];this._setAttribute(t,n)}this.gl.bindBuffer(34962,null)})),this}setElementBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=e,this.elementsAccessor=t,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,t),this}setBuffer(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===t.target)return this.setElementBuffer(t,n);const{location:i,accessor:r}=this._resolveLocationAndAccessor(e,t,t.accessor,n);return i>=0&&(this.values[i]=t,this.accessors[i]=r,this.clearDrawParams(),this.vertexArrayObject.setBuffer(i,t,r)),this}setConstant(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{location:i,accessor:r}=this._resolveLocationAndAccessor(e,t,Object.assign({size:t.length},n));return i>=0&&(t=this.vertexArrayObject._normalizeConstantArrayValue(t),this.values[i]=t,this.accessors[i]=r,this.clearDrawParams(),this.vertexArrayObject.enable(i,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind((()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new _o(this.gl,{accessor:{size:4}});for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this.values[e]instanceof _o&&(this.gl.disableVertexAttribArray(e),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(e,1,5126,!1,0,0))})),this}bindBuffers(){return this.vertexArrayObject.bind((()=>{this.elements&&this.setElementBuffer(this.elements);for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++){const t=this.values[e];t instanceof _o&&this.setBuffer(e,t)}})),this}bindForDraw(e,t,n){let i;return this.vertexArrayObject.bind((()=>{this._setConstantAttributes(e,t),i=n()})),i}_resolveLocationAndAccessor(e,t,n,i){const r={location:-1,accessor:null},{location:o,name:a}=this._getAttributeIndex(e);if(!Number.isFinite(o)||o<0)return this.unused[e]=t,tr.once(3,(()=>"unused value ".concat(e," in ").concat(this.id)))(),r;const s=this._getAttributeInfo(a||o);if(!s)return r;const l=this.accessors[o]||{},c=mo.resolve(s.accessor,l,n,i),{size:u,type:h}=c;return $r(Number.isFinite(u)&&Number.isFinite(h)),{location:o,accessor:c}}_getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}_getAttributeIndex(e){const t=Number(e);if(Number.isFinite(t))return{location:t};const n=Fu.exec(e),i=n?n[1]:e,r=n?Number(n[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(i)+r,name:i}:{location:-1}}_setAttribute(e,t){if(t instanceof _o)this.setBuffer(e,t);else if(Array.isArray(t)&&t.length&&t[0]instanceof _o){const n=t[0],i=t[1];this.setBuffer(e,n,i)}else if(ArrayBuffer.isView(t)||Array.isArray(t)){const n=t;this.setConstant(e,n)}else{if(!(t.buffer instanceof _o))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");{const n=t;this.setBuffer(e,n.buffer,n)}}}_setConstantAttributes(e,t){const n=Math.max(0|e,0|t);let i=this.values[0];ArrayBuffer.isView(i)&&this._setConstantAttributeZero(i,n);for(let e=1;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)i=this.values[e],ArrayBuffer.isView(i)&&this._setConstantAttribute(e,i)}_setConstantAttributeZero(e,t){if(Nu.isSupported(this.gl,{constantAttributeZero:!0}))return void this._setConstantAttribute(0,e);const n=this.vertexArrayObject.getConstantBuffer(t,e);this.vertexArrayObject.setBuffer(0,n,this.accessors[0])}_setConstantAttribute(e,t){Nu.setConstant(this.gl,e,t)}_updateDrawParams(){const e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this._updateDrawParamsForLocation(e,t);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}_updateDrawParamsForLocation(e,t){const n=this.values[t],i=this.accessors[t];if(!n)return;const{divisor:r}=i,o=r>0;if(e.isInstanced=e.isInstanced||o,n instanceof _o){const t=n;if(o){const n=t.getVertexCount(i);e.instanceCount=Math.min(e.instanceCount,n)}else{const n=t.getVertexCount(i);e.vertexCount=Math.min(e.vertexCount,n)}}}setElements(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return tr.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,t)}}function zu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{isInteger:n=!1}=t;if(Array.isArray(e)||ArrayBuffer.isView(e))return function(e,t){const{maxElts:n=16,size:i=1}=t;let r="[";for(let o=0;o<e.length&&o<n;++o)o>0&&(r+=",".concat(o%i==0?" ":"")),r+=zu(e[o],t);const o=e.length>n?"...":"]";return"".concat(r).concat(o)}(e,t);if(!Number.isFinite(e))return String(e);if(Math.abs(e)<1e-16)return n?"0":"0.";if(n)return e.toFixed(0);if(Math.abs(e)>100&&Math.abs(e)<1e4)return e.toFixed(0);const i=e.toPrecision(2);return i.indexOf(".0")===i.length-2?i.slice(0,-1):i}function Bu(e,t,n,i){const{gl:r}=e;if(!t)return{[i]:"null","Format ":"N/A"};let o,a,s,l="NOT PROVIDED",c=1,u=0,h=0;if(n&&(l=n.type,c=n.size,l=String(l).replace("Array",""),o=-1!==l.indexOf("nt")),t instanceof _o){const e=t,{data:d,changed:p}=e.getDebugData();let f;if(a=p?"*":"",s=d,h=e.byteLength,u=h/d.BYTES_PER_ELEMENT/c,n){const e=n.divisor>0;f="".concat(e?"I ":"P "," ").concat(u," (x").concat(c,"=").concat(h," bytes ").concat(eo(r,l),")")}else o=!0,f="".concat(h," bytes");return{[i]:"".concat(a).concat(zu(s,{size:c,isInteger:o})),"Format ":f}}return s=t,c=t.length,l=String(t.constructor.name).replace("Array",""),o=-1!==l.indexOf("nt"),{[i]:"".concat(zu(s,{size:c,isInteger:o})," (constant)"),"Format ":"".concat(c,"x").concat(l," (constant)")}}function Gu(e,t){const{type:n,size:i}=t,r=Ga(n,i);return r?"".concat(e," (").concat(r.name,")"):e}function Vu(e){let{header:t="Uniforms",program:n,uniforms:i,undefinedOnly:r=!1}=e;$r(n);const o=".*Matrix",a=n._uniformSetters,s={},l=Object.keys(a).sort();let c=0;for(const e of l)e.match(".*_.*")||e.match(o)||Hu({table:s,header:t,uniforms:i,uniformName:e,undefinedOnly:r})&&c++;for(const e of l)e.match(o)&&Hu({table:s,header:t,uniforms:i,uniformName:e,undefinedOnly:r})&&c++;for(const e of l)s[e]||Hu({table:s,header:t,uniforms:i,uniformName:e,undefinedOnly:r})&&c++;let u=0;const h={};if(!r)for(const e in i){const n=i[e];s[e]||(u++,h[e]={Type:"NOT USED: ".concat(n),[t]:zu(n)})}return{table:s,count:c,unusedTable:h,unusedCount:u}}function Hu(e){let{table:t,header:n,uniforms:i,uniformName:r,undefinedOnly:o}=e;const a=i[r],s=function(e){return null!=e}(a);return!(o&&s||(t[r]={[n]:s?zu(a):"N/A","Uniform Type":s?a:"NOT PROVIDED"},0))}function qu(e){const{type:t,size:n}=e.accessor,i=Ga(t,n);return i?"".concat(i.name," ").concat(e.name):e.name}const Wu={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function Xu(e,t){const{attributeMap:n=Wu}=t||{};return n&&n[e]||e}function Yu(e,t){let n;switch(e){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors"}switch(n){case"vectors":t.size=t.size||3;break;case"uvs":t.size=t.size||2}$r(Number.isFinite(t.size),"attribute ".concat(e," needs size"))}const Ku=()=>{},Zu={};class Ju{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{id:n=no("model")}=t;$r(or(e)),this.id=n,this.gl=e,this.id=t.id||no("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(t)}initialize(e){this.props={},this.programManager=e.programManager||Xa.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:t=null,vs:n,fs:i,modules:r,defines:o,inject:a,varyings:s,bufferMode:l,transpileToGLSL100:c}=e;this.programProps={program:t,vs:n,fs:i,modules:r,defines:o,inject:a,varyings:s,bufferMode:l,transpileToGLSL100:c},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=void 0!==e.drawMode?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},$r(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}setProps(e){this._setModelProps(e)}delete(){for(const e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){const{program:t,vs:n,fs:i,modules:r,defines:o,inject:a,varyings:s,bufferMode:l,transpileToGLSL100:c}=e;this.programProps={program:t,vs:n,fs:i,modules:r,defines:o,inject:a,varyings:s,bufferMode:l,transpileToGLSL100:c},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return $r(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return $r(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function(e,t,n){const i={};let r=t.indices;for(const n in t.attributes){const o=t.attributes[n],a=Xu(n,undefined);if("indices"===n)r=o;else if(o.constant)i[a]=o.value;else{const t=o.value,r={...o};delete r.value,i[a]=[new _o(e,t),r],Yu(n,r)}}if(r){const t=r.value||r;$r(t instanceof Uint16Array||t instanceof Uint32Array,'attribute array for "indices" must be of integer type');const n={size:1,isIndexed:void 0===r.isIndexed||r.isIndexed};i.indices=[new _o(e,{data:t,target:34963}),n]}return i}(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(ro(e))return this;const t={};for(const n in e){const i=e[n];t[n]=i.getValue?i.getValue():i}return this.vertexArray.setAttributes(t),this}setUniforms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(this.uniforms,e),this}getModuleUniforms(e){this._checkProgram();const t=this.programManager.getUniforms(this.program);return t?t(e):{}}updateModuleSettings(e){const t=this.getModuleUniforms(e||{});return this.setUniforms(t)}clear(e){return Uo(this.program.gl,e),this}draw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._checkProgram();const{moduleSettings:t=null,framebuffer:n,uniforms:i={},attributes:r={},transformFeedback:o=this.transformFeedback,parameters:a={},vertexArray:s=this.vertexArray}=e;let l;this.setAttributes(r),this.updateModuleSettings(t),this.setUniforms(i),tr.priority>=2&&(l=this._logDrawCallStart(2));const c=this.vertexArray.getDrawParams(),{isIndexed:u=c.isIndexed,indexType:h=c.indexType,indexOffset:d=c.indexOffset,vertexArrayInstanced:p=c.isInstanced}=this.props;p&&!this.isInstanced&&tr.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:f,instanceCount:g}=this,{onBeforeRender:m=Ku,onAfterRender:y=Ku}=this.props;m(),this.program.setUniforms(this.uniforms);const v=this.program.draw(Object.assign(Zu,e,{logPriority:l,uniforms:null,framebuffer:n,parameters:a,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:s,transformFeedback:o,isIndexed:u,indexType:h,isInstanced:f,instanceCount:g,offset:u?d:0}));return y(),tr.priority>=2&&this._logDrawCallEnd(l,s,n),v}transform(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{discard:t=!0,feedbackBuffers:n,unbindModels:i=[]}=e;let{parameters:r}=e;n&&this._setFeedbackBuffers(n),t&&(r=Object.assign({},r,{35977:t})),i.forEach((e=>e.vertexArray.unbindBuffers()));try{this.draw(Object.assign({},e,{parameters:r}))}finally{i.forEach((e=>e.vertexArray.bindBuffers()))}return this}render(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return tr.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!this._programDirty&&this.programManager.stateHash===this._programManagerState)return;let{program:e}=this.programProps;if(e)this._managedProgram=!1;else{const{vs:t,fs:n,modules:i,inject:r,defines:o,varyings:a,bufferMode:s,transpileToGLSL100:l}=this.programProps;e=this.programManager.get({vs:t,fs:n,modules:i,inject:r,defines:o,varyings:a,bufferMode:s,transpileToGLSL100:l}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}$r(e instanceof Wa,"Model needs a program"),this._programDirty=!1,e!==this.program&&(this.program=e,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new Uu(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const e in this.geometryBuffers){const t=this.geometryBuffers[e][0]||this.geometryBuffers[e];t instanceof _o&&t.delete()}}_setAnimationProps(e){this.animated&&$r(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(ro(e))return this;const{gl:t}=this.program;return this.transformFeedback=this.transformFeedback||new Cu(t,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){const t=e>3?0:1e4;if(!(Date.now()-this.lastLogTime<t))return this.lastLogTime=Date.now(),tr.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:tr.level<=2})(),e}_logDrawCallEnd(e,t,n,i){if(void 0===e)return;const r=function(e){let{vertexArray:t,header:n="Attributes"}=e;if(!t.configuration)return{};const i={};t.elements&&(i.ELEMENT_ARRAY_BUFFER=Bu(t,t.elements,null,n));const r=t.values;for(const e in r){const o=t._getAttributeInfo(e);if(o){let a="".concat(e,": ").concat(o.name);const s=t.accessors[o.location];s&&(a="".concat(e,": ").concat(Gu(o.name,s))),i[a]=Bu(t,r[e],s,n)}}return i}({vertexArray:t,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:o,unusedTable:a,unusedCount:s}=Vu({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n)}),{table:l,count:c}=Vu({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n),undefinedOnly:!0});c>0&&tr.log("MISSING UNIFORMS",Object.keys(l))(),s>0&&tr.log("UNUSED UNIFORMS",Object.keys(a))();const u=function(e){const t={},n="Accessors for ".concat(e.id);for(const i of e.attributeInfos)if(i){const e=qu(i);t["in ".concat(e)]={[n]:JSON.stringify(i.accessor)}}for(const i of e.varyingInfos)if(i){const e=qu(i);t["out ".concat(e)]={[n]:JSON.stringify(i.accessor)}}return t}(this.vertexArray.configuration);tr.table(e,r)(),tr.table(e,o)(),tr.table(e+1,u)(),i&&i.log({logLevel:2,message:"Rendered to ".concat(i.id)}),tr.groupEnd(2)()}}class $u{static isSupported(e){return ar(e)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(t),Object.seal(this)}delete(){const{model:e,bufferTransform:t,textureTransform:n}=this;e&&e.delete(),t&&t.delete(),n&&n.delete()}run(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{clearRenderTarget:t=!0}=e,n=this._updateDrawOptions(e);t&&n.framebuffer&&n.framebuffer.clear({color:!0}),this.model.transform(n)}swap(){let e=!1;const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of t)e=e||n.swap();$r(e,"Nothing to swap")}getBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(e)}getData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of t){const t=n.getData(e);if(t)return t}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"elementCount"in e&&this.model.setVertexCount(e.elementCount);const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of t)n.update(e)}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{gl:t}=this;this._buildResourceTransforms(t,e),e=this._updateModelProps(e),this.model=new Ju(t,Object.assign({},e,{fs:e.fs||Au({version:Tu(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(e){let t=Object.assign({},e);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const e of n)t=e.updateModelProps(t);return t}_buildResourceTransforms(e,t){(function(e){return!(ro(e.feedbackBuffers)&&ro(e.feedbackMap)&&!(e.varyings&&e.varyings.length>0))})(t)&&(this.bufferTransform=new Su(e,t)),function(e){return!(ro(e._sourceTextures)&&!e._targetTexture&&!e._targetTextureVarying)}(t)&&(this.textureTransform=new Ou(e,t)),$r(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(e){let t=Object.assign({},e);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const e of n)t=Object.assign(t,e.getDrawOptions(t));return t}}const Qu={interpolation:class{constructor({gl:e,attribute:t,timeline:n}){c(this,"gl",void 0),c(this,"type","interpolation"),c(this,"attributeInTransition",void 0),c(this,"settings",void 0),c(this,"attribute",void 0),c(this,"transition",void 0),c(this,"currentStartIndices",void 0),c(this,"currentLength",void 0),c(this,"transform",void 0),c(this,"buffers",void 0),this.gl=e,this.transition=new Ps(n),this.attribute=t,this.attributeInTransition=new _u(e,t.settings),this.currentStartIndices=t.startIndices,this.currentLength=0,this.transform=function(e,t){const n=mu(t.size);return new $u(e,{vs:"\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nattribute ATTRIBUTE_TYPE aFrom;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n",defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"]})}(e,t);const i={byteLength:0,usage:35050};this.buffers=[new _o(e,i),new _o(e,i)]}get inProgress(){return this.transition.inProgress}start(e,t){if(e.duration<=0)return void this.transition.cancel();this.settings=e;const{gl:n,buffers:i,attribute:r}=this;yu(i);const o={numInstances:t,attribute:r,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const e of i)bu({buffer:e,...o});this.currentStartIndices=r.startIndices,this.currentLength=vu(r,t),this.attributeInTransition.setData({buffer:i[1],value:r.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/r.size),sourceBuffers:{aFrom:i[0],aTo:gu(0,r)},feedbackBuffers:{vCurrent:i[1]}})}update(){const e=this.transition.update();if(e){const{duration:e,easing:t}=this.settings,{time:n}=this.transition;let i=n/e;t&&(i=t(i)),this.transform.run({uniforms:{time:i}})}return e}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0}},spring:class{constructor({gl:e,attribute:t,timeline:n}){c(this,"gl",void 0),c(this,"type","spring"),c(this,"attributeInTransition",void 0),c(this,"settings",void 0),c(this,"attribute",void 0),c(this,"transition",void 0),c(this,"currentStartIndices",void 0),c(this,"currentLength",void 0),c(this,"texture",void 0),c(this,"framebuffer",void 0),c(this,"transform",void 0),c(this,"buffers",void 0),this.gl=e,this.type="spring",this.transition=new Ps(n),this.attribute=t,this.attributeInTransition=new _u(e,{...t.settings,normalized:!1}),this.currentStartIndices=t.startIndices,this.currentLength=0,this.texture=function(e){return new So(e,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}(e),this.framebuffer=function(e,t){return new ea(e,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{36064:t}})}(e,this.texture),this.transform=function(e,t,n){const i=mu(t.size);return new $u(e,{framebuffer:n,vs:"\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nattribute ATTRIBUTE_TYPE aPrev;\nattribute ATTRIBUTE_TYPE aCur;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vNext;\nvarying float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",fs:"\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nvarying float vIsTransitioningFlag;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  gl_FragColor = vec4(1.0);\n}",defines:{ATTRIBUTE_TYPE:i},varyings:["vNext"]})}(e,t,this.framebuffer);const i={byteLength:0,usage:35050};this.buffers=[new _o(e,i),new _o(e,i),new _o(e,i)]}get inProgress(){return this.transition.inProgress}start(e,t){const{gl:n,buffers:i,attribute:r}=this,o={numInstances:t,attribute:r,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const e of i)bu({buffer:e,...o});this.settings=e,this.currentStartIndices=r.startIndices,this.currentLength=vu(r,t),this.attributeInTransition.setData({buffer:i[1],value:r.value}),this.transition.start({...e,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/r.size),sourceBuffers:{aTo:gu(0,r)}})}update(){const{buffers:e,transform:t,framebuffer:n,transition:i}=this;if(!i.update())return!1;const r=this.settings;return t.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),t.run({framebuffer:n,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:r.stiffness,damping:r.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),yu(e),this.attributeInTransition.setData({buffer:e[1],value:this.attribute.value}),Ho(n)[0]>0||i.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}};class eh{constructor(e,{id:t,timeline:n}){c(this,"id",void 0),c(this,"isSupported",void 0),c(this,"gl",void 0),c(this,"timeline",void 0),c(this,"transitions",void 0),c(this,"needsRedraw",void 0),c(this,"numInstances",void 0),this.id=t,this.gl=e,this.timeline=n,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=$u.isSupported(e)}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:t,numInstances:n}){this.numInstances=n||1;for(const n in e){const i=e[n],r=i.getTransitionSetting(t);r&&this._updateAttribute(n,i,r)}for(const n in this.transitions){const i=e[n];i&&i.getTransitionSetting(t)||this._removeTransition(n)}}hasAttribute(e){const t=this.transitions[e];return t&&t.inProgress}getAttributes(){const e={};for(const t in this.transitions){const n=this.transitions[t];n.inProgress&&(e[t]=n.attributeInTransition)}return e}run(){if(!this.isSupported||0===this.numInstances)return!1;for(const e in this.transitions)this.transitions[e].update()&&(this.needsRedraw=!0);const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].cancel(),delete this.transitions[e]}_updateAttribute(e,t,n){const i=this.transitions[e];let r=!i||i.type!==n.type;if(r){if(!this.isSupported)return void Je.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();i&&this._removeTransition(e);const o=Qu[n.type];o?this.transitions[e]=new o({attribute:t,timeline:this.timeline,gl:this.gl}):(Je.error("unsupported transition type '".concat(n.type,"'"))(),r=!1)}(r||t.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(n,this.numInstances))}}const th="attributeManager.invalidate";class nh{constructor(e,{id:t="attribute-manager",stats:n,timeline:i}={}){c(this,"id",void 0),c(this,"gl",void 0),c(this,"attributes",void 0),c(this,"updateTriggers",void 0),c(this,"needsRedraw",void 0),c(this,"userData",void 0),c(this,"stats",void 0),c(this,"attributeTransitionManager",void 0),c(this,"mergeBoundsMemoized",ts(Wn)),this.id=t,this.gl=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=n,this.attributeTransitionManager=new eh(e,{id:"".concat(t,"-transitions"),timeline:i}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const t=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,t&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{instanced:1})}remove(e){for(const t of e)void 0!==this.attributes[t]&&(this.attributes[t].delete(),delete this.attributes[t])}invalidate(e,t){const n=this._invalidateTrigger(e,t);et(th,this,e,n)}invalidateAll(e){for(const t in this.attributes)this.attributes[t].setNeedsUpdate(t,e);et(th,this,"all")}update({data:e,numInstances:t,startIndices:n=null,transitions:i,props:r={},buffers:o={},context:a={}}){let s=!1;et("attributeManager.updateStart",this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const i in this.attributes){const l=this.attributes[i],c=l.settings.accessor;l.startIndices=n,l.numInstances=t,r[i]&&Je.removed("props.".concat(i),"data.attributes.".concat(i))(),l.setExternalBuffer(o[i])||l.setBinaryValue("string"==typeof c?o[c]:void 0,e.startIndices)||"string"==typeof c&&!o[c]&&l.setConstantValue(r[c])||l.needsUpdate()&&(s=!0,this._updateAttribute({attribute:l,numInstances:t,data:e,props:r,context:a})),this.needsRedraw=this.needsRedraw||l.needsRedraw()}s&&et("attributeManager.updateEnd",this,t),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:t,transitions:i})}updateTransition(){const{attributeTransitionManager:e}=this,t=e.run();return this.needsRedraw=this.needsRedraw||t,t}getAttributes(){return this.attributes}getBounds(e){const t=e.map((e=>{var t;return null===(t=this.attributes[e])||void 0===t?void 0:t.getBounds()}));return this.mergeBoundsMemoized(t)}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:t,attributeTransitionManager:n}=this,i={...n.getAttributes()};for(const r in t){const o=t[r];o.needsRedraw(e)&&!n.hasAttribute(r)&&(i[r]=o)}return i}getShaderAttributes(e,t={}){e||(e=this.getAttributes());const n={};for(const i in e)t[i]||Object.assign(n,e[i].getShaderAttributes());return n}_add(e,t={}){for(const n in e){const i=e[n];this.attributes[n]=this._createAttribute(n,i,t)}this._mapUpdateTriggersToAttributes()}_createAttribute(e,t,n){const i={...t,id:e,size:(t.isIndexed?1:t.size)||1,divisor:n.instanced?1:t.divisor||0};return new _u(this.gl,i)}_mapUpdateTriggersToAttributes(){const e={};for(const t in this.attributes)this.attributes[t].getUpdateTriggers().forEach((n=>{e[n]||(e[n]=[]),e[n].push(t)}));this.updateTriggers=e}_invalidateTrigger(e,t){const{attributes:n,updateTriggers:i}=this,r=i[e];return r&&r.forEach((e=>{const i=n[e];i&&i.setNeedsUpdate(i.id,t)})),r}_updateAttribute(e){const{attribute:t,numInstances:n}=e;et("attribute.updateStart",t),t.constant?t.setConstantValue(t.value):(t.allocate(n)&&et("attribute.allocate",t,n),t.updateBuffer(e)&&(this.needsRedraw=!0,et("attribute.updateEnd",t,n)))}}const ih=1e-5;function rh(e,t,n,i,r){const o=t-e;return(n-t)*r+-o*i+o+t}function oh(e,t){if(Array.isArray(e)){let n=0;for(let i=0;i<e.length;i++){const r=e[i]-t[i];n+=r*r}return Math.sqrt(n)}return Math.abs(e-t)}const ah={interpolation:class extends Ps{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:t,toValue:n,duration:i,easing:r}}=this,o=r(e/i);this._value=f(t,n,o)}},spring:class extends Ps{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:t,damping:n,stiffness:i}=this.settings,{_prevValue:r=e,_currValue:o=e}=this;let a=function(e,t,n,i,r){if(Array.isArray(n)){const o=[];for(let a=0;a<n.length;a++)o[a]=rh(e[a],t[a],n[a],i,r);return o}return rh(e,t,n,i,r)}(r,o,t,n,i);const s=oh(a,t),l=oh(a,o);s<ih&&l<ih&&(a=t,this.end()),this._prevValue=o,this._currValue=a}}};class sh{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,t,n,i){const{transitions:r}=this;if(r.has(e)){const n=r.get(e),{value:i=n.settings.fromValue}=n;t=i,this.remove(e)}if(!(i=fu(i)))return;const o=ah[i.type];if(!o)return void Je.error("unsupported transition type '".concat(i.type,"'"))();const a=new o(this.timeline);a.start({...i,fromValue:t,toValue:n}),r.set(e,a)}remove(e){const{transitions:t}=this;t.has(e)&&(t.get(e).cancel(),t.delete(e))}update(){const e={};for(const[t,n]of this.transitions)n.update(),e[t]=n.value,n.inProgress||this.remove(t);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}function lh(e,t){if(!e.transitions)return!1;const n={},i=e[Ae];let r=!1;for(const o in e.transitions){const a=i[o],s=a&&a.type;("number"===s||"color"===s||"array"===s)&&uh(e[o],t[o],a)&&(n[o]=!0,r=!0)}return!!r&&n}function ch({newProps:e,oldProps:t,ignoreProps:n={},propTypes:i={},triggerName:r="props"}){if(t===e)return!1;if("object"!=typeof e||null===e)return"".concat(r," changed shallowly");if("object"!=typeof t||null===t)return"".concat(r," changed shallowly");for(const o of Object.keys(e))if(!(o in n)){if(!(o in t))return"".concat(r,".").concat(o," added");const n=uh(e[o],t[o],i[o]);if(n)return"".concat(r,".").concat(o," ").concat(n)}for(const o of Object.keys(t))if(!(o in n)){if(!(o in e))return"".concat(r,".").concat(o," dropped");if(!Object.hasOwnProperty.call(e,o)){const n=uh(e[o],t[o],i[o]);if(n)return"".concat(r,".").concat(o," ").concat(n)}}return!1}function uh(e,t,n){let i=n&&n.equal;return i&&!i(e,t,n)?"changed deeply":i||(i=e&&t&&e.equals,!i||i.call(e,t))?i||t===e?null:"changed shallowly":"changed deeply"}function hh(e,t){if(null===t)return!0;const n=t.extensions,{extensions:i}=e;if(i===n)return!1;if(!n||!i)return!0;if(i.length!==n.length)return!0;for(let e=0;e<i.length;e++)if(!i[e].equals(n[e]))return!0;return!1}function dh(e,t,n){let i=e.updateTriggers[n];i=null==i?{}:i;let r=t.updateTriggers[n];return r=null==r?{}:r,ch({oldProps:r,newProps:i,triggerName:n})}const ph="count(): argument not an object",fh="count(): argument not a container";function gh(e,t){if(!t)return e;const n={...e,...t};if("defines"in t&&(n.defines={...e.defines,...t.defines}),"modules"in t&&(n.modules=(e.modules||[]).concat(t.modules),t.modules.some((e=>"project64"===e.name)))){const e=n.modules.findIndex((e=>"project32"===e.name));e>=0&&n.modules.splice(e,1)}if("inject"in t)if(e.inject){const i={...e.inject};for(const e in t.inject)i[e]=(i[e]||"")+t.inject[e];n.inject=i}else n.inject=t.inject;return n}const mh=[0,0,0];function yh(e,t,n=!1){const i=t.projectPosition(e);if(n&&t instanceof ws){const[n,r,o=0]=e,a=t.getDistanceScales([n,r]);i[2]=o*a.unitsPerMeter[2]}return i}function vh(e,{viewport:t,modelMatrix:n,coordinateSystem:i,coordinateOrigin:r,offsetMode:o}){let[a,s,l=0]=e;switch(n&&([a,s,l]=P([],[a,s,l,1],n)),i){case ri.LNGLAT:return yh([a,s,l],t,o);case ri.LNGLAT_OFFSETS:return yh([a+r[0],s+r[1],l+(r[2]||0)],t,o);case ri.METER_OFFSETS:return yh(se(r,[a,s,l]),t,o);case ri.CARTESIAN:default:return t.isGeospatial?[a+r[0],s+r[1],l+r[2]]:t.projectPosition([a,s,l])}}const bh={10241:9987,10240:9729,10242:33071,10243:33071},_h={},wh={boolean:{validate:(e,t)=>!0,equal:(e,t,n)=>Boolean(e)===Boolean(t)},number:{validate:(e,t)=>Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)},color:{validate:(e,t)=>t.optional&&!e||xh(e)&&(3===e.length||4===e.length),equal:(e,t,n)=>gs(e,t,1)},accessor:{validate(e,t){const n=Ah(e);return"function"===n||n===Ah(t.value)},equal:(e,t,n)=>"function"==typeof t||gs(e,t,1)},array:{validate:(e,t)=>t.optional&&!e||xh(e),equal(e,t,n){const{compare:i}=n,r=Number.isInteger(i)?i:i?1:0;return i?gs(e,t,r):e===t}},object:{equal(e,t,n){if(n.ignore)return!0;const{compare:i}=n,r=Number.isInteger(i)?i:i?1:0;return i?gs(e,t,r):e===t}},function:{validate:(e,t)=>t.optional&&!e||"function"==typeof e,equal:(e,t,n)=>!n.compare&&!1!==n.ignore||e===t},data:{transform:(e,t,n)=>{const{dataTransform:i}=n.props;return i&&e?i(e):e}},image:{transform:(e,t,n)=>{const i=n.context;return i&&i.gl?function(e,t,n){if(t instanceof So)return t;t.constructor&&"Object"!==t.constructor.name&&(t={data:t});let i=null;t.compressed&&(i={10241:t.data.length>1?9985:9729});const r=new So(e,{...t,parameters:{...bh,...i,...n}});return _h[r.id]=!0,r}(i.gl,e,{...t.parameters,...n.props.textureParameters}):null},release:e=>{var t;(t=e)&&t instanceof So&&_h[t.id]&&(t.delete(),delete _h[t.id])}}};function Ph(e,t){switch(Ah(t)){case"object":return Eh(e,t);case"array":return Eh(e,{type:"array",value:t,compare:!1});case"boolean":return Eh(e,{type:"boolean",value:t});case"number":return Eh(e,{type:"number",value:t});case"function":return Eh(e,{type:"function",value:t,compare:!0});default:return{name:e,type:"unknown",value:t}}}function Eh(e,t){return"type"in t?{name:e,...wh[t.type],...t}:"value"in t?{name:e,type:Ah(t.value),...t}:{name:e,type:"object",value:t}}function xh(e){return Array.isArray(e)||ArrayBuffer.isView(e)}function Ah(e){return xh(e)?"array":null===e?"null":typeof e}const Ch="_mergedDefaultProps";function Sh(e,t){let n=Ch;if(t)for(const e of t){const t=e.constructor;t&&(n+=":".concat(t.extensionName||t.name))}return Ih(e,n)||(e[n]=function(e,t){if(!e.prototype)return null;const n=Sh(Object.getPrototypeOf(e)),i=function(e){const t={},n={},i={};for(const[r,o]of Object.entries(e)){const e=null==o?void 0:o.deprecatedFor;if(e)i[r]=Array.isArray(e)?e:[e];else{const e=Ph(r,o);t[r]=e,n[r]=e.value}}return{propTypes:t,defaultProps:n,deprecatedProps:i}}(Ih(e,"defaultProps")||{}),r=Object.assign(Object.create(null),n,i.defaultProps),o=Object.assign(Object.create(null),null==n?void 0:n[Ae],i.propTypes),a=Object.assign(Object.create(null),null==n?void 0:n[Ce],i.deprecatedProps);for(const e of t){const t=Sh(e.constructor);t&&(Object.assign(r,t),Object.assign(o,t[Ae]),Object.assign(a,t[Ce]))}return function(e,t){const n=function(e){const t=Ih(e,"layerName")||Ih(e,"componentName");return t||Je.once(0,"".concat(e.name,".componentName not specified"))(),t||e.name}(t);Object.defineProperties(e,{id:{writable:!0,value:n}})}(r,e),function(e,t){const n={},i={};for(const e in t){const r=t[e],{name:o,value:a}=r;r.async&&(n[o]=a,i[o]=Th(o))}e[Se]=n,e[Te]={},Object.defineProperties(e,i)}(r,o),function(e,t){for(const n in t)Object.defineProperty(e,n,{enumerable:!1,set(e){const i="".concat(this.id,": ").concat(n);for(const i of t[n])Rh(this,i)||(this[i]=e);Je.deprecated(i,t[n].join("/"))()}})}(r,a),r[Ae]=o,r[Ce]=a,0!==t.length||Rh(e,"_propTypes")||(e._propTypes=o),r}(e,t||[]))}function Th(e){return{enumerable:!0,set(t){"string"==typeof t||t instanceof Promise||lu(t)?this[Te][e]=t:this[Re][e]=t},get(){if(this[Re]){if(e in this[Re])return this[Re][e]||this[Se][e];if(e in this[Te]){const t=this[xe]&&this[xe].internalState;if(t&&t.hasAsyncProp(e))return t.getAsyncProp(e)||this[Se][e]}}return this[Se][e]}}}function Rh(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ih(e,t){return Rh(e,t)&&e[t]}let Mh=0;class Lh{constructor(...e){c(this,"id",void 0),c(this,"props",void 0),c(this,"count",void 0),this.props=function(e,t){let n;for(let e=t.length-1;e>=0;e--){const i=t[e];"extensions"in i&&(n=i.extensions)}const i=Sh(e.constructor,n),r=Object.create(i);r[xe]=e,r[Te]={},r[Re]={};for(let e=0;e<t.length;++e){const n=t[e];for(const e in n)r[e]=n[e]}return Object.freeze(r),r}(this,e),this.id=this.props.id,this.count=Mh++}clone(e){const{props:t}=this,n={};for(const e in t[Se])e in t[Re]?n[e]=t[Re][e]:e in t[Te]&&(n[e]=t[Te][e]);return new this.constructor({...t,...n,...e})}}c(Lh,"componentName","Component"),c(Lh,"defaultProps",{});const Dh=Object.freeze({});class Oh{constructor(e){c(this,"component",void 0),c(this,"onAsyncPropUpdated",void 0),c(this,"asyncProps",void 0),c(this,"oldProps",void 0),c(this,"oldAsyncProps",void 0),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const t=this.asyncProps[e];t&&t.type&&t.type.release&&t.type.release(t.resolvedValue,t.type,this.component)}this.asyncProps={},this.component=null,this.resetOldProps()}getOldProps(){return this.oldAsyncProps||this.oldProps||Dh}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component?this.component.props:null}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const t=this.asyncProps[e];return t&&t.resolvedValue}isAsyncPropLoading(e){if(e){const t=this.asyncProps[e];return Boolean(t&&t.pendingLoadCount>0&&t.pendingLoadCount!==t.resolvedLoadCount)}for(const e in this.asyncProps)if(this.isAsyncPropLoading(e))return!0;return!1}reloadAsyncProp(e,t){this._watchPromise(e,Promise.resolve(t))}setAsyncProps(e){this.component=e[xe]||this.component;const t=e[Re]||{},n=e[Te]||e,i=e[Se]||{};for(const e in t){const n=t[e];this._createAsyncPropData(e,i[e]),this._updateAsyncProp(e,n),t[e]=this.getAsyncProp(e)}for(const e in n){const t=n[e];this._createAsyncPropData(e,i[e]),this._updateAsyncProp(e,t)}}_fetch(e,t){return null}_onResolve(e,t){}_onError(e,t){}_updateAsyncProp(e,t){this._didAsyncInputValueChange(e,t)&&("string"==typeof t&&(t=this._fetch(e,t)),t instanceof Promise?this._watchPromise(e,t):lu(t)?this._resolveAsyncIterable(e,t):this._setPropValue(e,t))}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,t){const n=this.asyncProps[e];return t!==n.resolvedValue&&t!==n.lastValue&&(n.lastValue=t,!0)}_setPropValue(e,t){this._freezeAsyncOldProps();const n=this.asyncProps[e];n&&(t=this._postProcessValue(n,t),n.resolvedValue=t,n.pendingLoadCount++,n.resolvedLoadCount=n.pendingLoadCount)}_setAsyncPropValue(e,t,n){const i=this.asyncProps[e];i&&n>=i.resolvedLoadCount&&void 0!==t&&(this._freezeAsyncOldProps(),i.resolvedValue=t,i.resolvedLoadCount=n,this.onAsyncPropUpdated(e,t))}_watchPromise(e,t){const n=this.asyncProps[e];if(n){n.pendingLoadCount++;const i=n.pendingLoadCount;t.then((t=>{this.component&&(t=this._postProcessValue(n,t),this._setAsyncPropValue(e,t,i),this._onResolve(e,t))})).catch((t=>{this._onError(e,t)}))}}async _resolveAsyncIterable(e,t){if("data"!==e)return void this._setPropValue(e,t);const n=this.asyncProps[e];if(!n)return;n.pendingLoadCount++;const i=n.pendingLoadCount;let r=[],o=0;for await(const n of t){if(!this.component)return;const{dataTransform:t}=this.component.props;r=t?t(n,r):r.concat(n),Object.defineProperty(r,"__diff",{enumerable:!1,value:[{startRow:o,endRow:r.length}]}),o=r.length,this._setAsyncPropValue(e,r,i)}this._onResolve(e,r)}_postProcessValue(e,t){const n=e.type;return n&&this.component&&(n.release&&n.release(e.resolvedValue,n,this.component),n.transform)?n.transform(t,n,this.component):t}_createAsyncPropData(e,t){if(!this.asyncProps[e]){const n=this.component&&this.component.props[Ae];this.asyncProps[e]={type:n&&n[e],lastValue:null,resolvedValue:t,pendingLoadCount:0,resolvedLoadCount:0}}}}class jh extends Oh{constructor({attributeManager:e,layer:t}){super(t),c(this,"attributeManager",void 0),c(this,"needsRedraw",void 0),c(this,"needsUpdate",void 0),c(this,"subLayers",void 0),c(this,"usesPickingColorCache",void 0),c(this,"hasPickingBuffer",void 0),c(this,"changeFlags",void 0),c(this,"viewport",void 0),c(this,"uniformTransitions",void 0),c(this,"propsInTransition",void 0),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}_fetch(e,t){const n=this.layer,i=null==n?void 0:n.props.fetch;return i?i(t,{propName:e,layer:n}):super._fetch(e,t)}_onResolve(e,t){const n=this.layer;if(n){const i=n.props.onDataLoad;"data"===e&&i&&i(t,{propName:e,layer:n})}}_onError(e,t){const n=this.layer;n&&n.raiseError(t,"loading ".concat(e," of ").concat(this.layer))}}const Nh=2**24-1,Fh=Object.freeze([]),kh=ts((({oldViewport:e,viewport:t})=>e.equals(t)));let Uh=new Uint8ClampedArray(0);const zh={data:{type:"data",value:Fh,async:!0},dataComparator:{type:"function",value:null,optional:!0},_dataDiff:{type:"function",value:e=>e&&e.__diff,optional:!0},dataTransform:{type:"function",value:null,optional:!0},onDataLoad:{type:"function",value:null,optional:!0},onError:{type:"function",value:null,optional:!0},fetch:{type:"function",value:(e,{propName:t,layer:n,loaders:i,loadOptions:r,signal:o})=>{const{resourceManager:a}=n.context;var s;r=r||n.getLoadOptions(),i=i||n.props.loaders,o&&(r={...r,fetch:{...null===(s=r)||void 0===s?void 0:s.fetch,signal:o}});let l=a.contains(e);return l||r||(a.add({resourceId:e,data:Tn(e,i),persistent:!1}),l=!0),l?a.subscribe({resourceId:e,onChange:e=>{var i;return null===(i=n.internalState)||void 0===i?void 0:i.reloadAsyncProp(t,e)},consumerId:n.id,requestId:t}):Tn(e,i,r)}},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,optional:!0},onClick:{type:"function",value:null,optional:!0},onDragStart:{type:"function",value:null,optional:!0},onDrag:{type:"function",value:null,optional:!0},onDragEnd:{type:"function",value:null,optional:!0},coordinateSystem:ri.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:2},loadOptions:{type:"object",value:null,optional:!0,ignore:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,ignore:!0},getPolygonOffset:{type:"function",value:({layerIndex:e})=>[0,100*-e]},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class Bh extends Lh{constructor(...e){super(...e),c(this,"internalState",null),c(this,"lifecycle","Awaiting state"),c(this,"context",void 0),c(this,"state",void 0),c(this,"parent",null)}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){const e=this.constructor.layerName||this.constructor.name;return"".concat(e,"({id: '").concat(this.props.id,"'})")}project(e){m(this.internalState);const t=this.internalState.viewport||this.context.viewport,n=vh(e,{viewport:t,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[i,r,o]=ue(n,t.pixelProjectionMatrix);return 2===e.length?[i,r]:[i,r,o]}unproject(e){return m(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,t){return m(this.internalState),function(e,t){const{viewport:n,coordinateSystem:i,coordinateOrigin:r,modelMatrix:o,fromCoordinateSystem:a,fromCoordinateOrigin:s}=function(e){const{viewport:t,modelMatrix:n,coordinateOrigin:i}=e;let{coordinateSystem:r,fromCoordinateSystem:o,fromCoordinateOrigin:a}=e;return r===ri.DEFAULT&&(r=t.isGeospatial?ri.LNGLAT:ri.CARTESIAN),void 0===o&&(o=r),void 0===a&&(a=i),{viewport:t,coordinateSystem:r,coordinateOrigin:i,modelMatrix:n,fromCoordinateSystem:o,fromCoordinateOrigin:a}}(t),{autoOffset:l=!0}=t,{geospatialOrigin:c=mh,shaderCoordinateOrigin:u=mh,offsetMode:h=!1}=l?ls(n,i,r):{},d=vh(e,{viewport:n,modelMatrix:o,coordinateSystem:a,coordinateOrigin:s,offsetMode:h});if(h){const e=n.projectPosition(c||u);V(d,d,e)}return d}(e,{viewport:this.internalState.viewport||this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...t})}get isComposite(){return!1}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return!!this.internalState&&!this.internalState.isAsyncPropLoading()}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(e){for(const t of this.getModels())t.updateModuleSettings(e)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===ri.DEFAULT||e===ri.LNGLAT||e===ri.CARTESIAN}onHover(e,t){return this.props.onHover&&this.props.onHover(e,t)||!1}onClick(e,t){return this.props.onClick&&this.props.onClick(e,t)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e,t=[]){return t[0]=e+1&255,t[1]=e+1>>8&255,t[2]=e+1>>8>>8&255,t}decodePickingColor(e){m(e instanceof Uint8Array);const[t,n,i]=e;return t+256*n+65536*i-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:function(e){if(null===(t=e)||"object"!=typeof t)throw new Error(ph);var t;if("function"==typeof e.count)return e.count();if(Number.isFinite(e.size))return e.size;if(Number.isFinite(e.length))return e.length;if(function(e){return null!==e&&"object"==typeof e&&e.constructor===Object}(e))return Object.keys(e).length;throw new Error(fh)}(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var e;return null===(e=this.getAttributeManager())||void 0===e?void 0:e.getBounds(["positions","instancePositions"])}getShaders(e){for(const t of this.props.extensions)e=gh(e,t.getShaders.call(this,t));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){const t=this.getAttributeManager(),{dataChanged:n}=e.changeFlags;if(n&&t)if(Array.isArray(n))for(const e of n)t.invalidateAll(e);else t.invalidateAll();if(t){const{props:n}=e,i=this.internalState.hasPickingBuffer,r=Number.isInteger(n.highlightedObjectIndex)||n.pickable||n.extensions.some((e=>e.getNeedsPickingBuffer.call(this,e)));if(i!==r){this.internalState.hasPickingBuffer=r;const{pickingColors:e,instancePickingColors:n}=t.attributes,i=e||n;i&&(r&&i.constant&&(i.constant=!1,t.invalidate(i.id)),i.value||r||(i.constant=!0,i.value=[0,0,0]))}}}finalizeState(e){for(const e of this.getModels())e.delete();const t=this.getAttributeManager();t&&t.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(const t of this.getModels())t.draw(e)}getPickingInfo({info:e,mode:t,sourceLayer:n}){const{index:i}=e;return i>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[i]),e}raiseError(e,t){var n,i,r,o;t&&(e.message="".concat(t,": ").concat(e.message)),null!==(n=(i=this.props).onError)&&void 0!==n&&n.call(i,e)||null===(r=this.context)||void 0===r||null===(o=r.onError)||void 0===o||o.call(r,e,this)}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return!!this.internalState&&(this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()))}hasUniformTransition(){var e;return(null===(e=this.internalState)||void 0===e?void 0:e.uniformTransitions.active)||!1}activateViewport(e){if(!this.internalState)return;const t=this.internalState.viewport;this.internalState.viewport=e,t&&kh({oldViewport:t,viewport:e})||(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e="all"){const t=this.getAttributeManager();t&&("all"===e?t.invalidateAll():t.invalidate(e))}updateAttributes(e){for(const t of this.getModels())this._setModelAttributes(t,e)}_updateAttributes(){const e=this.getAttributeManager();if(!e)return;const t=this.props,n=this.getNumInstances(),i=this.getStartIndices();e.update({data:t.data,numInstances:n,startIndices:i,props:t,transitions:t.transitions,buffers:t.data.attributes,context:this});const r=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(r)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const t=e.update(),n=Object.create(this.props);for(const e in t)Object.defineProperty(n,e,{value:t[e]});return n}return this.props}calculateInstancePickingColors(e,{numInstances:t}){if(e.constant)return;const n=Math.floor(Uh.length/3);if(this.internalState.usesPickingColorCache=!0,n<t){t>Nh&&Je.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),Uh=Mn.allocate(Uh,t,{size:3,copy:!0,maxCount:Math.max(t,Nh)});const e=Math.floor(Uh.length/3),i=[];for(let t=n;t<e;t++)this.encodePickingColor(t,i),Uh[3*t+0]=i[0],Uh[3*t+1]=i[1],Uh[3*t+2]=i[2]}e.value=Uh.subarray(0,3*t)}_setModelAttributes(e,t){const n=this.getAttributeManager(),i=e.userData.excludeAttributes||{},r=n.getShaderAttributes(t,i);e.setAttributes(r)}disablePickingIndex(e){this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:t,instancePickingColors:n}=this.getAttributeManager().attributes,i=t||n;if(!i)return;const r=i.getVertexOffset(e),o=i.getVertexOffset(e+1);i.buffer.subData({data:new Uint8Array(o-r),offset:r})}restorePickingColors(){const{pickingColors:e,instancePickingColors:t}=this.getAttributeManager().attributes,n=e||t;n&&(this.internalState.usesPickingColorCache&&n.value.buffer!==Uh.buffer&&(n.value=Uh.subarray(0,n.value.length)),n.updateSubBuffer({startOffset:0}))}_initialize(){m(!this.internalState),m(Number.isFinite(this.props.coordinateSystem)),et("layer.initialize",this);const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new jh({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(Je.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),e)}),this.internalState.uniformTransitions=new sh(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const e of this.props.extensions)e.initializeState.call(this,this.context,e);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){et("layer.matched",this,this===e);const{state:t,internalState:n}=e;this!==e&&(this.internalState=n,this.state=t,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const e=this.needsUpdate();if(et("layer.update",this,e),!e)return;const t=this.props,n=this.context,i=this.internalState,r=n.viewport,o=this._updateUniformTransition();i.propsInTransition=o,n.viewport=i.viewport||r,this.props=o;try{const e=this._getUpdateParams(),o=this.getModels();if(n.gl)this.updateState(e);else try{this.updateState(e)}catch(e){}for(const t of this.props.extensions)t.updateState.call(this,e,t);const a=this.getModels()[0]!==o[0];this._postUpdate(e,a)}finally{n.viewport=r,this.props=t,this._clearChangeFlags(),i.needsUpdate=!1,i.resetOldProps()}}_finalize(){et("layer.finalize",this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,this.context,e)}_drawLayer({moduleParameters:e=null,uniforms:t={},parameters:n={}}){this._updateAttributeTransition();const i=this.props,r=this.context;this.props=this.internalState.propsInTransition||i;const o=this.props.opacity;t.opacity=Math.pow(o,1/2.2);try{e&&this.setModuleParameters(e);const{getPolygonOffset:o}=this.props,a=o&&o(t)||[0,0];Ur(r.gl,{polygonOffset:a}),zr(r.gl,n,(()=>{const i={moduleParameters:e,uniforms:t,parameters:n,context:r};for(const e of this.props.extensions)e.draw.call(this,i,e);this.draw(i)}))}finally{this.props=i}}getChangeFlags(){var e;return null===(e=this.internalState)||void 0===e?void 0:e.changeFlags}setChangeFlags(e){if(!this.internalState)return;const{changeFlags:t}=this.internalState;for(const n in e)if(e[n]){let i=!1;if("dataChanged"===n){const r=e[n],o=t[n];r&&Array.isArray(o)&&(t.dataChanged=Array.isArray(r)?o.concat(r):r,i=!0)}t[n]||(t[n]=e[n],i=!0),i&&et("layer.changeFlag",this,n,e)}const n=Boolean(t.dataChanged||t.updateTriggersChanged||t.propsChanged||t.extensionsChanged);t.propsOrDataChanged=n,t.somethingChanged=n||t.viewportChanged||t.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,t){const n=function(e,t){const n=ch({newProps:e,oldProps:t,propTypes:e[Ae],ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),i=function(e,t){if(null===t)return"oldProps is null, initial diff";let n=!1;const{dataComparator:i,_dataDiff:r}=e;return i?i(e.data,t.data)||(n="Data comparator detected a change"):e.data!==t.data&&(n="A new data container was supplied"),n&&r&&(n=r(e.data,t.data)||n),n}(e,t);let r=!1;return i||(r=function(e,t){if(null===t)return{all:!0};if("all"in e.updateTriggers&&dh(e,t,"all"))return{all:!0};const n={};let i=!1;for(const r in e.updateTriggers)"all"!==r&&dh(e,t,r)&&(n[r]=!0,i=!0);return!!i&&n}(e,t)),{dataChanged:i,propsChanged:n,updateTriggersChanged:r,extensionsChanged:hh(e,t),transitionsChanged:lh(e,t)}}(e,t);if(n.updateTriggersChanged)for(const e in n.updateTriggersChanged)n.updateTriggersChanged[e]&&this.invalidateAttribute(e);if(n.transitionsChanged)for(const r in n.transitionsChanged){var i;this.internalState.uniformTransitions.add(r,t[r],e[r],null===(i=e.transitions)||void 0===i?void 0:i[r])}return this.setChangeFlags(n)}validateProps(){!function(e){const t=e[Ae];for(const n in t){const i=t[n],{validate:r}=i;if(r&&!r(e[n],i))throw new Error("Invalid prop ".concat(n,": ").concat(e[n]))}}(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const t={pickingSelectedColor:e.picked?e.color:null},{highlightColor:n}=this.props;e.picked&&"function"==typeof n&&(t.pickingHighlightColor=n(e)),this.setModuleParameters(t),this.setNeedsRedraw()}_getAttributeManager(){const e=this.context;return new nh(e.gl,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,t){const{props:n,oldProps:i}=e;this.setNeedsRedraw(),this._updateAttributes();const{model:r}=this.state;null==r||r.setInstanceCount(this.getNumInstances());const{autoHighlight:o,highlightedObjectIndex:a,highlightColor:s}=n;if(t||i.autoHighlight!==o||i.highlightedObjectIndex!==a||i.highlightColor!==s){const e={};o||(e.pickingSelectedColor=null),Array.isArray(s)&&(e.pickingHighlightColor=s),(t||a!==i.highlightedObjectIndex)&&(e.pickingSelectedColor=Number.isFinite(a)&&a>=0?this.encodePickingColor(a):null),this.setModuleParameters(e)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let t=!1;t=t||this.internalState.needsRedraw&&this.id;const n=this.getAttributeManager(),i=!!n&&n.getNeedsRedraw(e);if(t=t||i,t)for(const e of this.props.extensions)e.onNeedsRedraw.call(this,e);return this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags,t}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}c(Bh,"defaultProps",zh),c(Bh,"layerName","Layer");const Gh={position:"absolute",zIndex:-1};function Vh(t,n){if("function"==typeof t)return t(n);if(Array.isArray(t))return t.map((e=>Vh(e,n)));if(Hh(t)){if(function(e){const t=e.type,n=t&&t.defaultProps;return n&&n.mapStyle}(t))return n.style=Gh,(0,e.cloneElement)(t,n);if(function(e){const t=e.type;return t&&t.deckGLViewProps}(t))return(0,e.cloneElement)(t,n)}return t}function Hh(e){return e&&"object"==typeof e&&"type"in e||!1}function qh(t){if("function"==typeof t)return(0,e.createElement)(_s,{},t);if(Array.isArray(t))return t.map(qh);if(Hh(t)){if(t.type===e.Fragment)return qh(t.props.children);if(eu(t.type,_s))return t}return t}const Wh={mixBlendMode:null};function Xh(e){e.redrawReason&&(e.deck._drawLayers(e.redrawReason),e.redrawReason=null)}const Yh=(0,e.forwardRef)(((t,n)=>{const[i,r]=(0,e.useState)(0),o=(0,e.useRef)({control:null,version:i,forceUpdate:()=>r((e=>e+1))}).current,a=(0,e.useRef)(null),s=(0,e.useRef)(null),l=(0,e.useMemo)((()=>function({children:t,layers:n=[],views:i=null}){const r=[],o=[],a={};return e.Children.forEach(qh(t),(e=>{if(Hh(e)){const t=e.type;if(eu(t,Bh)){const n=function(e,t){const n={},i=e.defaultProps||{};for(const e in t)i[e]!==t[e]&&(n[e]=t[e]);return new e(n)}(t,e.props);o.push(n)}else r.push(e);if(eu(t,_s)&&t!==_s&&e.props.id){const n=new t(e.props);a[n.id]=n}}else e&&r.push(e)})),Object.keys(a).length>0&&(Array.isArray(i)?i.forEach((e=>{a[e.id]=e})):i&&(a[i.id]=i),i=Object.values(a)),{layers:n=o.length>0?[...o,...n]:n,children:r,views:i}}(t)),[t.layers,t.views,t.children]);let c=!0;const u=e=>{var n;return c&&t.viewState?(o.viewStateUpdateRequested=e,null):(o.viewStateUpdateRequested=null,null===(n=t.onViewStateChange)||void 0===n?void 0:n.call(t,e))},h=e=>{var n;c?o.interactionStateUpdateRequested=e:(o.interactionStateUpdateRequested=null,null===(n=t.onInteractionStateChange)||void 0===n||n.call(t,e))},d=(0,e.useMemo)((()=>{const e={...t,style:null,width:"100%",height:"100%",parent:a.current,canvas:s.current,layers:l.layers,views:l.views,onViewStateChange:u,onInteractionStateChange:h};return delete e._customRender,o.deck&&o.deck.setProps(e),e}),[t]);(0,e.useEffect)((()=>{const e=t.Deck||$c;return o.deck=function(e,t,n){const i=new t({...n,_customRender:t=>{e.redrawReason=t;const n=i.getViewports();e.lastRenderedViewports!==n?e.forceUpdate():Xh(e)}});return i}(o,e,{...d,parent:a.current,canvas:s.current}),()=>{var e;return null===(e=o.deck)||void 0===e?void 0:e.finalize()}}),[]),Qc((()=>{Xh(o);const{viewStateUpdateRequested:e,interactionStateUpdateRequested:t}=o;e&&u(e),t&&h(t)})),(0,e.useImperativeHandle)(n,(()=>function(e){return{get deck(){return e.deck},pickObject:t=>e.deck.pickObject(t),pickMultipleObjects:t=>e.deck.pickMultipleObjects(t),pickObjects:t=>e.deck.pickObjects(t)}}(o)),[]);const p=o.deck&&o.deck.isInitialized?o.deck.getViewports():void 0,{ContextProvider:f,width:g,height:m,id:y,style:v}=t,{containerStyle:b,canvasStyle:_}=(0,e.useMemo)((()=>function({width:e,height:t,style:n}){const i={position:"absolute",zIndex:0,left:0,top:0,width:e,height:t},r={left:0,top:0};if(n)for(const e in n)e in Wh?r[e]=n[e]:i[e]=n[e];return{containerStyle:i,canvasStyle:r}}({width:g,height:m,style:v})),[g,m,v]);if(!o.viewStateUpdateRequested&&o.lastRenderedViewports===p||o.version!==i){o.lastRenderedViewports=p,o.version=i;const t=function({children:t,deck:n,ContextProvider:i}){const{viewManager:r}=n||{};if(!r||!r.views.length)return[];const o={},a=r.views[0].id;for(const e of t){let t=a,n=e;Hh(e)&&eu(e.type,_s)&&(t=e.props.id||a,n=e.props.children);const i=r.getViewport(t),s=r.getViewState(t);if(i){s.padding=i.padding;const{x:e,y:r,width:a,height:l}=i;n=Vh(n,{x:e,y:r,width:a,height:l,viewport:i,viewState:s}),o[t]||(o[t]={viewport:i,children:[]}),o[t].children.push(n)}}return Object.keys(o).map((t=>{const{viewport:r,children:a}=o[t],{x:s,y:l,width:c,height:u}=r,h={position:"absolute",left:s,top:l,width:c,height:u},d="view-".concat(t),p=(0,e.createElement)("div",{key:d,id:d,style:h},...a);if(i){const o={viewport:r,container:n.canvas.offsetParent,eventManager:n.eventManager,onViewStateChange:e=>{e.viewId=t,n._onViewStateChange(e)}};return(0,e.createElement)(i,{key:d,value:o},p)}return p}))}({children:l.children,deck:o.deck,ContextProvider:f}),n=(0,e.createElement)("canvas",{key:"canvas",id:y||"deckgl-overlay",ref:s,style:_});o.control=(0,e.createElement)("div",{id:"".concat(y||"deckgl","-wrapper"),ref:a,style:b},[n,t])}return c=!1,o.control}));Yh.defaultProps=$c.defaultProps;const Kh=Yh;function Zh(e,t,n){if(null!==e)for(var i,r,o,a,s,l,c,u,h=0,d=0,p=e.type,f="FeatureCollection"===p,g="Feature"===p,m=f?e.features.length:1,y=0;y<m;y++){s=(u=!!(c=f?e.features[y].geometry:g?e.geometry:e)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var v=0;v<s;v++){var b=0,_=0;if(null!==(a=u?c.geometries[v]:c)){l=a.coordinates;var w=a.type;switch(h=!n||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===t(l,d,y,b,_))return!1;d++,b++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(!1===t(l[i],d,y,b,_))return!1;d++,"MultiPoint"===w&&b++}"LineString"===w&&b++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(r=0;r<l[i].length-h;r++){if(!1===t(l[i][r],d,y,b,_))return!1;d++}"MultiLineString"===w&&b++,"Polygon"===w&&_++}"Polygon"===w&&b++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(_=0,r=0;r<l[i].length;r++){for(o=0;o<l[i][r].length-h;o++){if(!1===t(l[i][r][o],d,y,b,_))return!1;d++}_++}b++}break;case"GeometryCollection":for(i=0;i<a.geometries.length;i++)if(!1===Zh(a.geometries[i],t,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Jh(e){var t=[1/0,1/0,-1/0,-1/0];return Zh(e,(function(e){t[0]>e[0]&&(t[0]=e[0]),t[1]>e[1]&&(t[1]=e[1]),t[2]<e[0]&&(t[2]=e[0]),t[3]<e[1]&&(t[3]=e[1])})),t}Jh.default=Jh;const $h=Jh;function Qh(e,t,n){if(void 0===n&&(n={}),!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");var i,r=function(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if("Feature"===e.type&&null!==e.geometry&&"Point"===e.geometry.type)return e.geometry.coordinates;if("Point"===e.type)return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}(e),o="Feature"===(i=t).type?i.geometry:i,a=o.type,s=t.bbox,l=o.coordinates;if(s&&!1===function(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}(r,s))return!1;"Polygon"===a&&(l=[l]);for(var c=!1,u=0;u<l.length&&!c;u++)if(ed(r,l[u][0],n.ignoreBoundary)){for(var h=!1,d=1;d<l[u].length&&!h;)ed(r,l[u][d],!n.ignoreBoundary)&&(h=!0),d++;h||(c=!0)}return c}function ed(e,t,n){var i=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var r=0,o=t.length-1;r<t.length;o=r++){var a=t[r][0],s=t[r][1],l=t[o][0],c=t[o][1];if(e[1]*(a-l)+s*(l-e[0])+c*(e[0]-a)==0&&(a-e[0])*(l-e[0])<=0&&(s-e[1])*(c-e[1])<=0)return!n;s>e[1]!=c>e[1]&&e[0]<(l-a)*(e[1]-s)/(c-s)+a&&(i=!i)}return i}a(7418),a(2273),Object.prototype.hasOwnProperty;var td=new ArrayBuffer(16);function nd(e,t){void 0===t&&(t={});var n=Number(e[0]),i=Number(e[1]),r=Number(e[2]),o=Number(e[3]);if(6===e.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var a=[n,i];return function(e,t,n){void 0===n&&(n={});for(var i=0,r=e;i<r.length;i++){var o=r[i];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++)if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}return function(e,t,n){void 0===n&&(n={});var i={type:"Feature"};return(0===n.id||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=t||{},i.geometry=e,i}({type:"Polygon",coordinates:e},t,n)}([[a,[r,i],[r,o],[n,o],a]],t.properties,{bbox:e,id:t.id})}new Float64Array(td),new Uint32Array(td),a(5510),function(){function e(e){this.points=e.points||[],this.duration=e.duration||1e4,this.sharpness=e.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=e.stepLength||60,this.length=this.points.length,this.delay=0;for(var t=0;t<this.length;t++)this.points[t].z=this.points[t].z||0;for(t=0;t<this.length-1;t++){var n=this.points[t],i=this.points[t+1];this.centers.push({x:(n.x+i.x)/2,y:(n.y+i.y)/2,z:(n.z+i.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),t=0;t<this.centers.length-1;t++){var r=this.points[t+1].x-(this.centers[t].x+this.centers[t+1].x)/2,o=this.points[t+1].y-(this.centers[t].y+this.centers[t+1].y)/2,a=this.points[t+1].z-(this.centers[t].y+this.centers[t+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[t+1].x+this.sharpness*(this.centers[t].x+r),y:(1-this.sharpness)*this.points[t+1].y+this.sharpness*(this.centers[t].y+o),z:(1-this.sharpness)*this.points[t+1].z+this.sharpness*(this.centers[t].z+a)},{x:(1-this.sharpness)*this.points[t+1].x+this.sharpness*(this.centers[t+1].x+r),y:(1-this.sharpness)*this.points[t+1].y+this.sharpness*(this.centers[t+1].y+o),z:(1-this.sharpness)*this.points[t+1].z+this.sharpness*(this.centers[t+1].z+a)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}e.prototype.cacheSteps=function(e){var t=[],n=this.pos(0);t.push(0);for(var i=0;i<this.duration;i+=10){var r=this.pos(i);Math.sqrt((r.x-n.x)*(r.x-n.x)+(r.y-n.y)*(r.y-n.y)+(r.z-n.z)*(r.z-n.z))>e&&(t.push(i),n=r)}return t},e.prototype.vector=function(e){var t=this.pos(e+10),n=this.pos(e-10);return{angle:180*Math.atan2(t.y-n.y,t.x-n.x)/3.14,speed:Math.sqrt((n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y)+(n.z-t.z)*(n.z-t.z))}},e.prototype.pos=function(e){var t=e-this.delay;t<0&&(t=0),t>this.duration&&(t=this.duration-1);var n=t/this.duration;if(n>=1)return this.points[this.length-1];var i=Math.floor((this.points.length-1)*n);return function(e,t,n,i,r){var o=function(e){var t=e*e;return[t*e,3*t*(1-e),3*e*(1-e)*(1-e),(1-e)*(1-e)*(1-e)]}(e);return{x:r.x*o[0]+i.x*o[1]+n.x*o[2]+t.x*o[3],y:r.y*o[0]+i.y*o[1]+n.y*o[2]+t.y*o[3],z:r.z*o[0]+i.z*o[1]+n.z*o[2]+t.z*o[3]}}((this.length-1)*n-i,this.points[i],this.controls[i][1],this.controls[i+1][0],this.points[i+1])}}();function id(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)}const rd=function(e,t){void 0===t&&(t={});var n=$h(e);return function(e,t,n){if(void 0===n&&(n={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!id(e[0])||!id(e[1]))throw new Error("coordinates must contain numbers");return function(e,t,n){void 0===n&&(n={});var i={type:"Feature"};return(0===n.id||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=t||{},i.geometry=e,i}({type:"Point",coordinates:e},t,n)}([(n[0]+n[2])/2,(n[1]+n[3])/2],t.properties,t)};var od=a(9187),ad=a.n(od);a(1787);var sd=Math.PI/180,ld=180/Math.PI,cd=function(e,t){this.lon=e,this.lat=t,this.x=sd*e,this.y=sd*t};cd.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},cd.prototype.antipode=function(){var e=-1*this.lat,t=this.lon<0?180+this.lon:-1*(180-this.lon);return new cd(t,e)};var ud=function(){this.coords=[],this.length=0};ud.prototype.move_to=function(e){this.length++,this.coords.push(e)};var hd=function(e){this.properties=e||{},this.geometries=[]};hd.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var e=[],t=0;t<this.geometries.length;t++)e.push(this.geometries[t].coords);return{geometry:{type:"MultiLineString",coordinates:e},type:"Feature",properties:this.properties}},hd.prototype.wkt=function(){for(var e="",t="LINESTRING(",n=function(e){t+=e[0]+" "+e[1]+","},i=0;i<this.geometries.length;i++){if(0===this.geometries[i].coords.length)return"LINESTRING(empty)";this.geometries[i].coords.forEach(n),e+=t.substring(0,t.length-1)+")"}return e};var dd=function(e,t,n){if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new cd(e.x,e.y),this.end=new cd(t.x,t.y),this.properties=n||{};var i=this.start.x-this.end.x,r=this.start.y-this.end.y,o=Math.pow(Math.sin(r/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(i/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+e.view()+" and "+t.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+e+" and "+t)};function pd(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)}dd.prototype.interpolate=function(e){var t=Math.sin((1-e)*this.g)/Math.sin(this.g),n=Math.sin(e*this.g)/Math.sin(this.g),i=t*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),r=t*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),o=t*Math.sin(this.start.y)+n*Math.sin(this.end.y),a=ld*Math.atan2(o,Math.sqrt(Math.pow(i,2)+Math.pow(r,2)));return[ld*Math.atan2(r,i),a]},dd.prototype.Arc=function(e,t){var n=[];if(!e||e<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var i=1/(e-1),r=0;r<e;++r){var o=i*r,a=this.interpolate(o);n.push(a)}for(var s=!1,l=0,c=t&&t.offset?t.offset:10,u=180-c,h=-180+c,d=360-c,p=1;p<n.length;++p){var f=n[p-1][0],g=n[p][0],m=Math.abs(g-f);m>d&&(g>u&&f<h||f>u&&g<h)?s=!0:m>l&&(l=m)}var y=[];if(s&&l<c){var v=[];y.push(v);for(var b=0;b<n.length;++b){var _=parseFloat(n[b][0]);if(b>0&&Math.abs(_-n[b-1][0])>d){var w=parseFloat(n[b-1][0]),P=parseFloat(n[b-1][1]),E=parseFloat(n[b][0]),x=parseFloat(n[b][1]);if(w>-180&&w<h&&180===E&&b+1<n.length&&n[b-1][0]>-180&&n[b-1][0]<h){v.push([-180,n[b][1]]),b++,v.push([n[b][0],n[b][1]]);continue}if(w>u&&w<180&&-180===E&&b+1<n.length&&n[b-1][0]>u&&n[b-1][0]<180){v.push([180,n[b][1]]),b++,v.push([n[b][0],n[b][1]]);continue}if(w<h&&E>u){var A=w;w=E,E=A;var C=P;P=x,x=C}if(w>u&&E<h&&(E+=360),w<=180&&E>=180&&w<E){var S=(180-w)/(E-w),T=S*x+(1-S)*P;v.push([n[b-1][0]>u?180:-180,T]),(v=[]).push([n[b-1][0]>u?-180:180,T]),y.push(v)}else v=[],y.push(v);v.push([_,n[b][1]])}else v.push([n[b][0],n[b][1]])}}else{var R=[];y.push(R);for(var I=0;I<n.length;++I)R.push([n[I][0],n[I][1]])}for(var M=new hd(this.properties),L=0;L<y.length;++L){var D=new ud;M.geometries.push(D);for(var O=y[L],j=0;j<O.length;++j)D.move_to(O[j])}return M},a(251);var fd=[],gd=[],md=[],yd=[],vd=[],bd=[],_d=[],wd=[],Pd=[],Ed=[],xd=[],Ad=[],Cd=[],Sd=[],Td=[],Rd=[],Id=[],Md=[],Ld=[],Dd=[],Od=[],jd=[],Nd=[],Fd=[];_d[85]=Ed[85]=-1,wd[85]=xd[85]=0,Pd[85]=Ad[85]=1,Ld[85]=jd[85]=1,Dd[85]=Nd[85]=0,Od[85]=Fd[85]=1,fd[85]=yd[85]=0,gd[85]=vd[85]=-1,md[85]=Td[85]=0,Rd[85]=Cd[85]=0,Id[85]=Sd[85]=1,bd[85]=Md[85]=1,jd[1]=jd[169]=0,Nd[1]=Nd[169]=-1,Fd[1]=Fd[169]=0,Cd[1]=Cd[169]=-1,Sd[1]=Sd[169]=0,Td[1]=Td[169]=0,Ed[4]=Ed[166]=0,xd[4]=xd[166]=-1,Ad[4]=Ad[166]=1,Rd[4]=Rd[166]=1,Id[4]=Id[166]=0,Md[4]=Md[166]=0,_d[16]=_d[154]=0,wd[16]=wd[154]=1,Pd[16]=Pd[154]=1,yd[16]=yd[154]=1,vd[16]=vd[154]=0,bd[16]=bd[154]=1,Ld[64]=Ld[106]=0,Dd[64]=Dd[106]=1,Od[64]=Od[106]=0,fd[64]=fd[106]=-1,gd[64]=gd[106]=0,md[64]=md[106]=1,Ld[2]=Ld[168]=0,Dd[2]=Dd[168]=-1,Od[2]=Od[168]=1,jd[2]=jd[168]=0,Nd[2]=Nd[168]=-1,Fd[2]=Fd[168]=0,Cd[2]=Cd[168]=-1,Sd[2]=Sd[168]=0,Td[2]=Td[168]=0,Rd[2]=Rd[168]=-1,Id[2]=Id[168]=0,Md[2]=Md[168]=1,_d[8]=_d[162]=0,wd[8]=wd[162]=-1,Pd[8]=Pd[162]=0,Ed[8]=Ed[162]=0,xd[8]=xd[162]=-1,Ad[8]=Ad[162]=1,Cd[8]=Cd[162]=1,Sd[8]=Sd[162]=0,Td[8]=Td[162]=1,Rd[8]=Rd[162]=1,Id[8]=Id[162]=0,Md[8]=Md[162]=0,_d[32]=_d[138]=0,wd[32]=wd[138]=1,Pd[32]=Pd[138]=1,Ed[32]=Ed[138]=0,xd[32]=xd[138]=1,Ad[32]=Ad[138]=0,fd[32]=fd[138]=1,gd[32]=gd[138]=0,md[32]=md[138]=0,yd[32]=yd[138]=1,vd[32]=vd[138]=0,bd[32]=bd[138]=1,jd[128]=jd[42]=0,Nd[128]=Nd[42]=1,Fd[128]=Fd[42]=1,Ld[128]=Ld[42]=0,Dd[128]=Dd[42]=1,Od[128]=Od[42]=0,fd[128]=fd[42]=-1,gd[128]=gd[42]=0,md[128]=md[42]=1,yd[128]=yd[42]=-1,vd[128]=vd[42]=0,bd[128]=bd[42]=0,Ed[5]=Ed[165]=-1,xd[5]=xd[165]=0,Ad[5]=Ad[165]=0,jd[5]=jd[165]=1,Nd[5]=Nd[165]=0,Fd[5]=Fd[165]=0,Rd[20]=Rd[150]=0,Id[20]=Id[150]=1,Md[20]=Md[150]=1,yd[20]=yd[150]=0,vd[20]=vd[150]=-1,bd[20]=bd[150]=1,_d[80]=_d[90]=-1,wd[80]=wd[90]=0,Pd[80]=Pd[90]=1,Ld[80]=Ld[90]=1,Dd[80]=Dd[90]=0,Od[80]=Od[90]=1,Cd[65]=Cd[105]=0,Sd[65]=Sd[105]=1,Td[65]=Td[105]=0,fd[65]=fd[105]=0,gd[65]=gd[105]=-1,md[65]=md[105]=0,_d[160]=_d[10]=-1,wd[160]=wd[10]=0,Pd[160]=Pd[10]=1,Ed[160]=Ed[10]=-1,xd[160]=xd[10]=0,Ad[160]=Ad[10]=0,jd[160]=jd[10]=1,Nd[160]=Nd[10]=0,Fd[160]=Fd[10]=0,Ld[160]=Ld[10]=1,Dd[160]=Dd[10]=0,Od[160]=Od[10]=1,Rd[130]=Rd[40]=0,Id[130]=Id[40]=1,Md[130]=Md[40]=1,Cd[130]=Cd[40]=0,Sd[130]=Sd[40]=1,Td[130]=Td[40]=0,fd[130]=fd[40]=0,gd[130]=gd[40]=-1,md[130]=md[40]=0,yd[130]=yd[40]=0,vd[130]=vd[40]=-1,bd[130]=bd[40]=1,Ed[37]=Ed[133]=0,xd[37]=xd[133]=1,Ad[37]=Ad[133]=1,jd[37]=jd[133]=0,Nd[37]=Nd[133]=1,Fd[37]=Fd[133]=0,fd[37]=fd[133]=-1,gd[37]=gd[133]=0,md[37]=md[133]=0,yd[37]=yd[133]=1,vd[37]=vd[133]=0,bd[37]=bd[133]=0,Rd[148]=Rd[22]=-1,Id[148]=Id[22]=0,Md[148]=Md[22]=0,jd[148]=jd[22]=0,Nd[148]=Nd[22]=-1,Fd[148]=Fd[22]=1,Ld[148]=Ld[22]=0,Dd[148]=Dd[22]=1,Od[148]=Od[22]=1,yd[148]=yd[22]=-1,vd[148]=vd[22]=0,bd[148]=bd[22]=1,_d[82]=_d[88]=0,wd[82]=wd[88]=-1,Pd[82]=Pd[88]=1,Rd[82]=Rd[88]=1,Id[82]=Id[88]=0,Md[82]=Md[88]=1,Cd[82]=Cd[88]=-1,Sd[82]=Sd[88]=0,Td[82]=Td[88]=1,Ld[82]=Ld[88]=0,Dd[82]=Dd[88]=-1,Od[82]=Od[88]=0,_d[73]=_d[97]=0,wd[73]=wd[97]=1,Pd[73]=Pd[97]=0,Ed[73]=Ed[97]=0,xd[73]=xd[97]=-1,Ad[73]=Ad[97]=0,Cd[73]=Cd[97]=1,Sd[73]=Sd[97]=0,Td[73]=Td[97]=0,fd[73]=fd[97]=1,gd[73]=gd[97]=0,md[73]=md[97]=1,_d[145]=_d[25]=0,wd[145]=wd[25]=-1,Pd[145]=Pd[25]=0,Cd[145]=Cd[25]=1,Sd[145]=Sd[25]=0,Td[145]=Td[25]=1,jd[145]=jd[25]=0,Nd[145]=Nd[25]=1,Fd[145]=Fd[25]=1,yd[145]=yd[25]=-1,vd[145]=vd[25]=0,bd[145]=bd[25]=0,Ed[70]=Ed[100]=0,xd[70]=xd[100]=1,Ad[70]=Ad[100]=0,Rd[70]=Rd[100]=-1,Id[70]=Id[100]=0,Md[70]=Md[100]=1,Ld[70]=Ld[100]=0,Dd[70]=Dd[100]=-1,Od[70]=Od[100]=1,fd[70]=fd[100]=1,gd[70]=gd[100]=0,md[70]=md[100]=0,Ed[101]=Ed[69]=0,xd[101]=xd[69]=1,Ad[101]=Ad[69]=0,fd[101]=fd[69]=1,gd[101]=gd[69]=0,md[101]=md[69]=0,jd[149]=jd[21]=0,Nd[149]=Nd[21]=1,Fd[149]=Fd[21]=1,yd[149]=yd[21]=-1,vd[149]=vd[21]=0,bd[149]=bd[21]=0,Rd[86]=Rd[84]=-1,Id[86]=Id[84]=0,Md[86]=Md[84]=1,Ld[86]=Ld[84]=0,Dd[86]=Dd[84]=-1,Od[86]=Od[84]=1,_d[89]=_d[81]=0,wd[89]=wd[81]=-1,Pd[89]=Pd[81]=0,Cd[89]=Cd[81]=1,Sd[89]=Sd[81]=0,Td[89]=Td[81]=1,_d[96]=_d[74]=0,wd[96]=wd[74]=1,Pd[96]=Pd[74]=0,Ed[96]=Ed[74]=-1,xd[96]=xd[74]=0,Ad[96]=Ad[74]=1,Ld[96]=Ld[74]=1,Dd[96]=Dd[74]=0,Od[96]=Od[74]=0,fd[96]=fd[74]=1,gd[96]=gd[74]=0,md[96]=md[74]=1,_d[24]=_d[146]=0,wd[24]=wd[146]=-1,Pd[24]=Pd[146]=1,Rd[24]=Rd[146]=1,Id[24]=Id[146]=0,Md[24]=Md[146]=1,Cd[24]=Cd[146]=0,Sd[24]=Sd[146]=1,Td[24]=Td[146]=1,yd[24]=yd[146]=0,vd[24]=vd[146]=-1,bd[24]=bd[146]=0,Ed[6]=Ed[164]=-1,xd[6]=xd[164]=0,Ad[6]=Ad[164]=1,Rd[6]=Rd[164]=-1,Id[6]=Id[164]=0,Md[6]=Md[164]=0,jd[6]=jd[164]=0,Nd[6]=Nd[164]=-1,Fd[6]=Fd[164]=1,Ld[6]=Ld[164]=1,Dd[6]=Dd[164]=0,Od[6]=Od[164]=0,Cd[129]=Cd[41]=0,Sd[129]=Sd[41]=1,Td[129]=Td[41]=1,jd[129]=jd[41]=0,Nd[129]=Nd[41]=1,Fd[129]=Fd[41]=0,fd[129]=fd[41]=-1,gd[129]=gd[41]=0,md[129]=md[41]=0,yd[129]=yd[41]=0,vd[129]=vd[41]=-1,bd[129]=bd[41]=0,Rd[66]=Rd[104]=0,Id[66]=Id[104]=1,Md[66]=Md[104]=0,Cd[66]=Cd[104]=-1,Sd[66]=Sd[104]=0,Td[66]=Td[104]=1,Ld[66]=Ld[104]=0,Dd[66]=Dd[104]=-1,Od[66]=Od[104]=0,fd[66]=fd[104]=0,gd[66]=gd[104]=-1,md[66]=md[104]=1,_d[144]=_d[26]=-1,wd[144]=wd[26]=0,Pd[144]=Pd[26]=0,jd[144]=jd[26]=1,Nd[144]=Nd[26]=0,Fd[144]=Fd[26]=1,Ld[144]=Ld[26]=0,Dd[144]=Dd[26]=1,Od[144]=Od[26]=1,yd[144]=yd[26]=-1,vd[144]=vd[26]=0,bd[144]=bd[26]=1,Ed[36]=Ed[134]=0,xd[36]=xd[134]=1,Ad[36]=Ad[134]=1,Rd[36]=Rd[134]=0,Id[36]=Id[134]=1,Md[36]=Md[134]=0,fd[36]=fd[134]=0,gd[36]=gd[134]=-1,md[36]=md[134]=1,yd[36]=yd[134]=1,vd[36]=vd[134]=0,bd[36]=bd[134]=0,_d[9]=_d[161]=-1,wd[9]=wd[161]=0,Pd[9]=Pd[161]=0,Ed[9]=Ed[161]=0,xd[9]=xd[161]=-1,Ad[9]=Ad[161]=0,Cd[9]=Cd[161]=1,Sd[9]=Sd[161]=0,Td[9]=Td[161]=0,jd[9]=jd[161]=1,Nd[9]=Nd[161]=0,Fd[9]=Fd[161]=1,_d[136]=0,wd[136]=1,Pd[136]=1,Ed[136]=0,xd[136]=1,Ad[136]=0,Rd[136]=-1,Id[136]=0,Md[136]=1,Cd[136]=-1,Sd[136]=0,Td[136]=0,jd[136]=0,Nd[136]=-1,Fd[136]=0,Ld[136]=0,Dd[136]=-1,Od[136]=1,fd[136]=1,gd[136]=0,md[136]=0,yd[136]=1,vd[136]=0,bd[136]=1,_d[34]=0,wd[34]=-1,Pd[34]=0,Ed[34]=0,xd[34]=-1,Ad[34]=1,Rd[34]=1,Id[34]=0,Md[34]=0,Cd[34]=1,Sd[34]=0,Td[34]=1,jd[34]=0,Nd[34]=1,Fd[34]=1,Ld[34]=0,Dd[34]=1,Od[34]=0,fd[34]=-1,gd[34]=0,md[34]=1,yd[34]=-1,vd[34]=0,bd[34]=0,_d[35]=0,wd[35]=1,Pd[35]=1,Ed[35]=0,xd[35]=-1,Ad[35]=1,Rd[35]=1,Id[35]=0,Md[35]=0,Cd[35]=-1,Sd[35]=0,Td[35]=0,jd[35]=0,Nd[35]=-1,Fd[35]=0,Ld[35]=0,Dd[35]=1,Od[35]=0,fd[35]=-1,gd[35]=0,md[35]=1,yd[35]=1,vd[35]=0,bd[35]=1,_d[153]=0,wd[153]=1,Pd[153]=1,Cd[153]=-1,Sd[153]=0,Td[153]=0,jd[153]=0,Nd[153]=-1,Fd[153]=0,yd[153]=1,vd[153]=0,bd[153]=1,Ed[102]=0,xd[102]=-1,Ad[102]=1,Rd[102]=1,Id[102]=0,Md[102]=0,Ld[102]=0,Dd[102]=1,Od[102]=0,fd[102]=-1,gd[102]=0,md[102]=1,_d[155]=0,wd[155]=-1,Pd[155]=0,Cd[155]=1,Sd[155]=0,Td[155]=1,jd[155]=0,Nd[155]=1,Fd[155]=1,yd[155]=-1,vd[155]=0,bd[155]=0,Ed[103]=0,xd[103]=1,Ad[103]=0,Rd[103]=-1,Id[103]=0,Md[103]=1,Ld[103]=0,Dd[103]=-1,Od[103]=1,fd[103]=1,gd[103]=0,md[103]=0,_d[152]=0,wd[152]=1,Pd[152]=1,Rd[152]=-1,Id[152]=0,Md[152]=1,Cd[152]=-1,Sd[152]=0,Td[152]=0,jd[152]=0,Nd[152]=-1,Fd[152]=0,Ld[152]=0,Dd[152]=-1,Od[152]=1,yd[152]=1,vd[152]=0,bd[152]=1,_d[156]=0,wd[156]=-1,Pd[156]=1,Rd[156]=1,Id[156]=0,Md[156]=1,Cd[156]=-1,Sd[156]=0,Td[156]=0,jd[156]=0,Nd[156]=-1,Fd[156]=0,Ld[156]=0,Dd[156]=1,Od[156]=1,yd[156]=-1,vd[156]=0,bd[156]=1,_d[137]=0,wd[137]=1,Pd[137]=1,Ed[137]=0,xd[137]=1,Ad[137]=0,Cd[137]=-1,Sd[137]=0,Td[137]=0,jd[137]=0,Nd[137]=-1,Fd[137]=0,fd[137]=1,gd[137]=0,md[137]=0,yd[137]=1,vd[137]=0,bd[137]=1,_d[139]=0,wd[139]=1,Pd[139]=1,Ed[139]=0,xd[139]=-1,Ad[139]=0,Cd[139]=1,Sd[139]=0,Td[139]=0,jd[139]=0,Nd[139]=1,Fd[139]=0,fd[139]=-1,gd[139]=0,md[139]=0,yd[139]=1,vd[139]=0,bd[139]=1,_d[98]=0,wd[98]=-1,Pd[98]=0,Ed[98]=0,xd[98]=-1,Ad[98]=1,Rd[98]=1,Id[98]=0,Md[98]=0,Cd[98]=1,Sd[98]=0,Td[98]=1,Ld[98]=0,Dd[98]=1,Od[98]=0,fd[98]=-1,gd[98]=0,md[98]=1,_d[99]=0,wd[99]=1,Pd[99]=0,Ed[99]=0,xd[99]=-1,Ad[99]=1,Rd[99]=1,Id[99]=0,Md[99]=0,Cd[99]=-1,Sd[99]=0,Td[99]=1,Ld[99]=0,Dd[99]=-1,Od[99]=0,fd[99]=1,gd[99]=0,md[99]=1,Ed[38]=0,xd[38]=-1,Ad[38]=1,Rd[38]=1,Id[38]=0,Md[38]=0,jd[38]=0,Nd[38]=1,Fd[38]=1,Ld[38]=0,Dd[38]=1,Od[38]=0,fd[38]=-1,gd[38]=0,md[38]=1,yd[38]=-1,vd[38]=0,bd[38]=0,Ed[39]=0,xd[39]=1,Ad[39]=1,Rd[39]=-1,Id[39]=0,Md[39]=0,jd[39]=0,Nd[39]=-1,Fd[39]=1,Ld[39]=0,Dd[39]=1,Od[39]=0,fd[39]=-1,gd[39]=0,md[39]=1,yd[39]=1,vd[39]=0,bd[39]=0;var kd=function(e){return[[e.bottomleft,0],[0,0],[0,e.leftbottom]]},Ud=function(e){return[[1,e.rightbottom],[1,0],[e.bottomright,0]]},zd=function(e){return[[e.topright,1],[1,1],[1,e.righttop]]},Bd=function(e){return[[0,e.lefttop],[0,1],[e.topleft,1]]},Gd=function(e){return[[e.bottomright,0],[e.bottomleft,0],[0,e.leftbottom],[0,e.lefttop]]},Vd=function(e){return[[e.bottomright,0],[e.bottomleft,0],[1,e.righttop],[1,e.rightbottom]]},Hd=function(e){return[[1,e.righttop],[1,e.rightbottom],[e.topleft,1],[e.topright,1]]},qd=function(e){return[[0,e.leftbottom],[0,e.lefttop],[e.topleft,1],[e.topright,1]]},Wd=[],Xd=[],Yd=[],Kd=[],Zd=[],Jd=[],$d=[],Qd=[];Kd[1]=Zd[1]=18,Kd[169]=Zd[169]=18,Yd[4]=Xd[4]=12,Yd[166]=Xd[166]=12,Wd[16]=Qd[16]=4,Wd[154]=Qd[154]=4,Jd[64]=$d[64]=22,Jd[106]=$d[106]=22,Yd[2]=Jd[2]=17,Kd[2]=Zd[2]=18,Yd[168]=Jd[168]=17,Kd[168]=Zd[168]=18,Wd[8]=Kd[8]=9,Xd[8]=Yd[8]=12,Wd[162]=Kd[162]=9,Xd[162]=Yd[162]=12,Wd[32]=Qd[32]=4,Xd[32]=$d[32]=1,Wd[138]=Qd[138]=4,Xd[138]=$d[138]=1,Zd[128]=Qd[128]=21,Jd[128]=$d[128]=22,Zd[42]=Qd[42]=21,Jd[42]=$d[42]=22,Xd[5]=Zd[5]=14,Xd[165]=Zd[165]=14,Yd[20]=Qd[20]=6,Yd[150]=Qd[150]=6,Wd[80]=Jd[80]=11,Wd[90]=Jd[90]=11,Kd[65]=$d[65]=3,Kd[105]=$d[105]=3,Wd[160]=Jd[160]=11,Xd[160]=Zd[160]=14,Wd[10]=Jd[10]=11,Xd[10]=Zd[10]=14,Yd[130]=Qd[130]=6,Kd[130]=$d[130]=3,Yd[40]=Qd[40]=6,Kd[40]=$d[40]=3,Xd[101]=$d[101]=1,Xd[69]=$d[69]=1,Zd[149]=Qd[149]=21,Zd[21]=Qd[21]=21,Yd[86]=Jd[86]=17,Yd[84]=Jd[84]=17,Wd[89]=Kd[89]=9,Wd[81]=Kd[81]=9,Wd[96]=$d[96]=0,Xd[96]=Jd[96]=15,Wd[74]=$d[74]=0,Xd[74]=Jd[74]=15,Wd[24]=Yd[24]=8,Kd[24]=Qd[24]=7,Wd[146]=Yd[146]=8,Kd[146]=Qd[146]=7,Xd[6]=Jd[6]=15,Yd[6]=Zd[6]=16,Xd[164]=Jd[164]=15,Yd[164]=Zd[164]=16,Kd[129]=Qd[129]=7,Zd[129]=$d[129]=20,Kd[41]=Qd[41]=7,Zd[41]=$d[41]=20,Yd[66]=$d[66]=2,Kd[66]=Jd[66]=19,Yd[104]=$d[104]=2,Kd[104]=Jd[104]=19,Wd[144]=Zd[144]=10,Jd[144]=Qd[144]=23,Wd[26]=Zd[26]=10,Jd[26]=Qd[26]=23,Xd[36]=Qd[36]=5,Yd[36]=$d[36]=2,Xd[134]=Qd[134]=5,Yd[134]=$d[134]=2,Wd[9]=Zd[9]=10,Xd[9]=Kd[9]=13,Wd[161]=Zd[161]=10,Xd[161]=Kd[161]=13,Xd[37]=Qd[37]=5,Zd[37]=$d[37]=20,Xd[133]=Qd[133]=5,Zd[133]=$d[133]=20,Yd[148]=Zd[148]=16,Jd[148]=Qd[148]=23,Yd[22]=Zd[22]=16,Jd[22]=Qd[22]=23,Wd[82]=Yd[82]=8,Kd[82]=Jd[82]=19,Wd[88]=Yd[88]=8,Kd[88]=Jd[88]=19,Wd[73]=$d[73]=0,Xd[73]=Kd[73]=13,Wd[97]=$d[97]=0,Xd[97]=Kd[97]=13,Wd[145]=Kd[145]=9,Zd[145]=Qd[145]=21,Wd[25]=Kd[25]=9,Zd[25]=Qd[25]=21,Xd[70]=$d[70]=1,Yd[70]=Jd[70]=17,Xd[100]=$d[100]=1,Yd[100]=Jd[100]=17,Wd[34]=Kd[34]=9,Xd[34]=Yd[34]=12,Zd[34]=Qd[34]=21,Jd[34]=$d[34]=22,Wd[136]=Qd[136]=4,Xd[136]=$d[136]=1,Yd[136]=Jd[136]=17,Kd[136]=Zd[136]=18,Wd[35]=Qd[35]=4,Xd[35]=Yd[35]=12,Kd[35]=Zd[35]=18,Jd[35]=$d[35]=22,Wd[153]=Qd[153]=4,Kd[153]=Zd[153]=18,Xd[102]=Yd[102]=12,Jd[102]=$d[102]=22,Wd[155]=Kd[155]=9,Zd[155]=Qd[155]=23,Xd[103]=$d[103]=1,Yd[103]=Jd[103]=17,Wd[152]=Qd[152]=4,Yd[152]=Jd[152]=17,Kd[152]=Zd[152]=18,Wd[156]=Yd[156]=8,Kd[156]=Zd[156]=18,Jd[156]=Qd[156]=23,Wd[137]=Qd[137]=4,Xd[137]=$d[137]=1,Kd[137]=Zd[137]=18,Wd[139]=Qd[139]=4,Xd[139]=Kd[139]=13,Zd[139]=$d[139]=20,Wd[98]=Kd[98]=9,Xd[98]=Yd[98]=12,Jd[98]=$d[98]=22,Wd[99]=$d[99]=0,Xd[99]=Yd[99]=12,Kd[99]=Jd[99]=19,Xd[38]=Yd[38]=12,Zd[38]=Qd[38]=21,Jd[38]=$d[38]=22,Xd[39]=Qd[39]=5,Yd[39]=Zd[39]=16,Jd[39]=$d[39]=22;var ep=[];function tp(e,t,n){void 0===n&&(n={});var i={type:"Feature"};return(0===n.id||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=t||{},i.geometry=e,i}function np(e,t,n){if(void 0===n&&(n={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!ip(e[0])||!ip(e[1]))throw new Error("coordinates must contain numbers");return tp({type:"Point",coordinates:e},t,n)}function ip(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)}function rp(e,t,n){var i,r=t[0]-e[0],o=t[1]-e[1],a=n[0]-t[0];return((i=r*(n[1]-t[1])-a*o)>0)-(i<0)||+i}function op(e,t){return t.geometry.coordinates[0].every((function(t){return Qh(np(t),e)}))}ep[1]=ep[169]=kd,ep[4]=ep[166]=Ud,ep[16]=ep[154]=zd,ep[64]=ep[106]=Bd,ep[168]=ep[2]=Gd,ep[162]=ep[8]=Vd,ep[138]=ep[32]=Hd,ep[42]=ep[128]=qd,ep[5]=ep[165]=function(e){return[[0,0],[0,e.leftbottom],[1,e.rightbottom],[1,0]]},ep[20]=ep[150]=function(e){return[[1,0],[e.bottomright,0],[e.topright,1],[1,1]]},ep[80]=ep[90]=function(e){return[[1,1],[1,e.righttop],[0,e.lefttop],[0,1]]},ep[65]=ep[105]=function(e){return[[e.bottomleft,0],[0,0],[0,1],[e.topleft,1]]},ep[160]=ep[10]=function(e){return[[1,e.righttop],[1,e.rightbottom],[0,e.leftbottom],[0,e.lefttop]]},ep[130]=ep[40]=function(e){return[[e.topleft,1],[e.topright,1],[e.bottomright,0],[e.bottomleft,0]]},ep[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},ep[101]=ep[69]=function(e){return[[1,e.rightbottom],[1,0],[0,0],[0,1],[e.topleft,1]]},ep[149]=ep[21]=function(e){return[[e.topright,1],[1,1],[1,0],[0,0],[0,e.leftbottom]]},ep[86]=ep[84]=function(e){return[[1,0],[e.bottomright,0],[0,e.lefttop],[0,1],[1,1]]},ep[89]=ep[81]=function(e){return[[1,1],[1,e.righttop],[e.bottomleft,0],[0,0],[0,1]]},ep[96]=ep[74]=function(e){return[[1,e.righttop],[1,e.rightbottom],[0,e.lefttop],[0,1],[e.topleft,1]]},ep[24]=ep[146]=function(e){return[[1,1],[1,e.righttop],[e.bottomright,0],[e.bottomleft,0],[e.topright,1]]},ep[6]=ep[164]=function(e){return[[1,e.rightbottom],[1,0],[e.bottomright,0],[0,e.leftbottom],[0,e.lefttop]]},ep[129]=ep[41]=function(e){return[[e.topright,1],[e.bottomleft,0],[0,0],[0,e.leftbottom],[e.topleft,1]]},ep[66]=ep[104]=function(e){return[[e.bottomright,0],[e.bottomleft,0],[0,e.lefttop],[0,1],[e.topleft,1]]},ep[144]=ep[26]=function(e){return[[1,1],[1,e.righttop],[0,e.leftbottom],[0,e.lefttop],[e.topright,1]]},ep[36]=ep[134]=function(e){return[[1,e.rightbottom],[1,0],[e.bottomright,0],[e.topleft,1],[e.topright,1]]},ep[9]=ep[161]=function(e){return[[1,e.righttop],[1,e.rightbottom],[e.bottomleft,0],[0,0],[0,e.leftbottom]]},ep[37]=ep[133]=function(e){return[[1,e.rightbottom],[1,0],[0,0],[0,e.leftbottom],[e.topleft,1],[e.topright,1]]},ep[148]=ep[22]=function(e){return[[1,1],[1,0],[e.bottomright,0],[0,e.leftbottom],[0,e.lefttop],[e.topright,1]]},ep[82]=ep[88]=function(e){return[[1,1],[1,e.righttop],[e.bottomright,0],[e.bottomleft,0],[0,e.lefttop],[0,1]]},ep[73]=ep[97]=function(e){return[[1,e.righttop],[1,e.rightbottom],[e.bottomleft,0],[0,0],[0,1],[e.topleft,1]]},ep[145]=ep[25]=function(e){return[[1,1],[1,e.righttop],[e.bottomleft,0],[0,0],[0,e.leftbottom],[e.topright,1]]},ep[70]=ep[100]=function(e){return[[1,e.rightbottom],[1,0],[e.bottomright,0],[0,e.lefttop],[0,1],[e.topleft,1]]},ep[34]=function(e){return[qd(e),Vd(e)]},ep[35]=function(e){return[[1,e.righttop],[1,e.rightbottom],[e.bottomright,0],[e.bottomleft,0],[0,e.leftbottom],[0,e.lefttop],[e.topleft,1],[e.topright,1]]},ep[136]=function(e){return[Hd(e),Gd(e)]},ep[153]=function(e){return[zd(e),kd(e)]},ep[102]=function(e){return[Ud(e),Bd(e)]},ep[155]=function(e){return[[1,1],[1,e.righttop],[e.bottomleft,0],[0,0],[0,e.leftbottom],[e.topright,1]]},ep[103]=function(e){return[[1,e.rightbottom],[1,0],[e.bottomright,0],[0,e.lefttop],[0,1],[e.topleft,1]]},ep[152]=function(e){return[zd(e),Gd(e)]},ep[156]=function(e){return[[1,1],[1,e.righttop],[e.bottomright,0],[e.bottomleft,0],[0,e.leftbottom],[0,e.lefttop],[e.topright,1]]},ep[137]=function(e){return[Hd(e),kd(e)]},ep[139]=function(e){return[[1,e.righttop],[1,e.rightbottom],[e.bottomleft,0],[0,0],[0,e.leftbottom],[e.topleft,1],[e.topright,1]]},ep[98]=function(e){return[Vd(e),Bd(e)]},ep[99]=function(e){return[[1,e.righttop],[1,e.rightbottom],[e.bottomright,0],[e.bottomleft,0],[0,e.lefttop],[0,1],[e.topleft,1]]},ep[38]=function(e){return[Ud(e),qd(e)]},ep[39]=function(e){return[[1,e.rightbottom],[1,0],[e.bottomright,0],[0,e.leftbottom],[0,e.lefttop],[e.topleft,1],[e.topright,1]]};const ap=function(){function e(t){this.id=e.buildId(t),this.coordinates=t,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return e.buildId=function(e){return e.join(",")},e.prototype.removeInnerEdge=function(e){this.innerEdges=this.innerEdges.filter((function(t){return t.from.id!==e.from.id}))},e.prototype.removeOuterEdge=function(e){this.outerEdges=this.outerEdges.filter((function(t){return t.to.id!==e.to.id}))},e.prototype.addOuterEdge=function(e){this.outerEdges.push(e),this.outerEdgesSorted=!1},e.prototype.sortOuterEdges=function(){var e=this;this.outerEdgesSorted||(this.outerEdges.sort((function(t,n){var i=t.to,r=n.to;if(i.coordinates[0]-e.coordinates[0]>=0&&r.coordinates[0]-e.coordinates[0]<0)return 1;if(i.coordinates[0]-e.coordinates[0]<0&&r.coordinates[0]-e.coordinates[0]>=0)return-1;if(i.coordinates[0]-e.coordinates[0]==0&&r.coordinates[0]-e.coordinates[0]==0)return i.coordinates[1]-e.coordinates[1]>=0||r.coordinates[1]-e.coordinates[1]>=0?i.coordinates[1]-r.coordinates[1]:r.coordinates[1]-i.coordinates[1];var o=rp(e.coordinates,i.coordinates,r.coordinates);return o<0?1:o>0?-1:Math.pow(i.coordinates[0]-e.coordinates[0],2)+Math.pow(i.coordinates[1]-e.coordinates[1],2)-(Math.pow(r.coordinates[0]-e.coordinates[0],2)+Math.pow(r.coordinates[1]-e.coordinates[1],2))})),this.outerEdgesSorted=!0)},e.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},e.prototype.getOuterEdge=function(e){return this.sortOuterEdges(),this.outerEdges[e]},e.prototype.addInnerEdge=function(e){this.innerEdges.push(e)},e}(),sp=function(){function e(e,t){this.from=e,this.to=t,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return e.prototype.getSymetric=function(){return this.symetric||(this.symetric=new e(this.to,this.from),this.symetric.symetric=this),this.symetric},e.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},e.prototype.isEqual=function(e){return this.from.id===e.from.id&&this.to.id===e.to.id},e.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},e.prototype.toLineString=function(){return function(e,t,n){if(void 0===n&&(n={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");return tp({type:"LineString",coordinates:e},t,n)}([this.from.coordinates,this.to.coordinates])},e.prototype.compareTo=function(e){return rp(e.from.coordinates,e.to.coordinates,this.to.coordinates)},e}();var lp=function(){function e(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return e.prototype.push=function(e){this.edges.push(e),this.polygon=this.envelope=void 0},e.prototype.get=function(e){return this.edges[e]},Object.defineProperty(e.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e){this.edges.forEach(e)},e.prototype.map=function(e){return this.edges.map(e)},e.prototype.some=function(e){return this.edges.some(e)},e.prototype.isValid=function(){return!0},e.prototype.isHole=function(){var e=this,t=this.edges.reduce((function(t,n,i){return n.from.coordinates[1]>e.edges[t].from.coordinates[1]&&(t=i),t}),0),n=(0===t?this.length:t)-1,i=(t+1)%this.length,r=rp(this.edges[n].from.coordinates,this.edges[t].from.coordinates,this.edges[i].from.coordinates);return 0===r?this.edges[n].from.coordinates[0]>this.edges[i].from.coordinates[0]:r>0},e.prototype.toMultiPoint=function(){return e=this.edges.map((function(e){return e.from.coordinates})),void 0===n&&(n={}),tp({type:"MultiPoint",coordinates:e},t,n);var e,t,n},e.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var e=this.edges.map((function(e){return e.from.coordinates}));return e.push(this.edges[0].from.coordinates),this.polygon=function(e,t,n){void 0===n&&(n={});for(var i=0,r=e;i<r.length;i++){var o=r[i];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++)if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}return tp({type:"Polygon",coordinates:e},t,n)}([e])},e.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=(e=this.toPolygon(),nd($h(e)));var e},e.findEdgeRingContaining=function(e,t){var n,i,r=e.getEnvelope();return t.forEach((function(t){var o,a,s,l,c,u,h=t.getEnvelope();if(i&&(n=i.getEnvelope()),a=r,s=(o=h).geometry.coordinates[0].map((function(e){return e[0]})),l=o.geometry.coordinates[0].map((function(e){return e[1]})),c=a.geometry.coordinates[0].map((function(e){return e[0]})),u=a.geometry.coordinates[0].map((function(e){return e[1]})),(Math.max.apply(null,s)!==Math.max.apply(null,c)||Math.max.apply(null,l)!==Math.max.apply(null,u)||Math.min.apply(null,s)!==Math.min.apply(null,c)||Math.min.apply(null,l)!==Math.min.apply(null,u))&&op(h,r)){for(var d=e.map((function(e){return e.from.coordinates})),p=void 0,f=function(e){t.some((function(t){return n=e,i=t.from.coordinates,n[0]===i[0]&&n[1]===i[1];var n,i}))||(p=e)},g=0,m=d;g<m.length;g++)f(m[g]);p&&t.inside(np(p))&&(i&&!op(n,h)||(i=t))}})),i},e.prototype.inside=function(e){return Qh(e,this.toPolygon())},e}();const cp=lp;function up(e,t,n){if(null!==e)for(var i,r,o,a,s,l,c,u,h=0,d=0,p=e.type,f="FeatureCollection"===p,g="Feature"===p,m=f?e.features.length:1,y=0;y<m;y++){s=(u=!!(c=f?e.features[y].geometry:g?e.geometry:e)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var v=0;v<s;v++){var b=0,_=0;if(null!==(a=u?c.geometries[v]:c)){l=a.coordinates;var w=a.type;switch(h=!n||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===t(l,d,y,b,_))return!1;d++,b++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(!1===t(l[i],d,y,b,_))return!1;d++,"MultiPoint"===w&&b++}"LineString"===w&&b++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(r=0;r<l[i].length-h;r++){if(!1===t(l[i][r],d,y,b,_))return!1;d++}"MultiLineString"===w&&b++,"Polygon"===w&&_++}"Polygon"===w&&b++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(_=0,r=0;r<l[i].length;r++){for(o=0;o<l[i][r].length-h;o++){if(!1===t(l[i][r][o],d,y,b,_))return!1;d++}_++}b++}break;case"GeometryCollection":for(i=0;i<a.geometries.length;i++)if(!1===up(a.geometries[i],t,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function hp(e,t){!function(e,t){var n,i,r,o,a,s,l,c,u,h,d=0,p="FeatureCollection"===e.type,f="Feature"===e.type,g=p?e.features.length:1;for(n=0;n<g;n++){for(s=p?e.features[n].geometry:f?e.geometry:e,c=p?e.features[n].properties:f?e.properties:{},u=p?e.features[n].bbox:f?e.bbox:void 0,h=p?e.features[n].id:f?e.id:void 0,a=(l=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,r=0;r<a;r++)if(null!==(o=l?s.geometries[r]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(o,d,c,u,h))return!1;break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(!1===t(o.geometries[i],d,c,u,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===t(null,d,c,u,h))return!1;d++}}(e,(function(e,n,i,r,o){var a,s=null===e?null:e.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return!1!==t(tp(e,i,{bbox:r,id:o}),n,0)&&void 0}switch(s){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var l=0;l<e.coordinates.length;l++){var c=e.coordinates[l];if(!1===t(tp({type:a,coordinates:c},i),n,l))return!1}}))}function dp(e){for(var t=e,n=[];t.parent;)n.unshift(t),t=t.parent;return n}!function(){function e(){this.edges=[],this.nodes={}}e.fromGeoJson=function(t){!function(e){if(!e)throw new Error("No geojson passed");if("FeatureCollection"!==e.type&&"GeometryCollection"!==e.type&&"MultiLineString"!==e.type&&"LineString"!==e.type&&"Feature"!==e.type)throw new Error("Invalid input type '"+e.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(t);var n=new e;return hp(t,(function(e){var t,i,r;!function(e,t,n){if(!e)throw new Error("No feature passed");if(!e||"Feature"!==e.type||!e.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!e.geometry||e.geometry.type!==t)throw new Error("Invalid input to "+n+": must be a "+t+", given "+e.geometry.type)}(e,"LineString","Graph::fromGeoJson"),t=function(e,t){if(e){var i=n.getNode(e),r=n.getNode(t);n.addEdge(i,r)}return t},r=i,up(e,(function(e,n,i,o,a){r=0===n?e:t(r,e)}),undefined)})),n},e.prototype.getNode=function(e){var t=ap.buildId(e),n=this.nodes[t];return n||(n=this.nodes[t]=new ap(e)),n},e.prototype.addEdge=function(e,t){var n=new sp(e,t),i=n.getSymetric();this.edges.push(n),this.edges.push(i)},e.prototype.deleteDangles=function(){var e=this;Object.keys(this.nodes).map((function(t){return e.nodes[t]})).forEach((function(t){return e._removeIfDangle(t)}))},e.prototype._removeIfDangle=function(e){var t=this;if(e.innerEdges.length<=1){var n=e.getOuterEdges().map((function(e){return e.to}));this.removeNode(e),n.forEach((function(e){return t._removeIfDangle(e)}))}},e.prototype.deleteCutEdges=function(){var e=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach((function(t){t.label===t.symetric.label&&(e.removeEdge(t.symetric),e.removeEdge(t))}))},e.prototype._computeNextCWEdges=function(e){var t=this;void 0===e?Object.keys(this.nodes).forEach((function(e){return t._computeNextCWEdges(t.nodes[e])})):e.getOuterEdges().forEach((function(t,n){e.getOuterEdge((0===n?e.getOuterEdges().length:n)-1).symetric.next=t}))},e.prototype._computeNextCCWEdges=function(e,t){for(var n,i,r=e.getOuterEdges(),o=r.length-1;o>=0;--o){var a=r[o],s=a.symetric,l=void 0,c=void 0;a.label===t&&(l=a),s.label===t&&(c=s),l&&c&&(c&&(i=c),l&&(i&&(i.next=l,i=void 0),n||(n=l)))}i&&(i.next=n)},e.prototype._findLabeledEdgeRings=function(){var e=[],t=0;return this.edges.forEach((function(n){if(!(n.label>=0)){e.push(n);var i=n;do{i.label=t,i=i.next}while(!n.isEqual(i));t++}})),e},e.prototype.getEdgeRings=function(){var e=this;this._computeNextCWEdges(),this.edges.forEach((function(e){e.label=void 0})),this._findLabeledEdgeRings().forEach((function(t){e._findIntersectionNodes(t).forEach((function(n){e._computeNextCCWEdges(n,t.label)}))}));var t=[];return this.edges.forEach((function(n){n.ring||t.push(e._findEdgeRing(n))})),t},e.prototype._findIntersectionNodes=function(e){var t=[],n=e,i=function(){var i=0;n.from.getOuterEdges().forEach((function(t){t.label===e.label&&++i})),i>1&&t.push(n.from),n=n.next};do{i()}while(!e.isEqual(n));return t},e.prototype._findEdgeRing=function(e){var t=e,n=new cp;do{n.push(t),t.ring=n,t=t.next}while(!e.isEqual(t));return n},e.prototype.removeNode=function(e){var t=this;e.getOuterEdges().forEach((function(e){return t.removeEdge(e)})),e.innerEdges.forEach((function(e){return t.removeEdge(e)})),delete this.nodes[e.id]},e.prototype.removeEdge=function(e){this.edges=this.edges.filter((function(t){return!t.isEqual(e)})),e.deleteEdge()}}(),a(9657),a(2606),a(1160);var pp={search:function(e,t,n,i){e.cleanDirty();var r=(i=i||{}).heuristic||pp.heuristics.manhattan,o=i.closest||!1,a=new mp((function(e){return e.f})),s=t;for(t.h=r(t,n),a.push(t);a.size()>0;){var l=a.pop();if(l===n)return dp(l);l.closed=!0;for(var c=e.neighbors(l),u=0,h=c.length;u<h;++u){var d=c[u];if(!d.closed&&!d.isWall()){var p=l.g+d.getCost(l),f=d.visited;(!f||p<d.g)&&(d.visited=!0,d.parent=l,d.h=d.h||r(d,n),d.g=p,d.f=d.g+d.h,e.markDirty(d),o&&(d.h<s.h||d.h===s.h&&d.g<s.g)&&(s=d),f?a.rescoreElement(d):a.push(d))}}}return o?dp(s):[]},heuristics:{manhattan:function(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)},diagonal:function(e,t){var n=Math.sqrt(2),i=Math.abs(t.x-e.x),r=Math.abs(t.y-e.y);return 1*(i+r)+(n-2)*Math.min(i,r)}},cleanNode:function(e){e.f=0,e.g=0,e.h=0,e.visited=!1,e.closed=!1,e.parent=null}};function fp(e,t){t=t||{},this.nodes=[],this.diagonal=!!t.diagonal,this.grid=[];for(var n=0;n<e.length;n++){this.grid[n]=[];for(var i=0,r=e[n];i<r.length;i++){var o=new gp(n,i,r[i]);this.grid[n][i]=o,this.nodes.push(o)}}this.init()}function gp(e,t,n){this.x=e,this.y=t,this.weight=n}function mp(e){this.content=[],this.scoreFunction=e}function yp(){this._=null}function vp(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function bp(e,t){var n=t,i=t.R,r=n.U;r?r.L===n?r.L=i:r.R=i:e._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function _p(e,t){var n=t,i=t.L,r=n.U;r?r.L===n?r.L=i:r.R=i:e._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function wp(e){for(;e.L;)e=e.L;return e}fp.prototype.init=function(){this.dirtyNodes=[];for(var e=0;e<this.nodes.length;e++)pp.cleanNode(this.nodes[e])},fp.prototype.cleanDirty=function(){for(var e=0;e<this.dirtyNodes.length;e++)pp.cleanNode(this.dirtyNodes[e]);this.dirtyNodes=[]},fp.prototype.markDirty=function(e){this.dirtyNodes.push(e)},fp.prototype.neighbors=function(e){var t=[],n=e.x,i=e.y,r=this.grid;return r[n-1]&&r[n-1][i]&&t.push(r[n-1][i]),r[n+1]&&r[n+1][i]&&t.push(r[n+1][i]),r[n]&&r[n][i-1]&&t.push(r[n][i-1]),r[n]&&r[n][i+1]&&t.push(r[n][i+1]),this.diagonal&&(r[n-1]&&r[n-1][i-1]&&t.push(r[n-1][i-1]),r[n+1]&&r[n+1][i-1]&&t.push(r[n+1][i-1]),r[n-1]&&r[n-1][i+1]&&t.push(r[n-1][i+1]),r[n+1]&&r[n+1][i+1]&&t.push(r[n+1][i+1])),t},fp.prototype.toString=function(){for(var e,t,n,i,r=[],o=this.grid,a=0,s=o.length;a<s;a++){for(e=[],n=0,i=(t=o[a]).length;n<i;n++)e.push(t[n].weight);r.push(e.join(" "))}return r.join("\n")},gp.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},gp.prototype.getCost=function(e){return e&&e.x!==this.x&&e.y!==this.y?1.41421*this.weight:this.weight},gp.prototype.isWall=function(){return 0===this.weight},mp.prototype={push:function(e){this.content.push(e),this.sinkDown(this.content.length-1)},pop:function(){var e=this.content[0],t=this.content.pop();return this.content.length>0&&(this.content[0]=t,this.bubbleUp(0)),e},remove:function(e){var t=this.content.indexOf(e),n=this.content.pop();t!==this.content.length-1&&(this.content[t]=n,this.scoreFunction(n)<this.scoreFunction(e)?this.sinkDown(t):this.bubbleUp(t))},size:function(){return this.content.length},rescoreElement:function(e){this.sinkDown(this.content.indexOf(e))},sinkDown:function(e){for(var t=this.content[e];e>0;){var n=(e+1>>1)-1,i=this.content[n];if(!(this.scoreFunction(t)<this.scoreFunction(i)))break;this.content[n]=t,this.content[e]=i,e=n}},bubbleUp:function(e){for(var t=this.content.length,n=this.content[e],i=this.scoreFunction(n);;){var r,o=e+1<<1,a=o-1,s=null;if(a<t){var l=this.content[a];(r=this.scoreFunction(l))<i&&(s=a)}if(o<t){var c=this.content[o];this.scoreFunction(c)<(null===s?i:r)&&(s=o)}if(null===s)break;this.content[e]=this.content[s],this.content[s]=n,e=s}}},yp.prototype={constructor:yp,insert:function(e,t){var n,i,r;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=wp(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)n===(i=n.U).L?(r=i.R)&&r.C?(n.C=r.C=!1,i.C=!0,e=i):(e===n.R&&(bp(this,n),n=(e=n).U),n.C=!1,i.C=!0,_p(this,i)):(r=i.L)&&r.C?(n.C=r.C=!1,i.C=!0,e=i):(e===n.L&&(_p(this,n),n=(e=n).U),n.C=!1,i.C=!0,bp(this,i)),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,i,r=e.U,o=e.L,a=e.R;if(n=o?a?wp(a):o:a,r?r.L===e?r.L=n:r.R=n:this._=n,o&&a?(i=n.C,n.C=e.C,n.L=o,o.U=n,n!==a?(r=n.U,n.U=e.U,e=n.R,r.L=e,n.R=a,a.U=n):(n.U=r,r=n,e=n.R)):(i=e.C,e=n),e&&(e.U=r),!i)if(e&&e.C)e.C=!1;else{do{if(e===this._)break;if(e===r.L){if((t=r.R).C&&(t.C=!1,r.C=!0,bp(this,r),t=r.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,_p(this,t),t=r.R),t.C=r.C,r.C=t.R.C=!1,bp(this,r),e=this._;break}}else if((t=r.L).C&&(t.C=!1,r.C=!0,_p(this,r),t=r.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,bp(this,t),t=r.L),t.C=r.C,r.C=t.L.C=!1,_p(this,r),e=this._;break}t.C=!0,e=r,r=r.U}while(!e.C);e&&(e.C=!1)}}};const Pp=yp;function Ep(e,t,n,i){var r=[null,null],o=Xp.push(r)-1;return r.left=e,r.right=t,n&&Ap(r,e,t,n),i&&Ap(r,t,e,i),qp[e.index].halfedges.push(o),qp[t.index].halfedges.push(o),r}function xp(e,t,n){var i=[t,n];return i.left=e,i}function Ap(e,t,n,i){e[0]||e[1]?e.left===n?e[1]=i:e[0]=i:(e[0]=i,e.left=t,e.right=n)}function Cp(e,t,n,i,r){var o,a=e[0],s=e[1],l=a[0],c=a[1],u=0,h=1,d=s[0]-l,p=s[1]-c;if(o=t-l,d||!(o>0)){if(o/=d,d<0){if(o<u)return;o<h&&(h=o)}else if(d>0){if(o>h)return;o>u&&(u=o)}if(o=i-l,d||!(o<0)){if(o/=d,d<0){if(o>h)return;o>u&&(u=o)}else if(d>0){if(o<u)return;o<h&&(h=o)}if(o=n-c,p||!(o>0)){if(o/=p,p<0){if(o<u)return;o<h&&(h=o)}else if(p>0){if(o>h)return;o>u&&(u=o)}if(o=r-c,p||!(o<0)){if(o/=p,p<0){if(o>h)return;o>u&&(u=o)}else if(p>0){if(o<u)return;o<h&&(h=o)}return!(u>0||h<1)||(u>0&&(e[0]=[l+u*d,c+u*p]),h<1&&(e[1]=[l+h*d,c+h*p]),!0)}}}}}function Sp(e,t,n,i,r){var o=e[1];if(o)return!0;var a,s,l=e[0],c=e.left,u=e.right,h=c[0],d=c[1],p=u[0],f=u[1],g=(h+p)/2,m=(d+f)/2;if(f===d){if(g<t||g>=i)return;if(h>p){if(l){if(l[1]>=r)return}else l=[g,n];o=[g,r]}else{if(l){if(l[1]<n)return}else l=[g,r];o=[g,n]}}else if(s=m-(a=(h-p)/(f-d))*g,a<-1||a>1)if(h>p){if(l){if(l[1]>=r)return}else l=[(n-s)/a,n];o=[(r-s)/a,r]}else{if(l){if(l[1]<n)return}else l=[(r-s)/a,r];o=[(n-s)/a,n]}else if(d<f){if(l){if(l[0]>=i)return}else l=[t,a*t+s];o=[i,a*i+s]}else{if(l){if(l[0]<t)return}else l=[i,a*i+s];o=[t,a*t+s]}return e[0]=l,e[1]=o,!0}function Tp(e,t){var n=e.site,i=t.left,r=t.right;return n===r&&(r=i,i=n),r?Math.atan2(r[1]-i[1],r[0]-i[0]):(n===i?(i=t[1],r=t[0]):(i=t[0],r=t[1]),Math.atan2(i[0]-r[0],r[1]-i[1]))}function Rp(e,t){return t[+(t.left!==e.site)]}function Ip(e,t){return t[+(t.left===e.site)]}var Mp,Lp=[];function Dp(){vp(this),this.x=this.y=this.arc=this.site=this.cy=null}function Op(e){var t=e.P,n=e.N;if(t&&n){var i=t.site,r=e.site,o=n.site;if(i!==o){var a=r[0],s=r[1],l=i[0]-a,c=i[1]-s,u=o[0]-a,h=o[1]-s,d=2*(l*h-c*u);if(!(d>=-Kp)){var p=l*l+c*c,f=u*u+h*h,g=(h*p-c*f)/d,m=(l*f-u*p)/d,y=Lp.pop()||new Dp;y.arc=e,y.site=r,y.x=g+a,y.y=(y.cy=m+s)+Math.sqrt(g*g+m*m),e.circle=y;for(var v=null,b=Wp._;b;)if(y.y<b.y||y.y===b.y&&y.x<=b.x){if(!b.L){v=b.P;break}b=b.L}else{if(!b.R){v=b;break}b=b.R}Wp.insert(v,y),v||(Mp=y)}}}}function jp(e){var t=e.circle;t&&(t.P||(Mp=t.N),Wp.remove(t),Lp.push(t),vp(t),e.circle=null)}var Np=[];function Fp(){vp(this),this.edge=this.site=this.circle=null}function kp(e){var t=Np.pop()||new Fp;return t.site=e,t}function Up(e){jp(e),Hp.remove(e),Np.push(e),vp(e)}function zp(e){var t=e.circle,n=t.x,i=t.cy,r=[n,i],o=e.P,a=e.N,s=[e];Up(e);for(var l=o;l.circle&&Math.abs(n-l.circle.x)<Yp&&Math.abs(i-l.circle.cy)<Yp;)o=l.P,s.unshift(l),Up(l),l=o;s.unshift(l),jp(l);for(var c=a;c.circle&&Math.abs(n-c.circle.x)<Yp&&Math.abs(i-c.circle.cy)<Yp;)a=c.N,s.push(c),Up(c),c=a;s.push(c),jp(c);var u,h=s.length;for(u=1;u<h;++u)c=s[u],l=s[u-1],Ap(c.edge,l.site,c.site,r);l=s[0],(c=s[h-1]).edge=Ep(l.site,c.site,null,r),Op(l),Op(c)}function Bp(e){for(var t,n,i,r,o=e[0],a=e[1],s=Hp._;s;)if((i=Gp(s,a)-o)>Yp)s=s.L;else{if(!((r=o-Vp(s,a))>Yp)){i>-Yp?(t=s.P,n=s):r>-Yp?(t=s,n=s.N):t=n=s;break}if(!s.R){t=s;break}s=s.R}!function(e){qp[e.index]={site:e,halfedges:[]}}(e);var l=kp(e);if(Hp.insert(t,l),t||n){if(t===n)return jp(t),n=kp(t.site),Hp.insert(l,n),l.edge=n.edge=Ep(t.site,l.site),Op(t),void Op(n);if(n){jp(t),jp(n);var c=t.site,u=c[0],h=c[1],d=e[0]-u,p=e[1]-h,f=n.site,g=f[0]-u,m=f[1]-h,y=2*(d*m-p*g),v=d*d+p*p,b=g*g+m*m,_=[(m*v-p*b)/y+u,(d*b-g*v)/y+h];Ap(n.edge,c,f,_),l.edge=Ep(c,e,null,_),n.edge=Ep(e,f,null,_),Op(t),Op(n)}else l.edge=Ep(t.site,l.site)}}function Gp(e,t){var n=e.site,i=n[0],r=n[1],o=r-t;if(!o)return i;var a=e.P;if(!a)return-1/0;var s=(n=a.site)[0],l=n[1],c=l-t;if(!c)return s;var u=s-i,h=1/o-1/c,d=u/c;return h?(-d+Math.sqrt(d*d-2*h*(u*u/(-2*c)-l+c/2+r-o/2)))/h+i:(i+s)/2}function Vp(e,t){var n=e.N;if(n)return Gp(n,t);var i=e.site;return i[1]===t?i[0]:1/0}var Hp,qp,Wp,Xp,Yp=1e-6,Kp=1e-12;function Zp(e,t){return t[1]-e[1]||t[0]-e[0]}function Jp(e,t){var n,i,r,o=e.sort(Zp).pop();for(Xp=[],qp=new Array(e.length),Hp=new Pp,Wp=new Pp;;)if(r=Mp,o&&(!r||o[1]<r.y||o[1]===r.y&&o[0]<r.x))o[0]===n&&o[1]===i||(Bp(o),n=o[0],i=o[1]),o=e.pop();else{if(!r)break;zp(r.arc)}if(function(){for(var e,t,n,i,r=0,o=qp.length;r<o;++r)if((e=qp[r])&&(i=(t=e.halfedges).length)){var a=new Array(i),s=new Array(i);for(n=0;n<i;++n)a[n]=n,s[n]=Tp(e,Xp[t[n]]);for(a.sort((function(e,t){return s[t]-s[e]})),n=0;n<i;++n)s[n]=t[a[n]];for(n=0;n<i;++n)t[n]=s[n]}}(),t){var a=+t[0][0],s=+t[0][1],l=+t[1][0],c=+t[1][1];!function(e,t,n,i){for(var r,o=Xp.length;o--;)Sp(r=Xp[o],e,t,n,i)&&Cp(r,e,t,n,i)&&(Math.abs(r[0][0]-r[1][0])>Yp||Math.abs(r[0][1]-r[1][1])>Yp)||delete Xp[o]}(a,s,l,c),function(e,t,n,i){var r,o,a,s,l,c,u,h,d,p,f,g,m=qp.length,y=!0;for(r=0;r<m;++r)if(o=qp[r]){for(a=o.site,s=(l=o.halfedges).length;s--;)Xp[l[s]]||l.splice(s,1);for(s=0,c=l.length;s<c;)f=(p=Ip(o,Xp[l[s]]))[0],g=p[1],h=(u=Rp(o,Xp[l[++s%c]]))[0],d=u[1],(Math.abs(f-h)>Yp||Math.abs(g-d)>Yp)&&(l.splice(s,0,Xp.push(xp(a,p,Math.abs(f-e)<Yp&&i-g>Yp?[e,Math.abs(h-e)<Yp?d:i]:Math.abs(g-i)<Yp&&n-f>Yp?[Math.abs(d-i)<Yp?h:n,i]:Math.abs(f-n)<Yp&&g-t>Yp?[n,Math.abs(h-n)<Yp?d:t]:Math.abs(g-t)<Yp&&f-e>Yp?[Math.abs(d-t)<Yp?h:e,t]:null))-1),++c);c&&(y=!1)}if(y){var v,b,_,w=1/0;for(r=0,y=null;r<m;++r)(o=qp[r])&&(_=(v=(a=o.site)[0]-e)*v+(b=a[1]-t)*b)<w&&(w=_,y=o);if(y){var P=[e,t],E=[e,i],x=[n,i],A=[n,t];y.halfedges.push(Xp.push(xp(a=y.site,P,E))-1,Xp.push(xp(a,E,x))-1,Xp.push(xp(a,x,A))-1,Xp.push(xp(a,A,P))-1)}}for(r=0;r<m;++r)(o=qp[r])&&(o.halfedges.length||delete qp[r])}(a,s,l,c)}this.edges=Xp,this.cells=qp,Hp=Wp=Xp=qp=null}Jp.prototype={constructor:Jp,polygons:function(){var e=this.edges;return this.cells.map((function(t){var n=t.halfedges.map((function(n){return Rp(t,e[n])}));return n.data=t.site.data,n}))},triangles:function(){var e=[],t=this.edges;return this.cells.forEach((function(n,i){if(o=(r=n.halfedges).length)for(var r,o,a,s,l,c,u=n.site,h=-1,d=t[r[o-1]],p=d.left===u?d.right:d.left;++h<o;)a=p,p=(d=t[r[h]]).left===u?d.right:d.left,a&&p&&i<a.index&&i<p.index&&(l=a,c=p,((s=u)[0]-c[0])*(l[1]-s[1])-(s[0]-l[0])*(c[1]-s[1])<0)&&e.push([u.data,a.data,p.data])})),e},links:function(){return this.edges.filter((function(e){return e.right})).map((function(e){return{source:e.left.data,target:e.right.data}}))},find:function(e,t,n){for(var i,r,o=this,a=o._found||0,s=o.cells.length;!(r=o.cells[a]);)if(++a>=s)return null;var l=e-r.site[0],c=t-r.site[1],u=l*l+c*c;do{r=o.cells[i=a],a=null,r.halfedges.forEach((function(n){var i=o.edges[n],s=i.left;if(s!==r.site&&s||(s=i.right)){var l=e-s[0],c=t-s[1],h=l*l+c*c;h<u&&(u=h,a=s.index)}}))}while(null!==a);return o._found=i,null==n||u<=n*n?r.site:null}},a(2676);var $p=a(675),Qp=6371008.8,ef={centimeters:100*Qp,centimetres:100*Qp,degrees:Qp/111325,feet:3.28084*Qp,inches:39.37*Qp,kilometers:Qp/1e3,kilometres:Qp/1e3,meters:Qp,metres:Qp,miles:Qp/1609.344,millimeters:1e3*Qp,millimetres:1e3*Qp,nauticalmiles:Qp/1852,radians:1,yards:1.0936*Qp};function tf(e,t){void 0===t&&(t={});var n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function nf(e,t){if("Feature"===e.type)t(e,0);else if("FeatureCollection"===e.type)for(var n=0;n<e.features.length&&!1!==t(e.features[n],n);n++);}function rf(e,t){var n,i,r,o,a,s,l,c,u,h,d=0,p="FeatureCollection"===e.type,f="Feature"===e.type,g=p?e.features.length:1;for(n=0;n<g;n++){for(s=p?e.features[n].geometry:f?e.geometry:e,c=p?e.features[n].properties:f?e.properties:{},u=p?e.features[n].bbox:f?e.bbox:void 0,h=p?e.features[n].id:f?e.id:void 0,a=(l=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,r=0;r<a;r++)if(null!==(o=l?s.geometries[r]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(o,d,c,u,h))return!1;break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(!1===t(o.geometries[i],d,c,u,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===t(null,d,c,u,h))return!1;d++}}function of(){return new af}function af(){this.reset()}af.prototype={constructor:af,reset:function(){this.s=this.t=0},add:function(e){lf(sf,e,this.t),lf(this,sf.s,this.s),this.s?this.t+=sf.t:this.s=sf.t},valueOf:function(){return this.s}};var sf=new af;function lf(e,t,n){var i=e.s=t+n,r=i-t,o=i-r;e.t=t-o+(n-r)}var cf=1e-6,uf=Math.PI,hf=uf/2,df=uf/4,pf=2*uf,ff=180/uf,gf=uf/180,mf=Math.abs,yf=Math.atan,vf=Math.atan2,bf=Math.cos,_f=(Math.ceil,Math.exp,Math.floor,Math.log,Math.pow,Math.sin),wf=(Math.sign,Math.sqrt);Math.tan;function Pf(e){return e>1?0:e<-1?uf:Math.acos(e)}function Ef(e){return e>1?hf:e<-1?-hf:Math.asin(e)}function xf(){}function Af(e,t){e&&Rf.hasOwnProperty(e.type)&&Rf[e.type](e,t)}var Cf,Sf,Tf={Feature:function(e,t){Af(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)Af(n[i].geometry,t)}},Rf={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){If(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)If(n[i],t,0)},Polygon:function(e,t){Mf(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)Mf(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)Af(n[i],t)}};function If(e,t,n){var i,r=-1,o=e.length-n;for(t.lineStart();++r<o;)i=e[r],t.point(i[0],i[1],i[2]);t.lineEnd()}function Mf(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)If(e[n],t,1);t.polygonEnd()}function Lf(e){return[vf(e[1],e[0]),Ef(e[2])]}function Df(e){var t=e[0],n=e[1],i=bf(n);return[i*bf(t),i*_f(t),_f(n)]}function Of(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function jf(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Nf(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Ff(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function kf(e){var t=wf(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function Uf(e,t){function n(n,i){return n=e(n,i),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,i){return(n=t.invert(n,i))&&e.invert(n[0],n[1])}),n}function zf(e,t){return[e>uf?e-pf:e<-uf?e+pf:e,t]}function Bf(e){return function(t,n){return[(t+=e)>uf?t-pf:t<-uf?t+pf:t,n]}}function Gf(e){var t=Bf(e);return t.invert=Bf(-e),t}function Vf(e,t){var n=bf(e),i=_f(e),r=bf(t),o=_f(t);function a(e,t){var a=bf(t),s=bf(e)*a,l=_f(e)*a,c=_f(t),u=c*n+s*i;return[vf(l*r-u*o,s*n-c*i),Ef(u*r+l*o)]}return a.invert=function(e,t){var a=bf(t),s=bf(e)*a,l=_f(e)*a,c=_f(t),u=c*r-l*o;return[vf(l*r+c*o,s*n+u*i),Ef(u*n-s*i)]},a}function Hf(e,t){(t=Df(t))[0]-=e,kf(t);var n=Pf(-t[1]);return((-t[2]<0?-n:n)+pf-cf)%pf}function qf(){var e,t=[];return{point:function(t,n){e.push([t,n])},lineStart:function(){t.push(e=[])},lineEnd:xf,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function Wf(e,t){return mf(e[0]-t[0])<cf&&mf(e[1]-t[1])<cf}function Xf(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function Yf(e,t,n,i,r){var o,a,s=[],l=[];if(e.forEach((function(e){if(!((t=e.length-1)<=0)){var t,n,i=e[0],a=e[t];if(Wf(i,a)){for(r.lineStart(),o=0;o<t;++o)r.point((i=e[o])[0],i[1]);r.lineEnd()}else s.push(n=new Xf(i,e,null,!0)),l.push(n.o=new Xf(i,null,n,!1)),s.push(n=new Xf(a,e,null,!1)),l.push(n.o=new Xf(a,null,n,!0))}})),s.length){for(l.sort(t),Kf(s),Kf(l),o=0,a=l.length;o<a;++o)l[o].e=n=!n;for(var c,u,h=s[0];;){for(var d=h,p=!0;d.v;)if((d=d.n)===h)return;c=d.z,r.lineStart();do{if(d.v=d.o.v=!0,d.e){if(p)for(o=0,a=c.length;o<a;++o)r.point((u=c[o])[0],u[1]);else i(d.x,d.n.x,1,r);d=d.n}else{if(p)for(c=d.p.z,o=c.length-1;o>=0;--o)r.point((u=c[o])[0],u[1]);else i(d.x,d.p.x,-1,r);d=d.p}c=(d=d.o).z,p=!p}while(!d.v);r.lineEnd()}}}function Kf(e){if(t=e.length){for(var t,n,i=0,r=e[0];++i<t;)r.n=n=e[i],n.p=r,r=n;r.n=n=e[0],n.p=r}}function Zf(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}of(),of(),of(),zf.invert=zf,1===(Cf=Zf).length&&(Sf=Cf,Cf=function(e,t){return Zf(Sf(e),t)});var Jf=Array.prototype;function $f(e){for(var t,n,i,r=e.length,o=-1,a=0;++o<r;)a+=e[o].length;for(n=new Array(a);--r>=0;)for(t=(i=e[r]).length;--t>=0;)n[--a]=i[t];return n}Jf.slice,Jf.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var Qf=1e9,eg=-Qf;var tg=of();of(),of(),of();var ng=1/0,ig=ng,rg=-ng,og=rg;const ag={point:function(e,t){e<ng&&(ng=e),e>rg&&(rg=e),t<ig&&(ig=t),t>og&&(og=t)},lineStart:xf,lineEnd:xf,polygonStart:xf,polygonEnd:xf,result:function(){var e=[[ng,ig],[rg,og]];return rg=og=-(ig=ng=1/0),e}};function sg(e,t,n,i){return function(r,o){var a,s,l,c=t(o),u=r.invert(i[0],i[1]),h=qf(),d=t(h),p=!1,f={point:g,lineStart:y,lineEnd:v,polygonStart:function(){f.point=b,f.lineStart=_,f.lineEnd=w,s=[],a=[]},polygonEnd:function(){f.point=g,f.lineStart=y,f.lineEnd=v,s=$f(s);var e=function(e,t){var n=t[0],i=t[1],r=[_f(n),-bf(n),0],o=0,a=0;tg.reset();for(var s=0,l=e.length;s<l;++s)if(u=(c=e[s]).length)for(var c,u,h=c[u-1],d=h[0],p=h[1]/2+df,f=_f(p),g=bf(p),m=0;m<u;++m,d=v,f=_,g=w,h=y){var y=c[m],v=y[0],b=y[1]/2+df,_=_f(b),w=bf(b),P=v-d,E=P>=0?1:-1,x=E*P,A=x>uf,C=f*_;if(tg.add(vf(C*E*_f(x),g*w+C*bf(x))),o+=A?P+E*pf:P,A^d>=n^v>=n){var S=jf(Df(h),Df(y));kf(S);var T=jf(r,S);kf(T);var R=(A^P>=0?-1:1)*Ef(T[2]);(i>R||i===R&&(S[0]||S[1]))&&(a+=A^P>=0?1:-1)}}return(o<-cf||o<cf&&tg<-cf)^1&a}(a,u);s.length?(p||(o.polygonStart(),p=!0),Yf(s,cg,e,n,o)):e&&(p||(o.polygonStart(),p=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),p&&(o.polygonEnd(),p=!1),s=a=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function g(t,n){var i=r(t,n);e(t=i[0],n=i[1])&&o.point(t,n)}function m(e,t){var n=r(e,t);c.point(n[0],n[1])}function y(){f.point=m,c.lineStart()}function v(){f.point=g,c.lineEnd()}function b(e,t){l.push([e,t]);var n=r(e,t);d.point(n[0],n[1])}function _(){d.lineStart(),l=[]}function w(){b(l[0][0],l[0][1]),d.lineEnd();var e,t,n,i,r=d.clean(),c=h.result(),u=c.length;if(l.pop(),a.push(l),l=null,u)if(1&r){if((t=(n=c[0]).length-1)>0){for(p||(o.polygonStart(),p=!0),o.lineStart(),e=0;e<t;++e)o.point((i=n[e])[0],i[1]);o.lineEnd()}}else u>1&&2&r&&c.push(c.pop().concat(c.shift())),s.push(c.filter(lg))}return f}}function lg(e){return e.length>1}function cg(e,t){return((e=e.x)[0]<0?e[1]-hf-cf:hf-e[1])-((t=t.x)[0]<0?t[1]-hf-cf:hf-t[1])}of();const ug=sg((function(){return!0}),(function(e){var t,n=NaN,i=NaN,r=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(o,a){var s=o>0?uf:-uf,l=mf(o-n);mf(l-uf)<cf?(e.point(n,i=(i+a)/2>0?hf:-hf),e.point(r,i),e.lineEnd(),e.lineStart(),e.point(s,i),e.point(o,i),t=0):r!==s&&l>=uf&&(mf(n-r)<cf&&(n-=r*cf),mf(o-s)<cf&&(o-=s*cf),i=function(e,t,n,i){var r,o,a=_f(e-n);return mf(a)>cf?yf((_f(t)*(o=bf(i))*_f(n)-_f(i)*(r=bf(t))*_f(e))/(r*o*a)):(t+i)/2}(n,i,o,a),e.point(r,i),e.lineEnd(),e.lineStart(),e.point(s,i),t=0),e.point(n=o,i=a),r=s},lineEnd:function(){e.lineEnd(),n=i=NaN},clean:function(){return 2-t}}}),(function(e,t,n,i){var r;if(null==e)r=n*hf,i.point(-uf,r),i.point(0,r),i.point(uf,r),i.point(uf,0),i.point(uf,-r),i.point(0,-r),i.point(-uf,-r),i.point(-uf,0),i.point(-uf,r);else if(mf(e[0]-t[0])>cf){var o=e[0]<t[0]?uf:-uf;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(t[0],t[1])}),[-uf,-hf]);function hg(e){return e}function dg(e){return function(t){var n=new pg;for(var i in e)n[i]=e[i];return n.stream=t,n}}function pg(){}function fg(e,t,n){var i=t[1][0]-t[0][0],r=t[1][1]-t[0][1],o=e.clipExtent&&e.clipExtent();e.scale(150).translate([0,0]),null!=o&&e.clipExtent(null),function(e,t){e&&Tf.hasOwnProperty(e.type)?Tf[e.type](e,t):Af(e,t)}(n,e.stream(ag));var a=ag.result(),s=Math.min(i/(a[1][0]-a[0][0]),r/(a[1][1]-a[0][1])),l=+t[0][0]+(i-s*(a[1][0]+a[0][0]))/2,c=+t[0][1]+(r-s*(a[1][1]+a[0][1]))/2;return null!=o&&e.clipExtent(o),e.scale(150*s).translate([l,c])}pg.prototype={constructor:pg,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var gg=16,mg=bf(30*gf);function yg(e,t){return+t?function(e,t){function n(i,r,o,a,s,l,c,u,h,d,p,f,g,m){var y=c-i,v=u-r,b=y*y+v*v;if(b>4*t&&g--){var _=a+d,w=s+p,P=l+f,E=wf(_*_+w*w+P*P),x=Ef(P/=E),A=mf(mf(P)-1)<cf||mf(o-h)<cf?(o+h)/2:vf(w,_),C=e(A,x),S=C[0],T=C[1],R=S-i,I=T-r,M=v*R-y*I;(M*M/b>t||mf((y*R+v*I)/b-.5)>.3||a*d+s*p+l*f<mg)&&(n(i,r,o,a,s,l,S,T,A,_/=E,w/=E,P,g,m),m.point(S,T),n(S,T,A,_,w,P,c,u,h,d,p,f,g,m))}}return function(t){var i,r,o,a,s,l,c,u,h,d,p,f,g={point:m,lineStart:y,lineEnd:b,polygonStart:function(){t.polygonStart(),g.lineStart=_},polygonEnd:function(){t.polygonEnd(),g.lineStart=y}};function m(n,i){n=e(n,i),t.point(n[0],n[1])}function y(){u=NaN,g.point=v,t.lineStart()}function v(i,r){var o=Df([i,r]),a=e(i,r);n(u,h,c,d,p,f,u=a[0],h=a[1],c=i,d=o[0],p=o[1],f=o[2],gg,t),t.point(u,h)}function b(){g.point=m,t.lineEnd()}function _(){y(),g.point=w,g.lineEnd=P}function w(e,t){v(i=e,t),r=u,o=h,a=d,s=p,l=f,g.point=v}function P(){n(u,h,c,d,p,f,r,o,i,a,s,l,gg,t),g.lineEnd=b,b()}return g}}(e,t):function(e){return dg({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}(e)}var vg=dg({point:function(e,t){this.stream.point(e*gf,t*gf)}});function bg(e){return function(e){var t,n,i,r,o,a,s,l,c,u,h=150,d=480,p=250,f=0,g=0,m=0,y=0,v=0,b=null,_=ug,w=null,P=hg,E=.5,x=yg(S,E);function A(e){return[(e=o(e[0]*gf,e[1]*gf))[0]*h+n,i-e[1]*h]}function C(e){return(e=o.invert((e[0]-n)/h,(i-e[1])/h))&&[e[0]*ff,e[1]*ff]}function S(e,r){return[(e=t(e,r))[0]*h+n,i-e[1]*h]}function T(){o=Uf(r=function(e,t,n){return(e%=pf)?t||n?Uf(Gf(e),Vf(t,n)):Gf(e):t||n?Vf(t,n):zf}(m,y,v),t);var e=t(f,g);return n=d-e[0]*h,i=p+e[1]*h,R()}function R(){return c=u=null,A}return A.stream=function(e){return c&&u===e?c:c=vg(_(r,x(P(u=e))))},A.clipAngle=function(e){return arguments.length?(_=+e?function(e,t){var n=bf(e),i=n>0,r=mf(n)>cf;function o(e,t){return bf(e)*bf(t)>n}function a(e,t,i){var r=[1,0,0],o=jf(Df(e),Df(t)),a=Of(o,o),s=o[0],l=a-s*s;if(!l)return!i&&e;var c=n*a/l,u=-n*s/l,h=jf(r,o),d=Ff(r,c);Nf(d,Ff(o,u));var p=h,f=Of(d,p),g=Of(p,p),m=f*f-g*(Of(d,d)-1);if(!(m<0)){var y=wf(m),v=Ff(p,(-f-y)/g);if(Nf(v,d),v=Lf(v),!i)return v;var b,_=e[0],w=t[0],P=e[1],E=t[1];w<_&&(b=_,_=w,w=b);var x=w-_,A=mf(x-uf)<cf;if(!A&&E<P&&(b=P,P=E,E=b),A||x<cf?A?P+E>0^v[1]<(mf(v[0]-_)<cf?P:E):P<=v[1]&&v[1]<=E:x>uf^(_<=v[0]&&v[0]<=w)){var C=Ff(p,(-f+y)/g);return Nf(C,d),[v,Lf(C)]}}}function s(t,n){var r=i?e:uf-e,o=0;return t<-r?o|=1:t>r&&(o|=2),n<-r?o|=4:n>r&&(o|=8),o}return sg(o,(function(e){var t,n,l,c,u;return{lineStart:function(){c=l=!1,u=1},point:function(h,d){var p,f=[h,d],g=o(h,d),m=i?g?0:s(h,d):g?s(h+(h<0?uf:-uf),d):0;if(!t&&(c=l=g)&&e.lineStart(),g!==l&&(!(p=a(t,f))||Wf(t,p)||Wf(f,p))&&(f[0]+=cf,f[1]+=cf,g=o(f[0],f[1])),g!==l)u=0,g?(e.lineStart(),p=a(f,t),e.point(p[0],p[1])):(p=a(t,f),e.point(p[0],p[1]),e.lineEnd()),t=p;else if(r&&t&&i^g){var y;m&n||!(y=a(f,t,!0))||(u=0,i?(e.lineStart(),e.point(y[0][0],y[0][1]),e.point(y[1][0],y[1][1]),e.lineEnd()):(e.point(y[1][0],y[1][1]),e.lineEnd(),e.lineStart(),e.point(y[0][0],y[0][1])))}!g||t&&Wf(t,f)||e.point(f[0],f[1]),t=f,l=g,n=m},lineEnd:function(){l&&e.lineEnd(),t=null},clean:function(){return u|(c&&l)<<1}}}),(function(n,i,r,o){!function(e,t,n,i,r,o){if(n){var a=bf(t),s=_f(t),l=i*n;null==r?(r=t+i*pf,o=t-l/2):(r=Hf(a,r),o=Hf(a,o),(i>0?r<o:r>o)&&(r+=i*pf));for(var c,u=r;i>0?u>o:u<o;u-=l)c=Lf([a,-s*bf(u),-s*_f(u)]),e.point(c[0],c[1])}}(o,e,t,r,n,i)}),i?[0,-e]:[-uf,e-uf])}(b=e*gf,6*gf):(b=null,ug),R()):b*ff},A.clipExtent=function(e){return arguments.length?(P=null==e?(w=a=s=l=null,hg):function(e,t,n,i){function r(r,o){return e<=r&&r<=n&&t<=o&&o<=i}function o(r,o,s,c){var u=0,h=0;if(null==r||(u=a(r,s))!==(h=a(o,s))||l(r,o)<0^s>0)do{c.point(0===u||3===u?e:n,u>1?i:t)}while((u=(u+s+4)%4)!==h);else c.point(o[0],o[1])}function a(i,r){return mf(i[0]-e)<cf?r>0?0:3:mf(i[0]-n)<cf?r>0?2:1:mf(i[1]-t)<cf?r>0?1:0:r>0?3:2}function s(e,t){return l(e.x,t.x)}function l(e,t){var n=a(e,1),i=a(t,1);return n!==i?n-i:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(a){var l,c,u,h,d,p,f,g,m,y,v,b=a,_=qf(),w={point:P,lineStart:function(){w.point=E,c&&c.push(u=[]),y=!0,m=!1,f=g=NaN},lineEnd:function(){l&&(E(h,d),p&&m&&_.rejoin(),l.push(_.result())),w.point=P,m&&b.lineEnd()},polygonStart:function(){b=_,l=[],c=[],v=!0},polygonEnd:function(){var t=function(){for(var t=0,n=0,r=c.length;n<r;++n)for(var o,a,s=c[n],l=1,u=s.length,h=s[0],d=h[0],p=h[1];l<u;++l)o=d,a=p,d=(h=s[l])[0],p=h[1],a<=i?p>i&&(d-o)*(i-a)>(p-a)*(e-o)&&++t:p<=i&&(d-o)*(i-a)<(p-a)*(e-o)&&--t;return t}(),n=v&&t,r=(l=$f(l)).length;(n||r)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),r&&Yf(l,s,t,o,a),a.polygonEnd()),b=a,l=c=u=null}};function P(e,t){r(e,t)&&b.point(e,t)}function E(o,a){var s=r(o,a);if(c&&u.push([o,a]),y)h=o,d=a,p=s,y=!1,s&&(b.lineStart(),b.point(o,a));else if(s&&m)b.point(o,a);else{var l=[f=Math.max(eg,Math.min(Qf,f)),g=Math.max(eg,Math.min(Qf,g))],_=[o=Math.max(eg,Math.min(Qf,o)),a=Math.max(eg,Math.min(Qf,a))];!function(e,t,n,i,r,o){var a,s=e[0],l=e[1],c=0,u=1,h=t[0]-s,d=t[1]-l;if(a=n-s,h||!(a>0)){if(a/=h,h<0){if(a<c)return;a<u&&(u=a)}else if(h>0){if(a>u)return;a>c&&(c=a)}if(a=r-s,h||!(a<0)){if(a/=h,h<0){if(a>u)return;a>c&&(c=a)}else if(h>0){if(a<c)return;a<u&&(u=a)}if(a=i-l,d||!(a>0)){if(a/=d,d<0){if(a<c)return;a<u&&(u=a)}else if(d>0){if(a>u)return;a>c&&(c=a)}if(a=o-l,d||!(a<0)){if(a/=d,d<0){if(a>u)return;a>c&&(c=a)}else if(d>0){if(a<c)return;a<u&&(u=a)}return c>0&&(e[0]=s+c*h,e[1]=l+c*d),u<1&&(t[0]=s+u*h,t[1]=l+u*d),!0}}}}}(l,_,e,t,n,i)?s&&(b.lineStart(),b.point(o,a),v=!1):(m||(b.lineStart(),b.point(l[0],l[1])),b.point(_[0],_[1]),s||b.lineEnd(),v=!1)}f=o,g=a,m=s}return w}}(w=+e[0][0],a=+e[0][1],s=+e[1][0],l=+e[1][1]),R()):null==w?null:[[w,a],[s,l]]},A.scale=function(e){return arguments.length?(h=+e,T()):h},A.translate=function(e){return arguments.length?(d=+e[0],p=+e[1],T()):[d,p]},A.center=function(e){return arguments.length?(f=e[0]%360*gf,g=e[1]%360*gf,T()):[f*ff,g*ff]},A.rotate=function(e){return arguments.length?(m=e[0]%360*gf,y=e[1]%360*gf,v=e.length>2?e[2]%360*gf:0,T()):[m*ff,y*ff,v*ff]},A.precision=function(e){return arguments.length?(x=yg(S,E=e*e),R()):wf(E)},A.fitExtent=function(e,t){return fg(A,e,t)},A.fitSize=function(e,t){return function(e,t,n){return fg(e,[[0,0],t],n)}(A,e,t)},function(){return t=e.apply(this,arguments),A.invert=t.invert&&C,T()}}((function(){return e}))()}function _g(e){return function(t,n){var i=bf(t),r=bf(n),o=e(i*r);return[o*r*_f(t),o*_f(n)]}}function wg(e){return function(t,n){var i=wf(t*t+n*n),r=e(i),o=_f(r),a=bf(r);return[vf(t*o,i*a),Ef(i&&n*o/i)]}}_g((function(e){return wf(2/(1+e))})).invert=wg((function(e){return 2*Ef(e/2)}));var Pg=_g((function(e){return(e=Pf(e))&&e/_f(e)}));function Eg(e,t){return[e,t]}function xg(e,t,n,i){var r=e.properties||{},o="Feature"===e.type?e.geometry:e;if("GeometryCollection"===o.type){var a=[];return rf(e,(function(e){var r=xg(e,t,n,i);r&&a.push(r)})),tf(a)}var s=function(e){var t=rd(e).geometry.coordinates,n=[-t[0],-t[1]];return bg(Pg).scale(79.4188).clipAngle(179.999).rotate(n).scale(Qp)}(o),l={type:o.type,coordinates:Cg(o.coordinates,s)},c=(new $p.GeoJSONReader).read(l),u=function(e,t){void 0===t&&(t="kilometers");var n=ef[t];if(!n)throw new Error(t+" units is invalid");return e*n}(function(e,t){void 0===t&&(t="kilometers");var n=ef[t];if(!n)throw new Error(t+" units is invalid");return e/n}(t,n),"meters"),h=$p.BufferOp.bufferOp(c,u,i);if(!Ag((h=(new $p.GeoJSONWriter).write(h)).coordinates))return function(e,t,n){void 0===n&&(n={});var i={type:"Feature"};return(0===n.id||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=t||{},i.geometry=e,i}({type:h.type,coordinates:Sg(h.coordinates,s)},r)}function Ag(e){return Array.isArray(e[0])?Ag(e[0]):isNaN(e[0])}function Cg(e,t){return"object"!=typeof e[0]?t(e):e.map((function(e){return Cg(e,t)}))}function Sg(e,t){return"object"!=typeof e[0]?t.invert(e):e.map((function(e){return Sg(e,t)}))}Pg.invert=wg((function(e){return e})),Eg.invert=Eg,wg(yf),wg(Ef),wg((function(e){return 2*yf(e)}));function Tg(e){return(t,...n)=>Ig(e,t,n)}function Rg(e,t){return Tg(Og(e,t).get)}const{apply:Ig,construct:Mg,defineProperty:Lg,get:Dg,getOwnPropertyDescriptor:Og,getPrototypeOf:jg,has:Ng,ownKeys:Fg,set:kg,setPrototypeOf:Ug}=Reflect,{MAX_SAFE_INTEGER:zg,isFinite:Bg,isNaN:Gg}=(Proxy,Number),{iterator:Vg,species:Hg,toStringTag:qg,for:Wg}=Symbol,Xg=Object,{create:Yg,defineProperty:Kg,freeze:Zg,is:Jg}=Xg,$g=Xg.prototype,Qg=($g.__lookupGetter__&&Tg($g.__lookupGetter__),Xg.hasOwn||Tg($g.hasOwnProperty),Array),em=(Qg.isArray,Qg.prototype),tm=(Tg(em.join),Tg(em.push),Tg(em.toLocaleString),em[Vg]),nm=Tg(tm),im=(Math.trunc,ArrayBuffer),rm=(im.isView,im.prototype),om=(Tg(rm.slice),Rg(rm,"byteLength"),"undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:null),am=(om&&Rg(om.prototype,"byteLength"),jg(Uint8Array)),sm=(am.from,am.prototype),lm=(sm[Vg],Tg(sm.keys),Tg(sm.values),Tg(sm.entries),Tg(sm.set),Tg(sm.reverse),Tg(sm.fill),Tg(sm.copyWithin),Tg(sm.sort),Tg(sm.slice),Tg(sm.subarray),Rg(sm,"buffer"),Rg(sm,"byteOffset"),Rg(sm,"length"),Rg(sm,qg),Uint16Array,Uint32Array),cm=Float32Array,um=jg([][Vg]()),hm=Tg(um.next),dm=Tg(function*(){}().next),pm=jg(um),fm=DataView.prototype,gm=Tg(fm.getUint16),mm=(Tg(fm.setUint16),TypeError,RangeError,WeakSet.prototype),ym=(Tg(mm.add),Tg(mm.has),WeakMap),vm=ym.prototype,bm=Tg(vm.get),_m=(Tg(vm.has),Tg(vm.set)),wm=new ym,Pm=Yg(null,{next:{value:function(){const e=bm(wm,this);return hm(e)}},[Vg]:{value:function(){return this}}}),Em=new ym,xm=Yg(pm,{next:{value:function(){const e=bm(Em,this);return dm(e)},writable:!0,configurable:!0}});for(const e of Fg(um))"next"!==e&&Kg(xm,e,Og(um,e));const Am=new im(4),Cm=new cm(Am),Sm=new lm(Am),Tm=new lm(512),Rm=new lm(512);for(let e=0;e<256;++e){const t=e-127;t<-27?(Tm[e]=0,Tm[256|e]=32768,Rm[e]=24,Rm[256|e]=24):t<-14?(Tm[e]=1024>>-t-14,Tm[256|e]=1024>>-t-14|32768,Rm[e]=-t-1,Rm[256|e]=-t-1):t<=15?(Tm[e]=t+15<<10,Tm[256|e]=t+15<<10|32768,Rm[e]=13,Rm[256|e]=13):t<128?(Tm[e]=31744,Tm[256|e]=64512,Rm[e]=24,Rm[256|e]=24):(Tm[e]=31744,Tm[256|e]=64512,Rm[e]=13,Rm[256|e]=13)}const Im=new lm(2048),Mm=new lm(64),Lm=new lm(64);for(let e=1;e<1024;++e){let t=e<<13,n=0;for(;0==(8388608&t);)t<<=1,n-=8388608;t&=-8388609,n+=947912704,Im[e]=t|n}for(let e=1024;e<2048;++e)Im[e]=939524096+(e-1024<<13);for(let e=1;e<31;++e)Mm[e]=e<<23;Mm[31]=1199570944,Mm[32]=2147483648;for(let e=33;e<63;++e)Mm[e]=2147483648+(e-32<<23);Mm[63]=3347054592;for(let e=1;e<64;++e)32!==e&&(Lm[e]=1024);function Dm(e,t,...n){return function(e){const t=e>>10;return Sm[0]=Im[Lm[t]+(1023&e)]+Mm[t],Cm[0]}(gm(e,t,...function(e){if(e[Vg]===tm&&um.next===hm)return e;const t=Yg(Pm);return _m(wm,t,nm(e)),t}(n)))}var Om=a(8330),jm=a(8602),Nm=a(2499);const Fm=new Map;function km(e,t){Array.isArray(e)||(e=[e]),e.forEach((e=>Fm.set(e,t)))}function Um(e,t,n,i=1){return new(Object.getPrototypeOf(e).constructor)(t*n*i)}function zm(e,t,n){return(1-n)*e+n*t}function Bm(e,t,n){let i=0;for(let r=t;r<n;++r)i+=e[r];return i}function Gm(e,t,n){switch(e){case 1:if(t<=8)return new Uint8Array(n);if(t<=16)return new Uint16Array(n);if(t<=32)return new Uint32Array(n);break;case 2:if(8===t)return new Int8Array(n);if(16===t)return new Int16Array(n);if(32===t)return new Int32Array(n);break;case 3:switch(t){case 16:case 32:return new Float32Array(n);case 64:return new Float64Array(n)}}throw Error("Unsupported data format/bitsPerSample")}km([void 0,1],(()=>a.e(321).then(a.bind(a,3321)).then((e=>e.default)))),km(5,(()=>a.e(672).then(a.bind(a,8672)).then((e=>e.default)))),km(6,(()=>{throw new Error("old style JPEG compression is not supported.")})),km(7,(()=>a.e(347).then(a.bind(a,9347)).then((e=>e.default)))),km([8,32946],(()=>Promise.all([a.e(497),a.e(522)]).then(a.bind(a,5522)).then((e=>e.default)))),km(32773,(()=>a.e(411).then(a.bind(a,7411)).then((e=>e.default)))),km(34887,(()=>Promise.all([a.e(497),a.e(173)]).then(a.bind(a,4173)).then((e=>e.default)))),km(50001,(()=>a.e(588).then(a.bind(a,1588)).then((e=>e.default))));class Vm{constructor(e){this._dataView=new DataView(e)}get buffer(){return this._dataView.buffer}getUint64(e,t){const n=this.getUint32(e,t),i=this.getUint32(e+4,t);let r;if(t){if(r=n+2**32*i,!Number.isSafeInteger(r))throw new Error(`${r} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return r}if(r=2**32*n+i,!Number.isSafeInteger(r))throw new Error(`${r} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return r}getInt64(e,t){let n=0;const i=(128&this._dataView.getUint8(e+(t?7:0)))>0;let r=!0;for(let o=0;o<8;o++){let a=this._dataView.getUint8(e+(t?o:7-o));i&&(r?0!==a&&(a=255&~(a-1),r=!1):a=255&~a),n+=a*256**o}return i&&(n=-n),n}getUint8(e,t){return this._dataView.getUint8(e,t)}getInt8(e,t){return this._dataView.getInt8(e,t)}getUint16(e,t){return this._dataView.getUint16(e,t)}getInt16(e,t){return this._dataView.getInt16(e,t)}getUint32(e,t){return this._dataView.getUint32(e,t)}getInt32(e,t){return this._dataView.getInt32(e,t)}getFloat16(e,t){return Dm(this._dataView,e,t)}getFloat32(e,t){return this._dataView.getFloat32(e,t)}getFloat64(e,t){return this._dataView.getFloat64(e,t)}}class Hm{constructor(e,t,n,i){this._dataView=new DataView(e),this._sliceOffset=t,this._littleEndian=n,this._bigTiff=i}get sliceOffset(){return this._sliceOffset}get sliceTop(){return this._sliceOffset+this.buffer.byteLength}get littleEndian(){return this._littleEndian}get bigTiff(){return this._bigTiff}get buffer(){return this._dataView.buffer}covers(e,t){return this.sliceOffset<=e&&this.sliceTop>=e+t}readUint8(e){return this._dataView.getUint8(e-this._sliceOffset,this._littleEndian)}readInt8(e){return this._dataView.getInt8(e-this._sliceOffset,this._littleEndian)}readUint16(e){return this._dataView.getUint16(e-this._sliceOffset,this._littleEndian)}readInt16(e){return this._dataView.getInt16(e-this._sliceOffset,this._littleEndian)}readUint32(e){return this._dataView.getUint32(e-this._sliceOffset,this._littleEndian)}readInt32(e){return this._dataView.getInt32(e-this._sliceOffset,this._littleEndian)}readFloat32(e){return this._dataView.getFloat32(e-this._sliceOffset,this._littleEndian)}readFloat64(e){return this._dataView.getFloat64(e-this._sliceOffset,this._littleEndian)}readUint64(e){const t=this.readUint32(e),n=this.readUint32(e+4);let i;if(this._littleEndian){if(i=t+2**32*n,!Number.isSafeInteger(i))throw new Error(`${i} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return i}if(i=2**32*t+n,!Number.isSafeInteger(i))throw new Error(`${i} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return i}readInt64(e){let t=0;const n=(128&this._dataView.getUint8(e+(this._littleEndian?7:0)))>0;let i=!0;for(let r=0;r<8;r++){let o=this._dataView.getUint8(e+(this._littleEndian?r:7-r));n&&(i?0!==o&&(o=255&~(o-1),i=!1):o=255&~o),t+=o*256**r}return n&&(t=-t),t}readOffset(e){return this._bigTiff?this.readUint64(e):this.readUint32(e)}}const qm="\r\n\r\n";function Wm(e){if(void 0!==Object.fromEntries)return Object.fromEntries(e);const t={};for(const[n,i]of e)t[n.toLowerCase()]=i;return t}function Xm(e){return Wm(e.split("\r\n").map((e=>{const t=e.split(":").map((e=>e.trim()));return t[0]=t[0].toLowerCase(),t})))}function Ym(e){let t,n,i;return e&&([,t,n,i]=e.match(/bytes (\d+)-(\d+)\/(\d+)/),t=parseInt(t,10),n=parseInt(n,10),i=parseInt(i,10)),{start:t,end:n,total:i}}class Km{async fetch(e,t){return Promise.all(e.map((e=>this.fetchSlice(e,t))))}async fetchSlice(e){throw new Error(`fetching of slice ${e} not possible, not implemented`)}get fileSize(){return null}async close(){}}class Zm extends Map{constructor(e={}){if(super(),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if("number"==typeof e.maxAge&&0===e.maxAge)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=e.maxSize,this.maxAge=e.maxAge||Number.POSITIVE_INFINITY,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(e){if("function"==typeof this.onEviction)for(const[t,n]of e)this.onEviction(t,n.value)}_deleteIfExpired(e,t){return"number"==typeof t.expiry&&t.expiry<=Date.now()&&("function"==typeof this.onEviction&&this.onEviction(e,t.value),this.delete(e))}_getOrDeleteIfExpired(e,t){if(!1===this._deleteIfExpired(e,t))return t.value}_getItemValue(e,t){return t.expiry?this._getOrDeleteIfExpired(e,t):t.value}_peek(e,t){const n=t.get(e);return this._getItemValue(e,n)}_set(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(e,t){this.oldCache.delete(e),this._set(e,t)}*_entriesAscending(){for(const e of this.oldCache){const[t,n]=e;this.cache.has(t)||!1===this._deleteIfExpired(t,n)&&(yield e)}for(const e of this.cache){const[t,n]=e;!1===this._deleteIfExpired(t,n)&&(yield e)}}get(e){if(this.cache.has(e)){const t=this.cache.get(e);return this._getItemValue(e,t)}if(this.oldCache.has(e)){const t=this.oldCache.get(e);if(!1===this._deleteIfExpired(e,t))return this._moveToRecent(e,t),t.value}}set(e,t,{maxAge:n=this.maxAge}={}){const i="number"==typeof n&&n!==Number.POSITIVE_INFINITY?Date.now()+n:void 0;this.cache.has(e)?this.cache.set(e,{value:t,expiry:i}):this._set(e,{value:t,expiry:i})}has(e){return this.cache.has(e)?!this._deleteIfExpired(e,this.cache.get(e)):!!this.oldCache.has(e)&&!this._deleteIfExpired(e,this.oldCache.get(e))}peek(e){return this.cache.has(e)?this._peek(e,this.cache):this.oldCache.has(e)?this._peek(e,this.oldCache):void 0}delete(e){const t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(e){if(!(e&&e>0))throw new TypeError("`maxSize` must be a number greater than 0");const t=[...this._entriesAscending()],n=t.length-e;n<0?(this.cache=new Map(t),this.oldCache=new Map,this._size=t.length):(n>0&&this._emitEvictions(t.slice(0,n)),this.oldCache=new Map(t.slice(n)),this.cache=new Map,this._size=0),this.maxSize=e}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.cache){const[t,n]=e;!1===this._deleteIfExpired(t,n)&&(yield[t,n.value])}for(const e of this.oldCache){const[t,n]=e;this.cache.has(t)||!1===this._deleteIfExpired(t,n)&&(yield[t,n.value])}}*entriesDescending(){let e=[...this.cache];for(let t=e.length-1;t>=0;--t){const n=e[t],[i,r]=n;!1===this._deleteIfExpired(i,r)&&(yield[i,r.value])}e=[...this.oldCache];for(let t=e.length-1;t>=0;--t){const n=e[t],[i,r]=n;this.cache.has(i)||!1===this._deleteIfExpired(i,r)&&(yield[i,r.value])}}*entriesAscending(){for(const[e,t]of this._entriesAscending())yield[e,t.value]}get size(){if(!this._size)return this.oldCache.size;let e=0;for(const t of this.oldCache.keys())this.cache.has(t)||e++;return Math.min(this._size+e,this.maxSize)}entries(){return this.entriesAscending()}forEach(e,t=this){for(const[n,i]of this.entriesAscending())e.call(t,i,n,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}class Jm extends Error{constructor(e){super(e),Error.captureStackTrace&&Error.captureStackTrace(this,Jm),this.name="AbortError"}}class $m extends Error{constructor(e,t){super(t),this.errors=e,this.message=t,this.name="AggregateError"}}const Qm=$m;class ey{constructor(e,t,n=null){this.offset=e,this.length=t,this.data=n}get top(){return this.offset+this.length}}class ty{constructor(e,t,n){this.offset=e,this.length=t,this.blockIds=n}}class ny extends Km{constructor(e,{blockSize:t=65536,cacheSize:n=100}={}){super(),this.source=e,this.blockSize=t,this.blockCache=new Zm({maxSize:n,onEviction:(e,t)=>{this.evictedBlocks.set(e,t)}}),this.evictedBlocks=new Map,this.blockRequests=new Map,this.blockIdsToFetch=new Set,this.abortedBlockIds=new Set}get fileSize(){return this.source.fileSize}async fetch(e,t){const n=[],i=[],r=[];this.evictedBlocks.clear();for(const{offset:t,length:o}of e){let e=t+o;const{fileSize:a}=this;null!==a&&(e=Math.min(e,a));for(let o=Math.floor(t/this.blockSize)*this.blockSize;o<e;o+=this.blockSize){const e=Math.floor(o/this.blockSize);this.blockCache.has(e)||this.blockRequests.has(e)||(this.blockIdsToFetch.add(e),i.push(e)),this.blockRequests.has(e)&&n.push(this.blockRequests.get(e)),r.push(e)}}await async function(e){return new Promise((e=>setTimeout(e,undefined)))}(),this.fetchBlocks(t);const o=[];for(const e of i)this.blockRequests.has(e)&&o.push(this.blockRequests.get(e));await Promise.allSettled(n),await Promise.allSettled(o);const a=[],s=r.filter((e=>this.abortedBlockIds.has(e)||!this.blockCache.has(e)));if(s.forEach((e=>this.blockIdsToFetch.add(e))),s.length>0&&t&&!t.aborted){this.fetchBlocks(null);for(const e of s){const t=this.blockRequests.get(e);if(!t)throw new Error(`Block ${e} is not in the block requests`);a.push(t)}await Promise.allSettled(a)}if(t&&t.aborted)throw new Jm("Request was aborted");const l=r.map((e=>this.blockCache.get(e)||this.evictedBlocks.get(e))),c=l.filter((e=>!e));if(c.length)throw new Qm(c,"Request failed");const u=new Map(function(e,t){const n=Array.isArray(e)?e:Array.from(e),i=Array.isArray(t)?t:Array.from(t);return n.map(((e,t)=>[e,i[t]]))}(r,l));return this.readSliceData(e,u)}fetchBlocks(e){if(this.blockIdsToFetch.size>0){const t=this.groupBlocks(this.blockIdsToFetch),n=this.source.fetch(t,e);for(let i=0;i<t.length;++i){const r=t[i];for(const t of r.blockIds)this.blockRequests.set(t,(async()=>{try{const e=(await n)[i],r=t*this.blockSize,o=r-e.offset,a=Math.min(o+this.blockSize,e.data.byteLength),s=e.data.slice(o,a),l=new ey(r,s.byteLength,s,t);this.blockCache.set(t,l),this.abortedBlockIds.delete(t)}catch(n){if("AbortError"!==n.name)throw n;n.signal=e,this.blockCache.delete(t),this.abortedBlockIds.add(t)}finally{this.blockRequests.delete(t)}})())}this.blockIdsToFetch.clear()}}groupBlocks(e){const t=Array.from(e).sort(((e,t)=>e-t));if(0===t.length)return[];let n=[],i=null;const r=[];for(const e of t)null===i||i+1===e?(n.push(e),i=e):(r.push(new ty(n[0]*this.blockSize,n.length*this.blockSize,n)),n=[e],i=e);return r.push(new ty(n[0]*this.blockSize,n.length*this.blockSize,n)),r}readSliceData(e,t){return e.map((e=>{let n=e.offset+e.length;null!==this.fileSize&&(n=Math.min(this.fileSize,n));const i=Math.floor(e.offset/this.blockSize),r=Math.floor(n/this.blockSize),o=new ArrayBuffer(e.length),a=new Uint8Array(o);for(let o=i;o<=r;++o){const i=t.get(o),r=i.offset-e.offset;let s,l=0,c=0;r<0?l=-r:r>0&&(c=r),s=i.top-n<0?i.length-l:n-i.offset-l;const u=new Uint8Array(i.data,l,s);a.set(u,c)}return o}))}}class iy{get ok(){return this.status>=200&&this.status<=299}get status(){throw new Error("not implemented")}getHeader(e){throw new Error("not implemented")}async getData(){throw new Error("not implemented")}}class ry{constructor(e){this.url=e}async request({headers:e,credentials:t,signal:n}={}){throw new Error("request is not implemented")}}class oy extends iy{constructor(e){super(),this.response=e}get status(){return this.response.status}getHeader(e){return this.response.headers.get(e)}async getData(){return this.response.arrayBuffer?await this.response.arrayBuffer():(await this.response.buffer()).buffer}}class ay extends ry{constructor(e,t){super(e),this.credentials=t}async request({headers:e,credentials:t,signal:n}={}){const i=await fetch(this.url,{headers:e,credentials:t,signal:n});return new oy(i)}}class sy extends iy{constructor(e,t){super(),this.xhr=e,this.data=t}get status(){return this.xhr.status}getHeader(e){return this.xhr.getResponseHeader(e)}async getData(){return this.data}}class ly extends ry{constructRequest(e,t){return new Promise(((n,i)=>{const r=new XMLHttpRequest;r.open("GET",this.url),r.responseType="arraybuffer";for(const[t,n]of Object.entries(e))r.setRequestHeader(t,n);r.onload=()=>{const e=r.response;n(new sy(r,e))},r.onerror=i,r.onabort=()=>i(new Jm("Request aborted")),r.send(),t&&(t.aborted&&r.abort(),t.addEventListener("abort",(()=>r.abort())))}))}async request({headers:e,signal:t}={}){return await this.constructRequest(e,t)}}var cy=a(3752),uy=a(3640),hy=a(2630);class dy extends iy{constructor(e,t){super(),this.response=e,this.dataPromise=t}get status(){return this.response.statusCode}getHeader(e){return this.response.headers[e]}async getData(){return await this.dataPromise}}class py extends ry{constructor(e){super(e),this.parsedUrl=hy.parse(this.url),this.httpApi="http:"===this.parsedUrl.protocol?cy:uy}constructRequest(e,t){return new Promise(((n,i)=>{const r=this.httpApi.get({...this.parsedUrl,headers:e},(e=>{const t=new Promise((t=>{const n=[];e.on("data",(e=>{n.push(e)})),e.on("end",(()=>{const e=Buffer.concat(n).buffer;t(e)})),e.on("error",i)}));n(new dy(e,t))}));r.on("error",i),t&&(t.aborted&&r.destroy(new Jm("Request aborted")),t.addEventListener("abort",(()=>r.destroy(new Jm("Request aborted")))))}))}async request({headers:e,signal:t}={}){return await this.constructRequest(e,t)}}class fy extends Km{constructor(e,t,n,i){super(),this.client=e,this.headers=t,this.maxRanges=n,this.allowFullFile=i,this._fileSize=null}async fetch(e,t){return this.maxRanges>=e.length?this.fetchSlices(e,t):(this.maxRanges>0&&e.length,Promise.all(e.map((e=>this.fetchSlice(e,t)))))}async fetchSlices(e,t){const n=await this.client.request({headers:{...this.headers,Range:`bytes=${e.map((({offset:e,length:t})=>`${e}-${e+t}`)).join(",")}`},signal:t});if(n.ok){if(206===n.status){const{type:i,params:r}=function(e){const[t,...n]=e.split(";").map((e=>e.trim()));return{type:t,params:Wm(n.map((e=>e.split("="))))}}(n.getHeader("content-type"));if("multipart/byteranges"===i){const e=function(e,t){let n=null;const i=new TextDecoder("ascii"),r=[],o=`--${t}`,a=`${o}--`;for(let t=0;t<10;++t)i.decode(new Uint8Array(e,t,o.length))===o&&(n=t);if(null===n)throw new Error("Could not find initial boundary");for(;n<e.byteLength;){const t=i.decode(new Uint8Array(e,n,Math.min(o.length+1024,e.byteLength-n)));if(0===t.length||t.startsWith(a))break;if(!t.startsWith(o))throw new Error("Part does not start with boundary");const s=t.substr(o.length+2);if(0===s.length)break;const l=s.indexOf(qm),c=Xm(s.substr(0,l)),{start:u,end:h,total:d}=Ym(c["content-range"]),p=n+o.length+l+qm.length,f=parseInt(h,10)+1-parseInt(u,10);r.push({headers:c,data:e.slice(p,p+f),offset:u,length:f,fileSize:d}),n=p+f+4}return r}(await n.getData(),r.boundary);return this._fileSize=e[0].fileSize||null,e}const o=await n.getData(),{start:a,end:s,total:l}=Ym(n.getHeader("content-range"));this._fileSize=l||null;const c=[{data:o,offset:a,length:s-a}];if(e.length>1){const n=await Promise.all(e.slice(1).map((e=>this.fetchSlice(e,t))));return c.concat(n)}return c}{if(!this.allowFullFile)throw new Error("Server responded with full file");const e=await n.getData();return this._fileSize=e.byteLength,[{data:e,offset:0,length:e.byteLength}]}}throw new Error("Error fetching data.")}async fetchSlice(e,t){const{offset:n,length:i}=e,r=await this.client.request({headers:{...this.headers,Range:`bytes=${n}-${n+i}`},signal:t});if(r.ok){if(206===r.status){const e=await r.getData(),{total:t}=Ym(r.getHeader("content-range"));return this._fileSize=t||null,{data:e,offset:n,length:i}}{if(!this.allowFullFile)throw new Error("Server responded with full file");const e=await r.getData();return this._fileSize=e.byteLength,{data:e,offset:0,length:e.byteLength}}}throw new Error("Error fetching data.")}get fileSize(){return this._fileSize}}function gy(e,{blockSize:t,cacheSize:n}){return null===t?e:new ny(e,{blockSize:t,cacheSize:n})}function my(e){switch(e){case Nm.sf.BYTE:case Nm.sf.ASCII:case Nm.sf.SBYTE:case Nm.sf.UNDEFINED:return 1;case Nm.sf.SHORT:case Nm.sf.SSHORT:return 2;case Nm.sf.LONG:case Nm.sf.SLONG:case Nm.sf.FLOAT:case Nm.sf.IFD:return 4;case Nm.sf.RATIONAL:case Nm.sf.SRATIONAL:case Nm.sf.DOUBLE:case Nm.sf.LONG8:case Nm.sf.SLONG8:case Nm.sf.IFD8:return 8;default:throw new RangeError(`Invalid field type: ${e}`)}}function yy(e,t,n,i){let r=null,o=null;const a=my(t);switch(t){case Nm.sf.BYTE:case Nm.sf.ASCII:case Nm.sf.UNDEFINED:r=new Uint8Array(n),o=e.readUint8;break;case Nm.sf.SBYTE:r=new Int8Array(n),o=e.readInt8;break;case Nm.sf.SHORT:r=new Uint16Array(n),o=e.readUint16;break;case Nm.sf.SSHORT:r=new Int16Array(n),o=e.readInt16;break;case Nm.sf.LONG:case Nm.sf.IFD:r=new Uint32Array(n),o=e.readUint32;break;case Nm.sf.SLONG:r=new Int32Array(n),o=e.readInt32;break;case Nm.sf.LONG8:case Nm.sf.IFD8:r=new Array(n),o=e.readUint64;break;case Nm.sf.SLONG8:r=new Array(n),o=e.readInt64;break;case Nm.sf.RATIONAL:r=new Uint32Array(2*n),o=e.readUint32;break;case Nm.sf.SRATIONAL:r=new Int32Array(2*n),o=e.readInt32;break;case Nm.sf.FLOAT:r=new Float32Array(n),o=e.readFloat32;break;case Nm.sf.DOUBLE:r=new Float64Array(n),o=e.readFloat64;break;default:throw new RangeError(`Invalid field type: ${t}`)}if(t!==Nm.sf.RATIONAL&&t!==Nm.sf.SRATIONAL)for(let t=0;t<n;++t)r[t]=o.call(e,i+t*a);else for(let t=0;t<n;t+=2)r[t]=o.call(e,i+t*a),r[t+1]=o.call(e,i+(t*a+4));return t===Nm.sf.ASCII?new TextDecoder("utf-8").decode(r):r}class vy{constructor(e,t,n){this.fileDirectory=e,this.geoKeyDirectory=t,this.nextIFDByteOffset=n}}class by extends Error{constructor(e){super(`No image at index ${e}`),this.index=e}}class _y{async readRasters(e={}){const{window:t,width:n,height:i}=e;let{resX:r,resY:o,bbox:a}=e;const s=await this.getImage();let l=s;const c=await this.getImageCount(),u=s.getBoundingBox();if(t&&a)throw new Error('Both "bbox" and "window" passed.');if(n||i){if(t){const[e,n]=s.getOrigin(),[i,r]=s.getResolution();a=[e+t[0]*i,n+t[1]*r,e+t[2]*i,n+t[3]*r]}const e=a||u;if(n){if(r)throw new Error("Both width and resX passed");r=(e[2]-e[0])/n}if(i){if(o)throw new Error("Both width and resY passed");o=(e[3]-e[1])/i}}if(r||o){const e=[];for(let t=0;t<c;++t){const n=await this.getImage(t),{SubfileType:i,NewSubfileType:r}=n.fileDirectory;(0===t||2===i||1&r)&&e.push(n)}e.sort(((e,t)=>e.getWidth()-t.getWidth()));for(let t=0;t<e.length;++t){const n=e[t],i=(u[2]-u[0])/n.getWidth(),a=(u[3]-u[1])/n.getHeight();if(l=n,r&&r>i||o&&o>a)break}}let h=t;if(a){const[e,t]=s.getOrigin(),[n,i]=l.getResolution(s);h=[Math.round((a[0]-e)/n),Math.round((a[1]-t)/i),Math.round((a[2]-e)/n),Math.round((a[3]-t)/i)],h=[Math.min(h[0],h[2]),Math.min(h[1],h[3]),Math.max(h[0],h[2]),Math.max(h[1],h[3])]}return l.readRasters({...e,window:h})}}class wy extends _y{constructor(e,t,n,i,r={}){super(),this.source=e,this.littleEndian=t,this.bigTiff=n,this.firstIFDOffset=i,this.cache=r.cache||!1,this.ifdRequests=[],this.ghostValues=null}async getSlice(e,t){const n=this.bigTiff?4048:1024;return new Hm((await this.source.fetch([{offset:e,length:void 0!==t?t:n}]))[0],e,this.littleEndian,this.bigTiff)}async parseFileDirectoryAt(e){const t=this.bigTiff?20:12,n=this.bigTiff?8:2;let i=await this.getSlice(e);const r=this.bigTiff?i.readUint64(e):i.readUint16(e),o=r*t+(this.bigTiff?16:6);i.covers(e,o)||(i=await this.getSlice(e,o));const a={};let s=e+(this.bigTiff?8:2);for(let e=0;e<r;s+=t,++e){const e=i.readUint16(s),t=i.readUint16(s+2),n=this.bigTiff?i.readUint64(s+4):i.readUint32(s+4);let r,o;const l=my(t),c=s+(this.bigTiff?12:8);if(l*n<=(this.bigTiff?8:4))r=yy(i,t,n,c);else{const e=i.readOffset(c),o=my(t)*n;r=i.covers(e,o)?yy(i,t,n,e):yy(await this.getSlice(e,o),t,n,e)}o=1===n&&-1===Nm.It.indexOf(e)&&t!==Nm.sf.RATIONAL&&t!==Nm.sf.SRATIONAL?r[0]:r,a[Nm.L[e]]=o}const l=function(e){const t=e.GeoKeyDirectory;if(!t)return null;const n={};for(let i=4;i<=4*t[3];i+=4){const r=Nm.P1[t[i]],o=t[i+1]?Nm.L[t[i+1]]:null,a=t[i+2],s=t[i+3];let l=null;if(o){if(l=e[o],null==l)throw new Error(`Could not get value of geoKey '${r}'.`);"string"==typeof l?l=l.substring(s,s+a-1):l.subarray&&(l=l.subarray(s,s+a),1===a&&(l=l[0]))}else l=s;n[r]=l}return n}(a),c=i.readOffset(e+n+t*r);return new vy(a,l,c)}async requestIFD(e){if(this.ifdRequests[e])return this.ifdRequests[e];if(0===e)return this.ifdRequests[e]=this.parseFileDirectoryAt(this.firstIFDOffset),this.ifdRequests[e];if(!this.ifdRequests[e-1])try{this.ifdRequests[e-1]=this.requestIFD(e-1)}catch(t){if(t instanceof by)throw new by(e);throw t}return this.ifdRequests[e]=(async()=>{const t=await this.ifdRequests[e-1];if(0===t.nextIFDByteOffset)throw new by(e);return this.parseFileDirectoryAt(t.nextIFDByteOffset)})(),this.ifdRequests[e]}async getImage(e=0){const t=await this.requestIFD(e);return new class{constructor(e,t,n,i,r,o){this.fileDirectory=e,this.geoKeys=t,this.dataView=n,this.littleEndian=i,this.tiles=r?{}:null,this.isTiled=!e.StripOffsets;const a=e.PlanarConfiguration;if(this.planarConfiguration=void 0===a?1:a,1!==this.planarConfiguration&&2!==this.planarConfiguration)throw new Error("Invalid planar configuration.");this.source=o}getFileDirectory(){return this.fileDirectory}getGeoKeys(){return this.geoKeys}getWidth(){return this.fileDirectory.ImageWidth}getHeight(){return this.fileDirectory.ImageLength}getSamplesPerPixel(){return void 0!==this.fileDirectory.SamplesPerPixel?this.fileDirectory.SamplesPerPixel:1}getTileWidth(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}getTileHeight(){return this.isTiled?this.fileDirectory.TileLength:void 0!==this.fileDirectory.RowsPerStrip?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}getBlockWidth(){return this.getTileWidth()}getBlockHeight(e){return this.isTiled||(e+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-e*this.getTileHeight()}getBytesPerPixel(){let e=0;for(let t=0;t<this.fileDirectory.BitsPerSample.length;++t)e+=this.getSampleByteSize(t);return e}getSampleByteSize(e){if(e>=this.fileDirectory.BitsPerSample.length)throw new RangeError(`Sample index ${e} is out of range.`);return Math.ceil(this.fileDirectory.BitsPerSample[e]/8)}getReaderForSample(e){const t=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1,n=this.fileDirectory.BitsPerSample[e];switch(t){case 1:if(n<=8)return DataView.prototype.getUint8;if(n<=16)return DataView.prototype.getUint16;if(n<=32)return DataView.prototype.getUint32;break;case 2:if(n<=8)return DataView.prototype.getInt8;if(n<=16)return DataView.prototype.getInt16;if(n<=32)return DataView.prototype.getInt32;break;case 3:switch(n){case 16:return function(e,t){return Dm(this,e,t)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}}throw Error("Unsupported data format/bitsPerSample")}getSampleFormat(e=0){return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1}getBitsPerSample(e=0){return this.fileDirectory.BitsPerSample[e]}getArrayForSample(e,t){return Gm(this.getSampleFormat(e),this.getBitsPerSample(e),t)}async getTileOrStrip(e,t,n,i,r){const o=Math.ceil(this.getWidth()/this.getTileWidth()),a=Math.ceil(this.getHeight()/this.getTileHeight());let s;const{tiles:l}=this;let c,u;1===this.planarConfiguration?s=t*o+e:2===this.planarConfiguration&&(s=n*o*a+t*o+e),this.isTiled?(c=this.fileDirectory.TileOffsets[s],u=this.fileDirectory.TileByteCounts[s]):(c=this.fileDirectory.StripOffsets[s],u=this.fileDirectory.StripByteCounts[s]);const h=(await this.source.fetch([{offset:c,length:u}],r))[0];let d;return null!==l&&l[s]?d=l[s]:(d=(async()=>{let e=await i.decode(this.fileDirectory,h);const n=this.getSampleFormat(),r=this.getBitsPerSample();return function(e,t){return(1!==e&&2!==e||!(t<=32)||t%8!=0)&&(3!==e||16!==t&&32!==t&&64!==t)}(n,r)&&(e=function(e,t,n,i,r,o,a){const s=new DataView(e),l=2===n?1:i,c=Gm(t,r,2===n?a*o:a*o*i),u=parseInt("1".repeat(r),2);if(1===t){let e;e=1===n?i*r:r;let t=o*e;0!=(7&t)&&(t=t+7&-8);for(let e=0;e<a;++e){const n=e*t;for(let t=0;t<o;++t){const i=n+t*l*r;for(let n=0;n<l;++n){const a=i+n*r,h=(e*o+t)*l+n,d=Math.floor(a/8),p=a%8;if(p+r<=8)c[h]=s.getUint8(d)>>8-r-p&u;else if(p+r<=16)c[h]=s.getUint16(d)>>16-r-p&u;else if(p+r<=24){const e=s.getUint16(d)<<8|s.getUint8(d+2);c[h]=e>>24-r-p&u}else c[h]=s.getUint32(d)>>32-r-p&u}}}}return c.buffer}(e,n,this.planarConfiguration,this.getSamplesPerPixel(),r,this.getTileWidth(),this.getBlockHeight(t))),e})(),null!==l&&(l[s]=d)),{x:e,y:t,sample:n,data:await d}}async _readRaster(e,t,n,i,r,o,a,s,l){const c=this.getTileWidth(),u=this.getTileHeight(),h=this.getWidth(),d=this.getHeight(),p=Math.max(Math.floor(e[0]/c),0),f=Math.min(Math.ceil(e[2]/c),Math.ceil(h/c)),g=Math.max(Math.floor(e[1]/u),0),m=Math.min(Math.ceil(e[3]/u),Math.ceil(d/u)),y=e[2]-e[0];let v=this.getBytesPerPixel();const b=[],_=[];for(let e=0;e<t.length;++e)1===this.planarConfiguration?b.push(Bm(this.fileDirectory.BitsPerSample,0,t[e])/8):b.push(0),_.push(this.getReaderForSample(t[e]));const w=[],{littleEndian:P}=this;for(let o=g;o<m;++o)for(let a=p;a<f;++a)for(let s=0;s<t.length;++s){const p=s,f=t[s];2===this.planarConfiguration&&(v=this.getSampleByteSize(s));const g=this.getTileOrStrip(a,o,f,r,l).then((r=>{const o=r.data,a=new DataView(o),s=this.getBlockHeight(r.y),l=r.y*u,f=r.x*c,g=l+s,m=(r.x+1)*c,w=_[p],E=Math.min(s,s-(g-e[3]),d-l),x=Math.min(c,c-(m-e[2]),h-f);for(let r=Math.max(0,e[1]-l);r<E;++r)for(let o=Math.max(0,e[0]-f);o<x;++o){const s=(r*c+o)*v,u=w.call(a,s+b[p],P);let h;i?(h=(r+l-e[1])*y*t.length+(o+f-e[0])*t.length+p,n[h]=u):(h=(r+l-e[1])*y+o+f-e[0],n[p][h]=u)}}));w.push(g)}if(await Promise.all(w),o&&e[2]-e[0]!==o||a&&e[3]-e[1]!==a){let r;return r=i?function(e,t,n,i,r,o,a="nearest"){switch(a.toLowerCase()){case"nearest":return function(e,t,n,i,r,o){const a=t/i,s=n/r,l=Um(e,i,r,o);for(let c=0;c<r;++c){const r=Math.min(Math.round(s*c),n-1);for(let n=0;n<i;++n){const s=Math.min(Math.round(a*n),t-1);for(let a=0;a<o;++a){const u=e[r*t*o+s*o+a];l[c*i*o+n*o+a]=u}}}return l}(e,t,n,i,r,o);case"bilinear":case"linear":return function(e,t,n,i,r,o){const a=t/i,s=n/r,l=Um(e,i,r,o);for(let c=0;c<r;++c){const r=s*c,u=Math.floor(r),h=Math.min(Math.ceil(r),n-1);for(let n=0;n<i;++n){const s=a*n,d=s%1,p=Math.floor(s),f=Math.min(Math.ceil(s),t-1);for(let a=0;a<o;++a){const s=e[u*t*o+p*o+a],g=e[u*t*o+f*o+a],m=e[h*t*o+p*o+a],y=e[h*t*o+f*o+a],v=zm(zm(s,g,d),zm(m,y,d),r%1);l[c*i*o+n*o+a]=v}}}return l}(e,t,n,i,r,o);default:throw new Error(`Unsupported resampling method: '${a}'`)}}(n,e[2]-e[0],e[3]-e[1],o,a,t.length,s):function(e,t,n,i,r,o="nearest"){switch(o.toLowerCase()){case"nearest":return function(e,t,n,i,r){const o=t/i,a=n/r;return e.map((e=>{const s=Um(e,i,r);for(let l=0;l<r;++l){const r=Math.min(Math.round(a*l),n-1);for(let n=0;n<i;++n){const a=Math.min(Math.round(o*n),t-1),c=e[r*t+a];s[l*i+n]=c}}return s}))}(e,t,n,i,r);case"bilinear":case"linear":return function(e,t,n,i,r){const o=t/i,a=n/r;return e.map((e=>{const s=Um(e,i,r);for(let l=0;l<r;++l){const r=a*l,c=Math.floor(r),u=Math.min(Math.ceil(r),n-1);for(let n=0;n<i;++n){const a=o*n,h=a%1,d=Math.floor(a),p=Math.min(Math.ceil(a),t-1),f=e[c*t+d],g=e[c*t+p],m=e[u*t+d],y=e[u*t+p],v=zm(zm(f,g,h),zm(m,y,h),r%1);s[l*i+n]=v}}return s}))}(e,t,n,i,r);default:throw new Error(`Unsupported resampling method: '${o}'`)}}(n,e[2]-e[0],e[3]-e[1],o,a,s),r.width=o,r.height=a,r}return n.width=o||e[2]-e[0],n.height=a||e[3]-e[1],n}async readRasters({window:e,samples:t=[],interleave:n,pool:i=null,width:r,height:o,resampleMethod:a,fillValue:s,signal:l}={}){const c=e||[0,0,this.getWidth(),this.getHeight()];if(c[0]>c[2]||c[1]>c[3])throw new Error("Invalid subsets");const u=(c[2]-c[0])*(c[3]-c[1]),h=this.getSamplesPerPixel();if(t&&t.length){for(let e=0;e<t.length;++e)if(t[e]>=h)return Promise.reject(new RangeError(`Invalid sample index '${t[e]}'.`))}else for(let e=0;e<h;++e)t.push(e);let d;if(n)d=Gm(this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,Math.max.apply(null,this.fileDirectory.BitsPerSample),u*t.length),s&&d.fill(s);else{d=[];for(let e=0;e<t.length;++e){const n=this.getArrayForSample(t[e],u);Array.isArray(s)&&e<s.length?n.fill(s[e]):s&&!Array.isArray(s)&&n.fill(s),d.push(n)}}const p=i||await async function(e){const t=Fm.get(e.Compression);if(!t)throw new Error(`Unknown compression method identifier: ${e.Compression}`);return new(await t())(e)}(this.fileDirectory);return await this._readRaster(c,t,d,n,p,r,o,a,l)}async readRGB({window:e,interleave:t=!0,pool:n=null,width:i,height:r,resampleMethod:o,enableAlpha:a=!1,signal:s}={}){const l=e||[0,0,this.getWidth(),this.getHeight()];if(l[0]>l[2]||l[1]>l[3])throw new Error("Invalid subsets");const c=this.fileDirectory.PhotometricInterpretation;if(c===Nm.Ie.RGB){let l=[0,1,2];if(this.fileDirectory.ExtraSamples!==Nm.pd.Unspecified&&a){l=[];for(let e=0;e<this.fileDirectory.BitsPerSample.length;e+=1)l.push(e)}return this.readRasters({window:e,interleave:t,samples:l,pool:n,width:i,height:r,resampleMethod:o,signal:s})}let u;switch(c){case Nm.Ie.WhiteIsZero:case Nm.Ie.BlackIsZero:case Nm.Ie.Palette:u=[0];break;case Nm.Ie.CMYK:u=[0,1,2,3];break;case Nm.Ie.YCbCr:case Nm.Ie.CIELab:u=[0,1,2];break;default:throw new Error("Invalid or unsupported photometric interpretation.")}const h={window:l,interleave:!0,samples:u,pool:n,width:i,height:r,resampleMethod:o,signal:s},{fileDirectory:d}=this,p=await this.readRasters(h),f=2**this.fileDirectory.BitsPerSample[0];let g;switch(c){case Nm.Ie.WhiteIsZero:g=function(e,t){const{width:n,height:i}=e,r=new Uint8Array(n*i*3);let o;for(let n=0,i=0;n<e.length;++n,i+=3)o=256-e[n]/t*256,r[i]=o,r[i+1]=o,r[i+2]=o;return r}(p,f);break;case Nm.Ie.BlackIsZero:g=function(e,t){const{width:n,height:i}=e,r=new Uint8Array(n*i*3);let o;for(let n=0,i=0;n<e.length;++n,i+=3)o=e[n]/t*256,r[i]=o,r[i+1]=o,r[i+2]=o;return r}(p,f);break;case Nm.Ie.Palette:g=function(e,t){const{width:n,height:i}=e,r=new Uint8Array(n*i*3),o=t.length/3,a=t.length/3*2;for(let n=0,i=0;n<e.length;++n,i+=3){const s=e[n];r[i]=t[s]/65536*256,r[i+1]=t[s+o]/65536*256,r[i+2]=t[s+a]/65536*256}return r}(p,d.ColorMap);break;case Nm.Ie.CMYK:g=function(e){const{width:t,height:n}=e,i=new Uint8Array(t*n*3);for(let t=0,n=0;t<e.length;t+=4,n+=3){const r=e[t],o=e[t+1],a=e[t+2],s=e[t+3];i[n]=(255-r)/256*255*((255-s)/256),i[n+1]=(255-o)/256*255*((255-s)/256),i[n+2]=(255-a)/256*255*((255-s)/256)}return i}(p);break;case Nm.Ie.YCbCr:g=function(e){const{width:t,height:n}=e,i=new Uint8ClampedArray(t*n*3);for(let t=0,n=0;t<e.length;t+=3,n+=3){const r=e[t],o=e[t+1],a=e[t+2];i[n]=r+1.402*(a-128),i[n+1]=r-.34414*(o-128)-.71414*(a-128),i[n+2]=r+1.772*(o-128)}return i}(p);break;case Nm.Ie.CIELab:g=function(e){const{width:t,height:n}=e,i=new Uint8Array(t*n*3);for(let t=0,n=0;t<e.length;t+=3,n+=3){let r,o,a,s=(e[t+0]+16)/116,l=(e[t+1]<<24>>24)/500+s,c=s-(e[t+2]<<24>>24)/200;l=.95047*(l*l*l>.008856?l*l*l:(l-16/116)/7.787),s=1*(s*s*s>.008856?s*s*s:(s-16/116)/7.787),c=1.08883*(c*c*c>.008856?c*c*c:(c-16/116)/7.787),r=3.2406*l+-1.5372*s+-.4986*c,o=-.9689*l+1.8758*s+.0415*c,a=.0557*l+-.204*s+1.057*c,r=r>.0031308?1.055*r**(1/2.4)-.055:12.92*r,o=o>.0031308?1.055*o**(1/2.4)-.055:12.92*o,a=a>.0031308?1.055*a**(1/2.4)-.055:12.92*a,i[n]=255*Math.max(0,Math.min(1,r)),i[n+1]=255*Math.max(0,Math.min(1,o)),i[n+2]=255*Math.max(0,Math.min(1,a))}return i}(p);break;default:throw new Error("Unsupported photometric interpretation.")}if(!t){const e=new Uint8Array(g.length/3),t=new Uint8Array(g.length/3),n=new Uint8Array(g.length/3);for(let i=0,r=0;i<g.length;i+=3,++r)e[r]=g[i],t[r]=g[i+1],n[r]=g[i+2];g=[e,t,n]}return g.width=p.width,g.height=p.height,g}getTiePoints(){if(!this.fileDirectory.ModelTiepoint)return[];const e=[];for(let t=0;t<this.fileDirectory.ModelTiepoint.length;t+=6)e.push({i:this.fileDirectory.ModelTiepoint[t],j:this.fileDirectory.ModelTiepoint[t+1],k:this.fileDirectory.ModelTiepoint[t+2],x:this.fileDirectory.ModelTiepoint[t+3],y:this.fileDirectory.ModelTiepoint[t+4],z:this.fileDirectory.ModelTiepoint[t+5]});return e}getGDALMetadata(e=null){const t={};if(!this.fileDirectory.GDAL_METADATA)return null;const n=this.fileDirectory.GDAL_METADATA;let i=jm(n,"Item");i=null===e?i.filter((e=>void 0===Om(e,"sample"))):i.filter((t=>Number(Om(t,"sample"))===e));for(let e=0;e<i.length;++e){const n=i[e];t[Om(n,"name")]=n.inner}return t}getGDALNoData(){if(!this.fileDirectory.GDAL_NODATA)return null;const e=this.fileDirectory.GDAL_NODATA;return Number(e.substring(0,e.length-1))}getOrigin(){const e=this.fileDirectory.ModelTiepoint,t=this.fileDirectory.ModelTransformation;if(e&&6===e.length)return[e[3],e[4],e[5]];if(t)return[t[3],t[7],t[11]];throw new Error("The image does not have an affine transformation.")}getResolution(e=null){const t=this.fileDirectory.ModelPixelScale,n=this.fileDirectory.ModelTransformation;if(t)return[t[0],-t[1],t[2]];if(n)return[n[0],n[5],n[10]];if(e){const[t,n,i]=e.getResolution();return[t*e.getWidth()/this.getWidth(),n*e.getHeight()/this.getHeight(),i*e.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}pixelIsArea(){return 1===this.geoKeys.GTRasterTypeGeoKey}getBoundingBox(){const e=this.getOrigin(),t=this.getResolution(),n=e[0],i=e[1],r=n+t[0]*this.getWidth(),o=i+t[1]*this.getHeight();return[Math.min(n,r),Math.min(i,o),Math.max(n,r),Math.max(i,o)]}}(t.fileDirectory,t.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source)}async getImageCount(){let e=0,t=!0;for(;t;)try{await this.requestIFD(e),++e}catch(e){if(!(e instanceof by))throw e;t=!1}return e}async getGhostValues(){const e=this.bigTiff?16:8;if(this.ghostValues)return this.ghostValues;const t="GDAL_STRUCTURAL_METADATA_SIZE=",n=t.length+100;let i=await this.getSlice(e,n);if(t===yy(i,Nm.sf.ASCII,t.length,e)){const t=yy(i,Nm.sf.ASCII,n,e).split("\n")[0],r=Number(t.split("=")[1].split(" ")[0])+t.length;r>n&&(i=await this.getSlice(e,r));const o=yy(i,Nm.sf.ASCII,r,e);this.ghostValues={},o.split("\n").filter((e=>e.length>0)).map((e=>e.split("="))).forEach((([e,t])=>{this.ghostValues[e]=t}))}return this.ghostValues}static async fromSource(e,t,n){const i=(await e.fetch([{offset:0,length:1024}],n))[0],r=new Vm(i),o=r.getUint16(0,0);let a;if(18761===o)a=!0;else{if(19789!==o)throw new TypeError("Invalid byte order value.");a=!1}const s=r.getUint16(2,a);let l;if(42===s)l=!1;else{if(43!==s)throw new TypeError("Invalid magic number.");if(l=!0,8!==r.getUint16(4,a))throw new Error("Unsupported offset byte-size.")}const c=l?r.getUint64(8,a):r.getUint32(4,a);return new wy(e,a,l,c,t)}close(){return"function"==typeof this.source.close&&this.source.close()}}async function Py(e,t={},n){return wy.fromSource(function(e,{forceXHR:t=!1,...n}={}){return"function"!=typeof fetch||t?"undefined"!=typeof XMLHttpRequest?function(e,{headers:t={},maxRanges:n=0,allowFullFile:i=!1,...r}={}){const o=new ly(e);return gy(new fy(o,t,n,i),r)}(e,n):function(e,{headers:t={},maxRanges:n=0,allowFullFile:i=!1,...r}={}){const o=new py(e);return gy(new fy(o,t,n,i),r)}(e,n):function(e,{headers:t={},credentials:n,maxRanges:i=0,allowFullFile:r=!1,...o}={}){const a=new ay(e,n);return gy(new fy(a,t,i,r),o)}(e,n)}(e,t),n)}const Ey=e.createContext(null);function xy(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function Ay(e,t){const n=t.viewState||t;let i=!1;if("longitude"in n&&"latitude"in n){const t=e.center;e.center=new t.constructor(n.longitude,n.latitude),i=i||t!==e.center}if("zoom"in n){const t=e.zoom;e.zoom=n.zoom,i=i||t!==e.zoom}if("bearing"in n){const t=e.bearing;e.bearing=n.bearing,i=i||t!==e.bearing}if("pitch"in n){const t=e.pitch;e.pitch=n.pitch,i=i||t!==e.pitch}return n.padding&&!e.isPaddingEqual(n.padding)&&(i=!0,e.padding=n.padding),i}const Cy=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Sy(e){if(!e)return null;if("string"==typeof e)return e;if("toJS"in e&&(e=e.toJS()),!e.layers)return e;const t={};for(const n of e.layers)t[n.id]=n;const n=e.layers.map((e=>{const n=t[e.ref];let i=null;if("interactive"in e&&(i={...e},delete i.interactive),n){i=i||{...e},delete i.ref;for(const e of Cy)e in n&&(i[e]=n[e])}return i||e}));return{...e,layers:n}}function Ty(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!Ty(e[n],t[n]))return!1;return!0}if(Array.isArray(t))return!1;if("object"==typeof e&&"object"==typeof t){const n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(const i of n){if(!t.hasOwnProperty(i))return!1;if(!Ty(e[i],t[i]))return!1}return!0}return!1}const Ry={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},Iy={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},My={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},Ly=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],Dy=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class Oy{constructor(e,t,n){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=e=>{const t=this.props[My[e.type]];t&&t(e)},this._onPointerEvent=e=>{"mousemove"!==e.type&&"mouseout"!==e.type||this._updateHover(e);const t=this.props[Ry[e.type]];if(t){if(this.props.interactiveLayerIds&&"mouseover"!==e.type&&"mouseout"!==e.type){const t=this._hoveredFeatures||this._map.queryRenderedFeatures(e.point,{layers:this.props.interactiveLayerIds});e.features=t}t(e),delete e.features}},this._onCameraEvent=e=>{if(!this._internalUpdate){const t=this.props[Iy[e.type]];t&&t(e)}e.type in this._deferredEvents&&(this._deferredEvents[e.type]=!1)},this._MapClass=e,this.props=t,this._initialize(n)}get map(){return this._map}get transform(){return this._renderTransform}setProps(e){const t=this.props;this.props=e;const n=this._updateSettings(e,t);n&&this._createShadowTransform(this._map);const i=this._updateSize(e),r=this._updateViewState(e,!0);this._updateStyle(e,t),this._updateStyleComponents(e,t),this._updateHandlers(e,t),(n||i||r&&!this._map.isMoving())&&this.redraw()}static reuse(e,t){const n=Oy.savedMaps.pop();if(!n)return null;const i=n.map,r=i.getContainer();for(t.className=r.className;r.childNodes.length>0;)t.appendChild(r.childNodes[0]);i._container=t,n.setProps({...e,styleDiffing:!1}),i.resize();const{initialViewState:o}=e;return o&&(o.bounds?i.fitBounds(o.bounds,{...o.fitBoundsOptions,duration:0}):n._updateViewState(o,!1)),i.isStyleLoaded()?i.fire("load"):i.once("styledata",(()=>i.fire("load"))),n}_initialize(e){const{props:t}=this,n={...t,...t.initialViewState,accessToken:t.mapboxAccessToken||jy()||null,container:e,style:Sy(t.mapStyle)},i=n.initialViewState||n.viewState||n;if(Object.assign(n,{center:[i.longitude||0,i.latitude||0],zoom:i.zoom||0,pitch:i.pitch||0,bearing:i.bearing||0}),t.gl){const e=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=e,t.gl)}const r=new this._MapClass(n);i.padding&&r.setPadding(i.padding),t.cursor&&(r.getCanvas().style.cursor=t.cursor),this._createShadowTransform(r);const o=r._render;r._render=e=>{this._inRender=!0,o.call(r,e),this._inRender=!1};const a=r._renderTaskQueue.run;r._renderTaskQueue.run=e=>{a.call(r._renderTaskQueue,e),this._onBeforeRepaint()},r.on("render",(()=>this._onAfterRepaint()));const s=r.fire;r.fire=this._fireEvent.bind(this,s),r.on("resize",(()=>{this._renderTransform.resize(r.transform.width,r.transform.height)})),r.on("styledata",(()=>this._updateStyleComponents(this.props,{}))),r.on("sourcedata",(()=>this._updateStyleComponents(this.props,{})));for(const e in Ry)r.on(e,this._onPointerEvent);for(const e in Iy)r.on(e,this._onCameraEvent);for(const e in My)r.on(e,this._onEvent);this._map=r}recycle(){const e=this.map.getContainer().querySelector("[mapboxgl-children]");null==e||e.remove(),Oy.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const e=this._map;!this._inRender&&e.style&&(e._frame&&(e._frame.cancel(),e._frame=null),e._render())}_createShadowTransform(e){const t=function(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}(e.transform);e.painter.transform=t,this._renderTransform=t}_updateSize(e){const{viewState:t}=e;if(t){const e=this._map;if(t.width!==e.transform.width||t.height!==e.transform.height)return e.resize(),!0}return!1}_updateViewState(e,t){if(this._internalUpdate)return!1;const n=this._map,i=this._renderTransform,{zoom:r,pitch:o,bearing:a}=i,s=n.isMoving();s&&(i.cameraElevationReference="sea");const l=Ay(i,{...xy(n.transform),...e});if(s&&(i.cameraElevationReference="ground"),l&&t){const e=this._deferredEvents;e.move=!0,e.zoom||(e.zoom=r!==i.zoom),e.rotate||(e.rotate=a!==i.bearing),e.pitch||(e.pitch=o!==i.pitch)}return s||Ay(n.transform,e),l}_updateSettings(e,t){const n=this._map;let i=!1;for(const r of Ly)r in e&&!Ty(e[r],t[r])&&(i=!0,n[`set${r[0].toUpperCase()}${r.slice(1)}`](e[r]));return i}_updateStyle(e,t){if(e.cursor!==t.cursor&&(this._map.getCanvas().style.cursor=e.cursor),e.mapStyle!==t.mapStyle){const t={diff:e.styleDiffing};return"localIdeographFontFamily"in e&&(t.localIdeographFontFamily=e.localIdeographFontFamily),this._map.setStyle(Sy(e.mapStyle),t),!0}return!1}_updateStyleComponents(e,t){const n=this._map;let i=!1;return n.style.loaded()&&("light"in e&&!Ty(e.light,t.light)&&(i=!0,n.setLight(e.light)),"fog"in e&&!Ty(e.fog,t.fog)&&(i=!0,n.setFog(e.fog)),"terrain"in e&&!Ty(e.terrain,t.terrain)&&(e.terrain&&!n.getSource(e.terrain.source)||(i=!0,n.setTerrain(e.terrain)))),i}_updateHandlers(e,t){const n=this._map;let i=!1;for(const r of Dy){const o=e[r];Ty(o,t[r])||(i=!0,o?n[r].enable(o):n[r].disable())}return i}_updateHover(e){var t;const{props:n}=this;if(n.interactiveLayerIds&&(n.onMouseMove||n.onMouseEnter||n.onMouseLeave)){const i=e.type,r=(null===(t=this._hoveredFeatures)||void 0===t?void 0:t.length)>0;let o;if("mousemove"===i)try{o=this._map.queryRenderedFeatures(e.point,{layers:n.interactiveLayerIds})}catch(e){o=[]}else o=[];const a=o.length>0;!a&&r&&(e.type="mouseleave",this._onPointerEvent(e)),this._hoveredFeatures=o,a&&!r&&(e.type="mouseenter",this._onPointerEvent(e)),e.type=i}else this._hoveredFeatures=null}_fireEvent(e,t,n){const i=this._map,r=i.transform,o="string"==typeof t?t:t.type;return"move"===o&&this._updateViewState(this.props,!1),o in Iy&&("object"==typeof t&&(t.viewState=xy(r)),this._map.isMoving())?(i.transform=this._renderTransform,e.call(i,t,n),i.transform=r,i):(e.call(i,t,n),i)}_onBeforeRepaint(){const e=this._map;this._internalUpdate=!0;for(const t in this._deferredEvents)this._deferredEvents[t]&&e.fire(t);this._internalUpdate=!1;const t=this._map.transform;this._map.transform=this._renderTransform,this._onAfterRepaint=()=>{this._map.transform=t}}}function jy(){let e=null;if("undefined"!=typeof location){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||"MISSING_ENV_VAR".MapboxAccessToken}catch(e){}try{e=e||"MISSING_ENV_VAR".REACT_APP_MAPBOX_ACCESS_TOKEN}catch(e){}return e}Oy.savedMaps=[];const Ny=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];const Fy="undefined"!=typeof document?e.useLayoutEffect:e.useEffect,ky=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"],Uy=e.createContext(null),zy={minZoom:0,maxZoom:22,minPitch:0,maxPitch:60,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,mapStyle:{version:8,sources:{},layers:[]},styleDiffing:!0,projection:"mercator",renderWorldCopies:!0,onError:e=>console.error(e.error),RTLTextPlugin:"https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"},By=(0,e.forwardRef)(((t,n)=>{const i=(0,e.useContext)(Ey),[r,o]=(0,e.useState)(null),s=(0,e.useRef)(),{current:l}=(0,e.useRef)({mapLib:null,map:null});(0,e.useEffect)((()=>{const e=t.mapLib;let n,r=!0;return Promise.resolve(e||a.e(158).then(a.t.bind(a,6158,23))).then((e=>{if(r){if(e.Map||(e=e.default),!e||!e.Map)throw new Error("Invalid mapLib");if(!e.supported(t))throw new Error("Map is not supported by this browser");!function(e,t){for(const n of ky)n in t&&(e[n]=t[n]);t.RTLTextPlugin&&e.getRTLTextPluginStatus&&"unavailable"===e.getRTLTextPluginStatus()&&e.setRTLTextPlugin(t.RTLTextPlugin,(e=>{e&&console.error(e)}),!1)}(e,t),t.reuseMaps&&(n=Oy.reuse(t,s.current)),n||(n=new Oy(e.Map,t,s.current)),l.map=function(e,t){if(!e)return null;const n=e.map,i={getMap:()=>n,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:n=>e.transform.locationPoint(t.LngLat.convert(n)),unproject:n=>e.transform.pointLocation(t.Point.convert(n)),queryTerrainElevation:(t,i)=>{const r=n.transform;n.transform=e.transform;const o=n.queryTerrainElevation(t,i);return n.transform=r,o}};for(const e of function(e){const t=new Set;let n=e;for(;n;){for(const i of Object.getOwnPropertyNames(n))"_"!==i[0]&&"function"==typeof e[i]&&"fire"!==i&&"setEventedParent"!==i&&t.add(i);n=Object.getPrototypeOf(n)}return Array.from(t)}(n))e in i||Ny.includes(e)||(i[e]=n[e].bind(n));return i}(n,e),l.mapLib=e,o(n),null==i||i.onMapMount(l.map,t.id)}})).catch((e=>{t.onError({type:"error",target:null,originalEvent:null,error:e})})),()=>{r=!1,n&&(null==i||i.onMapUnmount(t.id),t.reuseMaps?n.recycle():n.destroy())}}),[]),Fy((()=>{r&&r.setProps(t)})),(0,e.useImperativeHandle)(n,(()=>l.map),[r]);const c=(0,e.useMemo)((()=>({position:"relative",width:"100%",height:"100%",...t.style})),[t.style]);return e.createElement("div",{id:t.id,ref:s,style:c},r&&e.createElement(Uy.Provider,{value:l},e.createElement("div",{"mapboxgl-children":""},t.children)))}));By.displayName="Map",By.defaultProps=zy;const Gy=By;var Vy=a(3935);const Hy=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function qy(e,t){if(!e||!t)return;const n=e.style;for(const e in t){const i=t[e];Number.isFinite(i)&&!Hy.test(e)?n[e]=`${i}px`:n[e]=i}}function Wy(t){const{map:n,mapLib:i}=(0,e.useContext)(Uy),r=(0,e.useRef)({props:t});r.current.props=t;const o=(0,e.useMemo)((()=>{let n=!1;e.Children.forEach(t.children,(e=>{e&&(n=!0)}));const a={...t,element:n?document.createElement("div"):null},s=new i.Marker(a).setLngLat([t.longitude,t.latitude]);return s.getElement().addEventListener("click",(e=>{var t,n;null===(n=(t=r.current.props).onClick)||void 0===n||n.call(t,{type:"click",target:s,originalEvent:e})})),s.on("dragstart",(e=>{var t,n;const i=e;i.lngLat=o.getLngLat(),null===(n=(t=r.current.props).onDragStart)||void 0===n||n.call(t,i)})),s.on("drag",(e=>{var t,n;const i=e;i.lngLat=o.getLngLat(),null===(n=(t=r.current.props).onDrag)||void 0===n||n.call(t,i)})),s.on("dragend",(e=>{var t,n;const i=e;i.lngLat=o.getLngLat(),null===(n=(t=r.current.props).onDragEnd)||void 0===n||n.call(t,i)})),s}),[]);return(0,e.useEffect)((()=>(o.addTo(n.getMap()),()=>{o.remove()})),[]),(0,e.useEffect)((()=>{qy(o.getElement(),t.style)}),[t.style]),o.getLngLat().lng===t.longitude&&o.getLngLat().lat===t.latitude||o.setLngLat([t.longitude,t.latitude]),t.offset&&!function(e,t){const n=Array.isArray(e)?e[0]:e?e.x:0,i=Array.isArray(e)?e[1]:e?e.y:0,r=Array.isArray(t)?t[0]:t?t.x:0,o=Array.isArray(t)?t[1]:t?t.y:0;return n===r&&i===o}(o.getOffset(),t.offset)&&o.setOffset(t.offset),o.isDraggable()!==t.draggable&&o.setDraggable(t.draggable),o.getRotation()!==t.rotation&&o.setRotation(t.rotation),o.getRotationAlignment()!==t.rotationAlignment&&o.setRotationAlignment(t.rotationAlignment),o.getPitchAlignment()!==t.pitchAlignment&&o.setPitchAlignment(t.pitchAlignment),o.getPopup()!==t.popup&&o.setPopup(t.popup),(0,Vy.createPortal)(t.children,o.getElement())}function Xy(e){return new Set(e?e.trim().split(/\s+/):[])}Wy.defaultProps={draggable:!1,popup:null,rotation:0,rotationAlignment:"auto",pitchAlignment:"auto"},e.memo(Wy),e.memo((function(t){const{map:n,mapLib:i}=(0,e.useContext)(Uy),r=(0,e.useMemo)((()=>document.createElement("div")),[]),o=(0,e.useRef)({props:t});o.current.props=t;const a=(0,e.useMemo)((()=>{const e={...t},n=new i.Popup(e).setLngLat([t.longitude,t.latitude]);return n.once("open",(e=>{var t,n;null===(n=(t=o.current.props).onOpen)||void 0===n||n.call(t,e)})),n}),[]);if((0,e.useEffect)((()=>{const e=e=>{var t,n;null===(n=(t=o.current.props).onClose)||void 0===n||n.call(t,e)};return a.on("close",e),a.setDOMContent(r).addTo(n.getMap()),()=>{a.off("close",e),a.isOpen()&&a.remove()}}),[]),(0,e.useEffect)((()=>{qy(a.getElement(),t.style)}),[t.style]),a.isOpen()&&(a.getLngLat().lng===t.longitude&&a.getLngLat().lat===t.latitude||a.setLngLat([t.longitude,t.latitude]),t.offset&&!Ty(a.options.offset,t.offset)&&a.setOffset(t.offset),a.options.anchor===t.anchor&&a.options.maxWidth===t.maxWidth||(a.options.anchor=t.anchor,a.setMaxWidth(t.maxWidth)),a.options.className!==t.className)){const e=Xy(a.options.className),n=Xy(t.className);for(const t of e)n.has(t)||a.removeClassName(t);for(const t of n)e.has(t)||a.addClassName(t);a.options.className=t.className}return(0,Vy.createPortal)(t.children,r)}));const Yy=function(t,n,i,r){const o=(0,e.useContext)(Uy),a=(0,e.useMemo)((()=>t(o)),[]);return(0,e.useEffect)((()=>{const e=r||i||n,t="function"==typeof n&&"function"==typeof i?n:null,s="function"==typeof i?i:"function"==typeof n?n:null,{map:l}=o;return l.hasControl(a)||(l.addControl(a,null==e?void 0:e.position),t&&t(o)),()=>{s&&s(o),l.hasControl(a)&&l.removeControl(a)}}),[]),a};e.memo((function(t){const n=Yy((({mapLib:e})=>new e.AttributionControl(t)),{position:t.position});return(0,e.useEffect)((()=>{qy(n._container,t.style)}),[t.style]),null})),e.memo((function(t){const n=Yy((({mapLib:e})=>new e.FullscreenControl({container:t.containerId&&document.getElementById(t.containerId)})),{position:t.position});return(0,e.useEffect)((()=>{qy(n._controlContainer,t.style)}),[t.style]),null}));const Ky=(0,e.forwardRef)(((t,n)=>{const i=(0,e.useRef)({props:t}),r=Yy((({mapLib:e})=>{const n=new e.GeolocateControl(t),r=n._setupUI;return n._setupUI=e=>{n._container.hasChildNodes()||r(e)},n.on("geolocate",(e=>{var t,n;null===(n=(t=i.current.props).onGeolocate)||void 0===n||n.call(t,e)})),n.on("error",(e=>{var t,n;null===(n=(t=i.current.props).onError)||void 0===n||n.call(t,e)})),n.on("outofmaxbounds",(e=>{var t,n;null===(n=(t=i.current.props).onOutOfMaxBounds)||void 0===n||n.call(t,e)})),n.on("trackuserlocationstart",(e=>{var t,n;null===(n=(t=i.current.props).onTrackUserLocationStart)||void 0===n||n.call(t,e)})),n.on("trackuserlocationend",(e=>{var t,n;null===(n=(t=i.current.props).onTrackUserLocationEnd)||void 0===n||n.call(t,e)})),n}),{position:t.position});return i.current.props=t,(0,e.useImperativeHandle)(n,(()=>({trigger:()=>r.trigger()})),[]),(0,e.useEffect)((()=>{qy(r._container,t.style)}),[t.style]),null}));function Zy(t){const n=Yy((({mapLib:e})=>new e.ScaleControl(t)),{position:t.position});return n.options.unit===t.unit&&n.options.maxWidth===t.maxWidth||(n.options.maxWidth=t.maxWidth,n.setUnit(t.unit)),(0,e.useEffect)((()=>{qy(n._container,t.style)}),[t.style]),null}Ky.displayName="GeolocateControl",e.memo(Ky),e.memo((function(t){const n=Yy((({mapLib:e})=>new e.NavigationControl(t)),{position:t.position});return(0,e.useEffect)((()=>{qy(n._container,t.style)}),[t.style]),null})),Zy.defaultProps={unit:"metric",maxWidth:100},e.memo(Zy);const Jy={name:"project32",dependencies:[us],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  mat3 rotation;\n  if (project_needs_rotation(projectedPosition, rotation)) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n"},$y={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingActive:!1,pickingAttribute:!1},Qy={name:"picking",vs:"uniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$y;const t={};if(void 0!==e.pickingSelectedColor)if(e.pickingSelectedColor){const n=e.pickingSelectedColor.slice(0,3);t.picking_uSelectedColorValid=1,t.picking_uSelectedColor=n}else t.picking_uSelectedColorValid=0;if(e.pickingHighlightColor){const n=Array.from(e.pickingHighlightColor,(e=>e/255));Number.isFinite(n[3])||(n[3]=1),t.picking_uHighlightColor=n}return void 0!==e.pickingActive&&(t.picking_uActive=Boolean(e.pickingActive),t.picking_uAttribute=Boolean(e.pickingAttribute)),t}},ev={inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    // for picking depth values\n    picking_setPickingAttribute(position.z / position.w);\n  ","vs:DECKGL_FILTER_COLOR":"\n  picking_setPickingColor(geometry.pickingColor);\n  ","fs:#decl":"\nuniform bool picking_uAttribute;\n  ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n  // use highlight color if this fragment belongs to the selected object.\n  color = picking_filterHighlightColor(color);\n\n  // use picking color if rendering to picking FBO.\n  color = picking_filterPickingColor(color);\n    "}},...Qy},tv={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class nv{static get DRAW_MODE(){return tv}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t=no("geometry"),drawMode:n=tv.TRIANGLES,attributes:i={},indices:r=null,vertexCount:o=null}=e;this.id=t,this.drawMode=0|n,this.attributes={},this.userData={},this._setAttributes(i,r),this.vertexCount=o||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return"Geometry ".concat(this.id," attribute ").concat(e)}_setAttributes(e,t){t&&(this.indices=ArrayBuffer.isView(t)?{value:t,size:1}:t);for(const t in e){let n=e[t];n=ArrayBuffer.isView(n)?{value:n}:n,$r(ArrayBuffer.isView(n.value),"".concat(this._print(t),": must be typed array or object with value as typed array")),"POSITION"!==t&&"positions"!==t||n.size||(n.size=3),"indices"===t?($r(!this.indices),this.indices=n):this.attributes[t]=n}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(e,t){if(t)return t.value.length;let n=1/0;for(const t in e){const i=e[t],{value:r,size:o,constant:a}=i;!a&&r&&o>=1&&(n=Math.min(n,r.length/o))}return $r(Number.isFinite(n)),n}}const iv=new Uint16Array([0,2,1,0,3,2]),rv=new Float32Array([0,1,0,0,1,0,1,1]);function ov(e,t,n){return f(f(e[0],e[1],n),f(e[3],e[2],n),t)}const av="\n#define SHADER_NAME bitmap-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D bitmapTexture;\n\nvarying vec2 vTexCoord;\nvarying vec2 vTexPos;\n\nuniform float desaturate;\nuniform vec4 transparentColor;\nuniform vec3 tintColor;\nuniform float opacity;\n\nuniform float coordinateConversion;\nuniform vec4 bounds;\n\n/* projection utils */\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / PI / 2.0;\n\n// from degrees to Web Mercator\nvec2 lnglat_to_mercator(vec2 lnglat) {\n  float x = lnglat.x;\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\n// from Web Mercator to degrees\nvec2 mercator_to_lnglat(vec2 xy) {\n  xy /= WORLD_SCALE;\n  return degrees(vec2(\n    xy.x - PI,\n    atan(exp(xy.y - PI)) * 2.0 - PI * 0.5\n  ));\n}\n/* End projection utils */\n\n// apply desaturation\nvec3 color_desaturate(vec3 color) {\n  float luminance = (color.r + color.g + color.b) * 0.333333333;\n  return mix(color, vec3(luminance), desaturate);\n}\n\n// apply tint\nvec3 color_tint(vec3 color) {\n  return color * tintColor;\n}\n\n// blend with background color\nvec4 apply_opacity(vec3 color, float alpha) {\n  if (transparentColor.a == 0.0) {\n    return vec4(color, alpha);\n  }\n  float blendedAlpha = alpha + transparentColor.a * (1.0 - alpha);\n  float highLightRatio = alpha / blendedAlpha;\n  vec3 blendedRGB = mix(transparentColor.rgb, color, highLightRatio);\n  return vec4(blendedRGB, blendedAlpha);\n}\n\nvec2 getUV(vec2 pos) {\n  return vec2(\n    (pos.x - bounds[0]) / (bounds[2] - bounds[0]),\n    (pos.y - bounds[3]) / (bounds[1] - bounds[3])\n  );\n}\n\n".concat("\nvec3 packUVsIntoRGB(vec2 uv) {\n  // Extract the top 8 bits. We want values to be truncated down so we can add a fraction\n  vec2 uv8bit = floor(uv * 256.);\n\n  // Calculate the normalized remainders of u and v parts that do not fit into 8 bits\n  // Scale and clamp to 0-1 range\n  vec2 uvFraction = fract(uv * 256.);\n  vec2 uvFraction4bit = floor(uvFraction * 16.);\n\n  // Remainder can be encoded in blue channel, encode as 4 bits for pixel coordinates\n  float fractions = uvFraction4bit.x + uvFraction4bit.y * 16.;\n\n  return vec3(uv8bit, fractions) / 255.;\n}\n","\n\nvoid main(void) {\n  vec2 uv = vTexCoord;\n  if (coordinateConversion < -0.5) {\n    vec2 lnglat = mercator_to_lnglat(vTexPos);\n    uv = getUV(lnglat);\n  } else if (coordinateConversion > 0.5) {\n    vec2 commonPos = lnglat_to_mercator(vTexPos);\n    uv = getUV(commonPos);\n  }\n  vec4 bitmapColor = texture2D(bitmapTexture, uv);\n\n  gl_FragColor = apply_opacity(color_tint(color_desaturate(bitmapColor.rgb)), bitmapColor.a * opacity);\n\n  geometry.uv = uv;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n\n  if (picking_uActive && !picking_uAttribute) {\n    // Since instance information is not used, we can use picking color for pixel index\n    gl_FragColor.rgb = packUVsIntoRGB(uv);\n  }\n}\n"),sv={image:{type:"image",value:null,async:!0},bounds:{type:"array",value:[1,0,0,1],compare:!0},_imageCoordinateSystem:ri.DEFAULT,desaturate:{type:"number",min:0,max:1,value:0},transparentColor:{type:"color",value:[0,0,0,0]},tintColor:{type:"color",value:[255,255,255]},textureParameters:{type:"object",ignore:!0}};class lv extends Bh{constructor(...e){super(...e),c(this,"state",void 0)}getShaders(){return super.getShaders({vs:"\n#define SHADER_NAME bitmap-layer-vertex-shader\n\nattribute vec2 texCoords;\nattribute vec3 positions;\nattribute vec3 positions64Low;\n\nvarying vec2 vTexCoord;\nvarying vec2 vTexPos;\n\nuniform float coordinateConversion;\n\nconst vec3 pickingColor = vec3(1.0, 0.0, 0.0);\n\nvoid main(void) {\n  geometry.worldPosition = positions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = pickingColor;\n\n  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vTexCoord = texCoords;\n\n  if (coordinateConversion < -0.5) {\n    vTexPos = geometry.position.xy + project_uCommonOrigin.xy;\n  } else if (coordinateConversion > 0.5) {\n    vTexPos = geometry.worldPosition.xy;\n  }\n\n  vec4 color = vec4(0.0);\n  DECKGL_FILTER_COLOR(color, geometry);\n}\n",fs:av,modules:[Jy,ev]})}initializeState(){const e=this.getAttributeManager();e.remove(["instancePickingColors"]);const t=!0;e.add({indices:{size:1,isIndexed:!0,update:e=>e.value=this.state.mesh.indices,noAlloc:t},positions:{size:3,type:5130,fp64:this.use64bitPositions(),update:e=>e.value=this.state.mesh.positions,noAlloc:t},texCoords:{size:2,update:e=>e.value=this.state.mesh.texCoords,noAlloc:t}})}updateState({props:e,oldProps:t,changeFlags:n}){const i=this.getAttributeManager();if(n.extensionsChanged){var r;const{gl:e}=this.context;null===(r=this.state.model)||void 0===r||r.delete(),this.state.model=this._getModel(e),i.invalidateAll()}if(e.bounds!==t.bounds){const e=this.state.mesh,t=this._createMesh();this.state.model.setVertexCount(t.vertexCount);for(const n in t)e&&e[n]!==t[n]&&i.invalidate(n);this.setState({mesh:t,...this._getCoordinateUniforms()})}else e._imageCoordinateSystem!==t._imageCoordinateSystem&&this.setState(this._getCoordinateUniforms())}getPickingInfo(e){const{image:t}=this.props,n=e.info;if(!n.color||!t)return n.bitmap=null,n;const{width:i,height:r}=t;n.index=0;const o=function(e){const[t,n,i]=e;return[(t+(15&i)/16)/256,(n+(240&i)/256)/256]}(n.color),a=[Math.floor(o[0]*i),Math.floor(o[1]*r)];return n.bitmap={size:{width:i,height:r},uv:o,pixel:a},n}disablePickingIndex(){this.setState({disablePicking:!0})}restorePickingColors(){this.setState({disablePicking:!1})}_updateAutoHighlight(e){super._updateAutoHighlight({...e,color:this.encodePickingColor(0)})}_createMesh(){const{bounds:e}=this.props;let t=e;return cv(e)&&(t=[[e[0],e[1]],[e[0],e[3]],[e[2],e[3]],[e[2],e[1]]]),function(e,t){if(!t)return function(e){const t=new Float64Array(12);for(let n=0;n<e.length;n++)t[3*n+0]=e[n][0],t[3*n+1]=e[n][1],t[3*n+2]=e[n][2]||0;return{vertexCount:6,positions:t,indices:iv,texCoords:rv}}(e);const n=Math.max(Math.abs(e[0][0]-e[3][0]),Math.abs(e[1][0]-e[2][0])),i=Math.max(Math.abs(e[1][1]-e[0][1]),Math.abs(e[2][1]-e[3][1])),r=Math.ceil(n/t)+1,o=Math.ceil(i/t)+1,a=(r-1)*(o-1)*6,s=new Uint32Array(a),l=new Float32Array(r*o*2),c=new Float64Array(r*o*3);let u=0,h=0;for(let t=0;t<r;t++){const n=t/(r-1);for(let i=0;i<o;i++){const r=i/(o-1),a=ov(e,n,r);c[3*u+0]=a[0],c[3*u+1]=a[1],c[3*u+2]=a[2]||0,l[2*u+0]=n,l[2*u+1]=1-r,t>0&&i>0&&(s[h++]=u-o,s[h++]=u-o-1,s[h++]=u-1,s[h++]=u-o,s[h++]=u-1,s[h++]=u),u++}}return{vertexCount:a,positions:c,indices:s,texCoords:l}}(t,this.context.viewport.resolution)}_getModel(e){return e?new Ju(e,{...this.getShaders(),id:this.props.id,geometry:new nv({drawMode:4,vertexCount:6}),isInstanced:!1}):null}draw(e){const{uniforms:t,moduleParameters:n}=e,{model:i,coordinateConversion:r,bounds:o,disablePicking:a}=this.state,{image:s,desaturate:l,transparentColor:c,tintColor:u}=this.props;n.pickingActive&&a||s&&i&&i.setUniforms(t).setUniforms({bitmapTexture:s,desaturate:l,transparentColor:c.map((e=>e/255)),tintColor:u.slice(0,3).map((e=>e/255)),coordinateConversion:r,bounds:o}).draw()}_getCoordinateUniforms(){const{LNGLAT:e,CARTESIAN:t,DEFAULT:n}=ri;let{_imageCoordinateSystem:i}=this.props;if(i!==n){const{bounds:n}=this.props;if(!cv(n))throw new Error("_imageCoordinateSystem only supports rectangular bounds");const r=this.context.viewport.resolution?e:t;if(i=i===e?e:t,i===e&&r===t)return{coordinateConversion:-1,bounds:n};if(i===t&&r===e){const e=ie([n[0],n[1]]),t=ie([n[2],n[3]]);return{coordinateConversion:1,bounds:[e[0],e[1],t[0],t[1]]}}}return{coordinateConversion:0,bounds:[0,0,0,0]}}}function cv(e){return Number.isFinite(e[0])}c(lv,"layerName","BitmapLayer"),c(lv,"defaultProps",sv);class uv extends Bh{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every((e=>e.isLoaded))}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(e){}setState(e){super.setState(e),this.setNeedsUpdate()}getPickingInfo({info:e}){const{object:t}=e;return t&&t.__source&&t.__source.parent&&t.__source.parent.id===this.id?(e.object=t.__source.object,e.index=t.__source.index,e):e}filterSubLayer(e){return!0}shouldRenderSubLayer(e,t){return t&&t.length}getSubLayerClass(e,t){const{_subLayerProps:n}=this.props;return n&&n[e]&&n[e].type||t}getSubLayerRow(e,t,n){return e.__source={parent:this,object:t,index:n},e}getSubLayerAccessor(e){if("function"==typeof e){const t={index:-1,data:this.props.data,target:[]};return(n,i)=>n&&n.__source?(t.index=n.__source.index,e(n.__source.object,t)):e(n,i)}return e}getSubLayerProps(e={}){var t;const{opacity:n,pickable:i,visible:r,parameters:o,getPolygonOffset:a,highlightedObjectIndex:s,autoHighlight:l,highlightColor:c,coordinateSystem:u,coordinateOrigin:h,wrapLongitude:d,positionFormat:p,modelMatrix:f,extensions:g,fetch:m,operation:y,_subLayerProps:v}=this.props,b={id:"",updateTriggers:{},opacity:n,pickable:i,visible:r,parameters:o,getPolygonOffset:a,highlightedObjectIndex:s,autoHighlight:l,highlightColor:c,coordinateSystem:u,coordinateOrigin:h,wrapLongitude:d,positionFormat:p,modelMatrix:f,extensions:g,fetch:m,operation:y},_=v&&e.id&&v[e.id],w=_&&_.updateTriggers,P=e.id||"sublayer";if(_){const t=this.props[Ae],n=e.type?e.type._propTypes:{};for(const e in _){const i=n[e]||t[e];i&&"accessor"===i.type&&(_[e]=this.getSubLayerAccessor(_[e]))}}Object.assign(b,e,_),b.id="".concat(this.props.id,"-").concat(P),b.updateTriggers={all:null===(t=this.props.updateTriggers)||void 0===t?void 0:t.all,...e.updateTriggers,...w};for(const e of g){const t=e.getSubLayerProps.call(this,e);t&&Object.assign(b,t,{updateTriggers:Object.assign(b.updateTriggers,t.updateTriggers)})}return b}_updateAutoHighlight(e){for(const t of this.getSubLayers())t.updateAutoHighlight(e)}_getAttributeManager(){return null}_postUpdate(e,t){let n=this.internalState.subLayers;const i=!n||this.needsUpdate();i&&(n=tt(this.renderLayers(),Boolean),this.internalState.subLayers=n),et("compositeLayer.renderLayers",this,i,n);for(const e of n)e.parent=this}}function hv({data:e,getIndex:t,dataRange:n,replace:i}){const{startRow:r=0,endRow:o=1/0}=n,a=e.length;let s=a,l=a;for(let n=0;n<a;n++){const i=t(e[n]);if(s>n&&i>=r&&(s=n),i>=o){l=n;break}}let c=s;const u=l-s!==i.length?e.slice(l):void 0;for(let t=0;t<i.length;t++)e[c++]=i[t];if(u){for(let t=0;t<u.length;t++)e[c++]=u[t];e.length=c}return{startRow:s,endRow:s+i.length}}c(uv,"layerName","CompositeLayer");const dv=()=>{},pv={10241:9987,10240:9729,10242:33071,10243:33071};function fv(e,t,n,i){const r=Math.min(n/t.width,i/t.height),o=Math.floor(t.width*r),a=Math.floor(t.height*r);return 1===r?{data:t,width:o,height:a}:(e.canvas.height=a,e.canvas.width=o,e.clearRect(0,0,o,a),e.drawImage(t,0,0,t.width,t.height,0,0,o,a),{data:e.canvas,width:o,height:a})}function gv(e){return e&&(e.id||e.url)}function mv(e,t,n){for(let i=0;i<t.length;i++){const{icon:r,xOffset:o}=t[i];e[gv(r)]={...r,x:o,y:n}}}class yv{constructor(e,{onUpdate:t=dv,onError:n=dv}){c(this,"gl",void 0),c(this,"onUpdate",void 0),c(this,"onError",void 0),c(this,"_loadOptions",null),c(this,"_texture",null),c(this,"_externalTexture",null),c(this,"_mapping",{}),c(this,"_textureParameters",null),c(this,"_pendingCount",0),c(this,"_autoPacking",!1),c(this,"_xOffset",0),c(this,"_yOffset",0),c(this,"_rowHeight",0),c(this,"_buffer",4),c(this,"_canvasWidth",1024),c(this,"_canvasHeight",0),c(this,"_canvas",null),this.gl=e,this.onUpdate=t,this.onError=n}finalize(){var e;null===(e=this._texture)||void 0===e||e.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(e){const t=this._autoPacking?gv(e):e;return this._mapping[t]||{}}setProps({loadOptions:e,autoPacking:t,iconAtlas:n,iconMapping:i,textureParameters:r}){var o;e&&(this._loadOptions=e),void 0!==t&&(this._autoPacking=t),i&&(this._mapping=i),n&&(null===(o=this._texture)||void 0===o||o.delete(),this._texture=null,this._externalTexture=n),r&&(this._textureParameters=r)}get isLoaded(){return 0===this._pendingCount}packIcons(e,t){if(!this._autoPacking||"undefined"==typeof document)return;const n=Object.values(function(e,t,n){if(!e||!t)return null;n=n||{};const i={},{iterable:r,objectInfo:o}=su(e);for(const e of r){o.index++;const r=t(e,o),a=gv(r);if(!r)throw new Error("Icon is missing.");if(!r.url)throw new Error("Icon url is missing.");i[a]||n[a]&&r.url===n[a].url||(i[a]={...r,source:e,sourceIndex:o.index})}return i}(e,t,this._mapping)||{});if(n.length>0){const{mapping:e,xOffset:t,yOffset:i,rowHeight:r,canvasHeight:o}=function({icons:e,buffer:t,mapping:n={},xOffset:i=0,yOffset:r=0,rowHeight:o=0,canvasWidth:a}){let s=[];for(let l=0;l<e.length;l++){const c=e[l];if(!n[gv(c)]){const{height:e,width:l}=c;i+l+t>a&&(mv(n,s,r),i=0,r=o+r+t,o=0,s=[]),s.push({icon:c,xOffset:i}),i=i+l+t,o=Math.max(o,e)}}return s.length>0&&mv(n,s,r),{mapping:n,rowHeight:o,xOffset:i,yOffset:r,canvasWidth:a,canvasHeight:(l=o+r+t,Math.pow(2,Math.ceil(Math.log2(l))))};var l}({icons:n,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=r,this._mapping=e,this._xOffset=t,this._yOffset=i,this._canvasHeight=o,this._texture||(this._texture=new So(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:this._textureParameters||pv})),this._texture.height!==this._canvasHeight&&(this._texture=function(e,t,n,i){const r=e.width,o=e.height,a=new So(e.gl,{width:t,height:n,parameters:i});return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{sourceX:i=0,sourceY:r=0,targetMipmaplevel:o=0,targetInternalFormat:a=6408}=n;let{targetX:s,targetY:l,targetZ:c,width:u,height:h}=n;const{framebuffer:d,deleteFramebuffer:p}=Wo(e);$r(d);const{gl:f,handle:g}=d,m=void 0!==s||void 0!==l||void 0!==c;s=s||0,l=l||0,c=c||0;const y=f.bindFramebuffer(36160,g);$r(t);let v=null;if(t instanceof Co&&(v=t,u=Number.isFinite(u)?u:v.width,h=Number.isFinite(h)?h:v.height,v.bind(0),t=v.target),m)switch(t){case 3553:case 34067:f.copyTexSubImage2D(t,o,s,l,i,r,u,h);break;case 35866:case 32879:lr(f).copyTexSubImage3D(t,o,s,l,c,i,r,u,h)}else f.copyTexImage2D(t,o,a,i,r,u,h,0);v&&v.unbind(),f.bindFramebuffer(36160,y||null),p&&d.delete()}(e,a,{targetY:0,width:r,height:o}),e.delete(),a}(this._texture,this._canvasWidth,this._canvasHeight,this._textureParameters||pv)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(n)}}_loadIcons(e){const t=this._canvas.getContext("2d",{willReadFrequently:!0});for(const n of e)this._pendingCount++,Tn(n.url,this._loadOptions).then((e=>{const i=gv(n),r=this._mapping[i],{x:o,y:a,width:s,height:l}=r,{data:c,width:u,height:h}=fv(t,e,s,l);this._texture.setSubImageData({data:c,x:o+(s-u)/2,y:a+(l-h)/2,width:u,height:h}),r.width=u,r.height=h,this._texture.generateMipmap(),this.onUpdate()})).catch((e=>{this.onError({url:n.url,source:n.source,sourceIndex:n.sourceIndex,loadOptions:this._loadOptions,error:e})})).finally((()=>{this._pendingCount--}))}}const vv=[0,0,0,255],bv={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:e=>e.position},getIcon:{type:"accessor",value:e=>e.icon},getColor:{type:"accessor",value:vv},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,optional:!0},textureParameters:{type:"object",ignore:!0}};class _v extends Bh{constructor(...e){super(...e),c(this,"state",void 0)}getShaders(){return super.getShaders({vs:"#define SHADER_NAME icon-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\nattribute vec2 instancePixelOffset;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform bool billboard;\nuniform int sizeUnits;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n\n  vec2 iconSize = instanceIconFrames.zw;\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), \n    sizeMinPixels, sizeMaxPixels\n  );\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;\n  pixelOffset += instancePixelOffset;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); \n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  }\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n\n  vColorMode = instanceColorModes;\n}\n",fs:"#define SHADER_NAME icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float alphaCutoff;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec4 texColor = texture2D(iconsTexture, vTextureCoords);\n  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\n  float a = texColor.a * opacity * vColor.a;\n\n  if (a < alphaCutoff) {\n    discard;\n  }\n\n  gl_FragColor = vec4(color, a);\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[Jy,ev]})}initializeState(){this.state={iconManager:new yv(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:vv},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(e){super.updateState(e);const{props:t,oldProps:n,changeFlags:i}=e,r=this.getAttributeManager(),{iconAtlas:o,iconMapping:a,data:s,getIcon:l,textureParameters:c}=t,{iconManager:u}=this.state,h=o||this.internalState.isAsyncPropLoading("iconAtlas");if(u.setProps({loadOptions:t.loadOptions,autoPacking:!h,iconAtlas:o,iconMapping:h?a:null,textureParameters:c}),h?n.iconMapping!==t.iconMapping&&r.invalidate("getIcon"):(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getIcon))&&u.packIcons(s,l),i.extensionsChanged){var d;const{gl:e}=this.context;null===(d=this.state.model)||void 0===d||d.delete(),this.state.model=this._getModel(e),r.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(e){super.finalizeState(e),this.state.iconManager.finalize()}draw({uniforms:e}){const{sizeScale:t,sizeMinPixels:n,sizeMaxPixels:i,sizeUnits:r,billboard:o,alphaCutoff:a}=this.props,{iconManager:s}=this.state,l=s.getTexture();l&&this.state.model.setUniforms(e).setUniforms({iconsTexture:l,iconsTextureDim:[l.width,l.height],sizeUnits:ai[r],sizeScale:t,sizeMinPixels:n,sizeMaxPixels:i,billboard:o,alphaCutoff:a}).draw()}_getModel(e){return new Ju(e,{...this.getShaders(),id:this.props.id,geometry:new nv({drawMode:6,attributes:{positions:{size:2,value:new Float32Array([-1,-1,-1,1,1,1,1,-1])}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(e){var t;const n=null===(t=this.getCurrentLayer())||void 0===t?void 0:t.props.onIconError;n?n(e):Je.error(e.error.message)()}getInstanceOffset(e){const{width:t,height:n,anchorX:i=t/2,anchorY:r=n/2}=this.state.iconManager.getIconMapping(e);return[t/2-i,n/2-r]}getInstanceColorMode(e){return this.state.iconManager.getIconMapping(e).mask?1:0}getInstanceIconFrame(e){const{x:t,y:n,width:i,height:r}=this.state.iconManager.getIconMapping(e);return[t,n,i,r]}}c(_v,"defaultProps",bv),c(_v,"layerName","IconLayer");const wv=[0,0,0,255],Pv={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:e=>e.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:wv},getLineColor:{type:"accessor",value:wv},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class Ev extends Bh{getShaders(){return super.getShaders({vs:"#define SHADER_NAME scatterplot-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceRadius;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusScale;\nuniform float radiusMinPixels;\nuniform float radiusMaxPixels;\nuniform float lineWidthScale;\nuniform float lineWidthMinPixels;\nuniform float lineWidthMaxPixels;\nuniform float stroked;\nuniform bool filled;\nuniform bool antialiasing;\nuniform bool billboard;\nuniform int radiusUnits;\nuniform int lineWidthUnits;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\nvarying float outerRadiusPixels;\n\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  outerRadiusPixels = clamp(\n    project_size_to_pixel(radiusScale * instanceRadius, radiusUnits),\n    radiusMinPixels, radiusMaxPixels\n  );\n  float lineWidthPixels = clamp(\n    project_size_to_pixel(lineWidthScale * instanceLineWidths, lineWidthUnits),\n    lineWidthMinPixels, lineWidthMaxPixels\n  );\n  outerRadiusPixels += stroked * lineWidthPixels / 2.0;\n  float edgePadding = antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;\n  unitPosition = edgePadding * positions.xy;\n  geometry.uv = unitPosition;\n  geometry.pickingColor = instancePickingColors;\n\n  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;\n  \n  if (billboard) {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n    vec3 offset = edgePadding * positions * outerRadiusPixels;\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  } else {\n    vec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  }\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#define SHADER_NAME scatterplot-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool filled;\nuniform float stroked;\nuniform bool antialiasing;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\nvarying float outerRadiusPixels;\n\nvoid main(void) {\n  geometry.uv = unitPosition;\n\n  float distToCenter = length(unitPosition) * outerRadiusPixels;\n  float inCircle = antialiasing ? \n    smoothedge(distToCenter, outerRadiusPixels) : \n    step(distToCenter, outerRadiusPixels);\n\n  if (inCircle == 0.0) {\n    discard;\n  }\n\n  if (stroked > 0.5) {\n    float isLine = antialiasing ? \n      smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :\n      step(innerUnitRadius * outerRadiusPixels, distToCenter);\n\n    if (filled) {\n      gl_FragColor = mix(vFillColor, vLineColor, isLine);\n    } else {\n      if (isLine == 0.0) {\n        discard;\n      }\n      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);\n    }\n  } else if (filled) {\n    gl_FragColor = vFillColor;\n  } else {\n    discard;\n  }\n\n  gl_FragColor.a *= inCircle;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[Jy,ev]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){if(super.updateState(e),e.changeFlags.extensionsChanged){var t;const{gl:e}=this.context;null===(t=this.state.model)||void 0===t||t.delete(),this.state.model=this._getModel(e),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{radiusUnits:t,radiusScale:n,radiusMinPixels:i,radiusMaxPixels:r,stroked:o,filled:a,billboard:s,antialiasing:l,lineWidthUnits:c,lineWidthScale:u,lineWidthMinPixels:h,lineWidthMaxPixels:d}=this.props;this.state.model.setUniforms(e).setUniforms({stroked:o?1:0,filled:a,billboard:s,antialiasing:l,radiusUnits:ai[t],radiusScale:n,radiusMinPixels:i,radiusMaxPixels:r,lineWidthUnits:ai[c],lineWidthScale:u,lineWidthMinPixels:h,lineWidthMaxPixels:d}).draw()}_getModel(e){return new Ju(e,{...this.getShaders(),id:this.props.id,geometry:new nv({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,1,0])}}}),isInstanced:!0})}}c(Ev,"defaultProps",Pv),c(Ev,"layerName","ScatterplotLayer");const xv=.75,Av=[];class Cv extends _v{constructor(...e){super(...e),c(this,"state",void 0)}getShaders(){return{...super.getShaders(),fs:"#define SHADER_NAME multi-icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float gamma;\nuniform bool sdf;\nuniform float alphaCutoff;\nuniform float sdfBuffer;\nuniform float outlineBuffer;\nuniform vec4 outlineColor;\n\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  if (!picking_uActive) {\n    float alpha = texture2D(iconsTexture, vTextureCoords).a;\n    vec4 color = vColor;\n    if (sdf) {\n      float distance = alpha;\n      alpha = smoothstep(sdfBuffer - gamma, sdfBuffer + gamma, distance);\n\n      if (outlineBuffer > 0.0) {\n        float inFill = alpha;\n        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);\n        color = mix(outlineColor, vColor, inFill);\n        alpha = inBorder;\n      }\n    }\n    float a = alpha * color.a;\n    \n    if (a < alphaCutoff) {\n      discard;\n    }\n\n    gl_FragColor = vec4(color.rgb, a * opacity);\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n"}}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(e,{index:t,target:n})=>this.encodePickingColor(t,n)}})}updateState(e){super.updateState(e);const{props:t,oldProps:n}=e;let{outlineColor:i}=t;i!==n.outlineColor&&(i=i.map((e=>e/255)),i[3]=Number.isFinite(i[3])?i[3]:1,this.setState({outlineColor:i})),!t.sdf&&t.outlineWidth&&Je.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(e){const{sdf:t,smoothing:n,outlineWidth:i}=this.props,{outlineColor:r}=this.state,o=i?Math.max(n,xv*(1-i)):-1;if(e.uniforms={...e.uniforms,sdfBuffer:xv,outlineBuffer:o,gamma:n,sdf:Boolean(t),outlineColor:r},super.draw(e),t&&i){const{iconManager:e}=this.state;e.getTexture()&&this.state.model.draw({uniforms:{outlineBuffer:xv}})}}getInstanceOffset(e){return e?Array.from(e).flatMap((e=>super.getInstanceOffset(e))):Av}getInstanceColorMode(e){return 1}getInstanceIconFrame(e){return e?Array.from(e).flatMap((e=>super.getInstanceIconFrame(e))):Av}}c(Cv,"defaultProps",{getIconOffsets:{type:"accessor",value:e=>e.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}}),c(Cv,"layerName","MultiIconLayer");const Sv=1e20;class Tv{constructor({fontSize:e=24,buffer:t=3,radius:n=8,cutoff:i=.25,fontFamily:r="sans-serif",fontWeight:o="normal",fontStyle:a="normal"}={}){this.buffer=t,this.cutoff=i,this.radius=n;const s=this.size=e+4*t,l=this._createCanvas(s),c=this.ctx=l.getContext("2d",{willReadFrequently:!0});c.font=`${a} ${o} ${e}px ${r}`,c.textBaseline="alphabetic",c.textAlign="left",c.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s)}_createCanvas(e){const t=document.createElement("canvas");return t.width=t.height=e,t}draw(e){const{width:t,actualBoundingBoxAscent:n,actualBoundingBoxDescent:i,actualBoundingBoxLeft:r,actualBoundingBoxRight:o}=this.ctx.measureText(e),a=Math.ceil(n),s=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(o-r))),l=Math.min(this.size-this.buffer,a+Math.ceil(i)),c=s+2*this.buffer,u=l+2*this.buffer,h=Math.max(c*u,0),d=new Uint8ClampedArray(h),p={data:d,width:c,height:u,glyphWidth:s,glyphHeight:l,glyphTop:a,glyphLeft:0,glyphAdvance:t};if(0===s||0===l)return p;const{ctx:f,buffer:g,gridInner:m,gridOuter:y}=this;f.clearRect(g,g,s,l),f.fillText(e,g,g+a);const v=f.getImageData(g,g,s,l);y.fill(Sv,0,h),m.fill(0,0,h);for(let e=0;e<l;e++)for(let t=0;t<s;t++){const n=v.data[4*(e*s+t)+3]/255;if(0===n)continue;const i=(e+g)*c+t+g;if(1===n)y[i]=0,m[i]=Sv;else{const e=.5-n;y[i]=e>0?e*e:0,m[i]=e<0?e*e:0}}Rv(y,0,0,c,u,c,this.f,this.v,this.z),Rv(m,g,g,s,l,c,this.f,this.v,this.z);for(let e=0;e<h;e++){const t=Math.sqrt(y[e])-Math.sqrt(m[e]);d[e]=Math.round(255-255*(t/this.radius+this.cutoff))}return p}}function Rv(e,t,n,i,r,o,a,s,l){for(let c=t;c<t+i;c++)Iv(e,n*o+c,o,r,a,s,l);for(let c=n;c<n+r;c++)Iv(e,c*o+t,1,i,a,s,l)}function Iv(e,t,n,i,r,o,a){o[0]=0,a[0]=-Sv,a[1]=Sv,r[0]=e[t];for(let s=1,l=0,c=0;s<i;s++){r[s]=e[t+s*n];const i=s*s;do{const e=o[l];c=(r[s]-r[e]+i-e*e)/(s-e)/2}while(c<=a[l]&&--l>-1);l++,o[l]=s,a[l]=c,a[l+1]=Sv}for(let s=0,l=0;s<i;s++){for(;a[l+1]<s;)l++;const i=o[l],c=s-i;e[t+s*n]=r[i]+c*c}}const Mv=32,Lv=[];function Dv(e,t,n,i){let r=0;for(let a=t;a<n;a++){var o;r+=(null===(o=i[e[a]])||void 0===o?void 0:o.layoutWidth)||0}return r}function Ov(e,t,n,i,r,o){let a=t,s=0;for(let l=t;l<n;l++){const t=Dv(e,l,l+1,r);s+t>i&&(a<l&&o.push(l),a=l,s=0),s+=t}return s}function jv(e,t,n,i,r=0,o){void 0===o&&(o=e.length);const a=[];return"break-all"===t?Ov(e,r,o,n,i,a):function(e,t,n,i,r,o){let a=t,s=t,l=t,c=0;for(let u=t;u<n;u++)if(" "===e[u]?l=u+1:" "!==e[u+1]&&u+1!==n||(l=u+1),l>s){let t=Dv(e,s,l,r);c+t>i&&(a<s&&(o.push(s),a=s,c=0),t>i&&(t=Ov(e,s,l,i,r,o),a=o[o.length-1])),s=l,c+=t}}(e,r,o,n,i,a),a}function Nv(e,t,n,i,r,o){let a=0,s=0;for(let o=t;o<n;o++){const t=e[o],n=i[t];n?(s||(s=n.layoutHeight),r[o]=a+n.layoutWidth/2,a+=n.layoutWidth):(Je.warn("Missing character: ".concat(t," (").concat(t.codePointAt(0),")"))(),r[o]=a,a+=Mv)}o[0]=a,o[1]=s}class Fv{constructor(e=5){c(this,"limit",void 0),c(this,"_cache",{}),c(this,"_order",[]),this.limit=e}get(e){const t=this._cache[e];return t&&(this._deleteOrder(e),this._appendOrder(e)),t}set(e,t){this._cache[e]?(this.delete(e),this._cache[e]=t,this._appendOrder(e)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[e]=t,this._appendOrder(e))}delete(e){this._cache[e]&&(delete this._cache[e],this._deleteOrder(e))}_deleteOrder(e){const t=this._order.indexOf(e);t>=0&&this._order.splice(t,1)}_appendOrder(e){this._order.push(e)}}const kv={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:function(){const e=[];for(let t=32;t<128;t++)e.push(String.fromCharCode(t));return e}(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1};let Uv=new Fv(3);function zv(e,t){for(let n=0;n<e.length;n++)t.data[4*n+3]=e[n]}function Bv(e,t,n,i){e.font="".concat(i," ").concat(n,"px ").concat(t),e.fillStyle="#000",e.textBaseline="alphabetic",e.textAlign="left"}class Gv{constructor(){c(this,"props",{...kv}),c(this,"_key",void 0),c(this,"_atlas",void 0)}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){const{fontSize:e,buffer:t}=this.props;return(1.2*e+2*t)/e}setProps(e={}){Object.assign(this.props,e),this._key=this._getKey();const t=function(e,t){let n;n="string"==typeof t?new Set(Array.from(t)):new Set(t);const i=Uv.get(e);if(!i)return n;for(const e in i.mapping)n.has(e)&&n.delete(e);return n}(this._key,this.props.characterSet),n=Uv.get(this._key);if(n&&0===t.size)return void(this._atlas!==n&&(this._atlas=n));const i=this._generateFontAtlas(t,n);this._atlas=i,Uv.set(this._key,i)}_generateFontAtlas(e,t){const{fontFamily:n,fontWeight:i,fontSize:r,buffer:o,sdf:a,radius:s,cutoff:l}=this.props;let c=t&&t.data;c||(c=document.createElement("canvas"),c.width=1024);const u=c.getContext("2d",{willReadFrequently:!0});Bv(u,n,r,i);const{mapping:h,canvasHeight:d,xOffset:p,yOffset:f}=function({characterSet:e,getFontWidth:t,fontHeight:n,buffer:i,maxCanvasWidth:r,mapping:o={},xOffset:a=0,yOffset:s=0}){let l=0,c=a;const u=n+2*i;for(const a of e)if(!o[a]){const e=t(a);c+e+2*i>r&&(c=0,l++),o[a]={x:c+i,y:s+l*u+i,width:e,height:u,layoutWidth:e,layoutHeight:n},c+=e+2*i}return{mapping:o,xOffset:c,yOffset:s+l*u,canvasHeight:(h=s+(l+1)*u,Math.pow(2,Math.ceil(Math.log2(h))))};var h}({getFontWidth:e=>u.measureText(e).width,fontHeight:1.2*r,buffer:o,characterSet:e,maxCanvasWidth:1024,...t&&{mapping:t.mapping,xOffset:t.xOffset,yOffset:t.yOffset}});if(c.height!==d){const e=u.getImageData(0,0,c.width,c.height);c.height=d,u.putImageData(e,0,0)}if(Bv(u,n,r,i),a){const t=new Tv({fontSize:r,buffer:o,radius:s,cutoff:l,fontFamily:n,fontWeight:"".concat(i)});for(const n of e){const{data:e,width:i,height:o,glyphTop:a}=t.draw(n);h[n].width=i,h[n].layoutOffsetY=.9*r-a;const s=u.createImageData(i,o);zv(e,s),u.putImageData(s,h[n].x,h[n].y)}}else for(const t of e)u.fillText(t,h[t].x,h[t].y+o+.9*r);return{xOffset:p,yOffset:f,mapping:h,data:c,width:c.width,height:c.height}}_getKey(){const{fontFamily:e,fontWeight:t,fontSize:n,buffer:i,sdf:r,radius:o,cutoff:a}=this.props;return r?"".concat(e," ").concat(t," ").concat(n," ").concat(i," ").concat(o," ").concat(a):"".concat(e," ").concat(t," ").concat(n," ").concat(i)}}const Vv={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:e=>e.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class Hv extends Bh{constructor(...e){super(...e),c(this,"state",void 0)}getShaders(){return super.getShaders({vs:"#define SHADER_NAME text-background-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute vec4 instanceRects;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec2 instancePixelOffsets;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform bool billboard;\nuniform float opacity;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform vec4 padding;\nuniform int sizeUnits;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = radians(angle);\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n  vLineWidth = instanceLineWidths;\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),\n    sizeMinPixels, sizeMaxPixels\n  );\n\n  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;\n\n  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);\n  pixelOffset += instancePixelOffsets;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  }\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#define SHADER_NAME text-background-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool stroked;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec2 pixelPosition = uv * dimensions;\n  if (stroked) {\n    float distToEdge = min(\n      min(pixelPosition.x, dimensions.x - pixelPosition.x),\n      min(pixelPosition.y, dimensions.y - pixelPosition.y)\n    );\n    float isBorder = smoothedge(distToEdge, vLineWidth);\n    gl_FragColor = mix(vFillColor, vLineColor, isBorder);\n  } else {\n    gl_FragColor = vFillColor;\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[Jy,ev]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){super.updateState(e);const{changeFlags:t}=e;if(t.extensionsChanged){var n;const{gl:e}=this.context;null===(n=this.state.model)||void 0===n||n.delete(),this.state.model=this._getModel(e),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{billboard:t,sizeScale:n,sizeUnits:i,sizeMinPixels:r,sizeMaxPixels:o,getLineWidth:a}=this.props;let{padding:s}=this.props;s.length<4&&(s=[s[0],s[1],s[0],s[1]]),this.state.model.setUniforms(e).setUniforms({billboard:t,stroked:Boolean(a),padding:s,sizeUnits:ai[i],sizeScale:n,sizeMinPixels:r,sizeMaxPixels:o}).draw()}_getModel(e){return new Ju(e,{...this.getShaders(),id:this.props.id,geometry:new nv({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array([0,0,1,0,1,1,0,1])}}}),isInstanced:!0})}}c(Hv,"defaultProps",Vv),c(Hv,"layerName","TextBackgroundLayer");const qv={start:1,middle:0,end:-1},Wv={top:1,center:0,bottom:-1},Xv=[0,0,0,255],Yv={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:Xv},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:kv.characterSet},fontFamily:kv.fontFamily,fontWeight:kv.fontWeight,lineHeight:1,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:Xv},fontSettings:{},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:e=>e.text},getPosition:{type:"accessor",value:e=>e.position},getColor:{type:"accessor",value:Xv},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class Kv extends uv{constructor(...e){super(...e),c(this,"state",void 0),c(this,"getBoundingRect",((e,t)=>{let{size:[n,i]}=this.transformParagraph(e,t);const{fontSize:r}=this.state.fontAtlasManager.props;n/=r,i/=r;const{getTextAnchor:o,getAlignmentBaseline:a}=this.props;return[(qv["function"==typeof o?o(e,t):o]-1)*n/2,(Wv["function"==typeof a?a(e,t):a]-1)*i/2,n,i]})),c(this,"getIconOffsets",((e,t)=>{const{getTextAnchor:n,getAlignmentBaseline:i}=this.props,{x:r,y:o,rowWidth:a,size:[s,l]}=this.transformParagraph(e,t),c=qv["function"==typeof n?n(e,t):n],u=Wv["function"==typeof i?i(e,t):i],h=r.length,d=new Array(2*h);let p=0;for(let e=0;e<h;e++){const t=(1-c)*(s-a[e])/2;d[p++]=(c-1)*s/2+t+r[e],d[p++]=(u-1)*l/2+o[e]}return d}))}initializeState(){this.state={styleVersion:0,fontAtlasManager:new Gv},this.props.maxWidth>0&&Je.warn("v8.9 breaking change: TextLayer maxWidth is now relative to text size")()}updateState(e){const{props:t,oldProps:n,changeFlags:i}=e;(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||t.lineHeight!==n.lineHeight||t.wordBreak!==n.wordBreak||t.maxWidth!==n.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:e}){return e.object=e.index>=0?this.props.data[e.index]:null,e}_updateFontAtlas(){const{fontSettings:e,fontFamily:t,fontWeight:n}=this.props,{fontAtlasManager:i,characterSet:r}=this.state,o={...e,characterSet:r,fontFamily:t,fontWeight:n};if(!i.mapping)return i.setProps(o),!0;for(const e in o)if(o[e]!==i.props[e])return i.setProps(o),!0;return!1}_updateText(){var e;const{data:t,characterSet:n}=this.props,i=null===(e=t.attributes)||void 0===e?void 0:e.getText;let r,{getText:o}=this.props,a=t.startIndices;const s="auto"===n&&new Set;if(i&&a){const{texts:e,characterCount:n}=function({value:e,length:t,stride:n,offset:i,startIndices:r,characterSet:o}){const a=e.BYTES_PER_ELEMENT,s=n?n/a:1,l=i?i/a:0,c=r[t]||Math.ceil((e.length-l)/s),u=o&&new Set,h=new Array(t);let d=e;if(s>1||l>0){d=new(0,e.constructor)(c);for(let t=0;t<c;t++)d[t]=e[t*s+l]}for(let e=0;e<t;e++){const t=r[e],n=r[e+1]||c,i=d.subarray(t,n);h[e]=String.fromCodePoint.apply(null,i),u&&i.forEach(u.add,u)}if(u)for(const e of u)o.add(String.fromCodePoint(e));return{texts:h,characterCount:c}}({...ArrayBuffer.isView(i)?{value:i}:i,length:t.length,startIndices:a,characterSet:s});r=n,o=(t,{index:n})=>e[n]}else{const{iterable:e,objectInfo:n}=su(t);a=[0],r=0;for(const t of e){n.index++;const e=Array.from(o(t,n)||"");s&&e.forEach(s.add,s),r+=e.length,a.push(r)}}this.setState({getText:o,startIndices:a,numInstances:r,characterSet:s||n})}transformParagraph(e,t){const{fontAtlasManager:n}=this.state,i=n.mapping,r=this.state.getText,{wordBreak:o,lineHeight:a,maxWidth:s}=this.props;return function(e,t,n,i,r){const o=Array.from(e),a=o.length,s=new Array(a),l=new Array(a),c=new Array(a),u=("break-word"===n||"break-all"===n)&&isFinite(i)&&i>0,h=[0,0],d=[0,0];let p=0,f=0,g=0;for(let e=0;e<=a;e++){const y=o[e];if("\n"!==y&&e!==a||(g=e),g>f){const e=u?jv(o,n,i,r,f,g):Lv;for(let n=0;n<=e.length;n++){const i=0===n?f:e[n-1],a=n<e.length?e[n]:g;Nv(o,i,a,r,s,d);for(let e=i;e<a;e++){var m;const t=(null===(m=r[o[e]])||void 0===m?void 0:m.layoutOffsetY)||0;l[e]=p+d[1]/2+t,c[e]=d[0]}p+=d[1]*t,h[0]=Math.max(h[0],d[0])}f=g}"\n"===y&&(s[f]=0,l[f]=0,c[f]=0,f++)}return h[1]=p,{x:s,y:l,rowWidth:c,size:h}}(r(e,t)||"",a,o,s*n.props.fontSize,i)}renderLayers(){const{startIndices:e,numInstances:t,getText:n,fontAtlasManager:{scale:i,texture:r,mapping:o},styleVersion:a}=this.state,{data:s,_dataDiff:l,getPosition:c,getColor:u,getSize:h,getAngle:d,getPixelOffset:p,getBackgroundColor:f,getBorderColor:g,getBorderWidth:m,backgroundPadding:y,background:v,billboard:b,fontSettings:_,outlineWidth:w,outlineColor:P,sizeScale:E,sizeUnits:x,sizeMinPixels:A,sizeMaxPixels:C,transitions:S,updateTriggers:T}=this.props,R=this.getSubLayerClass("characters",Cv),I=this.getSubLayerClass("background",Hv);return[v&&new I({getFillColor:f,getLineColor:g,getLineWidth:m,padding:y,getPosition:c,getSize:h,getAngle:d,getPixelOffset:p,billboard:b,sizeScale:E,sizeUnits:x,sizeMinPixels:A,sizeMaxPixels:C,transitions:S&&{getPosition:S.getPosition,getAngle:S.getAngle,getSize:S.getSize,getFillColor:S.getBackgroundColor,getLineColor:S.getBorderColor,getLineWidth:S.getBorderWidth,getPixelOffset:S.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:T.getPosition,getAngle:T.getAngle,getSize:T.getSize,getFillColor:T.getBackgroundColor,getLineColor:T.getBorderColor,getLineWidth:T.getBorderWidth,getPixelOffset:T.getPixelOffset,getBoundingRect:{getText:T.getText,getTextAnchor:T.getTextAnchor,getAlignmentBaseline:T.getAlignmentBaseline,styleVersion:a}}}),{data:s.attributes&&s.attributes.background?{length:s.length,attributes:s.attributes.background}:s,_dataDiff:l,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new R({sdf:_.sdf,smoothing:Number.isFinite(_.smoothing)?_.smoothing:kv.smoothing,outlineWidth:w/(_.radius||kv.radius),outlineColor:P,iconAtlas:r,iconMapping:o,getPosition:c,getColor:u,getSize:h,getAngle:d,getPixelOffset:p,billboard:b,sizeScale:E*i,sizeUnits:x,sizeMinPixels:A*i,sizeMaxPixels:C*i,transitions:S&&{getPosition:S.getPosition,getAngle:S.getAngle,getColor:S.getColor,getSize:S.getSize,getPixelOffset:S.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{getIcon:T.getText,getPosition:T.getPosition,getAngle:T.getAngle,getColor:T.getColor,getSize:T.getSize,getPixelOffset:T.getPixelOffset,getIconOffsets:{getText:T.getText,getTextAnchor:T.getTextAnchor,getAlignmentBaseline:T.getAlignmentBaseline,styleVersion:a}}}),{data:s,_dataDiff:l,startIndices:e,numInstances:t,getIconOffsets:this.getIconOffsets,getIcon:n})]}static set fontAtlasCacheLimit(e){!function(e){Je.assert(Number.isFinite(e)&&e>=3,"Invalid cache limit"),Uv=new Fv(e)}(e)}}c(Kv,"defaultProps",Yv),c(Kv,"layerName","TextLayer");class Zv{constructor(e){c(this,"opts",void 0),c(this,"typedArrayManager",void 0),c(this,"indexStarts",[0]),c(this,"vertexStarts",[0]),c(this,"vertexCount",0),c(this,"instanceCount",0),c(this,"attributes",void 0),c(this,"_attributeDefs",void 0),c(this,"data",void 0),c(this,"getGeometry",void 0),c(this,"geometryBuffer",void 0),c(this,"buffers",void 0),c(this,"positionSize",void 0),c(this,"normalize",void 0);const{attributes:t={}}=e;this.typedArrayManager=Mn,this.attributes={},this._attributeDefs=t,this.opts=e,this.updateGeometry(e)}updateGeometry(e){Object.assign(this.opts,e);const{data:t,buffers:n={},getGeometry:i,geometryBuffer:r,positionFormat:o,dataChanged:a,normalize:s=!0}=this.opts;if(this.data=t,this.getGeometry=i,this.positionSize=r&&r.size||("XY"===o?2:3),this.buffers=n,this.normalize=s,r&&(m(t.startIndices),this.getGeometry=this.getGeometryFromBuffer(r),s||(n.positions=r)),this.geometryBuffer=n.positions,Array.isArray(a))for(const e of a)this._rebuildGeometry(e);else this._rebuildGeometry()}updatePartialGeometry({startRow:e,endRow:t}){this._rebuildGeometry({startRow:e,endRow:t})}getGeometryFromBuffer(e){const t=e.value||e;return ArrayBuffer.isView(t)?cu(t,{size:this.positionSize,offset:e.offset,stride:e.stride,startIndices:this.data.startIndices}):null}_allocate(e,t){const{attributes:n,buffers:i,_attributeDefs:r,typedArrayManager:o}=this;for(const a in r)if(a in i)o.release(n[a]),n[a]=null;else{const i=r[a];i.copy=t,n[a]=o.allocate(n[a],e,i)}}_forEachGeometry(e,t,n){const{data:i,getGeometry:r}=this,{iterable:o,objectInfo:a}=su(i,t,n);for(const t of o)a.index++,e(r?r(t,a):null,a.index)}_rebuildGeometry(e){if(!this.data)return;let{indexStarts:t,vertexStarts:n,instanceCount:i}=this;const{data:r,geometryBuffer:o}=this,{startRow:a=0,endRow:s=1/0}=e||{},l={};if(e||(t=[0],n=[0]),this.normalize||!o)this._forEachGeometry(((e,t)=>{const i=e&&this.normalizeGeometry(e);l[t]=i,n[t+1]=n[t]+(i?this.getGeometrySize(i):0)}),a,s),i=n[n.length-1];else if(n=r.startIndices,i=n[r.length]||0,ArrayBuffer.isView(o))i=i||o.length/this.positionSize;else if(o instanceof _o){const e=o.accessor.stride||4*this.positionSize;i=i||o.byteLength/e}else if(o.buffer){const e=o.stride||4*this.positionSize;i=i||o.buffer.byteLength/e}else if(o.value){const e=o.value,t=o.stride/e.BYTES_PER_ELEMENT||this.positionSize;i=i||e.length/t}this._allocate(i,Boolean(e)),this.indexStarts=t,this.vertexStarts=n,this.instanceCount=i;const c={};this._forEachGeometry(((e,r)=>{const o=l[r]||e;c.vertexStart=n[r],c.indexStart=t[r];const a=r<n.length-1?n[r+1]:i;c.geometrySize=a-n[r],c.geometryIndex=r,this.updateGeometryAttributes(o,c)}),a,s),this.vertexCount=t[t.length-1]}}function Jv(e,t,n={}){const i=function(e,t={}){return Math.sign(function(e,t={}){const{start:n=0,end:i=e.length}=t,r=t.size||2;let o=0;for(let t=n,a=i-r;t<i;t+=r)o+=(e[t]-e[a])*(e[t+1]+e[a+1]),a=t;return o/2}(e,t))}(e,n);return i!==t&&(function(e,t){const{start:n=0,end:i=e.length,size:r=2}=t,o=(i-n)/r,a=Math.floor(o/2);for(let t=0;t<a;++t){const i=n+t*r,a=n+(o-1-t)*r;for(let t=0;t<r;++t){const n=e[i+t];e[i+t]=e[a+t],e[a+t]=n}}}(e,n),!0)}function $v(e,t,n,i,r=[]){let o,a;if(8&n)o=(i[3]-e[1])/(t[1]-e[1]),a=3;else if(4&n)o=(i[1]-e[1])/(t[1]-e[1]),a=1;else if(2&n)o=(i[2]-e[0])/(t[0]-e[0]),a=2;else{if(!(1&n))return null;o=(i[0]-e[0])/(t[0]-e[0]),a=0}for(let n=0;n<e.length;n++)r[n]=(1&a)===n?i[a]:o*(t[n]-e[n])+e[n];return r}function Qv(e,t){let n=0;return e[0]<t[0]?n|=1:e[0]>t[2]&&(n|=2),e[1]<t[1]?n|=4:e[1]>t[3]&&(n|=8),n}function eb(e,t){const n=t.length,i=e.length;if(i>0){let r=!0;for(let o=0;o<n;o++)if(e[i-n+o]!==t[o]){r=!1;break}if(r)return!1}for(let r=0;r<n;r++)e[i+r]=t[r];return!0}function tb(e,t){const n=t.length;for(let i=0;i<n;i++)e[i]=t[i]}function nb(e,t,n,i,r=[]){const o=i+t*n;for(let t=0;t<n;t++)r[t]=e[o+t];return r}function ib(e,t){const{size:n=2,broken:i=!1,gridResolution:r=10,gridOffset:o=[0,0],startIndex:a=0,endIndex:s=e.length}=t||{},l=(s-a)/n;let c=[];const u=[c],h=nb(e,0,n,a);let d,p;const f=cb(h,r,o,[]),g=[];eb(c,h);for(let t=1;t<l;t++){for(d=nb(e,t,n,a,d),p=Qv(d,f);p;){$v(h,d,p,f,g);const e=Qv(g,f);e&&($v(h,g,e,f,g),p=e),eb(c,g),tb(h,g),ub(f,r,p),i&&c.length>n&&(c=[],u.push(c),eb(c,h)),p=Qv(d,f)}eb(c,d),tb(h,d)}return i?u:u[0]}const rb=0,ob=1;function ab(e,t){for(let n=0;n<t.length;n++)e.push(t[n]);return e}function sb(e,t=null,n){if(!e.length)return[];const{size:i=2,gridResolution:r=10,gridOffset:o=[0,0],edgeTypes:a=!1}=n||{},s=[],l=[{pos:e,types:a?new Array(e.length/i).fill(ob):null,holes:t||[]}],c=[[],[]];let u=[];for(;l.length;){const{pos:e,types:t,holes:n}=l.shift();hb(e,i,n[0]||e.length,c),u=cb(c[0],r,o,u);const h=Qv(c[1],u);if(h){let r=lb(e,t,i,0,n[0]||e.length,u,h);const o={pos:r[0].pos,types:r[0].types,holes:[]},s={pos:r[1].pos,types:r[1].types,holes:[]};l.push(o,s);for(let l=0;l<n.length;l++)r=lb(e,t,i,n[l],n[l+1]||e.length,u,h),r[0]&&(o.holes.push(o.pos.length),o.pos=ab(o.pos,r[0].pos),a&&(o.types=ab(o.types,r[0].types))),r[1]&&(s.holes.push(s.pos.length),s.pos=ab(s.pos,r[1].pos),a&&(s.types=ab(s.types,r[1].types)))}else{const i={positions:e};a&&(i.edgeTypes=t),n.length&&(i.holeIndices=n),s.push(i)}}return s}function lb(e,t,n,i,r,o,a){const s=(r-i)/n,l=[],c=[],u=[],h=[],d=[];let p,f,g;const m=nb(e,s-1,n,i);let y=Math.sign(8&a?m[1]-o[3]:m[0]-o[2]),v=t&&t[s-1],b=0,_=0;for(let r=0;r<s;r++)p=nb(e,r,n,i,p),f=Math.sign(8&a?p[1]-o[3]:p[0]-o[2]),g=t&&t[i/n+r],f&&y&&y!==f&&($v(m,p,a,o,d),eb(l,d)&&u.push(v),eb(c,d)&&h.push(v)),f<=0?(eb(l,p)&&u.push(g),b-=f):u.length&&(u[u.length-1]=rb),f>=0?(eb(c,p)&&h.push(g),_+=f):h.length&&(h[h.length-1]=rb),tb(m,p),y=f,v=g;return[b?{pos:l,types:t&&u}:null,_?{pos:c,types:t&&h}:null]}function cb(e,t,n,i){const r=Math.floor((e[0]-n[0])/t)*t+n[0],o=Math.floor((e[1]-n[1])/t)*t+n[1];return i[0]=r,i[1]=o,i[2]=r+t,i[3]=o+t,i}function ub(e,t,n){8&n?(e[1]+=t,e[3]+=t):4&n?(e[1]-=t,e[3]-=t):2&n?(e[0]+=t,e[2]+=t):1&n&&(e[0]-=t,e[2]-=t)}function hb(e,t,n,i){let r=1/0,o=-1/0,a=1/0,s=-1/0;for(let i=0;i<n;i+=t){const t=e[i],n=e[i+1];r=t<r?t:r,o=t>o?t:o,a=n<a?n:a,s=n>s?n:s}return i[0][0]=r,i[0][1]=a,i[1][0]=o,i[1][1]=s,i}const db=85.051129;function pb(e,t,n,i){let r=-1,o=-1;for(let a=n+1;a<i;a+=t){const t=Math.abs(e[a]);t>r&&(r=t,o=a-1)}return o}function fb(e,t,n,i,r=db){const o=e[n],a=e[i-t];if(Math.abs(o-a)>180){const i=nb(e,0,t,n);i[0]+=360*Math.round((a-o)/360),eb(e,i),i[1]=Math.sign(i[1])*r,eb(e,i),i[0]=o,eb(e,i)}}function gb(e,t,n,i){let r,o=e[0];for(let a=n;a<i;a+=t){r=e[a];const t=r-o;(t>180||t<-180)&&(r-=360*Math.round(t/360)),e[a]=o=r}}function mb(e,t){let n;const i=e.length/t;for(let r=0;r<i&&(n=e[r*t],(n+180)%360==0);r++);const r=360*-Math.round(n/360);if(0!==r)for(let n=0;n<i;n++)e[n*t]+=r}class yb extends Zv{constructor(e){super({...e,attributes:{positions:{size:3,padding:18,initialize:!0,type:e.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}get(e){return this.attributes[e]}getGeometryFromBuffer(e){return this.normalize?super.getGeometryFromBuffer(e):null}normalizeGeometry(e){return this.normalize?function(e,t,n,i){let r;if(Array.isArray(e[0])){const n=e.length*t;r=new Array(n);for(let n=0;n<e.length;n++)for(let i=0;i<t;i++)r[n*t+i]=e[n][i]||0}else r=e;return n?ib(r,{size:t,gridResolution:n}):i?function(e,t){const{size:n=2,startIndex:i=0,endIndex:r=e.length,normalize:o=!0}=t||{},a=e.slice(i,r);gb(a,n,0,r-i);const s=ib(a,{size:n,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(o)for(const e of s)mb(e,n);return s}(r,{size:t}):r}(e,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):e}getGeometrySize(e){if(vb(e)){let t=0;for(const n of e)t+=this.getGeometrySize(n);return t}const t=this.getPathLength(e);return t<2?0:this.isClosed(e)?t<3?0:t+2:t}updateGeometryAttributes(e,t){if(0!==t.geometrySize)if(e&&vb(e))for(const n of e){const e=this.getGeometrySize(n);t.geometrySize=e,this.updateGeometryAttributes(n,t),t.vertexStart+=e}else this._updateSegmentTypes(e,t),this._updatePositions(e,t)}_updateSegmentTypes(e,t){const n=this.attributes.segmentTypes,i=!!e&&this.isClosed(e),{vertexStart:r,geometrySize:o}=t;n.fill(0,r,r+o),i?(n[r]=4,n[r+o-2]=4):(n[r]+=1,n[r+o-2]+=2),n[r+o-1]=4}_updatePositions(e,t){const{positions:n}=this.attributes;if(!n||!e)return;const{vertexStart:i,geometrySize:r}=t,o=new Array(3);for(let t=i,a=0;a<r;t++,a++)this.getPointOnPath(e,a,o),n[3*t]=o[0],n[3*t+1]=o[1],n[3*t+2]=o[2]}getPathLength(e){return e.length/this.positionSize}getPointOnPath(e,t,n=[]){const{positionSize:i}=this;t*i>=e.length&&(t+=1-e.length/i);const r=t*i;return n[0]=e[r],n[1]=e[r+1],n[2]=3===i&&e[r+2]||0,n}isClosed(e){if(!this.normalize)return Boolean(this.opts.loop);const{positionSize:t}=this,n=e.length-t;return e[0]===e[n]&&e[1]===e[n+1]&&(2===t||e[2]===e[n+2])}}function vb(e){return Array.isArray(e[0])}const bb=[0,0,0,255],_b={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:e=>e.path},getColor:{type:"accessor",value:bb},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},wb={enter:(e,t)=>t.length?t.subarray(t.length-e.length):e};class Pb extends Bh{constructor(...e){super(...e),c(this,"state",void 0)}getShaders(){return super.getShaders({vs:"#define SHADER_NAME path-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute float instanceTypes;\nattribute vec3 instanceStartPositions;\nattribute vec3 instanceEndPositions;\nattribute vec3 instanceLeftPositions;\nattribute vec3 instanceRightPositions;\nattribute vec3 instanceLeftPositions64Low;\nattribute vec3 instanceStartPositions64Low;\nattribute vec3 instanceEndPositions64Low;\nattribute vec3 instanceRightPositions64Low;\nattribute float instanceStrokeWidths;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float jointType;\nuniform float capType;\nuniform float miterLimit;\nuniform bool billboard;\nuniform int widthUnits;\n\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\nvarying float vJointType;\n\nconst float EPSILON = 0.001;\nconst vec3 ZERO_OFFSET = vec3(0.0);\n\nfloat flipIfTrue(bool flag) {\n  return -(float(flag) * 2. - 1.);\n}\nvec3 getLineJoinOffset(\n  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,\n  vec2 width\n) {\n  bool isEnd = positions.x > 0.0;\n  float sideOfPath = positions.y;\n  float isJoint = float(sideOfPath == 0.0);\n\n  vec3 deltaA3 = (currPoint - prevPoint);\n  vec3 deltaB3 = (nextPoint - currPoint);\n\n  mat3 rotationMatrix;\n  bool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);\n  if (needsRotation) {\n    deltaA3 = deltaA3 * rotationMatrix;\n    deltaB3 = deltaB3 * rotationMatrix;\n  }\n  vec2 deltaA = deltaA3.xy / width;\n  vec2 deltaB = deltaB3.xy / width;\n\n  float lenA = length(deltaA);\n  float lenB = length(deltaB);\n\n  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);\n  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);\n\n  vec2 perpA = vec2(-dirA.y, dirA.x);\n  vec2 perpB = vec2(-dirB.y, dirB.x);\n  vec2 tangent = dirA + dirB;\n  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;\n  vec2 miterVec = vec2(-tangent.y, tangent.x);\n  vec2 dir = isEnd ? dirA : dirB;\n  vec2 perp = isEnd ? perpA : perpB;\n  float L = isEnd ? lenA : lenB;\n  float sinHalfA = abs(dot(miterVec, perp));\n  float cosHalfA = abs(dot(dirA, miterVec));\n  float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);\n  float cornerPosition = sideOfPath * turnDirection;\n\n  float miterSize = 1.0 / max(sinHalfA, EPSILON);\n  miterSize = mix(\n    min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),\n    miterSize,\n    step(0.0, cornerPosition)\n  );\n\n  vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))\n    * (sideOfPath + isJoint * turnDirection);\n  bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));\n  bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));\n  bool isCap = isStartCap || isEndCap;\n  if (isCap) {\n    offsetVec = mix(perp * sideOfPath, dir * capType * 4.0 * flipIfTrue(isStartCap), isJoint);\n    vJointType = capType;\n  } else {\n    vJointType = jointType;\n  }\n  vPathLength = L;\n  vCornerOffset = offsetVec;\n  vMiterLength = dot(vCornerOffset, miterVec * turnDirection);\n  vMiterLength = isCap ? isJoint : vMiterLength;\n\n  vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);\n  vPathPosition = vec2(\n    dot(offsetFromStartOfPath, perp),\n    dot(offsetFromStartOfPath, dir)\n  );\n  geometry.uv = vPathPosition;\n\n  float isValid = step(instanceTypes, 3.5);\n  vec3 offset = vec3(offsetVec * width * isValid, 0.0);\n\n  if (needsRotation) {\n    offset = rotationMatrix * offset;\n  }\n  return offset;\n}\nvoid clipLine(inout vec4 position, vec4 refPosition) {\n  if (position.w < EPSILON) {\n    float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);\n    position = refPosition + (position - refPosition) * r;\n  }\n}\n\nvoid main() {\n  geometry.pickingColor = instancePickingColors;\n\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);\n\n  float isEnd = positions.x;\n\n  vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);\n  vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);\n\n  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n  vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);\n\n  vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);\n  vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);\n\n  geometry.worldPosition = currPosition;\n  vec2 widthPixels = vec2(clamp(\n    project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),\n    widthMinPixels, widthMaxPixels) / 2.0);\n  vec3 width;\n\n  if (billboard) {\n    vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);\n    vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);\n    vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);\n\n    clipLine(prevPositionScreen, currPositionScreen);\n    clipLine(nextPositionScreen, currPositionScreen);\n    clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));\n\n    width = vec3(widthPixels, 0.0);\n    DECKGL_FILTER_SIZE(width, geometry);\n\n    vec3 offset = getLineJoinOffset(\n      prevPositionScreen.xyz / prevPositionScreen.w,\n      currPositionScreen.xyz / currPositionScreen.w,\n      nextPositionScreen.xyz / nextPositionScreen.w,\n      project_pixel_size_to_clipspace(width.xy)\n    );\n\n    DECKGL_FILTER_GL_POSITION(currPositionScreen, geometry);\n    gl_Position = vec4(currPositionScreen.xyz + offset * currPositionScreen.w, currPositionScreen.w);\n  } else {\n    prevPosition = project_position(prevPosition, prevPosition64Low);\n    currPosition = project_position(currPosition, currPosition64Low);\n    nextPosition = project_position(nextPosition, nextPosition64Low);\n\n    width = vec3(project_pixel_size(widthPixels), 0.0);\n    DECKGL_FILTER_SIZE(width, geometry);\n\n    vec3 offset = getLineJoinOffset(prevPosition, currPosition, nextPosition, width.xy);\n    geometry.position = vec4(currPosition + offset, 1.0);\n    gl_Position = project_common_position_to_clipspace(geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  }\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#define SHADER_NAME path-layer-fragment-shader\n\nprecision highp float;\n\nuniform float miterLimit;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\nvarying float vJointType;\n\nvoid main(void) {\n  geometry.uv = vPathPosition;\n\n  if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {\n    if (vJointType > 0.5 && length(vCornerOffset) > 1.0) {\n      discard;\n    }\n    if (vJointType < 0.5 && vMiterLength > miterLimit + 1.0) {\n      discard;\n    }\n  }\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[Jy,ev]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({positions:{size:3,vertexOffset:1,type:5130,fp64:this.use64bitPositions(),transition:wb,accessor:"getPath",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:5121,update:this.calculateSegmentTypes,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:wb,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,accessor:"getColor",transition:wb,defaultValue:bb},instancePickingColors:{size:3,type:5121,accessor:(e,{index:t,target:n})=>this.encodePickingColor(e&&e.__source?e.__source.index:t,n)}}),this.setState({pathTesselator:new yb({fp64:this.use64bitPositions()})})}updateState(e){super.updateState(e);const{props:t,changeFlags:n}=e,i=this.getAttributeManager();if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPath)){const{pathTesselator:e}=this.state,r=t.data.attributes||{};e.updateGeometry({data:t.data,geometryBuffer:r.getPath,buffers:r,normalize:!t._pathType,loop:"loop"===t._pathType,getGeometry:t.getPath,positionFormat:t.positionFormat,wrapLongitude:t.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:n.dataChanged}),this.setState({numInstances:e.instanceCount,startIndices:e.vertexStarts}),n.dataChanged||i.invalidateAll()}if(n.extensionsChanged){var r;const{gl:e}=this.context;null===(r=this.state.model)||void 0===r||r.delete(),this.state.model=this._getModel(e),i.invalidateAll()}}getPickingInfo(e){const t=super.getPickingInfo(e),{index:n}=t,{data:i}=this.props;return i[0]&&i[0].__source&&(t.object=i.find((e=>e.__source.index===n))),t}disablePickingIndex(e){const{data:t}=this.props;if(t[0]&&t[0].__source)for(let n=0;n<t.length;n++)t[n].__source.index===e&&this._disablePickingIndex(n);else this._disablePickingIndex(e)}draw({uniforms:e}){const{jointRounded:t,capRounded:n,billboard:i,miterLimit:r,widthUnits:o,widthScale:a,widthMinPixels:s,widthMaxPixels:l}=this.props;this.state.model.setUniforms(e).setUniforms({jointType:Number(t),capType:Number(n),billboard:i,widthUnits:ai[o],widthScale:a,miterLimit:r,widthMinPixels:s,widthMaxPixels:l}).draw()}_getModel(e){return new Ju(e,{...this.getShaders(),id:this.props.id,geometry:new nv({drawMode:4,attributes:{indices:new Uint16Array([0,1,2,1,4,2,1,3,4,3,5,4]),positions:{value:new Float32Array([0,0,0,-1,0,1,1,-1,1,1,1,0]),size:2}}}),isInstanced:!0})}calculatePositions(e){const{pathTesselator:t}=this.state;e.startIndices=t.vertexStarts,e.value=t.get("positions")}calculateSegmentTypes(e){const{pathTesselator:t}=this.state;e.startIndices=t.vertexStarts,e.value=t.get("segmentTypes")}}c(Pb,"defaultProps",_b),c(Pb,"layerName","PathLayer");const Eb="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n",xb={lightSources:{}};function Ab(){let{color:e=[0,0,0],intensity:t=1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.map((e=>e*t/255))}const Cb={};const Sb={name:"gouraud-lighting",dependencies:[{name:"lights",vs:Eb,fs:Eb,getUniforms:function e(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xb;if("lightSources"in t){const{ambientLight:e,pointLights:n,directionalLights:i}=t.lightSources||{};return e||n&&n.length>0||i&&i.length>0?Object.assign({},function(e){let{ambientLight:t,pointLights:n=[],directionalLights:i=[]}=e;const r={};return r["lighting_uAmbientLight.color"]=t?Ab(t):[0,0,0],n.forEach(((e,t)=>{r["lighting_uPointLight[".concat(t,"].color")]=Ab(e),r["lighting_uPointLight[".concat(t,"].position")]=e.position,r["lighting_uPointLight[".concat(t,"].attenuation")]=e.attenuation||[1,0,0]})),r.lighting_uPointLightCount=n.length,i.forEach(((e,t)=>{r["lighting_uDirectionalLight[".concat(t,"].color")]=Ab(e),r["lighting_uDirectionalLight[".concat(t,"].direction")]=e.direction})),r.lighting_uDirectionalLightCount=i.length,r}({ambientLight:e,pointLights:n,directionalLights:i}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in t){const n={pointLights:[],directionalLights:[]};for(const e of t.lights||[])switch(e.type){case"ambient":n.ambientLight=e;break;case"directional":n.directionalLights.push(e);break;case"point":n.pointLights.push(e)}return e({lightSources:n})}return{}},defines:{MAX_LIGHTS:3}}],vs:"\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n",defines:{LIGHTING_VERTEX:1},getUniforms:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cb;if(!("material"in e))return{};const{material:t}=e;return t?function(e){const{ambient:t=.35,diffuse:n=.6,shininess:i=32,specularColor:r=[30,30,30]}=e;return{lighting_uAmbient:t,lighting_uDiffuse:n,lighting_uShininess:i,lighting_uSpecularColor:r.map((e=>e/255))}}(t):{lighting_uEnabled:!1}}},Tb=1,Rb=-1,Ib={isClosed:!0};function Mb(e){return"positions"in e?e.positions:e}function Lb(e){return"holeIndices"in e?e.holeIndices:null}function Db(e,t,n,i,r){let o=t;const a=n.length;for(let t=0;t<a;t++)for(let r=0;r<i;r++)e[o++]=n[t][r]||0;if(!function(e){const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]}(n))for(let t=0;t<i;t++)e[o++]=n[0][t]||0;return Ib.start=t,Ib.end=o,Ib.size=i,Jv(e,r,Ib),o}function Ob(e,t,n,i,r=0,o,a){const s=(o=o||n.length)-r;if(s<=0)return t;let l=t;for(let t=0;t<s;t++)e[l++]=n[r+t];if(!function(e,t,n,i){for(let r=0;r<t;r++)if(e[n+r]!==e[i-t+r])return!1;return!0}(n,i,r,o))for(let t=0;t<i;t++)e[l++]=n[r+t];return Ib.start=t,Ib.end=l,Ib.size=i,Jv(e,a,Ib),l}function jb(e,t,n){const i=e.length/3;let r=0;for(let o=0;o<i;o++){const a=(o+1)%i;r+=e[3*o+t]*e[3*a+n],r-=e[3*a+t]*e[3*o+n]}return Math.abs(r/2)}function Nb(e,t,n,i){const r=e.length/3;for(let o=0;o<r;o++){const r=3*o,a=e[r+0],s=e[r+1],l=e[r+2];e[r+t]=a,e[r+n]=s,e[r+i]=l}}class Fb extends Zv{constructor(e){const{fp64:t,IndexType:n=Uint32Array}=e;super({...e,attributes:{positions:{size:3,type:t?Float64Array:Float32Array},vertexValid:{type:Uint8ClampedArray,size:1},indices:{type:n,size:1}}})}get(e){const{attributes:t}=this;return"indices"===e?t.indices&&t.indices.subarray(0,this.vertexCount):t[e]}updateGeometry(e){super.updateGeometry(e);const t=this.buffers.indices;if(t)this.vertexCount=(t.value||t).length;else if(this.data&&!this.getGeometry)throw new Error("missing indices buffer")}normalizeGeometry(e){if(this.normalize){const t=function(e,t){!function(e){if(e=e&&e.positions||e,!Array.isArray(e)&&!ArrayBuffer.isView(e))throw new Error("invalid polygon")}(e);const n=[],i=[];if("positions"in e){const{positions:r,holeIndices:o}=e;if(o){let e=0;for(let a=0;a<=o.length;a++)e=Ob(n,e,r,t,o[a-1],o[a],0===a?Tb:Rb),i.push(e);return i.pop(),{positions:n,holeIndices:i}}e=r}if(!function(e){return Array.isArray(e[0])}(e))return Ob(n,0,e,t,0,n.length,Tb),n;if(!function(e){return e.length>=1&&e[0].length>=2&&Number.isFinite(e[0][0])}(e)){let r=0;for(const[o,a]of e.entries())r=Db(n,r,a,t,0===o?Tb:Rb),i.push(r);return i.pop(),{positions:n,holeIndices:i}}return Db(n,0,e,t,Tb),n}(e,this.positionSize);return this.opts.resolution?sb(Mb(t),Lb(t),{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0}):this.opts.wrapLongitude?function(e,t=null,n){const{size:i=2,normalize:r=!0,edgeTypes:o=!1}=n||{};t=t||[];const a=[],s=[];let l=0,c=0;for(let r=0;r<=t.length;r++){const o=t[r]||e.length,u=c,h=pb(e,i,l,o);for(let t=h;t<o;t++)a[c++]=e[t];for(let t=l;t<h;t++)a[c++]=e[t];gb(a,i,u,c),fb(a,i,u,c,null==n?void 0:n.maxLatitude),l=o,s[r]=c}s.pop();const u=sb(a,s,{size:i,gridResolution:360,gridOffset:[-180,-180],edgeTypes:o});if(r)for(const e of u)mb(e.positions,i);return u}(Mb(t),Lb(t),{size:this.positionSize,maxLatitude:86,edgeTypes:!0}):t}return e}getGeometrySize(e){if(kb(e)){let t=0;for(const n of e)t+=this.getGeometrySize(n);return t}return Mb(e).length/this.positionSize}getGeometryFromBuffer(e){return this.normalize||!this.buffers.indices?super.getGeometryFromBuffer(e):null}updateGeometryAttributes(e,t){if(e&&kb(e))for(const n of e){const e=this.getGeometrySize(n);t.geometrySize=e,this.updateGeometryAttributes(n,t),t.vertexStart+=e,t.indexStart=this.indexStarts[t.geometryIndex+1]}else this._updateIndices(e,t),this._updatePositions(e,t),this._updateVertexValid(e,t)}_updateIndices(e,{geometryIndex:t,vertexStart:n,indexStart:i}){const{attributes:r,indexStarts:o,typedArrayManager:a}=this;let s=r.indices;if(!s||!e)return;let l=i;const c=function(e,t,n,i){let r=Lb(e);r&&(r=r.map((e=>e/t)));let o=Mb(e);const a=i&&3===t;if(n){const e=o.length;o=o.slice();const i=[];for(let r=0;r<e;r+=t){i[0]=o[r],i[1]=o[r+1],a&&(i[2]=o[r+2]);const e=n(i);o[r]=e[0],o[r+1]=e[1],a&&(o[r+2]=e[2])}}if(a){const e=jb(o,0,1),t=jb(o,0,2),i=jb(o,1,2);if(!e&&!t&&!i)return[];e>t&&e>i||(t>i?(n||(o=o.slice()),Nb(o,0,2,1)):(n||(o=o.slice()),Nb(o,1,2,0)))}return ad()(o,r,t)}(e,this.positionSize,this.opts.preproject,this.opts.full3d);s=a.allocate(s,i+c.length,{copy:!0});for(let e=0;e<c.length;e++)s[l++]=c[e]+n;o[t+1]=i+c.length,r.indices=s}_updatePositions(e,{vertexStart:t,geometrySize:n}){const{attributes:{positions:i},positionSize:r}=this;if(!i||!e)return;const o=Mb(e);for(let e=t,a=0;a<n;e++,a++){const t=o[a*r],n=o[a*r+1],s=r>2?o[a*r+2]:0;i[3*e]=t,i[3*e+1]=n,i[3*e+2]=s}}_updateVertexValid(e,{vertexStart:t,geometrySize:n}){const{positionSize:i}=this,r=this.attributes.vertexValid,o=e&&Lb(e);if(e&&e.edgeTypes?r.set(e.edgeTypes,t):r.fill(1,t,t+n),o)for(let e=0;e<o.length;e++)r[t+o[e]/i-1]=0;r[t+n-1]=0}}function kb(e){return Array.isArray(e)&&e.length>0&&!Number.isFinite(e[0])}const Ub="\nattribute vec2 vertexPositions;\nattribute float vertexValid;\n\nuniform bool extruded;\nuniform bool isWireframe;\nuniform float elevationScale;\nuniform float opacity;\n\nvarying vec4 vColor;\n\nstruct PolygonProps {\n  vec4 fillColors;\n  vec4 lineColors;\n  vec3 positions;\n  vec3 nextPositions;\n  vec3 pickingColors;\n  vec3 positions64Low;\n  vec3 nextPositions64Low;\n  float elevations;\n};\n\nvec3 project_offset_normal(vec3 vector) {\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    return normalize(vector * project_uCommonUnitsPerWorldUnit);\n  }\n  return project_normal(vector);\n}\n\nvoid calculatePosition(PolygonProps props) {\n#ifdef IS_SIDE_VERTEX\n  if(vertexValid < 0.5){\n    gl_Position = vec4(0.);\n    return;\n  }\n#endif\n\n  vec3 pos;\n  vec3 pos64Low;\n  vec3 normal;\n  vec4 colors = isWireframe ? props.lineColors : props.fillColors;\n\n  geometry.worldPosition = props.positions;\n  geometry.worldPositionAlt = props.nextPositions;\n  geometry.pickingColor = props.pickingColors;\n\n#ifdef IS_SIDE_VERTEX\n  pos = mix(props.positions, props.nextPositions, vertexPositions.x);\n  pos64Low = mix(props.positions64Low, props.nextPositions64Low, vertexPositions.x);\n#else\n  pos = props.positions;\n  pos64Low = props.positions64Low;\n#endif\n\n  if (extruded) {\n    pos.z += props.elevations * vertexPositions.y * elevationScale;\n  }\n  gl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);\n\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  if (extruded) {\n  #ifdef IS_SIDE_VERTEX\n    normal = vec3(\n      props.positions.y - props.nextPositions.y + (props.positions64Low.y - props.nextPositions64Low.y),\n      props.nextPositions.x - props.positions.x + (props.nextPositions64Low.x - props.positions64Low.x),\n      0.0);\n    normal = project_offset_normal(normal);\n  #else\n    normal = project_normal(vec3(0.0, 0.0, 1.0));\n  #endif\n    geometry.normal = normal;\n    vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, normal);\n    vColor = vec4(lightColor, colors.a * opacity);\n  } else {\n    vColor = vec4(colors.rgb, colors.a * opacity);\n  }\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",zb="#define SHADER_NAME solid-polygon-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 positions64Low;\nattribute float elevations;\nattribute vec4 fillColors;\nattribute vec4 lineColors;\nattribute vec3 pickingColors;\n\n".concat(Ub,"\n\nvoid main(void) {\n  PolygonProps props;\n\n  props.positions = positions;\n  props.positions64Low = positions64Low;\n  props.elevations = elevations;\n  props.fillColors = fillColors;\n  props.lineColors = lineColors;\n  props.pickingColors = pickingColors;\n\n  calculatePosition(props);\n}\n"),Bb="#define SHADER_NAME solid-polygon-layer-vertex-shader-side\n#define IS_SIDE_VERTEX\n\n\nattribute vec3 instancePositions;\nattribute vec3 nextPositions;\nattribute vec3 instancePositions64Low;\nattribute vec3 nextPositions64Low;\nattribute float instanceElevations;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\n".concat(Ub,"\n\nvoid main(void) {\n  PolygonProps props;\n\n  #if RING_WINDING_ORDER_CW == 1\n    props.positions = instancePositions;\n    props.positions64Low = instancePositions64Low;\n    props.nextPositions = nextPositions;\n    props.nextPositions64Low = nextPositions64Low;\n  #else\n    props.positions = nextPositions;\n    props.positions64Low = nextPositions64Low;\n    props.nextPositions = instancePositions;\n    props.nextPositions64Low = instancePositions64Low;\n  #endif\n  props.elevations = instanceElevations;\n  props.fillColors = instanceFillColors;\n  props.lineColors = instanceLineColors;\n  props.pickingColors = instancePickingColors;\n\n  calculatePosition(props);\n}\n"),Gb=[0,0,0,255],Vb={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",_full3d:!1,elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:e=>e.polygon},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:Gb},getLineColor:{type:"accessor",value:Gb},material:!0},Hb={enter:(e,t)=>t.length?t.subarray(t.length-e.length):e};class qb extends Bh{constructor(...e){super(...e),c(this,"state",void 0)}getShaders(e){return super.getShaders({vs:"top"===e?zb:Bb,fs:"#define SHADER_NAME solid-polygon-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",defines:{RING_WINDING_ORDER_CW:this.props._normalize||"CCW"!==this.props._windingOrder?1:0},modules:[Jy,Sb,ev]})}get wrapLongitude(){return!1}initializeState(){const{gl:e,viewport:t}=this.context;let{coordinateSystem:n}=this.props;const{_full3d:i}=this.props;let r;t.isGeospatial&&n===ri.DEFAULT&&(n=ri.LNGLAT),n===ri.LNGLAT&&(r=i?t.projectPosition.bind(t):t.projectFlat.bind(t)),this.setState({numInstances:0,polygonTesselator:new Fb({preproject:r,fp64:this.use64bitPositions(),IndexType:!e||Jo(e,Yo)?Uint32Array:Uint16Array})});const o=this.getAttributeManager(),a=!0;o.remove(["instancePickingColors"]),o.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:a},positions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:Hb,accessor:"getPolygon",update:this.calculatePositions,noAlloc:a,shaderAttributes:{positions:{vertexOffset:0,divisor:0},instancePositions:{vertexOffset:0,divisor:1},nextPositions:{vertexOffset:1,divisor:1}}},vertexValid:{size:1,divisor:1,type:5121,update:this.calculateVertexValid,noAlloc:a},elevations:{size:1,transition:Hb,accessor:"getElevation",shaderAttributes:{elevations:{divisor:0},instanceElevations:{divisor:1}}},fillColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:Hb,accessor:"getFillColor",defaultValue:Gb,shaderAttributes:{fillColors:{divisor:0},instanceFillColors:{divisor:1}}},lineColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:Hb,accessor:"getLineColor",defaultValue:Gb,shaderAttributes:{lineColors:{divisor:0},instanceLineColors:{divisor:1}}},pickingColors:{size:3,type:5121,accessor:(e,{index:t,target:n})=>this.encodePickingColor(e&&e.__source?e.__source.index:t,n),shaderAttributes:{pickingColors:{divisor:0},instancePickingColors:{divisor:1}}}})}getPickingInfo(e){const t=super.getPickingInfo(e),{index:n}=t,{data:i}=this.props;return i[0]&&i[0].__source&&(t.object=i.find((e=>e.__source.index===n))),t}disablePickingIndex(e){const{data:t}=this.props;if(t[0]&&t[0].__source)for(let n=0;n<t.length;n++)t[n].__source.index===e&&this._disablePickingIndex(n);else this._disablePickingIndex(e)}draw({uniforms:e}){const{extruded:t,filled:n,wireframe:i,elevationScale:r}=this.props,{topModel:o,sideModel:a,polygonTesselator:s}=this.state,l={...e,extruded:Boolean(t),elevationScale:r};a&&(a.setInstanceCount(s.instanceCount-1),a.setUniforms(l),i&&(a.setDrawMode(3),a.setUniforms({isWireframe:!0}).draw()),n&&(a.setDrawMode(6),a.setUniforms({isWireframe:!1}).draw())),o&&(o.setVertexCount(s.vertexCount),o.setUniforms(l).draw())}updateState(e){super.updateState(e),this.updateGeometry(e);const{props:t,oldProps:n,changeFlags:i}=e,r=this.getAttributeManager();var o;(i.extensionsChanged||t.filled!==n.filled||t.extruded!==n.extruded)&&(null===(o=this.state.models)||void 0===o||o.forEach((e=>e.delete())),this.setState(this._getModels(this.context.gl)),r.invalidateAll())}updateGeometry({props:e,oldProps:t,changeFlags:n}){if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPolygon)){const{polygonTesselator:t}=this.state,i=e.data.attributes||{};t.updateGeometry({data:e.data,normalize:e._normalize,geometryBuffer:i.getPolygon,buffers:i,getGeometry:e.getPolygon,positionFormat:e.positionFormat,wrapLongitude:e.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:n.dataChanged,full3d:e._full3d}),this.setState({numInstances:t.instanceCount,startIndices:t.vertexStarts}),n.dataChanged||this.getAttributeManager().invalidateAll()}}_getModels(e){const{id:t,filled:n,extruded:i}=this.props;let r,o;if(n){const n=this.getShaders("top");n.defines.NON_INSTANCED_MODEL=1,r=new Ju(e,{...n,id:"".concat(t,"-top"),drawMode:4,attributes:{vertexPositions:new Float32Array([0,1])},uniforms:{isWireframe:!1,isSideVertex:!1},vertexCount:0,isIndexed:!0})}return i&&(o=new Ju(e,{...this.getShaders("side"),id:"".concat(t,"-side"),geometry:new nv({drawMode:1,vertexCount:4,attributes:{vertexPositions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),instanceCount:0,isInstanced:1}),o.userData.excludeAttributes={indices:!0}),{models:[o,r].filter(Boolean),topModel:r,sideModel:o}}calculateIndices(e){const{polygonTesselator:t}=this.state;e.startIndices=t.indexStarts,e.value=t.get("indices")}calculatePositions(e){const{polygonTesselator:t}=this.state;e.startIndices=t.vertexStarts,e.value=t.get("positions")}calculateVertexValid(e){e.value=this.state.polygonTesselator.get("vertexValid")}}c(qb,"defaultProps",Vb),c(qb,"layerName","SolidPolygonLayer");const Wb={circle:{type:Ev,props:{filled:"filled",stroked:"stroked",lineWidthMaxPixels:"lineWidthMaxPixels",lineWidthMinPixels:"lineWidthMinPixels",lineWidthScale:"lineWidthScale",lineWidthUnits:"lineWidthUnits",pointRadiusMaxPixels:"radiusMaxPixels",pointRadiusMinPixels:"radiusMinPixels",pointRadiusScale:"radiusScale",pointRadiusUnits:"radiusUnits",pointAntialiasing:"antialiasing",pointBillboard:"billboard",getFillColor:"getFillColor",getLineColor:"getLineColor",getLineWidth:"getLineWidth",getPointRadius:"getRadius"}},icon:{type:_v,props:{iconAtlas:"iconAtlas",iconMapping:"iconMapping",iconSizeMaxPixels:"sizeMaxPixels",iconSizeMinPixels:"sizeMinPixels",iconSizeScale:"sizeScale",iconSizeUnits:"sizeUnits",iconAlphaCutoff:"alphaCutoff",iconBillboard:"billboard",getIcon:"getIcon",getIconAngle:"getAngle",getIconColor:"getColor",getIconPixelOffset:"getPixelOffset",getIconSize:"getSize"}},text:{type:Kv,props:{textSizeMaxPixels:"sizeMaxPixels",textSizeMinPixels:"sizeMinPixels",textSizeScale:"sizeScale",textSizeUnits:"sizeUnits",textBackground:"background",textBackgroundPadding:"backgroundPadding",textFontFamily:"fontFamily",textFontWeight:"fontWeight",textLineHeight:"lineHeight",textMaxWidth:"maxWidth",textOutlineColor:"outlineColor",textOutlineWidth:"outlineWidth",textWordBreak:"wordBreak",textCharacterSet:"characterSet",textBillboard:"billboard",textFontSettings:"fontSettings",getText:"getText",getTextAngle:"getAngle",getTextColor:"getColor",getTextPixelOffset:"getPixelOffset",getTextSize:"getSize",getTextAnchor:"getTextAnchor",getTextAlignmentBaseline:"getAlignmentBaseline",getTextBackgroundColor:"getBackgroundColor",getTextBorderColor:"getBorderColor",getTextBorderWidth:"getBorderWidth"}}},Xb={type:Pb,props:{lineWidthUnits:"widthUnits",lineWidthScale:"widthScale",lineWidthMinPixels:"widthMinPixels",lineWidthMaxPixels:"widthMaxPixels",lineJointRounded:"jointRounded",lineCapRounded:"capRounded",lineMiterLimit:"miterLimit",lineBillboard:"billboard",getLineColor:"getColor",getLineWidth:"getWidth"}},Yb={type:qb,props:{extruded:"extruded",filled:"filled",wireframe:"wireframe",elevationScale:"elevationScale",material:"material",_full3d:"_full3d",getElevation:"getElevation",getFillColor:"getFillColor",getLineColor:"getLineColor"}};function Kb({type:e,props:t}){const n={};for(const i in t)n[i]=e.defaultProps[t[i]];return n}function Zb(e,t){const{transitions:n,updateTriggers:i}=e.props,r={updateTriggers:{},transitions:n&&{getPosition:n.geometry}};for(const o in t){const a=t[o];let s=e.props[o];o.startsWith("get")&&(s=e.getSubLayerAccessor(s),r.updateTriggers[a]=i[o],n&&(r.transitions[a]=n[o])),r[a]=s}return r}function Jb(e,t,n={}){const i={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},{startRow:r=0,endRow:o=e.length}=n;for(let n=r;n<o;n++){const r=e[n],{geometry:o}=r;if(o)if("GeometryCollection"===o.type){Je.assert(Array.isArray(o.geometries),"GeoJSON does not have geometries array");const{geometries:e}=o;for(let o=0;o<e.length;o++)$b(e[o],i,t,r,n)}else $b(o,i,t,r,n)}return i}function $b(e,t,n,i,r){const{type:o,coordinates:a}=e,{pointFeatures:s,lineFeatures:l,polygonFeatures:c,polygonOutlineFeatures:u}=t;if(function(e,t){let n=Qb[e];for(Je.assert(n,"Unknown GeoJSON type ".concat(e));t&&--n>0;)t=t[0];return t&&Number.isFinite(t[0])}(o,a))switch(o){case"Point":s.push(n({geometry:e},i,r));break;case"MultiPoint":a.forEach((e=>{s.push(n({geometry:{type:"Point",coordinates:e}},i,r))}));break;case"LineString":l.push(n({geometry:e},i,r));break;case"MultiLineString":a.forEach((e=>{l.push(n({geometry:{type:"LineString",coordinates:e}},i,r))}));break;case"Polygon":c.push(n({geometry:e},i,r)),a.forEach((e=>{u.push(n({geometry:{type:"LineString",coordinates:e}},i,r))}));break;case"MultiPolygon":a.forEach((e=>{c.push(n({geometry:{type:"Polygon",coordinates:e}},i,r)),e.forEach((e=>{u.push(n({geometry:{type:"LineString",coordinates:e}},i,r))}))}))}else Je.warn("".concat(o," coordinates are malformed"))()}const Qb={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};function e_(e){return e.geometry.coordinates}const t_=["points","linestrings","polygons"],n_={...Kb(Wb.circle),...Kb(Wb.icon),...Kb(Wb.text),...Kb(Xb),...Kb(Yb),stroked:!0,filled:!0,extruded:!1,wireframe:!1,_full3d:!1,iconAtlas:{type:"object",value:null},iconMapping:{type:"object",value:{}},getIcon:{type:"accessor",value:e=>e.properties.icon},getText:{type:"accessor",value:e=>e.properties.text},pointType:"circle",getRadius:{deprecatedFor:"getPointRadius"}};class i_ extends uv{initializeState(){this.state={layerProps:{},features:{}}}updateState({props:e,changeFlags:t}){if(!t.dataChanged)return;const{data:n}=this.props,i=n&&"points"in n&&"polygons"in n&&"lines"in n;this.setState({binary:i}),i?this._updateStateBinary({props:e,changeFlags:t}):this._updateStateJSON({props:e,changeFlags:t})}_updateStateBinary({props:e,changeFlags:t}){const n=function(e,t){const n={points:{},lines:{},polygons:{},polygonsOutline:{}},{points:i,lines:r,polygons:o}=e,a=function(e,t){const n={points:null,lines:null,polygons:null};for(const i in n){const r=e[i].globalFeatureIds.value;n[i]=new Uint8ClampedArray(3*r.length);const o=[];for(let e=0;e<r.length;e++)t(r[e],o),n[i][3*e+0]=o[0],n[i][3*e+1]=o[1],n[i][3*e+2]=o[2]}return n}(e,t);return n.points.data={length:i.positions.value.length/i.positions.size,attributes:{...i.attributes,getPosition:i.positions,instancePickingColors:{size:3,value:a.points}},properties:i.properties,numericProps:i.numericProps,featureIds:i.featureIds},n.lines.data={length:r.pathIndices.value.length-1,startIndices:r.pathIndices.value,attributes:{...r.attributes,getPath:r.positions,instancePickingColors:{size:3,value:a.lines}},properties:r.properties,numericProps:r.numericProps,featureIds:r.featureIds},n.lines._pathType="open",n.polygons.data={length:o.polygonIndices.value.length-1,startIndices:o.polygonIndices.value,attributes:{...o.attributes,getPolygon:o.positions,pickingColors:{size:3,value:a.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},n.polygons._normalize=!1,o.triangles&&(n.polygons.data.attributes.indices=o.triangles.value),n.polygonsOutline.data={length:o.primitivePolygonIndices.value.length-1,startIndices:o.primitivePolygonIndices.value,attributes:{...o.attributes,getPath:o.positions,instancePickingColors:{size:3,value:a.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},n.polygonsOutline._pathType="open",n}(e.data,this.encodePickingColor);this.setState({layerProps:n})}_updateStateJSON({props:e,changeFlags:t}){const n=function(e){if(Array.isArray(e))return e;switch(Je.assert(e.type,"GeoJSON does not have type"),e.type){case"Feature":return[e];case"FeatureCollection":return Je.assert(Array.isArray(e.features),"GeoJSON does not have features array"),e.features;default:return[{geometry:e}]}}(e.data),i=this.getSubLayerRow.bind(this);let r={};const o={};if(Array.isArray(t.dataChanged)){const e=this.state.features;for(const t in e)r[t]=e[t].slice(),o[t]=[];for(const a of t.dataChanged){const t=Jb(n,i,a);for(const n in e)o[n].push(hv({data:r[n],getIndex:e=>e.__source.index,dataRange:a,replace:t[n]}))}}else r=Jb(n,i);const a=function(e,t){const n={points:{},lines:{},polygons:{},polygonsOutline:{}},{pointFeatures:i,lineFeatures:r,polygonFeatures:o,polygonOutlineFeatures:a}=e;return n.points.data=i,n.points._dataDiff=t.pointFeatures&&(()=>t.pointFeatures),n.points.getPosition=e_,n.lines.data=r,n.lines._dataDiff=t.lineFeatures&&(()=>t.lineFeatures),n.lines.getPath=e_,n.polygons.data=o,n.polygons._dataDiff=t.polygonFeatures&&(()=>t.polygonFeatures),n.polygons.getPolygon=e_,n.polygonsOutline.data=a,n.polygonsOutline._dataDiff=t.polygonOutlineFeatures&&(()=>t.polygonOutlineFeatures),n.polygonsOutline.getPath=e_,n}(r,o);this.setState({features:r,featuresDiff:o,layerProps:a})}getPickingInfo(e){const t=super.getPickingInfo(e),{index:n,sourceLayer:i}=t;return t.featureType=t_.find((e=>i.id.startsWith("".concat(this.id,"-").concat(e,"-")))),n>=0&&i.id.startsWith("".concat(this.id,"-points-text"))&&this.state.binary&&(t.index=this.props.data.points.globalFeatureIds.value[n]),t}_updateAutoHighlight(e){const t="".concat(this.id,"-points-"),n="points"===e.featureType;for(const i of this.getSubLayers())i.id.startsWith(t)===n&&i.updateAutoHighlight(e)}_renderPolygonLayer(){const{extruded:e,wireframe:t}=this.props,{layerProps:n}=this.state,i="polygons-fill",r=this.shouldRenderSubLayer(i,n.polygons.data)&&this.getSubLayerClass(i,Yb.type);if(r){const o=Zb(this,Yb.props),a=e&&t;return a||delete o.getLineColor,o.updateTriggers.lineColors=a,new r(o,this.getSubLayerProps({id:i,updateTriggers:o.updateTriggers}),n.polygons)}return null}_renderLineLayers(){const{extruded:e,stroked:t}=this.props,{layerProps:n}=this.state,i="polygons-stroke",r="linestrings",o=!e&&t&&this.shouldRenderSubLayer(i,n.polygonsOutline.data)&&this.getSubLayerClass(i,Xb.type),a=this.shouldRenderSubLayer(r,n.lines.data)&&this.getSubLayerClass(r,Xb.type);if(o||a){const e=Zb(this,Xb.props);return[o&&new o(e,this.getSubLayerProps({id:i,updateTriggers:e.updateTriggers}),n.polygonsOutline),a&&new a(e,this.getSubLayerProps({id:r,updateTriggers:e.updateTriggers}),n.lines)]}return null}_renderPointLayers(){const{pointType:e}=this.props,{layerProps:t,binary:n}=this.state;let{highlightedObjectIndex:i}=this.props;!n&&Number.isFinite(i)&&(i=t.points.data.findIndex((e=>e.__source.index===i)));const r=new Set(e.split("+")),o=[];for(const e of r){const r="points-".concat(e),a=Wb[e],s=a&&this.shouldRenderSubLayer(r,t.points.data)&&this.getSubLayerClass(r,a.type);if(s){const l=Zb(this,a.props);let c=t.points;if("text"===e&&n){const{instancePickingColors:e,...t}=c.data.attributes;c={...c,data:{...c.data,attributes:t}}}o.push(new s(l,this.getSubLayerProps({id:r,updateTriggers:l.updateTriggers,highlightedObjectIndex:i}),c))}}return o}renderLayers(){const{extruded:e}=this.props,t=this._renderPolygonLayer();return[!e&&t,this._renderLineLayers(),this._renderPointLayers(),e&&t]}getSubLayerAccessor(e){const{binary:t}=this.state;return t&&"function"==typeof e?(t,n)=>{const{data:i,index:r}=n,o=function(e,t){if(!e)return null;const n="startIndices"in e?e.startIndices[t]:t,i=e.featureIds.value[n];return-1!==n?function(e,t,n){const i={properties:{...e.properties[t]}};for(const t in e.numericProps)i.properties[t]=e.numericProps[t].value[n];return i}(e,i,n):null}(i,r);return e(o,n)}:super.getSubLayerAccessor(e)}}c(i_,"layerName","GeoJsonLayer"),c(i_,"defaultProps",n_);const r_={id:"request-scheduler",throttleRequests:!0,maxRequests:6};class o_{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c(this,"props",void 0),c(this,"stats",void 0),c(this,"activeRequestCount",0),c(this,"requestQueue",[]),c(this,"requestMap",new Map),c(this,"deferredUpdate",null),this.props={...r_,...e},this.stats=new at({id:this.props.id}),this.stats.get("Queued Requests"),this.stats.get("Active Requests"),this.stats.get("Cancelled Requests"),this.stats.get("Queued Requests Ever"),this.stats.get("Active Requests Ever")}scheduleRequest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>0;if(!this.props.throttleRequests)return Promise.resolve({done:()=>{}});if(this.requestMap.has(e))return this.requestMap.get(e);const n={handle:e,priority:0,getPriority:t},i=new Promise((e=>(n.resolve=e,n)));return this.requestQueue.push(n),this.requestMap.set(e,i),this._issueNewRequests(),i}_issueRequest(e){const{handle:t,resolve:n}=e;let i=!1;const r=()=>{i||(i=!0,this.requestMap.delete(t),this.activeRequestCount--,this._issueNewRequests())};return this.activeRequestCount++,n?n({done:r}):Promise.resolve({done:r})}_issueNewRequests(){this.deferredUpdate||(this.deferredUpdate=setTimeout((()=>this._issueNewRequestsAsync()),0))}_issueNewRequestsAsync(){this.deferredUpdate=null;const e=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(0!==e){this._updateAllRequests();for(let t=0;t<e;++t){const e=this.requestQueue.shift();e&&this._issueRequest(e)}}}_updateAllRequests(){const e=this.requestQueue;for(let t=0;t<e.length;++t){const n=e[t];this._updateRequest(n)||(e.splice(t,1),this.requestMap.delete(n.handle),t--)}e.sort(((e,t)=>e.priority-t.priority))}_updateRequest(e){return e.priority=e.getPriority(e.handle),!(e.priority<0&&(e.resolve(null),1))}}class a_{constructor(e){c(this,"index",void 0),c(this,"isVisible",void 0),c(this,"isSelected",void 0),c(this,"parent",void 0),c(this,"children",void 0),c(this,"content",void 0),c(this,"state",void 0),c(this,"layers",void 0),c(this,"id",void 0),c(this,"bbox",void 0),c(this,"zoom",void 0),c(this,"userData",void 0),c(this,"_abortController",void 0),c(this,"_loader",void 0),c(this,"_loaderId",void 0),c(this,"_isLoaded",void 0),c(this,"_isCancelled",void 0),c(this,"_needsReload",void 0),this.index=e,this.isVisible=!1,this.isSelected=!1,this.parent=null,this.children=[],this.content=null,this._loader=void 0,this._abortController=null,this._loaderId=0,this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1}get data(){return this.isLoading&&this._loader?this._loader.then((()=>this.data)):this.content}get isLoaded(){return this._isLoaded&&!this._needsReload}get isLoading(){return Boolean(this._loader)&&!this._isCancelled}get needsReload(){return this._needsReload||this._isCancelled}get byteLength(){const e=this.content?this.content.byteLength:0;return Number.isFinite(e)||console.error("byteLength not defined in tile data"),e}async _loadData({getData:e,requestScheduler:t,onLoad:n,onError:i}){const{index:r,id:o,bbox:a,userData:s,zoom:l}=this,c=this._loaderId;this._abortController=new AbortController;const{signal:u}=this._abortController,h=await t.scheduleRequest(this,(e=>e.isSelected?1:-1));if(!h)return void(this._isCancelled=!0);if(this._isCancelled)return void h.done();let d,p=null;try{p=await e({index:r,id:o,bbox:a,userData:s,zoom:l,signal:u})}catch(e){d=e||!0}finally{h.done()}c===this._loaderId&&(this._loader=void 0,this.content=p,!this._isCancelled||p?(this._isLoaded=!0,this._isCancelled=!1,d?i(d,this):n(this)):this._isLoaded=!1)}loadData(e){return this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1,this._loaderId++,this._loader=this._loadData(e),this._loader}setNeedsReload(){this.isLoading&&(this.abort(),this._loader=void 0),this._needsReload=!0}abort(){var e;this.isLoaded||(this._isCancelled=!0,null===(e=this._abortController)||void 0===e||e.abort())}}const s_=Math.PI/180,l_=180/Math.PI,c_=6370972,u_=256;function h_(){const e=u_/c_,t=Math.PI/180*u_;return{unitsPerMeter:[e,e,e],unitsPerMeter2:[0,0,0],metersPerUnit:[1/e,1/e,1/e],unitsPerDegree:[t,t,e],unitsPerDegree2:[0,0,0],degreesPerUnit:[1/t,1/t,1/e]}}class d_ extends di{constructor(e={}){const{latitude:t=0,longitude:n=0,zoom:i=0,nearZMultiplier:r=.1,farZMultiplier:o=2,resolution:a=10}=e;let{height:s,altitude:l=1.5}=e;s=s||1,l=Math.max(.75,l);const u=(new ei).lookAt({eye:[0,-l,0],up:[0,0,1]}),h=Math.pow(2,i);u.rotateX(t*s_),u.rotateZ(-n*s_),u.scale(h/s);const d=Math.atan(.5/l),p=2*u_*h/s;super({...e,height:s,viewMatrix:u,longitude:n,latitude:t,zoom:i,distanceScales:h_(),fovyRadians:2*d,focalDistance:l,near:r,far:Math.min(2,1/p+1)*l*o}),c(this,"longitude",void 0),c(this,"latitude",void 0),c(this,"resolution",void 0),this.latitude=t,this.longitude=n,this.resolution=a}get projectionMode(){return oi.GLOBE}getDistanceScales(){return this.distanceScales}getBounds(e={}){const t={targetZ:e.z||0},n=this.unproject([0,this.height/2],t),i=this.unproject([this.width/2,0],t),r=this.unproject([this.width,this.height/2],t),o=this.unproject([this.width/2,this.height],t);return r[0]<this.longitude&&(r[0]+=360),n[0]>this.longitude&&(n[0]-=360),[Math.min(n[0],r[0],i[0],o[0]),Math.min(n[1],r[1],i[1],o[1]),Math.max(n[0],r[0],i[0],o[0]),Math.max(n[1],r[1],i[1],o[1])]}unproject(e,{topLeft:t=!0,targetZ:n}={}){const[i,r,o]=e,a=t?r:this.height-r,{pixelUnprojectionMatrix:s}=this;let l;if(Number.isFinite(o))l=p_(s,[i,a,o,1]);else{const e=p_(s,[i,a,-1,1]),t=p_(s,[i,a,1,1]),r=((n||0)/c_+1)*u_,o=q(V([],e,t)),c=q(e),u=q(t),h=(4*c*u-(o-c-u)**2)/16*4/o;l=function(e,t,n,i){var r=t[0],o=t[1],a=t[2];return e[0]=r+i*(n[0]-r),e[1]=o+i*(n[1]-o),e[2]=a+i*(n[2]-a),e}([],e,t,(Math.sqrt(c-h)-Math.sqrt(Math.max(0,r*r-h)))/Math.sqrt(o))}const[c,u,h]=this.unprojectPosition(l);return Number.isFinite(o)?[c,u,h]:Number.isFinite(n)?[c,u,n]:[c,u]}projectPosition(e){const[t,n,i=0]=e,r=t*s_,o=n*s_,a=Math.cos(o),s=(i/c_+1)*u_;return[Math.sin(r)*a*s,-Math.cos(r)*a*s,Math.sin(o)*s]}unprojectPosition(e){const[t,n,i]=e,r=H(e),o=Math.asin(i/r);return[Math.atan2(t,-n)*l_,o*l_,(r/u_-1)*c_]}projectFlat(e){return e}unprojectFlat(e){return e}panByPosition(e,t){const n=this.unproject(t);return{longitude:e[0]-n[0]+this.longitude,latitude:e[1]-n[1]+this.latitude}}}function p_(e,t){const n=P([],t,e);return w(n,n,1/n[3]),n}const f_=-1,g_=new Bn,m_=new Bn;class y_{constructor(e=[0,0,0],t=[0,0,0],n){c(this,"center",void 0),c(this,"halfDiagonal",void 0),c(this,"minimum",void 0),c(this,"maximum",void 0),n=n||g_.copy(e).add(t).scale(.5),this.center=new Bn(n),this.halfDiagonal=new Bn(t).subtract(this.center),this.minimum=new Bn(e),this.maximum=new Bn(t)}clone(){return new y_(this.minimum,this.maximum,this.center)}equals(e){return this===e||Boolean(e)&&this.minimum.equals(e.minimum)&&this.maximum.equals(e.maximum)}transform(e){return this.center.transformAsPoint(e),this.halfDiagonal.transform(e),this.minimum.transform(e),this.maximum.transform(e),this}intersectPlane(e){const{halfDiagonal:t}=this,n=m_.from(e.normal),i=t.x*Math.abs(n.x)+t.y*Math.abs(n.y)+t.z*Math.abs(n.z),r=this.center.dot(n)+e.distance;return r-i>0?1:r+i<0?f_:0}distanceTo(e){return Math.sqrt(this.distanceSquaredTo(e))}distanceSquaredTo(e){const t=g_.from(e).subtract(this.center),{halfDiagonal:n}=this;let i,r=0;return i=Math.abs(t.x)-n.x,i>0&&(r+=i*i),i=Math.abs(t.y)-n.y,i>0&&(r+=i*i),i=Math.abs(t.z)-n.z,i>0&&(r+=i*i),r}}const v_=new Bn,b_=new Bn;class __{constructor(e=[0,0,0],t=0){c(this,"center",void 0),c(this,"radius",void 0),this.radius=-0,this.center=new Bn,this.fromCenterRadius(e,t)}fromCenterRadius(e,t){return this.center.from(e),this.radius=t,this}fromCornerPoints(e,t){return t=v_.from(t),this.center=(new Bn).from(e).add(t).scale(.5),this.radius=this.center.distance(t),this}equals(e){return this===e||Boolean(e)&&this.center.equals(e.center)&&this.radius===e.radius}clone(){return new __(this.center,this.radius)}union(e){const t=this.center,n=this.radius,i=e.center,r=e.radius,o=v_.copy(i).subtract(t),a=o.magnitude();if(n>=a+r)return this.clone();if(r>=a+n)return e.clone();const s=.5*(n+a+r);return b_.copy(o).scale((-n+s)/a).add(t),this.center.copy(b_),this.radius=s,this}expand(e){const t=v_.from(e).subtract(this.center).magnitude();return t>this.radius&&(this.radius=t),this}transform(e){this.center.transform(e);const t=function(e,t){var n=t[0],i=t[1],r=t[2],o=t[4],a=t[5],s=t[6],l=t[8],c=t[9],u=t[10];return e[0]=Math.hypot(n,i,r),e[1]=Math.hypot(o,a,s),e[2]=Math.hypot(l,c,u),e}(v_,e);return this.radius=Math.max(t[0],Math.max(t[1],t[2]))*this.radius,this}distanceSquaredTo(e){const t=this.distanceTo(e);return t*t}distanceTo(e){const t=v_.from(e).subtract(this.center);return Math.max(0,t.len()-this.radius)}intersectPlane(e){const t=this.center,n=this.radius,i=e.normal.dot(t)+e.distance;return i<-n?f_:i<n?0:1}}function w_(e,t,n){var i=t[0],r=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=n[0],p=n[1],f=n[2],g=n[3],m=n[4],y=n[5],v=n[6],b=n[7],_=n[8];return e[0]=d*i+p*a+f*c,e[1]=d*r+p*s+f*u,e[2]=d*o+p*l+f*h,e[3]=g*i+m*a+y*c,e[4]=g*r+m*s+y*u,e[5]=g*o+m*l+y*h,e[6]=v*i+b*a+_*c,e[7]=v*r+b*s+_*u,e[8]=v*o+b*l+_*h,e}function P_(e,t,n){var i=n[0],r=n[1];return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=r*t[3],e[4]=r*t[4],e[5]=r*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}var E_;!function(e){e[e.COL0ROW0=0]="COL0ROW0",e[e.COL0ROW1=1]="COL0ROW1",e[e.COL0ROW2=2]="COL0ROW2",e[e.COL1ROW0=3]="COL1ROW0",e[e.COL1ROW1=4]="COL1ROW1",e[e.COL1ROW2=5]="COL1ROW2",e[e.COL2ROW0=6]="COL2ROW0",e[e.COL2ROW1=7]="COL2ROW1",e[e.COL2ROW2=8]="COL2ROW2"}(E_||(E_={}));const x_=Object.freeze([1,0,0,0,1,0,0,0,1]);class A_ extends Xn{static get IDENTITY(){return S_||(S_=new A_,Object.freeze(S_)),S_}static get ZERO(){return C_||(C_=new A_([0,0,0,0,0,0,0,0,0]),Object.freeze(C_)),C_}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return E_}constructor(e,...t){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):t.length>0?this.copy([e,...t]):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this.check()}identity(){return this.copy(x_)}fromObject(e){return this.check()}fromQuaternion(e){return function(e,t){var n=t[0],i=t[1],r=t[2],o=t[3],a=n+n,s=i+i,l=r+r,c=n*a,u=i*a,h=i*s,d=r*a,p=r*s,f=r*l,g=o*a,m=o*s,y=o*l;e[0]=1-h-f,e[3]=u-y,e[6]=d+m,e[1]=u+y,e[4]=1-c-f,e[7]=p-g,e[2]=d-m,e[5]=p+g,e[8]=1-c-h}(this,e),this.check()}set(e,t,n,i,r,o,a,s,l){return this[0]=e,this[1]=t,this[2]=n,this[3]=i,this[4]=r,this[5]=o,this[6]=a,this[7]=s,this[8]=l,this.check()}setRowMajor(e,t,n,i,r,o,a,s,l){return this[0]=e,this[1]=i,this[2]=a,this[3]=t,this[4]=r,this[5]=s,this[6]=n,this[7]=o,this[8]=l,this.check()}determinant(){return t=(e=this)[0],n=e[1],i=e[2],r=e[3],o=e[4],a=e[5],s=e[6],l=e[7],t*((c=e[8])*o-a*l)+n*(-c*r+a*s)+i*(l*r-o*s);var e,t,n,i,r,o,a,s,l,c}transpose(){return function(e,t){if(e===t){var n=t[1],i=t[2],r=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=i,e[7]=r}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8]}(this,this),this.check()}invert(){return function(e,t){var n=t[0],i=t[1],r=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],h=u*a-s*c,d=-u*o+s*l,p=c*o-a*l,f=n*h+i*d+r*p;f&&(f=1/f,e[0]=h*f,e[1]=(-u*i+r*c)*f,e[2]=(s*i-r*a)*f,e[3]=d*f,e[4]=(u*n-r*l)*f,e[5]=(-s*n+r*o)*f,e[6]=p*f,e[7]=(-c*n+i*l)*f,e[8]=(a*n-i*o)*f)}(this,this),this.check()}multiplyLeft(e){return w_(this,e,this),this.check()}multiplyRight(e){return w_(this,this,e),this.check()}rotate(e){return function(e,t,n){var i=t[0],r=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=Math.sin(n),p=Math.cos(n);e[0]=p*i+d*a,e[1]=p*r+d*s,e[2]=p*o+d*l,e[3]=p*a-d*i,e[4]=p*s-d*r,e[5]=p*l-d*o,e[6]=c,e[7]=u,e[8]=h}(this,this,e),this.check()}scale(e){return Array.isArray(e)?P_(this,this,e):P_(this,this,[e,e]),this.check()}translate(e){return function(e,t,n){var i=t[0],r=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=n[0],p=n[1];e[0]=i,e[1]=r,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=d*i+p*a+c,e[7]=d*r+p*s+u,e[8]=d*o+p*l+h}(this,this,e),this.check()}transform(e,t){let n;switch(e.length){case 2:n=function(e,t,n){var i=t[0],r=t[1];return e[0]=n[0]*i+n[3]*r+n[6],e[1]=n[1]*i+n[4]*r+n[7],e}(t||[-0,-0],e,this);break;case 3:n=B(t||[-0,-0,-0],e,this);break;case 4:n=kn(t||[-0,-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return On(n,e.length),n}transformVector(e,t){return this.transform(e,t)}transformVector2(e,t){return this.transform(e,t)}transformVector3(e,t){return this.transform(e,t)}}let C_,S_,T_;class R_ extends Nn{static get ZERO(){return T_||(T_=new R_(0,0,0,0),Object.freeze(T_)),T_}constructor(e=0,t=0,n=0,i=0){super(-0,-0,-0,-0),d(e)&&1===arguments.length?this.copy(e):(u.debug&&(Dn(e),Dn(t),Dn(n),Dn(i)),this[0]=e,this[1]=t,this[2]=n,this[3]=i)}set(e,t,n,i){return this[0]=e,this[1]=t,this[2]=n,this[3]=i,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}fromObject(e){return u.debug&&(Dn(e.x),Dn(e.y),Dn(e.z),Dn(e.w)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e.w=this[3],e}get ELEMENTS(){return 4}get z(){return this[2]}set z(e){this[2]=Dn(e)}get w(){return this[3]}set w(e){this[3]=Dn(e)}transform(e){return z(this,this,e),this.check()}transformByMatrix3(e){return kn(this,this,e),this.check()}transformByMatrix2(e){return function(e,t,n){const i=t[0],r=t[1];e[0]=n[0]*i+n[2]*r,e[1]=n[1]*i+n[3]*r,e[2]=t[2],e[3]=t[3]}(this,this,e),this.check()}transformByQuaternion(e){return G(this,this,e),this.check()}applyMatrix4(e){return e.transform(this,this),this}}function I_(){var e=new _(4);return _!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function M_(e,t,n){n*=.5;var i=Math.sin(n);return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=Math.cos(n),e}function L_(e,t,n){var i=t[0],r=t[1],o=t[2],a=t[3],s=n[0],l=n[1],c=n[2],u=n[3];return e[0]=i*u+a*s+r*c-o*l,e[1]=r*u+a*l+o*s-i*c,e[2]=o*u+a*c+i*l-r*s,e[3]=a*u-i*s-r*l-o*c,e}var D_,O_,j_,N_=w,F_=function(e){var t=e[0],n=e[1],i=e[2],r=e[3];return Math.hypot(t,n,i,r)},k_=function(e){var t=e[0],n=e[1],i=e[2],r=e[3];return t*t+n*n+i*i+r*r},U_=(D_=N(),O_=F(1,0,0),j_=F(0,1,0),function(e,t,n){var i=k(t,n);return i<-.999999?(U(D_,O_,t),H(D_)<1e-6&&U(D_,j_,t),function(e,t){var n=t[0],i=t[1],r=t[2],o=n*n+i*i+r*r;o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o}(D_,D_),M_(e,D_,Math.PI),e):i>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(U(D_,t,n),e[0]=D_[0],e[1]=D_[1],e[2]=D_[2],e[3]=1+i,function(e,t){var n=t[0],i=t[1],r=t[2],o=t[3],a=n*n+i*i+r*r+o*o;return a>0&&(a=1/Math.sqrt(a)),e[0]=n*a,e[1]=i*a,e[2]=r*a,e[3]=o*a,e}(e,e))});I_(),I_(),function(){var e=new _(9);_!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1}();const z_=[0,0,0,1];class B_ extends Ln{constructor(e=0,t=0,n=0,i=1){super(-0,-0,-0,-0),Array.isArray(e)&&1===arguments.length?this.copy(e):this.set(e,t,n,i)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}set(e,t,n,i){return this[0]=e,this[1]=t,this[2]=n,this[3]=i,this.check()}fromObject(e){return this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this.check()}fromMatrix3(e){return function(e,t){var n,i=t[0]+t[4]+t[8];if(i>0)n=Math.sqrt(i+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{var r=0;t[4]>t[0]&&(r=1),t[8]>t[3*r+r]&&(r=2);var o=(r+1)%3,a=(r+2)%3;n=Math.sqrt(t[3*r+r]-t[3*o+o]-t[3*a+a]+1),e[r]=.5*n,n=.5/n,e[3]=(t[3*o+a]-t[3*a+o])*n,e[o]=(t[3*o+r]+t[3*r+o])*n,e[a]=(t[3*a+r]+t[3*r+a])*n}}(this,e),this.check()}fromAxisRotation(e,t){return M_(this,e,t),this.check()}identity(){return function(e){e[0]=0,e[1]=0,e[2]=0,e[3]=1}(this),this.check()}setAxisAngle(e,t){return this.fromAxisRotation(e,t)}get ELEMENTS(){return 4}get x(){return this[0]}set x(e){this[0]=Dn(e)}get y(){return this[1]}set y(e){this[1]=Dn(e)}get z(){return this[2]}set z(e){this[2]=Dn(e)}get w(){return this[3]}set w(e){this[3]=Dn(e)}len(){return F_(this)}lengthSquared(){return k_(this)}dot(e){return function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}(this,e)}rotationTo(e,t){return U_(this,e,t),this.check()}add(e){return function(e,t,n){e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3]}(this,this,e),this.check()}calculateW(){return function(e,t){var n=t[0],i=t[1],r=t[2];e[0]=n,e[1]=i,e[2]=r,e[3]=Math.sqrt(Math.abs(1-n*n-i*i-r*r))}(this,this),this.check()}conjugate(){return function(e,t){e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3]}(this,this),this.check()}invert(){return function(e,t){var n=t[0],i=t[1],r=t[2],o=t[3],a=n*n+i*i+r*r+o*o,s=a?1/a:0;e[0]=-n*s,e[1]=-i*s,e[2]=-r*s,e[3]=o*s}(this,this),this.check()}lerp(e,t,n){return void 0===n?this.lerp(this,e,t):(function(e,t,n,i){var r=t[0],o=t[1],a=t[2],s=t[3];e[0]=r+i*(n[0]-r),e[1]=o+i*(n[1]-o),e[2]=a+i*(n[2]-a),e[3]=s+i*(n[3]-s)}(this,e,t,n),this.check())}multiplyRight(e){return L_(this,this,e),this.check()}multiplyLeft(e){return L_(this,e,this),this.check()}normalize(){const e=this.len(),t=e>0?1/e:0;return this[0]=this[0]*t,this[1]=this[1]*t,this[2]=this[2]*t,this[3]=this[3]*t,0===e&&(this[3]=1),this.check()}rotateX(e){return function(e,t,n){n*=.5;var i=t[0],r=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);e[0]=i*l+a*s,e[1]=r*l+o*s,e[2]=o*l-r*s,e[3]=a*l-i*s}(this,this,e),this.check()}rotateY(e){return function(e,t,n){n*=.5;var i=t[0],r=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);e[0]=i*l-o*s,e[1]=r*l+a*s,e[2]=o*l+i*s,e[3]=a*l-r*s}(this,this,e),this.check()}rotateZ(e){return function(e,t,n){n*=.5;var i=t[0],r=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);e[0]=i*l+r*s,e[1]=r*l-i*s,e[2]=o*l+a*s,e[3]=a*l-o*s}(this,this,e),this.check()}scale(e){return N_(this,this,e),this.check()}slerp(e,t,n){let i,r,o;switch(arguments.length){case 1:({start:i=z_,target:r,ratio:o}=e);break;case 2:i=this,r=e,o=t;break;default:i=e,r=t,o=n}return function(e,t,n,i){var r,o,a,s,l,c=t[0],u=t[1],h=t[2],d=t[3],p=n[0],f=n[1],g=n[2],m=n[3];(o=c*p+u*f+h*g+d*m)<0&&(o=-o,p=-p,f=-f,g=-g,m=-m),1-o>b?(r=Math.acos(o),a=Math.sin(r),s=Math.sin((1-i)*r)/a,l=Math.sin(i*r)/a):(s=1-i,l=i),e[0]=s*c+l*p,e[1]=s*u+l*f,e[2]=s*h+l*g,e[3]=s*d+l*m}(this,i,r,o),this.check()}transformVector4(e,t=new R_){return function(e,t,n){var i=t[0],r=t[1],o=t[2],a=n[0],s=n[1],l=n[2],c=n[3],u=c*i+s*o-l*r,h=c*r+l*i-a*o,d=c*o+a*r-s*i,p=-a*i-s*r-l*o;e[0]=u*c+p*-a+h*-l-d*-s,e[1]=h*c+p*-s+d*-a-u*-l,e[2]=d*c+p*-l+u*-s-h*-a,e[3]=t[3]}(t,e,this),On(t,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(e,t){return this.setAxisAngle(e,t)}premultiply(e){return this.multiplyLeft(e)}multiply(e){return this.multiplyRight(e)}}const G_=new Bn,V_=new Bn,H_=new Bn,q_=new Bn,W_=new Bn,X_=new Bn,Y_=new Bn;class K_{constructor(e=[0,0,0],t=[0,0,0,0,0,0,0,0,0]){c(this,"center",void 0),c(this,"halfAxes",void 0),this.center=(new Bn).from(e),this.halfAxes=new A_(t)}get halfSize(){const e=this.halfAxes.getColumn(0),t=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2);return[new Bn(e).len(),new Bn(t).len(),new Bn(n).len()]}get quaternion(){const e=this.halfAxes.getColumn(0),t=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2),i=new Bn(e).normalize(),r=new Bn(t).normalize(),o=new Bn(n).normalize();return(new B_).fromMatrix3(new A_([...i,...r,...o]))}fromCenterHalfSizeQuaternion(e,t,n){const i=new B_(n),r=(new A_).fromQuaternion(i);return r[0]=r[0]*t[0],r[1]=r[1]*t[0],r[2]=r[2]*t[0],r[3]=r[3]*t[1],r[4]=r[4]*t[1],r[5]=r[5]*t[1],r[6]=r[6]*t[2],r[7]=r[7]*t[2],r[8]=r[8]*t[2],this.center=(new Bn).from(e),this.halfAxes=r,this}clone(){return new K_(this.center,this.halfAxes)}equals(e){return this===e||Boolean(e)&&this.center.equals(e.center)&&this.halfAxes.equals(e.halfAxes)}getBoundingSphere(e=new __){const t=this.halfAxes,n=t.getColumn(0,H_),i=t.getColumn(1,q_),r=t.getColumn(2,W_),o=G_.copy(n).add(i).add(r);return e.center.copy(this.center),e.radius=o.magnitude(),e}intersectPlane(e){const t=this.center,n=e.normal,i=this.halfAxes,r=n.x,o=n.y,a=n.z,s=Math.abs(r*i[0]+o*i[1]+a*i[2])+Math.abs(r*i[3]+o*i[4]+a*i[5])+Math.abs(r*i[6]+o*i[7]+a*i[8]),l=n.dot(t)+e.distance;return l<=-s?f_:l>=s?1:0}distanceTo(e){return Math.sqrt(this.distanceSquaredTo(e))}distanceSquaredTo(e){const t=V_.from(e).subtract(this.center),n=this.halfAxes,i=n.getColumn(0,H_),r=n.getColumn(1,q_),o=n.getColumn(2,W_),a=i.magnitude(),s=r.magnitude(),l=o.magnitude();i.normalize(),r.normalize(),o.normalize();let c,u=0;return c=Math.abs(t.dot(i))-a,c>0&&(u+=c*c),c=Math.abs(t.dot(r))-s,c>0&&(u+=c*c),c=Math.abs(t.dot(o))-l,c>0&&(u+=c*c),u}computePlaneDistances(e,t,n=[-0,-0]){let i=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;const o=this.center,a=this.halfAxes,s=a.getColumn(0,H_),l=a.getColumn(1,q_),c=a.getColumn(2,W_),u=X_.copy(s).add(l).add(c).add(o),h=Y_.copy(u).subtract(e);let d=t.dot(h);return i=Math.min(d,i),r=Math.max(d,r),u.copy(o).add(s).add(l).subtract(c),h.copy(u).subtract(e),d=t.dot(h),i=Math.min(d,i),r=Math.max(d,r),u.copy(o).add(s).subtract(l).add(c),h.copy(u).subtract(e),d=t.dot(h),i=Math.min(d,i),r=Math.max(d,r),u.copy(o).add(s).subtract(l).subtract(c),h.copy(u).subtract(e),d=t.dot(h),i=Math.min(d,i),r=Math.max(d,r),o.copy(u).subtract(s).add(l).add(c),h.copy(u).subtract(e),d=t.dot(h),i=Math.min(d,i),r=Math.max(d,r),o.copy(u).subtract(s).add(l).subtract(c),h.copy(u).subtract(e),d=t.dot(h),i=Math.min(d,i),r=Math.max(d,r),o.copy(u).subtract(s).subtract(l).add(c),h.copy(u).subtract(e),d=t.dot(h),i=Math.min(d,i),r=Math.max(d,r),o.copy(u).subtract(s).subtract(l).subtract(c),h.copy(u).subtract(e),d=t.dot(h),i=Math.min(d,i),r=Math.max(d,r),n[0]=i,n[1]=r,n}transform(e){this.center.transformAsPoint(e);const t=this.halfAxes.getColumn(0,H_);t.transformAsPoint(e);const n=this.halfAxes.getColumn(1,q_);n.transformAsPoint(e);const i=this.halfAxes.getColumn(2,W_);return i.transformAsPoint(e),this.halfAxes=new A_([...t,...n,...i]),this}getTransform(){throw new Error("not implemented")}}const Z_=new Bn,J_=new Bn;class $_{constructor(e=[0,0,1],t=0){c(this,"normal",void 0),c(this,"distance",void 0),this.normal=new Bn,this.distance=-0,this.fromNormalDistance(e,t)}fromNormalDistance(e,t){return jn(Number.isFinite(t)),this.normal.from(e).normalize(),this.distance=t,this}fromPointNormal(e,t){e=Z_.from(e),this.normal.from(t).normalize();const n=-this.normal.dot(e);return this.distance=n,this}fromCoefficients(e,t,n,i){return this.normal.set(e,t,n),jn(g(this.normal.len(),1)),this.distance=i,this}clone(){return new $_(this.normal,this.distance)}equals(e){return g(this.distance,e.distance)&&g(this.normal,e.normal)}getPointDistance(e){return this.normal.dot(e)+this.distance}transform(e){const t=J_.copy(this.normal).transformAsVector(e).normalize(),n=this.normal.scale(-this.distance).transform(e);return this.fromPointNormal(n,t)}projectPointOntoPlane(e,t=[0,0,0]){e=Z_.from(e);const n=this.getPointDistance(e),i=J_.copy(this.normal).scale(n);return e.subtract(i).to(t)}}const Q_=[new Bn([1,0,0]),new Bn([0,1,0]),new Bn([0,0,1])],ew=new Bn,tw=new Bn;new $_(new Bn(1,0,0),0);class nw{constructor(e=[]){c(this,"planes",void 0),this.planes=e}fromBoundingSphere(e){this.planes.length=2*Q_.length;const t=e.center,n=e.radius;let i=0;for(const e of Q_){let r=this.planes[i],o=this.planes[i+1];r||(r=this.planes[i]=new $_),o||(o=this.planes[i+1]=new $_);const a=ew.copy(e).scale(-n).add(t);e.dot(a),r.fromPointNormal(a,e);const s=ew.copy(e).scale(n).add(t),l=tw.copy(e).negate();l.dot(s),o.fromPointNormal(s,l),i+=2}return this}computeVisibility(e){let t=1;for(const n of this.planes)switch(e.intersectPlane(n)){case f_:return f_;case 0:t=0}return t}computeVisibilityWithPlaneMask(e,t){if(jn(Number.isFinite(t),"parentPlaneMask is required."),t===nw.MASK_OUTSIDE||t===nw.MASK_INSIDE)return t;let n=nw.MASK_INSIDE;const i=this.planes;for(let r=0;r<this.planes.length;++r){const o=r<31?1<<r:0;if(r<31&&0==(t&o))continue;const a=i[r],s=e.intersectPlane(a);if(s===f_)return nw.MASK_OUTSIDE;0===s&&(n|=o)}return n}}c(nw,"MASK_OUTSIDE",4294967295),c(nw,"MASK_INSIDE",0),c(nw,"MASK_INDETERMINATE",2147483647),new Bn,new Bn,new Bn,new Bn,new Bn,new Bn,new Bn,new Bn,new Bn,new Bn,new Bn,new Bn,new Bn,new Bn,new Bn,new Bn,new Bn,Math.PI;const iw={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,PI_OVER_TWO:Math.PI/2,PI_OVER_FOUR:Math.PI/4,PI_OVER_SIX:Math.PI/6,TWO_PI:2*Math.PI},rw=new A_,ow=new A_,aw=new A_,sw=new A_,lw=new A_;const cw=[1,0,0],uw=[2,2,1];function hw(e){let t=0;for(let n=0;n<3;++n){const i=e[rw.getElementIndex(uw[n],cw[n])];t+=2*i*i}return Math.sqrt(t)}function dw(e,t){const n=iw.EPSILON15;let i=0,r=1;for(let t=0;t<3;++t){const n=Math.abs(e[rw.getElementIndex(uw[t],cw[t])]);n>i&&(r=t,i=n)}const o=cw[r],a=uw[r];let s=1,l=0;if(Math.abs(e[rw.getElementIndex(a,o)])>n){const t=(e[rw.getElementIndex(a,a)]-e[rw.getElementIndex(o,o)])/2/e[rw.getElementIndex(a,o)];let n;n=t<0?-1/(-t+Math.sqrt(1+t*t)):1/(t+Math.sqrt(1+t*t)),s=1/Math.sqrt(1+n*n),l=n*s}return A_.IDENTITY.to(t),t[rw.getElementIndex(o,o)]=t[rw.getElementIndex(a,a)]=s,t[rw.getElementIndex(a,o)]=l,t[rw.getElementIndex(o,a)]=-l,t}const pw=new Bn,fw=new Bn,gw=new Bn,mw=new Bn,yw=new Bn,vw=new A_,bw={diagonal:new A_,unitary:new A_},_w=512,ww=3,Pw=[[.5,.5],[0,0],[0,1],[1,0],[1,1]],Ew=Pw.concat([[0,.5],[.5,0],[1,.5],[.5,1]]),xw=Ew.concat([[.25,.5],[.75,.5]]);class Aw{constructor(e,t,n){c(this,"x",void 0),c(this,"y",void 0),c(this,"z",void 0),c(this,"childVisible",void 0),c(this,"selected",void 0),c(this,"_children",void 0),this.x=e,this.y=t,this.z=n}get children(){if(!this._children){const e=2*this.x,t=2*this.y,n=this.z+1;this._children=[new Aw(e,t,n),new Aw(e,t+1,n),new Aw(e+1,t,n),new Aw(e+1,t+1,n)]}return this._children}update(e){const{viewport:t,cullingVolume:n,elevationBounds:i,minZ:r,maxZ:o,bounds:a,offset:s,project:l}=e,c=this.getBoundingVolume(i,s,l);if(a&&!this.insideBounds(a))return!1;if(n.computeVisibility(c)<0)return!1;if(!this.childVisible){let{z:e}=this;if(e<o&&e>=r){const n=c.distanceTo(t.cameraPosition)*t.scale/t.height;e+=Math.floor(Math.log2(n))}if(e>=o)return this.selected=!0,!0}this.selected=!1,this.childVisible=!0;for(const t of this.children)t.update(e);return!0}getSelected(e=[]){if(this.selected&&e.push(this),this._children)for(const t of this._children)t.getSelected(e);return e}insideBounds([e,t,n,i]){const r=Math.pow(2,this.z),o=_w/r;return this.x*o<n&&this.y*o<i&&(this.x+1)*o>e&&(this.y+1)*o>t}getBoundingVolume(e,t,n){if(n){const t=this.z<1?xw:this.z<2?Ew:Pw,i=[];for(const r of t){const t=Dw(this.x+r[0],this.y+r[1],this.z);t[2]=e[0],i.push(n(t)),e[0]!==e[1]&&(t[2]=e[1],i.push(n(t)))}return function(e,t=new K_){if(!e||0===e.length)return t.halfAxes=new A_([0,0,0,0,0,0,0,0,0]),t.center=new Bn,t;const n=e.length,i=new Bn(0,0,0);for(const t of e)i.add(t);const r=1/n;i.multiplyByScalar(r);let o=0,a=0,s=0,l=0,c=0,u=0;for(const t of e){const e=pw.copy(t).subtract(i);o+=e.x*e.x,a+=e.x*e.y,s+=e.x*e.z,l+=e.y*e.y,c+=e.y*e.z,u+=e.z*e.z}o*=r,a*=r,s*=r,l*=r,c*=r,u*=r;const h=vw;h[0]=o,h[1]=a,h[2]=s,h[3]=a,h[4]=l,h[5]=c,h[6]=s,h[7]=c,h[8]=u;const{unitary:d}=function(e,t={}){const n=iw.EPSILON20;let i=0,r=0;const o=ow,a=aw;o.identity(),a.copy(e);const s=n*function(e){let t=0;for(let n=0;n<9;++n){const i=e[n];t+=i*i}return Math.sqrt(t)}(a);for(;r<10&&hw(a)>s;)dw(a,sw),lw.copy(sw).transpose(),a.multiplyRight(sw),a.multiplyLeft(lw),o.multiplyRight(sw),++i>2&&(++r,i=0);return t.unitary=o.toTarget(t.unitary),t.diagonal=a.toTarget(t.diagonal),t}(h,bw),p=t.halfAxes.copy(d);let f=p.getColumn(0,gw),g=p.getColumn(1,mw),m=p.getColumn(2,yw),y=-Number.MAX_VALUE,v=-Number.MAX_VALUE,b=-Number.MAX_VALUE,_=Number.MAX_VALUE,w=Number.MAX_VALUE,P=Number.MAX_VALUE;for(const t of e)pw.copy(t),y=Math.max(pw.dot(f),y),v=Math.max(pw.dot(g),v),b=Math.max(pw.dot(m),b),_=Math.min(pw.dot(f),_),w=Math.min(pw.dot(g),w),P=Math.min(pw.dot(m),P);f=f.multiplyByScalar(.5*(_+y)),g=g.multiplyByScalar(.5*(w+v)),m=m.multiplyByScalar(.5*(P+b)),t.center.copy(f).add(g).add(m);const E=fw.set(y-_,v-w,b-P).multiplyByScalar(.5),x=new A_([E[0],0,0,0,E[1],0,0,0,E[2]]);return t.halfAxes.multiplyRight(x),t}(i)}const i=Math.pow(2,this.z),r=_w/i,o=this.x*r+t*_w,a=_w-(this.y+1)*r;return new y_([o,a,e[0]],[o+r,a+r,e[1]])}}const Cw=512,Sw=[-1/0,-1/0,1/0,1/0],Tw={type:"object",value:null,validate:(e,t)=>t.optional&&null===e||"string"==typeof e||Array.isArray(e)&&e.every((e=>"string"==typeof e)),equal:(e,t)=>{if(e===t)return!0;if(!Array.isArray(e)||!Array.isArray(t))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}};function Rw(e,t){const n=[t.transformAsPoint([e[0],e[1]]),t.transformAsPoint([e[2],e[1]]),t.transformAsPoint([e[0],e[3]]),t.transformAsPoint([e[2],e[3]])];return[Math.min(...n.map((e=>e[0]))),Math.min(...n.map((e=>e[1]))),Math.max(...n.map((e=>e[0]))),Math.max(...n.map((e=>e[1])))]}function Iw({viewport:e,z:t=0,cullRect:n}){return(e.subViewports||[e]).map((e=>Mw(e,t,n)))}function Mw(e,t,n){if(!Array.isArray(t)){const i=n.x-e.x,r=n.y-e.y,{width:o,height:a}=n,s={targetZ:t},l=e.unproject([i,r],s),c=e.unproject([i+o,r],s),u=e.unproject([i,r+a],s),h=e.unproject([i+o,r+a],s);return[Math.min(l[0],c[0],u[0],h[0]),Math.min(l[1],c[1],u[1],h[1]),Math.max(l[0],c[0],u[0],h[0]),Math.max(l[1],c[1],u[1],h[1])]}const i=Mw(e,t[0],n),r=Mw(e,t[1],n);return[Math.min(i[0],r[0]),Math.min(i[1],r[1]),Math.max(i[2],r[2]),Math.max(i[3],r[3])]}function Lw(e,t){return Math.pow(2,e)*Cw/t}function Dw(e,t,n){const i=Lw(n,Cw),r=e/i*360-180,o=Math.PI-2*Math.PI*t/i;return[r,180/Math.PI*Math.atan(.5*(Math.exp(o)-Math.exp(-o)))]}function Ow(e,t,n,i){const r=Lw(n,i);return[e/r*Cw,t/r*Cw]}function jw(e,t,n,i,r=Cw){if(e.isGeospatial){const[e,r]=Dw(t,n,i),[o,a]=Dw(t+1,n+1,i);return{west:e,north:r,east:o,south:a}}const[o,a]=Ow(t,n,i,r),[s,l]=Ow(t+1,n+1,i,r);return{left:o,top:a,right:s,bottom:l}}function Nw({viewport:e,maxZoom:t,minZoom:n,zRange:i,extent:r,tileSize:o=Cw,modelMatrix:a,modelMatrixInverse:s,zoomOffset:l=0}){let c=e.isGeospatial?Math.round(e.zoom+Math.log2(Cw/o))+l:Math.ceil(e.zoom)+l;if("number"==typeof n&&Number.isFinite(n)&&c<n){if(!r)return[];c=n}"number"==typeof t&&Number.isFinite(t)&&c>t&&(c=t);let u=r;return a&&s&&r&&!e.isGeospatial&&(u=Rw(r,a)),e.isGeospatial?function(e,t,n,i){const r=e instanceof d_&&e.resolution?e.projectPosition:null,o=Object.values(e.getFrustumPlanes()).map((({normal:e,distance:t})=>new $_(e.clone().negate(),t))),a=new nw(o),s=e.distanceScales.unitsPerMeter[2],l=n&&n[0]*s||0,c=n&&n[1]*s||0,u=e instanceof ws&&e.pitch<=60?t:0;if(i){const[e,t,n,r]=i,o=ie([e,r]),a=ie([n,t]);i=[o[0],_w-o[1],a[0],_w-a[1]]}const h=new Aw(0,0,0),d={viewport:e,project:r,cullingVolume:a,elevationBounds:[l,c],minZ:u,maxZ:t,bounds:i,offset:0};if(h.update(d),e instanceof ws&&e.subViewports&&e.subViewports.length>1){for(d.offset=-1;h.update(d)&&!(--d.offset<-ww););for(d.offset=1;h.update(d)&&!(++d.offset>ww););}return h.getSelected()}(e,c,i,r):function(e,t,n,i,r){const o=function(e,t,n){let i;return i=e.getBounds(),e.isGeospatial?[Math.max(i[0],n[0]),Math.max(i[1],n[1]),Math.min(i[2],n[2]),Math.min(i[3],n[3])]:[Math.max(Math.min(i[0],n[2]),n[0]),Math.max(Math.min(i[1],n[3]),n[1]),Math.min(Math.max(i[2],n[0]),n[2]),Math.min(Math.max(i[3],n[1]),n[3])]}(e,0,i),a=Lw(t,n),[s,l,c,u]=function(e,t,n){return n?Rw(e,n).map((e=>e*t/Cw)):e.map((e=>e*t/Cw))}(o,a,r),h=[];for(let e=Math.floor(s);e<c;e++)for(let n=Math.floor(l);n<u;n++)h.push({x:e,y:n,z:t});return h}(e,c,o,u||Sw,s)}function Fw(e,t){if(e===t)return!0;if(Array.isArray(e)){const n=e.length;if(!t||t.length!==n)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}return!1}const kw=2,Uw="best-available",zw={[Uw]:function(e){for(const t of e)t.state=0;for(const t of e)t.isSelected&&!Gw(t)&&Vw(t);for(const t of e)t.isVisible=Boolean(t.state&kw)},"no-overlap":function(e){for(const t of e)t.state=0;for(const t of e)t.isSelected&&Gw(t);const t=Array.from(e).sort(((e,t)=>e.zoom-t.zoom));for(const e of t)if(e.isVisible=Boolean(e.state&kw),e.children&&(e.isVisible||1&e.state))for(const t of e.children)t.state=1;else e.isSelected&&Vw(e)},never:()=>{}},Bw={extent:null,tileSize:512,maxZoom:null,minZoom:null,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:"best-available",zRange:null,maxRequests:6,zoomOffset:0,onTileLoad:()=>{},onTileUnload:()=>{},onTileError:()=>{}};function Gw(e){let t=e;for(;t;){if(t.isLoaded||t.content)return t.state|=kw,!0;t=t.parent}return!1}function Vw(e){for(const t of e.children)t.isLoaded||t.content?t.state|=kw:Vw(t)}const Hw={TilesetClass:class{constructor(e){c(this,"opts",void 0),c(this,"_requestScheduler",void 0),c(this,"_cache",void 0),c(this,"_dirty",void 0),c(this,"_tiles",void 0),c(this,"_cacheByteSize",void 0),c(this,"_viewport",void 0),c(this,"_zRange",void 0),c(this,"_selectedTiles",void 0),c(this,"_frameNumber",void 0),c(this,"_modelMatrix",void 0),c(this,"_modelMatrixInverse",void 0),c(this,"_maxZoom",void 0),c(this,"_minZoom",void 0),c(this,"onTileLoad",void 0),c(this,"_getCullBounds",function(e){let t,n={};return i=>{for(const r in i)if(!Fw(i[r],n[r])){t=e(i),n=i;break}return t}}(Iw)),this.opts={...Bw,...e},this.onTileLoad=e=>{var t,n;null===(t=(n=this.opts).onTileLoad)||void 0===t||t.call(n,e),this.opts.maxCacheByteSize&&(this._cacheByteSize+=e.byteLength,this._resizeCache())},this._requestScheduler=new o_({maxRequests:e.maxRequests,throttleRequests:Boolean(e.maxRequests&&e.maxRequests>0)}),this._cache=new Map,this._tiles=[],this._dirty=!1,this._cacheByteSize=0,this._viewport=null,this._selectedTiles=null,this._frameNumber=0,this._modelMatrix=new ei,this._modelMatrixInverse=new ei,this.setOptions(e)}get tiles(){return this._tiles}get selectedTiles(){return this._selectedTiles}get isLoaded(){return null!==this._selectedTiles&&this._selectedTiles.every((e=>e.isLoaded))}get needsReload(){return null!==this._selectedTiles&&this._selectedTiles.some((e=>e.needsReload))}setOptions(e){Object.assign(this.opts,e),Number.isFinite(e.maxZoom)&&(this._maxZoom=Math.floor(e.maxZoom)),Number.isFinite(e.minZoom)&&(this._minZoom=Math.ceil(e.minZoom))}finalize(){for(const e of this._cache.values())e.isLoading&&e.abort();this._cache.clear(),this._tiles=[],this._selectedTiles=null}reloadAll(){for(const e of this._cache.keys()){const t=this._cache.get(e);this._selectedTiles&&this._selectedTiles.includes(t)?t.setNeedsReload():this._cache.delete(e)}}update(e,{zRange:t,modelMatrix:n}={}){const i=new ei(n),r=!i.equals(this._modelMatrix);if(this._viewport&&e.equals(this._viewport)&&g(this._zRange,t)&&!r)this.needsReload&&(this._selectedTiles=this._selectedTiles.map((e=>this._getTile(e.index,!0))));else{r&&(this._modelMatrixInverse=i.clone().invert(),this._modelMatrix=i),this._viewport=e,this._zRange=t;const n=this.getTileIndices({viewport:e,maxZoom:this._maxZoom,minZoom:this._minZoom,zRange:t,modelMatrix:this._modelMatrix,modelMatrixInverse:this._modelMatrixInverse});this._selectedTiles=n.map((e=>this._getTile(e,!0))),this._dirty&&this._rebuildTree()}const o=this.updateTileStates();return this._pruneRequests(),this._dirty&&this._resizeCache(),o&&this._frameNumber++,this._frameNumber}isTileVisible(e,t){if(!e.isVisible)return!1;if(t&&this._viewport){const n=this._getCullBounds({viewport:this._viewport,z:this._zRange,cullRect:t}),{bbox:i}=e;for(const[e,t,r,o]of n){let n;if("west"in i)n=i.west<r&&i.east>e&&i.south<o&&i.north>t;else{const a=Math.min(i.top,i.bottom),s=Math.max(i.top,i.bottom);n=i.left<r&&i.right>e&&a<o&&s>t}if(n)return!0}return!1}return!0}getTileIndices({viewport:e,maxZoom:t,minZoom:n,zRange:i,modelMatrix:r,modelMatrixInverse:o}){const{tileSize:a,extent:s,zoomOffset:l}=this.opts;return Nw({viewport:e,maxZoom:t,minZoom:n,zRange:i,tileSize:a,extent:s,modelMatrix:r,modelMatrixInverse:o,zoomOffset:l})}getTileId(e){return"".concat(e.x,"-").concat(e.y,"-").concat(e.z)}getTileZoom(e){return e.z}getTileMetadata(e){const{tileSize:t}=this.opts;return{bbox:jw(this._viewport,e.x,e.y,e.z,t)}}getParentIndex(e){return{x:Math.floor(e.x/2),y:Math.floor(e.y/2),z:e.z-1}}updateTileStates(){const e=this.opts.refinementStrategy||Uw,t=new Array(this._cache.size);let n=0;for(const e of this._cache.values())t[n++]=e.isVisible,e.isSelected=!1,e.isVisible=!1;for(const e of this._selectedTiles)e.isSelected=!0,e.isVisible=!0;("function"==typeof e?e:zw[e])(Array.from(this._cache.values())),n=0;for(const e of this._cache.values())if(t[n++]!==e.isVisible)return!0;return!1}_pruneRequests(){const{maxRequests:e=0}=this.opts,t=[];let n=0;for(const e of this._cache.values())e.isLoading&&(n++,e.isSelected||e.isVisible||t.push(e));for(;e>0&&n>e&&t.length>0;)t.shift().abort(),n--}_rebuildTree(){const{_cache:e}=this;for(const t of e.values())t.parent=null,t.children&&(t.children.length=0);for(const t of e.values()){const e=this._getNearestAncestor(t);t.parent=e,null!=e&&e.children&&e.children.push(t)}}_resizeCache(){const{_cache:e,opts:t}=this,n=t.maxCacheSize||(t.maxCacheByteSize?1/0:5*this.selectedTiles.length),i=t.maxCacheByteSize||1/0;if(e.size>n||this._cacheByteSize>i){for(const[a,s]of e){var r,o;if(s.isVisible||s.isSelected||(this._cacheByteSize-=t.maxCacheByteSize?s.byteLength:0,e.delete(a),null===(r=(o=this.opts).onTileUnload)||void 0===r||r.call(o,s)),e.size<=n&&this._cacheByteSize<=i)break}this._rebuildTree(),this._dirty=!0}this._dirty&&(this._tiles=Array.from(this._cache.values()).sort(((e,t)=>e.zoom-t.zoom)),this._dirty=!1)}_getTile(e,t){const n=this.getTileId(e);let i=this._cache.get(n),r=!1;return!i&&t?(i=new a_(e),Object.assign(i,this.getTileMetadata(i.index)),Object.assign(i,{id:n,zoom:this.getTileZoom(i.index)}),r=!0,this._cache.set(n,i),this._dirty=!0):i&&i.needsReload&&(r=!0),i&&r&&i.loadData({getData:this.opts.getTileData,requestScheduler:this._requestScheduler,onLoad:this.onTileLoad,onError:this.opts.onTileError}),i}_getNearestAncestor(e){const{_minZoom:t=0}=this;let n=e.index;for(;this.getTileZoom(n)>t;){n=this.getParentIndex(n);const e=this._getTile(n);if(e)return e}return null}},data:{type:"data",value:[]},dataComparator:Tw.equal,renderSubLayers:{type:"function",value:e=>new i_(e)},getTileData:{type:"function",optional:!0,value:null},onViewportLoad:{type:"function",optional:!0,value:null},onTileLoad:{type:"function",value:e=>{}},onTileUnload:{type:"function",value:e=>{}},onTileError:{type:"function",value:e=>console.error(e)},extent:{type:"array",optional:!0,value:null,compare:!0},tileSize:512,maxZoom:null,minZoom:0,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:Uw,zRange:null,maxRequests:6,zoomOffset:0};class qw extends uv{initializeState(){this.state={tileset:null,isLoaded:!1}}finalizeState(){var e,t;null===(e=this.state)||void 0===e||null===(t=e.tileset)||void 0===t||t.finalize()}get isLoaded(){var e,t;return null===(e=this.state)||void 0===e||null===(t=e.tileset)||void 0===t?void 0:t.selectedTiles.every((e=>e.isLoaded&&e.layers&&e.layers.every((e=>e.isLoaded))))}shouldUpdateState({changeFlags:e}){return e.somethingChanged}updateState({changeFlags:e}){let{tileset:t}=this.state;const n=e.propsOrDataChanged||e.updateTriggersChanged,i=e.dataChanged||e.updateTriggersChanged&&(e.updateTriggersChanged.all||e.updateTriggersChanged.getTileData);t?n&&(t.setOptions(this._getTilesetOptions()),i?t.reloadAll():this.state.tileset.tiles.forEach((e=>{e.layers=null}))):(t=new this.props.TilesetClass(this._getTilesetOptions()),this.setState({tileset:t})),this._updateTileset()}_getTilesetOptions(){const{tileSize:e,maxCacheSize:t,maxCacheByteSize:n,refinementStrategy:i,extent:r,maxZoom:o,minZoom:a,maxRequests:s,zoomOffset:l}=this.props;return{maxCacheSize:t,maxCacheByteSize:n,maxZoom:o,minZoom:a,tileSize:e,refinementStrategy:i,extent:r,maxRequests:s,zoomOffset:l,getTileData:this.getTileData.bind(this),onTileLoad:this._onTileLoad.bind(this),onTileError:this._onTileError.bind(this),onTileUnload:this._onTileUnload.bind(this)}}_updateTileset(){const{tileset:e}=this.state,{zRange:t,modelMatrix:n}=this.props,i=e.update(this.context.viewport,{zRange:t,modelMatrix:n}),{isLoaded:r}=e,o=this.state.isLoaded!==r,a=this.state.frameNumber!==i;r&&(o||a)&&this._onViewportLoad(),a&&this.setState({frameNumber:i}),this.state.isLoaded=r}_onViewportLoad(){const{tileset:e}=this.state,{onViewportLoad:t}=this.props;t&&t(e.selectedTiles)}_onTileLoad(e){this.props.onTileLoad(e),e.layers=null,this.setNeedsUpdate()}_onTileError(e,t){this.props.onTileError(e),t.layers=null,this.setNeedsUpdate()}_onTileUnload(e){this.props.onTileUnload(e)}getTileData(e){const{data:t,getTileData:n,fetch:i}=this.props,{signal:r}=e;return e.url="string"==typeof t||Array.isArray(t)?function(e,t){if(!e||!e.length)return null;const{index:n,id:i}=t;var r;Array.isArray(e)&&(e=e[(r=i,Math.abs(r.split("").reduce(((e,t)=>(e<<5)-e+t.charCodeAt(0)|0),0))%e.length)]);let o=e;for(const e of Object.keys(n)){const t=new RegExp("{".concat(e,"}"),"g");o=o.replace(t,String(n[e]))}return Number.isInteger(n.y)&&Number.isInteger(n.z)&&(o=o.replace(/\{-y\}/g,String(Math.pow(2,n.z)-n.y-1))),o}(t,e):null,n?n(e):i&&e.url?i(e.url,{propName:"data",layer:this,signal:r}):null}renderSubLayers(e){return this.props.renderSubLayers(e)}getSubLayerPropsByTile(e){return null}getPickingInfo({info:e,sourceLayer:t}){const n=t.props.tile;return e.picked&&(e.tile=n),e.sourceTile=n,e}_updateAutoHighlight(e){const t=e.sourceTile;if(t&&t.layers)for(const n of t.layers)n.updateAutoHighlight(e)}renderLayers(){return this.state.tileset.tiles.map((e=>{const t=this.getSubLayerPropsByTile(e);if(e.isLoaded||e.content)if(e.layers)t&&e.layers[0]&&Object.keys(t).some((n=>e.layers[0].props[n]!==t[n]))&&(e.layers=e.layers.map((e=>e.clone(t))));else{const n=this.renderSubLayers({...this.props,id:"".concat(this.id,"-").concat(e.id),data:e.content,_offset:0,tile:e});e.layers=tt(n,Boolean).map((n=>n.clone({tile:e,...t})))}return e.layers}))}filterSubLayer({layer:e,cullRect:t}){const{tile:n}=e.props;return this.state.tileset.isTileVisible(n,t)}}function Ww(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Xw(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Yw(){}c(qw,"defaultProps",Hw),c(qw,"layerName","TileLayer");var Kw=.7,Zw=1/Kw,Jw="\\s*([+-]?\\d+)\\s*",$w="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Qw="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",eP=/^#([0-9a-f]{3,8})$/,tP=new RegExp(`^rgb\\(${Jw},${Jw},${Jw}\\)$`),nP=new RegExp(`^rgb\\(${Qw},${Qw},${Qw}\\)$`),iP=new RegExp(`^rgba\\(${Jw},${Jw},${Jw},${$w}\\)$`),rP=new RegExp(`^rgba\\(${Qw},${Qw},${Qw},${$w}\\)$`),oP=new RegExp(`^hsl\\(${$w},${Qw},${Qw}\\)$`),aP=new RegExp(`^hsla\\(${$w},${Qw},${Qw},${$w}\\)$`),sP={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function lP(){return this.rgb().formatHex()}function cP(){return this.rgb().formatRgb()}function uP(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=eP.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?hP(t):3===n?new pP(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?dP(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?dP(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=tP.exec(e))?new pP(t[1],t[2],t[3],1):(t=nP.exec(e))?new pP(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=iP.exec(e))?dP(t[1],t[2],t[3],t[4]):(t=rP.exec(e))?dP(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=oP.exec(e))?bP(t[1],t[2]/100,t[3]/100,1):(t=aP.exec(e))?bP(t[1],t[2]/100,t[3]/100,t[4]):sP.hasOwnProperty(e)?hP(sP[e]):"transparent"===e?new pP(NaN,NaN,NaN,0):null}function hP(e){return new pP(e>>16&255,e>>8&255,255&e,1)}function dP(e,t,n,i){return i<=0&&(e=t=n=NaN),new pP(e,t,n,i)}function pP(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}function fP(){return`#${vP(this.r)}${vP(this.g)}${vP(this.b)}`}function gP(){const e=mP(this.opacity);return`${1===e?"rgb(":"rgba("}${yP(this.r)}, ${yP(this.g)}, ${yP(this.b)}${1===e?")":`, ${e})`}`}function mP(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function yP(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function vP(e){return((e=yP(e))<16?"0":"")+e.toString(16)}function bP(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new wP(e,t,n,i)}function _P(e){if(e instanceof wP)return new wP(e.h,e.s,e.l,e.opacity);if(e instanceof Yw||(e=uP(e)),!e)return new wP;if(e instanceof wP)return e;var t=(e=e.rgb()).r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),o=Math.max(t,n,i),a=NaN,s=o-r,l=(o+r)/2;return s?(a=t===o?(n-i)/s+6*(n<i):n===o?(i-t)/s+2:(t-n)/s+4,s/=l<.5?o+r:2-o-r,a*=60):s=l>0&&l<1?0:a,new wP(a,s,l,e.opacity)}function wP(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function PP(e){return(e=(e||0)%360)<0?e+360:e}function EP(e){return Math.max(0,Math.min(1,e||0))}function xP(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}Ww(Yw,uP,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:lP,formatHex:lP,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return _P(this).formatHsl()},formatRgb:cP,toString:cP}),Ww(pP,(function(e,t,n,i){return 1===arguments.length?((r=e)instanceof Yw||(r=uP(r)),r?new pP((r=r.rgb()).r,r.g,r.b,r.opacity):new pP):new pP(e,t,n,null==i?1:i);var r}),Xw(Yw,{brighter(e){return e=null==e?Zw:Math.pow(Zw,e),new pP(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?Kw:Math.pow(Kw,e),new pP(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new pP(yP(this.r),yP(this.g),yP(this.b),mP(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:fP,formatHex:fP,formatHex8:function(){return`#${vP(this.r)}${vP(this.g)}${vP(this.b)}${vP(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:gP,toString:gP})),Ww(wP,(function(e,t,n,i){return 1===arguments.length?_P(e):new wP(e,t,n,null==i?1:i)}),Xw(Yw,{brighter(e){return e=null==e?Zw:Math.pow(Zw,e),new wP(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?Kw:Math.pow(Kw,e),new wP(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new pP(xP(e>=240?e-240:e+120,r,i),xP(e,r,i),xP(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new wP(PP(this.h),EP(this.s),EP(this.l),mP(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=mP(this.opacity);return`${1===e?"hsl(":"hsla("}${PP(this.h)}, ${100*EP(this.s)}%, ${100*EP(this.l)}%${1===e?")":`, ${e})`}`}}));var AP={ALM:"#FF00FF",ARR:"salmon","ARR; WRC":"orange","ARR; REDD; WRC":"sandybrown",ACoGS:"red","ACoGS; REDD":"darkred",IFM:"blue","IFM; REDD":"darkblue",REDD:"green","REDD; WRC":"darkgreen"},CP="gray";uP.prototype.toArray=function(){return[this.r,this.g,this.b]};var SP=function(e){if(!e)return null;var t=r(e,1)[0],n=e.width,i=e.height,o=document.createElement("canvas");o.width=n,o.height=i;for(var a=o.getContext("2d"),s=a.getImageData(0,0,n,i).data,l=0;l<t.length;l++){var c=t[l];s[4*l]=c>0?255:0,s[4*l+1]=0,s[4*l+2]=0,s[4*l+3]=c>0?255:0}var u=new ImageData(s,n,i);return console.log(u),a.putImageData(u,0,0),o};function TP(e){var t=e.data,n=e.rasterData,i=e.cogBbox,r=e.cogBboxPoly,o=e.onClick,a=SP(n),s=null;a&&(s=new lv({data:null,image:a,bounds:i}));var l=new i_({id:"geojson-layer",data:r,pickable:!1,stroked:!0,filled:!1,extruded:!1,lineWidthMinPixels:2,getLineColor:[255,0,0]}),c=new Ev({id:"scatterplot-layer",data:t,pickable:!0,opacity:.8,stroked:!0,filled:!0,radiusScale:100,radiusMinPixels:6,radiusMaxPixels:100,lineWidthMinPixels:1,getRadius:10,getPosition:function(e){return[e.lon,e.lat]},getFillColor:function(e){return uP(AP[e["AFOLU Activities"]]||CP).toArray()},getLineColor:[0,0,0],onClick:function(e){o(e.object)}});return new qw({id:"tile-layer",data:"https://c.tile.openstreetmap.org/{z}/{x}/{y}.png",minZoom:0,maxZoom:19,tileSize:256,renderSubLayers:function(e){var t=e.tile.bbox,n=t.west,i=t.south,r=t.east,o=t.north;return new lv(e,{data:null,image:e.data,bounds:[n,i,r,o]})}}),[s,c,l]}const RP=JSON.parse('[{"ID":"3601","Name":"CAAPII REDD+ PROJECT","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Under validation","Country":"Brazil","Estimated Annual Emission Reductions":470940,"Region":"Latin America","Crediting Period Start Date":43671,"Crediting Period End Date":54628,"Hectares":"33767 Hectares","project_explanation":"The CAAPII REDD+ PROJECT aims to protect the Amazon Forest present in properties inserted in the municipalities of Paragominas, Ipixuna do Pará and Tomé- Açu in the Pará State, in Brazil. This region has historically high rates of deforestation, especially associated with conflicts of land tenure, and the high value of activities of other land-use such as livestock and soybean production. The illegal exploraration of timber and other illegal activities such as hunting affect the forest, the biodiversity , the climate and consequently the local population as well. The conservation of 33,766.64 hectare of Ombrophilous Dense Forest with the CAAPII REDD+ Project will reduce more than 14 millions tCO2e of GHG emissions and bring positive impacts to the region with the project activities. The actions have as goals the preservation of the forest, as well as the improvement of the well-being of the communities, biodiversity and climate regulation. A socioeconomic diagnosis on each community involved in the project conducted the design of the project activities in order to encourage the growth of environmental awareness and the sustainable development, aligned with the conservation of the forest and fauna and flora species. With the approval of the CAAPII REDD+ Project, the forest areas inside the properties can be protected and the project activities can be implemented aiming to bring climate, community, and biodiversity benefits.","lat":3.046199,"lon":48.196213},{"ID":"3590","Name":"Jutaituba REDD+ Project","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Under validation","Country":"Brazil","Estimated Annual Emission Reductions":263356,"Region":"Latin America","Crediting Period Start Date":44210,"Crediting Period End Date":47861,"Hectares":"129417 Hectares","project_explanation":"The Jutaituba REDD+ Project is a partnership between the Biofílica Ambipar Environment and Martins Agropecuária, belonging to the Martins Group and aims to promote forest conservation and mitigate climate change by reducing greenhouse gas (GHG) emissions from changes in land use. In addition to climate benefits, the Project also aims to generate socio-environmental benefits based on sustainable economic development practices and the improvement of the well-being of surrounding communities, while preserving the culture and tradition of local peoples. The Project Area has 129,417 ha of Amazon rainforest and is located almost entirely in the mesoregion of Marajó, in the State of Pará, covering the cities of Bagre, Portel, Baião and Oeiras do Pará. It is located near BR 422, known as the Transcametá highway, and near the rivers Pacajá, Jacundá and Tocantins. Communities that are directly or indirectly influenced by the Project were identified, either because they provide labor to Fazenda Jutaituba or are geographically close to the Project Area and depend on the forest resources present in the area, such as nuts and medicinal herbs. The region has great relevance in relation to its biodiversity, being an ecological corridor that makes it possible to connect Conservation Units (UCs) that are nearby. The predominant vegetation is the Dense Ombrophilous Forest with a high density of medium and large trees, as well as woody and epiphytic lianas. It houses at least 24 species of fauna and flora with some degree of threat according to the IUCN Red List, some of which are endemic to the region. Thus, the Jutaituba REDD+ Project hopes, in addition to climate impacts, to improve the well-being of communities and generate exceptional benefits for local biodiversity.","lat":-2.971811,"lon":-50.041705},{"ID":"3451","Name":"Harpia Grouped REDD+ Project","Proponent":"Future Carbon Consultoria e Projetos Florestais LTDA","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Under development","Country":"Brazil","Estimated Annual Emission Reductions":51753,"Region":"Latin America","Crediting Period Start Date":43808,"Crediting Period End Date":47460,"Hectares":"18700 Hectares","project_explanation":"The primary objective of the Harpia Grouped REDD+ Project is to avoid the unplanned deforestation (AUD) of the Amazon rainforest and, as a grouped project, offers the possibility to expand the conservation to other areas in the future. The first instance is composed of 3 properties, with a project area of 18,700.24 ha, located in Cotriguaçu, State of Mato Grosso. Besides the project’s ecological and carbon benefits, a proportion of the carbon credits generated will be dedicated to improving the social and environmental conditions in the project region, specifically contributing to improving deforestation control, and developing environmental education and other social activities. The contribution to sustainability is being monitored through the application of the SOCIALCARBON® Standard. The present REDD project is expected to avoid a predicted 3,681 ha of deforestation, equating to 1,552,613 tCO2e in emissions reductions over the 30-year project lifetime (09-December-2019 to 08-December-2049), with an annual average of 51,753 tCO2e.","lat":-9.388579,"lon":-58.859413},{"ID":"3430","Name":"Juruá REDD+ Project","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Under validation","Country":"Brazil","Estimated Annual Emission Reductions":86557,"Region":"Latin America","Crediting Period Start Date":44044,"Crediting Period End Date":47695,"Hectares":"24076 Hectares","project_explanation":"Juruá REDD+ Project is a partnership between Biofílica Ambipar Environment and Amazônia Agroindústria EIRELI, in order to foster forest conservation and the reduction of potential greenhouse gas (GHG) emissions based on a local economic development model that values the “standing” forest through the integration of non-timber forest product management and trading of environmental services. Juruá REDD+ Project is located at Seringal Valparaíso property, in the Alto Juruá region, between the municipalities of Cruzeiro do Sul and Porto Walter, including an area of 24,076 hectares. Juruá River basin is formed by four micro-basins: the micro-basin of Igarapé do Meio, the micro-basin of Igarapé Primeiro de Março and the Igarapé Grande micro-basin, in addition to the Valparaiso river basin (micro-basin) itself, which is the main drainage network of the rubber plantation region. The purpose of the project is to reduce GHG emissions from activities regarding to conserve the forest and its natural resources, as well as to maintain carbon stocks, through activities that promote the reduction of deforestation in the region, such as the improvement of patrimonial vigilance, the monitoring of land use change and land cover using satellite images and strengthening the management of non-timber forest products. The performance of activities allied to a good project management, with continuous monitoring and evaluation of activities and results, will allow the Project to reach the expected goals and effects. Therefore, it is expected that Juruá REDD+ Project prevents, by curbing deforestation, about 1,937,742 tCO2e by reducing GHG emissions throughout 20 years of the project. All the proposed activities to curb deforestation will become economically feasible if the management of non-timber forest products is combined with the trading of carbon credits through REDD+ carbon crediting mechanisms.","lat":-8.2333,"lon":-72.4314},{"ID":"3380","Name":"SIMFlor Programme 1","Proponent":"SIMFlor Ltd","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0007","Status":"Under development","Country":"Brazil","Estimated Annual Emission Reductions":1000000,"Region":"Latin America","Crediting Period Start Date":44774,"Crediting Period End Date":55731,"Hectares":"15121 Hectares","project_explanation":"The SIMFlor (Systematic Implementation of the Brazilian Forest Code) Programme 1, hereinafter known as “SIMFlor1”, is a grouped project located in the arc of deforestation within the Amazon biome. SIMFlor1 will provide carbon finance to promote native forest conservation in areas under threat of deforestation for the expansion of extensive cattle ranching thereby promoting compliance with the Brazilian Forest Code.","lat":-8.2333,"lon":-72.4314},{"ID":"3350","Name":"THE ARR HORIZONTE CARBON PROJECT","Proponent":"Suzano SA","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Under development","Country":"Brazil","Estimated Annual Emission Reductions":86397,"Region":"Latin America","Crediting Period Start Date":43041,"Crediting Period End Date":53997,"Hectares":"15662 Hectares","project_explanation":"The ARR Horizonte Carbon Project’s purpose is to remove and reduce GHG emissions through an increase in forestry area in the state of Mato Grosso do Sul, at the Cerrado biome, initially near the city of Três Lagoas. The carbon credits are a result of the change of land use in previous pasture areas, through the plantation of Eucalyptus species in an area of 14,457 ha, considered as the first project activity, as well as a result of the recovery of sandy areas, through the plantation of native vegetation most adequate for each case in an area of 1,204 ha, considered as the second project activity, both classified under the ARR category.","lat":20.803902,"lon":52.235565},{"ID":"3332","Name":"SIMFlor Programme 2 (SIMFlor2)","Proponent":"SIM Sustainable Investment Management","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0007","Status":"Under development","Country":"Brazil","Estimated Annual Emission Reductions":1000000,"Region":"Latin America","Crediting Period Start Date":44743,"Crediting Period End Date":55700,"Hectares":"37020 Hectares","project_explanation":"The SIMFlor (Systematic Implementation of the Brazilian Forest Code) Programme 2, hereinafter known as “SIMFlor2”, is a grouped project located in the arc of deforestation within the Amazon biome. SIMFlor2 will provide carbon finance to promote native forest conservation in areas under threat of deforestation for the expansion of extensive cattle ranching thereby promoting compliance with the Brazilian Forest Code.","lat":-7.461289,"lon":-67.50414},{"ID":"3324","Name":"Ipoá REDD+ Project","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0007","Status":"Under development","Country":"Brazil","Estimated Annual Emission Reductions":522351,"Region":"Latin America","Crediting Period Start Date":44637,"Crediting Period End Date":55594,"Hectares":"17386 Hectares","project_explanation":"The primary objective of the IPOÁ REDD+ Project is to reduce the emission of 2,809,491 tCO2e (average of 93,650 tCO2e/year), corresponding to 4,564 hectares of avoided deforestation over the 30-year project lifetime. IPOÁ REDD+ Project operates within private areas totaling approximately 17,386 hectares, located in the municipality of Novo Aripuanã, which ranks 15th in the ranking of deforestation of the municipalities of the Amazon biome. According to PRODES, between 2016 and 2021, an average of 160km²/year were deforested. Within the project, an estimated average of 152 ha/year of deforestation will be avoided over its lifetime. The project will generate benefits for communities and biodiversity, which are quantified and monitored according to the CCB methodological standard. The definition of strategies is carried out in a process of participatory consultation with stakeholders. The project aims to positively impact its participants immediately. For instance, programs to benefit the population including installation of communications capabilities in this remote region, distribution of sanitary products and high impact education actions are planned to initiate from the project’s start. Later in the development, the feasibility of developing programs to promote the local bioeconomy will be studied, facilitating sale and increasing demand for products originating in the project area), together with the continuous conservation and maintenance of regional biodiversity.","lat":5.517869,"lon":59.766812},{"ID":"3306","Name":"Buritirana Grouped REDD+ Project","Proponent":"Future Carbon Consultoria e Projetos Florestais LTDA","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Under development","Country":"Brazil","Estimated Annual Emission Reductions":5149,"Region":"Latin America","Crediting Period Start Date":44077,"Crediting Period End Date":47728,"Hectares":"4037 Hectares","project_explanation":"The primary objective of the Buritirana Grouped REDD+ Project is to avoid the unplanned deforestation (AUD), consisting of Cerrado biome, known as the Brazilian savannah. Such biome is severely threatened by agriculture and cattle ranching, and, as a REDD project under VCS rules, offers the possibility to expand the conservation to other areas in the future. The project area occupies private properties, with a project area of 4,037.145 ha, located in Ponte Alta do Bom Jesus, Tocantins State, Western Amazon. Beyond the project’s ecological and carbon benefits, a proportion of the carbon credits generated will be dedicated to improving the social and environmental conditions in the project region, specifically contributing to improving deforestation control, and developing environmental education and other social activities. The contribution to sustainability is being monitored through the application of the SOCIALCARBON® Standard. The present REDD project is expected to avoid a predicted 1,042 ha of deforestation of Cerrado Biome in an area of 4,037.145 ha, equating to 154,467 tCO2e in emissions reductions over the 30-year project lifetime (03-September-2020 to 02-September-2050), with an annual average of 5,149 tCO2e.","lat":-11.947426,"lon":-46.374113},{"ID":"3304","Name":"Boa Esperança Grouped REDD+ Project","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Under development","Country":"Brazil","Estimated Annual Emission Reductions":5921,"Region":"Latin America","Crediting Period Start Date":44627,"Crediting Period End Date":48279,"Hectares":"8943 Hectares","project_explanation":"The primary objective of the Boa Esperança REDD+ Project is to avoid unplanned deforestation (AUD) of 8,943.38 ha of project area, consisting of 100% Amazon rainforest. The project area has 1 instance, which is located within a private property, in the municipality of Presidente Figueiredo, Amazonas State. Besides the ecological and carbon benefits of the project, a proportion of the carbon credits generated will be dedicated to improving social and environmental conditions for the local community around the project area, specifically contributions to environmental education and other social activities. The contribution to sustainability is being monitored through the application of the SOCIALCARBON® and CCB standards. The present REDD project is expected to avoid a predicted 678 ha of deforestation, equating to 183,542 tCO2e in emissions reductions over the 30-year project lifetime (07-March-2022 to 06-March-2052), with an annual average of 5,921 tCO2e.","lat":-1.859012,"lon":-59.810152},{"ID":"3299","Name":"ARR Grouped Project Serra do Sudeste","Proponent":"The Green Branch","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Under validation","Country":"Brazil","Estimated Annual Emission Reductions":14703,"Region":"Latin America","Crediting Period Start Date":44478,"Crediting Period End Date":57261,"Hectares":"2953 Hectares","project_explanation":"The project “Serra do Sudeste” is a grouped project, falling under the Afforestation, Reforestation and Revegetation (ARR) category and targeting the following Verra certifications: Verified Carbon Standard (VCS), and Climate, Community & Biodiversity Standard (CCB). The Serra do Sudeste Grouped Project aims to restore forest formations that are diminished due to the expansion of other land use practices such as overgrazing on extensive cattle ranches, intensive agriculture and silviculture systems. The grouped project is located in the Pampa biome in Rio Grande do Sul, south of Brazil. Restoration is attained through forestation activities using primarily native species and includes enrichment planting with valuable species as well as assisted natural regeneration. The overarching goal of the project is to create a natural and biodiverse forest that combines carbon capture with a diversity of other economic functions such as apiculture, sustainable production of crops and exploitation of forest products.","lat":31.24105,"lon":53.574455},{"ID":"3166","Name":"ReforesTerra Grouped Project","Proponent":"ReforesTerra – Restauração de Ecossistemas Florestais Ltda","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"ACM0003","Status":"Under development","Country":"Brazil","Estimated Annual Emission Reductions":26843,"Region":"Latin America","Hectares":"20000 Hectares","project_explanation":"The ReforesTerra grouped project aims to recover low-intensity and degraded pasturelands in the Baixo Rio Jamari watershed in the State of Rondônia, Brazil, in the Southern Amazon region. The first project activity instance consists of the reforestation of 2,000 hectares in smallholdings. Available data indicates a potential for reforestation over 20,000 hectares in the watershed. Through the reforestation of degraded lands in Permanent Protection Areas (PPAs) surrounding water bodies and in Legal Reserves (LRs) in other areas of the engaged landholdings, the grouped project aims to protect water resources and reintroduce native tree species. Additionally, the project is expected to benefit to 600 landholders in the first instance through capacity building and Payment for Ecosystem Services, as well as employing 37 local people full time and 12 other professionals in the region part time, with equal job opportunities for women and men. The first project activity instance will remove 805,304 tCO2e over the 30-year crediting period.","lat":-9.450792,"lon":-63.13637},{"ID":"3152","Name":"Alto Xingu Grouped REDD+ Project","Proponent":"Ecológica Assessoria Ltda.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Under development","Country":"Brazil","Estimated Annual Emission Reductions":57902,"Region":"Latin America","Crediting Period Start Date":44397,"Crediting Period End Date":55353,"Hectares":"15256 Hectares","project_explanation":"The primary objective of the Alto Xingu Grouped REDD+ Project is to avoid the unplanned deforestation (AUD), consisting of Amazon rainforest and Cerrado, the latter known as the Brazilian savannah. The project area occupies both biomes, and the first instance is composed by 4 private properties, with a project area of 15,256.33 ha, which are located in Paranatinga municipality, at Mato Grosso State. Beyond the project’s ecological and carbon benefits, a proportion of the carbon credits generated will be dedicated to improving the social and environmental conditions in the project region, specifically contributing to improving deforestation control, and developing environmental education and other social activities. The contribution to sustainability is being monitored through the application of the SOCIALCARBON® Standard. The present REDD project is expected to avoid a predicted 14,639 ha of deforestation, equating to 1,737,032 tCO2e in emissions reductions over the 30-year project lifetime (20-July-2021 to 19-July-2051).","lat":-12.606213,"lon":-54.108496},{"ID":"3141","Name":"Western Amazon REDD+ Grouped Project","Proponent":"CARBON CREDITS CONSULTING S.R.L.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Under validation","Country":"Brazil","Estimated Annual Emission Reductions":362077,"Region":"Latin America","Crediting Period Start Date":43466,"Crediting Period End Date":54423,"Hectares":"59959 Hectares","project_explanation":"The WARG Project is an initiative led by Carbon Credits Consulting SRL and a group of landowners in the state of Acre to protect multiple parcels of precious native forest. The project gives landowners with small and medium sized properties the opportunity to participate in a REDD+ project which will bring biodiversity, community, and climate benefits to their land. The project areas are in the region known as the Amazon deforestation arc and are located in a region of high conversion rates from original forest habitat to pasture and/or large areas of agricultural crops. The Brazilian economy in the south of the Amazonian regions, has been based based on native forest clearing to allow cattle-ranching, often without appropriate management technologies. Considering the infertile soil in the Amazon Forest, its exposure to the weather, and to little improvement in agricultural technology the region is hampered by low productivity, leading to increasing deforestation to ensure profitability. The WARG project intends to deliver significant improvements in the area’s monitoring, with remote sensing technology implementation to identify any signs of modification in the Project Area and surroundings, in addition to training staff for field monitoring. The project will also be implementing satellite wildfire detection systems and teams of fire fighters to detect fires early before they reach an unmanageable size. The project is expected to avoid the emission of 3,620,766 tCO2eq in the first 10 years. The actual project area is 60,000 ha of native forest divided in 22 properties, with an ambitious target for continuous expansion to a total area of 500,000 ha. Finally, the project wha been protecting the Brazilian Big Five which include the giant anteater, the giant armadillo, the maned wolf, the puma, and the jaguar on top of a multitude of other endangered animal and plant species.","lat":-10.231087,"lon":-67.656339},{"ID":"3055","Name":"Itaúba REDD+ Project","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Under validation","Country":"Brazil","Estimated Annual Emission Reductions":28655,"Region":"Latin America","Crediting Period Start Date":44544,"Crediting Period End Date":55500,"Hectares":"15352 Hectares","project_explanation":"The ITAÚBA REDD+ PROJECT aims at protecting forests in one of the regions having the highest deforestation trends in the Amazon Biome, in the municipalities of Itaúba and Marcelândia. Both the municipalities are inside the “Arc of Deforestation” and since the colonization of the municipalities, besides the damage caused to natural ecosystems, several social conflicts have emerged from the dynamics of unsustainable land use, associated with the extensive deforestation and degradation activities. Throughout time, communities with livelihoods based on family-scale agriculture and forest resources were expulsed from the region and gave place to large scale agricultural and pasture activities. For the project period, the baseline scenario for the Project Area indicates that the historical patterns of change in land-use would be reproduced: extensive deforestation and systematic conversion from forest to soy crops and pasture areas for cattle ranching, far above the limits stablished by the Brazilian Forest Code. The project activities are designed to avoid the deforestation drivers that would realize the referred baseline in the without project scenario, with the long-term vision of restoring the relation of local communities of rural workers with the forest areas and contribute with the transition to socioeconomic scenario build on bioeconomy principles. With project activity approval, the proponents intend to improve the mechanisms of remote and in loco surveillance, as well as implement activities that will result in other climate, community, and biodiversity benefits.","lat":-11.1328,"lon":-54.5969},{"ID":"3050","Name":"Maraui Program - Grouped Project","Proponent":"OnePlanet Ltda","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ACoGS; REDD","Methodology":"VM0009","Status":"Under development","Country":"Brazil","Estimated Annual Emission Reductions":200000,"Region":"Latin America","Crediting Period Start Date":44440,"Crediting Period End Date":51744,"Hectares":"27458 Hectares","project_explanation":"Current research established nine planetary boundaries to define the environmental limits within which humanity can safely operate. Within those, two core boundaries — climate change and biosphere integrity — have been highlighted, each of which has the potential to drive the Earth system into a new state should they be substantially and persistently transgressed (Rockström et al., 2009; Steffen et al., 2015). Inspired by a call of action, Maraui Program was designed to act upon the two wicked problems — Climate Change & Biodiversity Loss. Maraui Program intends to halt GHG emissions by avoiding ecosystem conversion while protecting Biodiversity. Furthermore, such a program aims to aid in a range of pressing issues, from preserving Freshwater Resources to improving Traditional Communities’ livelihood. The Program is a grouped project - as per VCS definition - located in the states of Piauí and Maranhão, Brazil. Owners of rich Biodiversity, Piauí and Maranhão states are home to one of the most intense agricultural frontiers of the country and are the most poverty-stricken states - the lowest average income in Brazil (IBGE, 2021). At the issuance of this document, one Project Activity Instance (PAI) has been instituted, Fazenda Boqueirão (27,458.29 hectares).","lat":-7.551746,"lon":-43.421767},{"ID":"3049","Name":"Rio Preto Grouped REDD+ Project","Proponent":"Future Carbon Consultoria e Projetos Florestais LTDA","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Under development","Country":"Brazil","Estimated Annual Emission Reductions":11541,"Region":"Latin America","Crediting Period Start Date":44562,"Crediting Period End Date":48213,"Hectares":"3096 Hectares","project_explanation":"The primary objective of the Rio Preto REDD+ Project is to avoid the unplanned deforestation (AUD) of the 3,096 ha project area, consisting 100% of Amazon rainforest. The project area is located within 2 private properties in Nova Marilândia and Santo Afonso municipalities, in the State of Mato Grosso. This project was designed as a grouped project, in order to be able to increase its contribution to the standing forest with the addition of new project activity instances in the future. The contribution to sustainability is monitored through the application of the SOCIALCARBON® Standard, which is based on six main indicators: Biodiversity; Natural; Financial; Human; Social and Carbon Resources. The present REDD project is expected to avoid a predicted 1,287 ha of deforestation, equating to 477,066 tCO2e in emissions reductions over the 30-year project lifetime, with an annual average of 15,902 tCO2e.","lat":-14.368885,"lon":-57.189008},{"ID":"3002","Name":"Hiwi REDD+ Project","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Under validation","Country":"Brazil","Estimated Annual Emission Reductions":88084,"Region":"Latin America","Crediting Period Start Date":43708,"Crediting Period End Date":54665,"Hectares":"20505 Hectares","project_explanation":"The Hiwi REDD+ Project is a 20,505 hectare area of tropical rainforest located close to the municipalities of Bujari, Rio Branco and Porto Acre, in the state of Acre, Northern Brazil. The state of Acre is facing a rise in deforestation due to cattle ranching activities, with an 8.3% increase of cattle heads from 2020 to 2021. The municipality of Rio Branco has the highest cattle herd in the State, with 14% of the total . Bujari also presented an increase of 15.5% from 2018 to 2020 , while Porto Acre the growth was of 23.5% in the same period. Deforestation in the municipalities from 2018 to 2020 had a boost of 198%, 89% and 154%, respectively. The project will promote forest conservation and, consequently, reduce greenhouse gas emission that would occur due to deforestation. A consortium of 4 rural properties comprises the Hiwi REDD+ Project Area.","lat":-9.066861,"lon":-68.076172},{"ID":"2980","Name":"Feijó REDD+ Project","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0007; VM0015","Status":"Under development","Country":"Brazil","Estimated Annual Emission Reductions":116036,"Region":"Latin America","Crediting Period Start Date":43467,"Crediting Period End Date":47119,"Hectares":"43500 Hectares","project_explanation":"The primary objective of the Feijó REDD+ Project is to avoid the unplanned deforestation (AUD) of the 41,625.87 ha project area, and to avoid planned deforestation (APD) of the 1,874.13 ha project area within three private properties in the municipality of Feijó, State of Acre, consisting of 100% Amazon rainforest. Beyond the project’s ecological and carbon benefits, a proportion of the carbon credits generated will be dedicated to improving the social and environmental conditions in the project region, specifically contributing to improving deforestation control, and developing environmental education and other social activities. The contribution to sustainability is being monitored through the application of the SOCIALCARBON® and CCB standards. The AUD REDD project is expected to avoid a predicted 5,750 ha of deforestation, equating to 2,660,226 tCO2e in emissions reductions over the 30-year project lifetime (02-January-2019 to 31-December-2048), with an annual average of 88,674 tCO2e. The APD REDD project is expected to avoid a predicted 1,751 ha of deforestation, equating to 820,856 tCO2e in emissions reductions over the 30-year project lifetime (17-April-2020 to 30-April-2049), with an annual average of 27,362 tCO2e.","lat":-8.436576,"lon":-69.844838},{"ID":"2950","Name":"Atlantic Forest Biodiversity Conservation Limeira Project REDD","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0007","Status":"Under validation","Country":"Brazil","Estimated Annual Emission Reductions":11266,"Region":"Latin America","Crediting Period Start Date":42736,"Crediting Period End Date":53692,"Hectares":"4340 Hectares","project_explanation":"The Limeira Atlantic Forest Biodiversity Conservation Project is located in the state of Paraná, south of Brazil. Its area is located within the Atlantic Forest Biome, home of a great diversity of fauna and flora, including several endemic and endangered species, including the terrestrial tapir (Tapirus terrestrial), the largest terrestrial mammal, described as (endangered, IUNC, 2011) in the Atlantic Forest due to habitat loss ( (Medici et.al., 2011). The preserved forest is an important generator of ecosystems services such as water supply, climate regulation, tourism, energy, unique maintenance , beyond the environment with unique natural beauty. This hot spot on earth suffers a great risk of being converted to non-ecological uses, as 70% of the Brazilian GDP is concentrated in it, only 12.4% of the original forest is left in Brazil, demonstrating that they cause a huge impact on this forest, which is limited by human development and agricultural. The project area is the home to more than 50 headwaters, which flow into the São João River, an important water resource in the region. It is part of the only region of the state of Paraná with preserved native vegetation, being an important ecological corridor for the passage of fauna between two large National Parks. Areas such as the project are subject to intense risk every day, mainly due to degradation, which happens little by little, but causes a huge impact on this biome so fragile by human development. This project extends itself through the territory of the municipalities of Guaratuba and Morretes, inside the rural area where the economy is based on agriculture and extractivism, being bananas and peach palm the main crops. The production and trade of these products is driven by the close Limeira state highways and by the Limeira street which passes through the project’s area from North to South, so it is considered th margins of this road, areas susceptible to deforestation.","lat":-25.658203,"lon":-48.735255},{"ID":"2878","Name":"Rio Madeira Grouped REDD+ Project","Proponent":"Carbon Asset Management Projetos Ambientais Ltda.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Under development","Country":"Brazil","Estimated Annual Emission Reductions":178157,"Region":"Latin America","Crediting Period Start Date":43770,"Crediting Period End Date":47422,"Hectares":"53640 Hectares","project_explanation":"The Rio Madeira Grouped REDD+ Project is located in the municipalities of Porto Velho, Rondônia state and Lábrea, south of Amazonas state, in the Northern region of Brazil. The region is surrounded by many rivers and its borders having direct contact with Rio Madeira. The main objective of the Rio Madeira Grouped REDD+ Project is to avoid unplanned deforestation (AUD) of a region within the municipalities of Porto Velho and Lábrea. The first three Project activity instances have 53,640 ha of project area, consisting of 100% Amazon rainforest. Besides the ecological and carbon benefits of the project, a proportion of the carbon credits generated will be dedicated to improving social and environmental conditions for the local community around the project area, specifically contributing to environmental education and other social activities. The contribution to sustainability is being monitored applying the SOCIALCARBON® Standard. This Grouped REDD project is expected to avoid a predicted 17,722 ha of deforestation, equating to around 5,344,693 tCO2e in emissions reductions over the 30-year project lifetime (01-November-2019 to 31-October-2049).","lat":-9.678115,"lon":-64.827933},{"ID":"2870","Name":"Gairova REDD+ Project","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Under development","Country":"Brazil","Estimated Annual Emission Reductions":43257,"Region":"Latin America","Crediting Period Start Date":44409,"Crediting Period End Date":48060,"Hectares":"26000 Hectares","project_explanation":"The primary objective of the Gairova REDD+ Project is to avoid the unplanned deforestation (AUD) of the 26,000 ha project area, consisting of 100% Amazon rainforest in Juara, in the State of Mato Grosso, Southern Amazon. Beyond the project’s ecological and carbon benefits, a proportion of the carbon credits generated will be dedicated to improving the social and environmental conditions in the project region, specifically contributing to improving deforestation control, and developing environmental education and other social activities. The contribution to sustainability is being monitored through the application of the SOCIALCARBON® Standard.","lat":-11.085855,"lon":-58.173096},{"ID":"2871","Name":"Green Valley Grouped REDD+ Project","Proponent":"Ecológica Assessoria Ltda.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Under development","Country":"Brazil","Estimated Annual Emission Reductions":51103,"Region":"Latin America","Crediting Period Start Date":43313,"Crediting Period End Date":46965,"Hectares":"11954 Hectares","project_explanation":"The primary objective of the Green Valley Grouped REDD+ Project is to avoid the unplanned deforestation (AUD) of 11,954.69 ha of project area, consisting of 100% Amazon rainforest. The project area is located within 7 private properties, which are located in Nova Bandeirantes, in the State of Mato Grosso, Southern Amazon. Beyond the project’s ecological and carbon benefits, a proportion of the carbon credits generated will be dedicated to improving the social and environmental conditions in the project region, specifically contributing to improving deforestation control, and developing environmental education and other social activities. The contribution to sustainability is being monitored through the application of the SOCIALCARBON® Standard. The present REDD project is expected to avoid a predicted 4,475 ha of deforestation, equating to 1,533,078 tCO2e in emissions reductions over the 30-year project lifetime (01-August-2018 to 30-July-2048), with an annual average of 51,103 tCO2e.","lat":-10.28682,"lon":-58.280127},{"ID":"2790","Name":"The ARR Cerrado Carbon Project","Proponent":"Suzano SA","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Under development","Country":"Brazil","Estimated Annual Emission Reductions":75984,"Region":"Latin America","Crediting Period Start Date":43665,"Crediting Period End Date":80188,"Hectares":"38708 Hectares","project_explanation":"The ARR Cerrado Carbon Project is located at the Cerrado Biome, in the state of Mato Grosso do Sul, Brazil. It is an AFOLU project, and therefore is classified within scope 14. More specifically, the project falls under the ARR category. The ARR Cerrado Carbon Project’s purpose is to remove and reduce GHG emissions through an increase in forestry area and preservation of native vegetation in the state of Mato Grosso do Sul, at the Cerrado biome, initially near the city of Ribas do Rio Pardo. The project also includes the management and implementation of various social activities at the local communities nearby. The carbon credits are a result of the change of land use in previous pasture areas, through the plantation of Eucalyptus species in an area of 38.708 ha (ARR category). The plantation activities will be developed in accordance with good forestry practices, and in addition, the project proponents will also seek certification under sustainable programs, such as the FSC, which can confirm the implementation of such practices.","lat":-20.4056,"lon":-53.6008},{"ID":"2726","Name":"Regenerating Soil Life with waste management","Proponent":"AMBIPAR ENVIRONMENTAL SOLUTIONS","Project Type":"Agriculture Forestry and Other Land Use; Waste handling and disposal","AFOLU Activities":"ALM","Methodology":"AMS-III.F.; VM0021","Status":"Under validation","Country":"Brazil","Estimated Annual Emission Reductions":40267,"Region":"Latin America","Crediting Period Start Date":44105,"Crediting Period End Date":51409,"Hectares":"43 Hectares","project_explanation":"The project is an innovative integration of industrial composting and increasing carbon stocks in soil. The proposed grouped project was implemented by Ambipar Environmental Solutions within the first instance located in the South of Brazil. The annual average estimation of carbon accrual is 2,337 tCO2e and 38,397 tCO2e of reduction. Compost application in soil has the potential of contribution to the carbon cycle, where simple nutrients that return to the soil are converted by plants into organic compounds engaging sustainable agricultural land management. Soil carbon accrual per unit area is measured in both baseline and project scenarios based on the spatial coordinated sampling gathering data on soil carbon concentration with statistical rigor. The project activities were designed to improve soils, including changes to agricultural practices, compost application and enhance biodiversity in soils. The measurement of the stable SOC concentration was set up to quantify soil dynamics at depth. The soil layers up to 80cm were sampled to estimate changes in carbon stock, excluding the top-soil 20cm. Prior to the implementation of this project, rural producers do not foresee regenerative agriculture due to the lack of knowledge and technical skills about how to switch to organic input, biological control of plagues and sustainable land management. The previous scenario within the project area outcome low productivity per area, soil degradation and no smart application of the compost provided through the waste management, which implied in deposition applications without potential reuse for climate change mitigation. Nowadays, this waste gets into the circular economy by its smart reuse and social and environmental positive influence. Ambipar manages great volumes across Brazil for about 50 industrial customers. Built on the raised potential for inclusion of new project activity instances, this grouped project brings up attractive engagement for high carbon landscapes.","lat":-26.126667,"lon":-50.316763},{"ID":"2709","Name":"Juruena River REDD+ Project","Proponent":"Ecológica Assessoria Ltda.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Registration and verification approval requested","Country":"Brazil","Estimated Annual Emission Reductions":100588,"Region":"Latin America","Crediting Period Start Date":44147,"Crediting Period End Date":55103,"Hectares":"45675 Hectares","project_explanation":"The primary objective of the Juruena River REDD+ Project is to avoid the unplanned deforestation (AUD) of the 45,675.15 ha project area, consisting of 100% Amazon rainforest. The project area is located within 18 private properties, which are located in the municipality of Cotriguaçu, in the State of Mato Grosso, Southern Amazon. A Sustainable Forest Management Plan is also carried out in some of the properties. Beyond the project’s ecological and carbon benefits, a proportion of the carbon credits generated will be dedicated to improving the social and environmental conditions in the project region, specifically contributing to improving deforestation control, and developing environmental education and other social activities. The contribution to sustainability is being monitored through the application of the SOCIALCARBON® Standard. The present REDD project is expected to avoid a predict ed 3,800 ha of deforestation, equating to 1,384,740 tCO2e in emissions reductions over the 30 year project lifetime (12-November-2021 to 11-November-2050).","lat":-9.406582,"lon":-58.552965},{"ID":"2620","Name":"Ribeirinho REDD+ Project","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Under development","Country":"Brazil","Estimated Annual Emission Reductions":1130906,"Region":"Latin America","Crediting Period Start Date":42826,"Crediting Period End Date":53782,"Hectares":"199962 Hectares","project_explanation":"The project protects over 199,962 ha in Portel, Para, ranked as a region depending on the year, either the 1st or 2nd highest rate of deforestation in the Amazon. The project goal is to transform Portel, Para one of the poorest, lowest educated regions of Brazil into a stable, developed region that depends on sustainable forest use for its economy. The project paid for 1252 traditional community families known as ribeirinhos to gain land tenure certificates in order to be able to complete this project. The project knows that the only way to completely end illegal logging is to have the ribeirinhos stable so they can be the ones that can state “No more”. The project working with neighboring REDD projects plans to build 30 additional high quality schools in the region, that will be used for children education, adult training, and university laboratories. These 30 additional high quality schools, health clinics and security offices are above and beyond the 30 schools, health clinics and security offices.","lat":2.195816,"lon":50.862498},{"ID":"2586","Name":"413 REDD Project","Proponent":"413 Environmental, LLC","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0007","Status":"Under validation","Country":"Brazil","Estimated Annual Emission Reductions":2231363,"Region":"Latin America","Crediting Period Start Date":42736,"Crediting Period End Date":53692,"Hectares":"500996 Hectares","project_explanation":"The 413 REDD Project (413 Project) aims to reduce emissions derived deforestation and forest degradation in the Amazonian tropical rain forest. The project proponent is 413 Environmental, LLC, and Ecosecurities do Brasil Ltda have prepared the PD (Project Design). The project applies the Avoided Planned Deforestation (APD) approach and uses CCB and VCS standards and methodologies to a REDD voluntary carbon market. The project\'s geographical boundary comprises a parcel land named Matá-Matá (500,996 hectares), with 500,996 hectares of primary ancient and undisturbed areas of tropical rainforest. Thus, the project area comprises 476,995 hectares of dense lowland forest, 17,705 hectares of dense alluvial forest and 5,914 hectares of dense sub-montane forest. The parcel land is situated in the municipalities of Manicoré and Novo Aripuanã, southern State of Amazonas, Brazil. The project will generate GHG emission reductions from changes in land use caused by imminent deforestation and forest degradation. The emission of 66,940,883 tons of CO2e will be avoided with the 413 project, considering a lifespan of 30 years, with an annual average of 2,231,363 tons of CO2e calculated for the whole period (2017-2046) and 6,374,716 for the first 10-year crediting period (2017-2026). The 413 Project seeks to be validated as Golden Level because exceptional climate measures will be undertaken to adapt the population to climate change. The baseline was conceived from the most-likely scenario, which is converting 20% of the forest to pasture for cattle raising. The conversion of forests to alternative land uses of up to 20% of private properties is permitted by the Brazilian Forest Code but the project proponent decided to protect forest and avoid deforestation and forest degradation, reducing CO2 emissions. In the planned deforestation approach, the conversion agent in the baseline is the owner of the area because he has the right to deforest under the current legislation.","lat":-60.760809,"lon":-5.963038},{"ID":"2587","Name":"Zero Carbon Aripuanã River Valley REDD Project 1","Proponent":"Zero Carbon Holdings, LLC","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0006","Status":"Under validation","Country":"Brazil","Estimated Annual Emission Reductions":717373,"Region":"Latin America","Crediting Period Start Date":42736,"Crediting Period End Date":53692,"Hectares":"161068 Hectares","project_explanation":"The Zero Carbon Aripuanã Valley REDD Project 1 (ZC1 Project) aims to reduce emissions derived deforestation and forest degradation in the Amazonian tropical rain forest. The project proponent is Zero Carbon Holdings, LLCI, and Ecosecurities do Brasil Ltda have prepared the PD (Project Design). The project applies the Avoided Planned Deforestation (APD) approach and uses CCB and VCS standards and methodologies to a REDD voluntary carbon market.The project\'s geographical boundary comprises two parcel lands named Matá-Matá (153,985 hectares) II and Alexandre III (7,083 hectares), with 161,068 hectares of primary ancient and undisturbed areas of tropical rainforest. Thus, the project area comprises 153,977 hectares of dense lowland forest and 7,091 of a unique pioneer natural shrubby vegetation. The project will generate GHG emission reductions from changes in land use caused by imminent deforestation and forest degradation. The emission of 21,521,198 tons of CO2e will be avoided with the ZC1 project, considering a lifespan of 30 years, with an annual average of 717,373 tons of CO2e calculated for the whole period (2017-2046) and 2,115,778 for the first 10-year crediting period (2017-2026). The ZC1 Project seeks to be validated as Golden Level because exceptional climate measures will be undertaken to adapt the population to climate change. The baseline was conceived from the most-likely scenario, which is converting 20% of the forest to pasture for cattle raising. The conversion of forests to alternative land uses of up to 20% of private properties is permitted by the Brazilian Forest Code but the project proponent decided to protect forest and avoid deforestation and forest degradation, reducing CO2 emissions. In the planned deforestation approach, the conversion agent in the baseline is the owner of the area because he has the right to deforest under the current legislation.","lat":-60.962586,"lon":-6.522687},{"ID":"2566","Name":"The Serra do Amolar REDD+ Project","Proponent":"Instituto Homem Pantaneiro","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Registration and verification approval requested","Country":"Brazil","Estimated Annual Emission Reductions":90592,"Region":"Latin America","Crediting Period Start Date":42552,"Crediting Period End Date":53508,"Hectares":"76850 Hectares","project_explanation":"The Instituto Homem Pantaneiro\'s (IHP) REDD+ project for the protection of the Amolar Network (in Portuguese Rede de Proteção e Conservação da Serra do Amolar) named REDD+ Serra do Amolar project is part of the Agriculture, Forestry and Other Land Use (AFOLU) sector under the Reducing Emissions from Deforestation and Degradation (REDD) project category. Specifically, the project is part of the Avoided Unplanned Deforestation and Degradation (AUDD) project category. REDD+ Serra does Amolar project preserves and conserves a representative part of the Pantanal ecosystem, which is about 140,900 ha, and which is located in the strategic region of the Mato Grosso do Sul and Mato Grosso. This region has high levels of deforestation risk caused by land speculation associated with livestock and agriculture. The project has quantifiables climate, community, and biodiversity (CCB) benefits because it provides full-time employment, training, and access for families that live in and around the project area to become self-empowered in a region where there are very few job opportunities. The project also seeks to promote and improve activities seven existing strategic lines, including ecotourism, research, fire prevention and governance/administration, and others. The Serra do Amolar project meets the criteria of GL3 Gold Level. - Exceptional benefits to Biodiversity, according to the vulnerability criterion described by CCB for presenting critically threatened species (IUCN Red List) as one endangered species – the giant otter (Pteronura brasiliensis) – and five vulnerable species: the lowland tapir (Tapirus terrestris), the white-lipped peccary, (Tayassu pecari), the giant armadillo (Priodontes maximus) and the giant anteater (Myrmecophaga tridactyla) and the bare-faced curassow (Crax fasciolata). The project also has a well-documented population of the near-threatened jaguar (Panthera onca).","lat":-17.908324,"lon":-57.580553},{"ID":"2558","Name":"ABC Norte REDD Project","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Registration and verification approval requested","Country":"Brazil","Estimated Annual Emission Reductions":1340740,"Region":"Latin America","Crediting Period Start Date":42991,"Crediting Period End Date":53947,"Hectares":"140691 Hectares","project_explanation":"The primary objective of the ABC Norte REDD Project is to avoid the unplanned deforestation (AUD) of the 145,680.7882 ha project area, consisting of 100% Amazon rainforest. The project area is located within a private property named “Fazenda Pacajá”, which is located between the municipalities of Portel and Bagre, in the State of Pará, Northeast Amazon. Environmental education and other social activities that benefit the local community will be supported, as well as improving the control of deforestation. The SOCIALCARBON® Standard is being applied to assess and monitor the project\'s contribution to sustainability using six key indicators: Biodiversity; Nature; Financial; Human; Social and Carbon Resources, thus improving the social and environmental conditions in the project region. In addition to contributing to the long-term conservation of the region, the ABC Norte REDD Project also establishes a barrier against the advancement of deforestation, making it an important contribution to the conservation of Northeast Amazon biodiversity and also to climate regulation in Brazil and South America. The present REDD project is estimated to avoid a predicted 9,245 ha of deforestation, equating to 3,560,042 tCO2e in emissions reductions over the 10 year project lifetime (14-September-2017 to 13-September-2027).","lat":-2.631825,"lon":-50.343443},{"ID":"2553","Name":"Restoring Degraded Lands for Biodiversity Conservation and Livelihood Development in Brazil","Proponent":"Saving Nature, Inc.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Under development","Country":"Brazil","Estimated Annual Emission Reductions":7666,"Region":"Latin America","Crediting Period Start Date":43009,"Crediting Period End Date":57618,"Hectares":"500 Hectares","project_explanation":"The objective of the proposed grouped project in Brazil is to restore degraded lands and improve the connectivity of forest cover to restore genetic diversity and achieve viable wildlife populations of endemic, threatened, and endangered species. The Project focuses on biodiversity conservation and wildlife habitat restoration with the active participation of the local communities.","lat":22.453181,"lon":42.775278},{"ID":"2551","Name":"BRAZILIAN AMAZON APD GROUPED PROJECT","Proponent":"BRCARBON SERVIÇOS AMBIENTAIS LTDA","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0007","Status":"Registration and verification approval requested","Country":"Brazil","Estimated Annual Emission Reductions":812538,"Region":"Latin America","Crediting Period Start Date":44410,"Crediting Period End Date":80933,"Hectares":"17660 Hectares","project_explanation":"The Brazilian Amazon APD Grouped Project (GPD) aims the forest conservation on private properties located in the nine states of the Legal Amazon. The GPD main goal it is to create positive economic incentives to landowners for the rainforest and Cerrado conservation in private areas, through income generation from carbon credits commercialization. According to national law 12.651, the Brazilian forest code, landowners must conserve 80% of the forest cover and 35% of the Cerrado areas on properties located in the Legal Amazon. In this way, the areas with forest cover exceeding this percentage can be legally converted to other land uses for commercial activities such as cattle raising or agricultural projects, with the authorization of the responsible environmental agency in each state. The landowners who decide to join the initiative, by giving up their right to legally clear their forest areas will be able to access financial resources from the carbon voluntary market, becoming BRCarbon partners. The partnership between BRCarbon (BRC) and landowners will result in legal protection to forests, forest monitoring by satellite images, forest biomass inventory using drones and innovative aero photogrammetry techniques associated with LIDAR technology, property surveillance, wildfire monitoring, prevention and firefighting activities, threatened species protection and social engagement activities with traditional communities living inside the project area. BRC will be responsible for the development, implementation, monitoring and certification of the project instances. The landowner’s counterpart is to allow project activities to be implemented in their areas, in addition to freely committing to their long-term conservation. In this way, BRC expects to escalate the climate impact promoted by the implementation of carbon projects, bringing positive net benefits to communities and biodiversity.","lat":-10.265973,"lon":-69.532794},{"ID":"2539","Name":"EVERGREEN REDD+ PROJECT","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0007","Status":"Registered","Country":"Brazil","Estimated Annual Emission Reductions":1566547,"Region":"Latin America","Crediting Period Start Date":44160,"Crediting Period End Date":55116,"Hectares":"130555 Hectares","project_explanation":"The Evergreen REDD+ Project is located in Apuí Municipality, Amazonas, currently the municipality with the 10th highest deforestation rate in Brazil making it a priority area for forest conservation worldwide. The present project continues to build on the success of the Fortaleza Ituxi REDD+ Project and the Unitor REDD+ Project, which have the same project developer and owner, and have provided an important proof of concept for the region. Evergreen’s Project Area sums to 130,554.81 hectares of preserved forest area. Given the deforestation pressures and financial difficulties regarding sustainable economic activities in the Project Area, sale of the farm to private investors is considered the most plausible baseline scenario. In recent years, some of the project landowners have been approached to sell their properties. In this context, the conversion of a portion of the project area to pastureland by the project owners, to alleviate the financial pressure, followed by the regional business-as-usual scenario (BAU) is the most plausible future scenario, involving deforestation beyond Brazilian Forest Code limits and sale of illegal timber, followed by implementation of unsustainable cattle ranching operations. Provided that the present REDD+ project is approved, the landowner intends to improve the mechanisms of surveillance inside the Project Area, abandon planned deforestation activities, as well as implement activities that will result in climate, community, and biodiversity benefits.","lat":-7.471899,"lon":-59.521522},{"ID":"2508","Name":"UNITOR REDD+ PROJECT","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Registered","Country":"Brazil","Estimated Annual Emission Reductions":522923,"Region":"Latin America","Crediting Period Start Date":43414,"Crediting Period End Date":54371,"Hectares":"99035 Hectares","project_explanation":"The UNITOR REDD+ PROJECT is located in Lábrea, Amazonas State, Brazil, which is the municipality with the fourth highest aggregate deforestation rate in Brazil between 2008 and 2020, according to PRODES data1. Municipal deforestation rates have risen year on year, from 3.8% in 2017 to 5.3% in 2020, making it a priority area for forest conservation worldwide. A consortium of 15 neighbouring properties comprises the Unitor REDD+ Project, summing to 99,035.20 ha of forest area, who have come together to develop forest carbon activities under the guidance, example and inspiration of the nearby Fortaleza Ituxi REDD Project.","lat":-9.13167,"lon":-66.13797},{"ID":"2482","Name":"Boa Fé REDD Project","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Registration and verification approval requested","Country":"Brazil","Estimated Annual Emission Reductions":1295172,"Region":"Latin America","Crediting Period Start Date":43831,"Crediting Period End Date":47483,"Hectares":"432690 Hectares","project_explanation":"The primary objective of the Boa Fé REDD Project is to avoid the unplanned deforestation (AUD) of a subsection of the 432.690,25 ha project area, consisting of 100% Amazon rainforest, within a private property in the municipality of Apuí, southern Amazon. Beyond the project’s ecological and carbon benefits, a proportion of the carbon credits generated will be dedicated to improving the social and environmental conditions in the project region, specifically contributing to improving deforestation control, and developing environmental education and other social activities. The contribution to sustainability is being monitored through the application of the SOCIALCARBON® Standard. The Boa Fé REDD Project makes an important contribution to the conservation of Southern Amazon biodiversity and also to climate regulation in Brazil and South America. In addition to contributing to the long term conservation of the region, this project also has the function of establishing a barrier against the advancement of the Brazilian Arc of Deforestation, creating a Southern Amazon biodiversity corridor by adjoining to other protected areas in the region. The present REDD project is expected to avoid a predicted 92,543 ha of deforestation, equating to 57,808,000 tCO2e in emissions reductions over the 30-year project lifetime (01-January-2020 to 31-December-2049).","lat":-8.536883,"lon":-60.039798},{"ID":"2465","Name":"Avoided Conversion Cerrado","Proponent":"ERA Assessoria e Projetos Ambientais e Agricolas Ltd.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ACoGS","Methodology":"VM0009","Status":"Registration and verification approval requested","Country":"Brazil","Estimated Annual Emission Reductions":100000,"Region":"Latin America","Crediting Period Start Date":42768,"Crediting Period End Date":46419,"Hectares":"10841 Hectares","project_explanation":"The Cerrado biome, the main breadbasket of Brazil, is classified as a tropical wet and dry grassland/ savanna. Since 1985, the Cerrado biome has lost 46.8% of it’s native vegetation to agriculture. Conversion of native vegetation is predominantly occurring in private lands in the Cerrado biome because of Brazilian land-use regulation. The central piece of legislation regulating land use and management on private properties is the Brazilian Forest Code (Law No. 12,651, of May 25, 2012) and requires that landholders maintain a percentage of native vegetation on private lands. Currently, many landholders have surplus native vegetation in conservation on their land then legally required. According to the data calculated by Soares-Filho et al. (2014), there is approximately 40 million hectares of surplus native vegetation in the Cerrado that could be converted. Most landholders do not receive payments for ecosystem services to maintain the native vegetation, therefore, the only economic alternative is to convert native Cerrado for agricultural purposes. This results in landholders being incentivized to convert native vegetation to produce commodities, as the opportunity cost is higher. The consequence is ecosystem conversion, biodiversity loss, water loss and increased greenhouse gas (GHG) emissions. The Avoided Grassland Conversion Cerrado Program was launched as a grouped project to provide an alternative for landholders with surplus native vegetation to receive payments for conservation by leveraging the voluntary carbon market. The main agent of conversion, the private landholder, foregoes their legal right to convert native vegetation, and in doing so avoids GHG emissions.","lat":-14.464866,"lon":-48.457224},{"ID":"2373","Name":"Yellow Ipê Grouped REDD Project","Proponent":"Ecológica Assessoria Ltda.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Registered","Country":"Brazil","Estimated Annual Emission Reductions":273302,"Region":"Latin America","Crediting Period Start Date":43891,"Crediting Period End Date":54847,"Hectares":"86097 Hectares","project_explanation":"The Yellow Ipê Grouped REDD Project is located in the municipalities of Novo Aripuanã and Borba, south of Amazonas state, in the Northern region of Brazil. The Trans Amazonian Highway BR 230 is located in the south of the project region and, along its route, cattle raising can be found, which is one of the many agents to deforestation in the region. The primary objective of the Yellow Ipê Grouped REDD Project is to avoid unplanned deforestation (AUD) of a specific region within the municipalities of Novo Aripuanã and Borba. The first Project activity instance has an area of 86,097.67ha, as it is part of two private properties in Novo Aripuanã, consisting of 100% Amazon rainforest. However, other REDD project instances can be added into this grouped project activity in the future, as long as they comply with the eligibility criteria defined by the methodology and of the VCS Standard. Besides the ecological and carbon benefits of the project, a proportion of the carbon credits generated will be dedicated to improving social and environmental conditions for the local community around the project area, specifically contributing to environmental education and other social activities. The contribution to sustainability is being monitored applying the SOCIALCARBON® Standard, which is based on six key indicators: Biodiversity; Natural; Financial; Human; Social and Carbon Resources. This REDD project is expected to avoid a predicted 25,680.81ha of deforestation, equating to around 8,199,069 tCO2e in emissions reductions over the 30 year project lifetime (01-March-2020 to 28-February-2050).","lat":-5.628332,"lon":-59.686387},{"ID":"2359","Name":"Serra do Sudeste Landscape Restoration and Reforestation Project","Proponent":"The Green Branch","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"IFM; REDD","Methodology":"AR-AMS0007","Status":"Under validation","Country":"Brazil","Estimated Annual Emission Reductions":8152,"Region":"Latin America","Crediting Period Start Date":44256,"Crediting Period End Date":55212,"Hectares":"1037 Hectares","project_explanation":"The Serra do Sudeste Landscape Restoration and Reforestation Project (‘Project’) is a VCS AFOLU (Agriculture, Forestry and Other Lands Use) project (scope 14), falls specifically under the ARR (Afforestation, Reforestation and Revegetation) category and uses methodology AR-AMS0007. The project goal is the reforestation of degraded lands, which would continue to remain degraded, and would become increasingly more degraded, in absence of the project. The project aims to restore natural biodiverse forest and produce crops through agroforestry in other areas. This is done through Assisted Natural Regeneration (ANR). A secondary goal is to expand in the region. In this case, the first farm will serve as a hub to be able to scale to adjacent farms and acquire more land to add to the project. The farm has been used extensively for cattle ranching and has an average livestock load of 600 cows. As a result, the land has been rid of its vegetation and the soil quality is gradually decreasing. The environmental damage and the decline of economic viability of the business as usual, has caused the owner to consider a sustainable strategy. The project is located in Brazil – Municipality of Bagé, in the state of Rio Grande do Sul. The total area of the project is 1.037 hectares and is privately owned by the Titton family (‘Owner’). An estimated 458 ha is suitable for reforestation. The project is expected to generate GHG emissions reductions through reforestation of degraded grassland. Biomass growth in the project area is expected to sequester. Also, following out the strategy a total of 244.565 tonnes of CO2 is to be sequestered by reforestation of native forest. This results in an average annual amount of 8.152,2 tonnes of CO2. The crediting period lasts 30 years and runs from March 1, 2021 to February 28, 2051.","lat":-31.0125,"lon":-53.571111},{"ID":"2252","Name":"Rio Anapu-Pacaja REDD Project","Proponent":"Brazil AgFor LLC","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Registered","Country":"Brazil","Estimated Annual Emission Reductions":938000,"Region":"Latin America","Crediting Period Start Date":42370,"Crediting Period End Date":53327,"Hectares":"165707 Hectares","project_explanation":"The Rio Anapu-Pacaja REDD Carbon Credit Project in Portel, Para is protecting 165,707 hectares in a highly critical region of the Brazilian Amazon. The high levels of land grabbing, land conflict and instability in the region has allowed the project to strongly focus on bringing stability to all the areas that surround the project area by paying for and helping the local residents known as Riverine people to gain land tenure documents and eventually full freehold title deeds. The project also provided cook stoves to 50 families with the goal to help further families as carbon credit sales take place.","lat":-2.7115994082266033,"lon":-51.27765232827451},{"ID":"2079","Name":"Fazenda Nascente do Luar Agroforestry Project","Proponent":"CARBON CREDITS CONSULTING S.R.L.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Registered","Country":"Brazil","Estimated Annual Emission Reductions":22797,"Region":"Latin America","Crediting Period Start Date":42114,"Crediting Period End Date":53071,"Hectares":"342 Hectares","project_explanation":"The FNL Project is a typical Afforestation Project and aimed to plant 342 ha of degraded grassland with the species Eucalyptus uro-grandis (hybrid of E. urophylla and E. grandis species). This 2 species, originating from Australia, have adapted very well to the soil and climate typical of the region of Mato Grosso do Sul, thanks mainly to the high rainfall and the high photoperiod, which ensure a high yield of this timber species. The Project also aimed to recover the remnant natural savanna restauration of the Project Zone. The set of areas planted with Eucalyptus spp. and the areas of regenerated savannah is a typical mosaic-shaped landscape that guarantees the protection of the soil and the recovery of biodiversity typical of the Project Zone.PUBLIC COMMENT PERIOD:This project was open for public comment from 06 January 2020 – 05 February 2020.","lat":-18.571722662219695,"lon":-53.41700172398825},{"ID":"1969","Name":"Carbono Verde AR Project","Proponent":"Amazon Reforestation Consortium.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Registered","Country":"Brazil","Estimated Annual Emission Reductions":516780,"Region":"Latin America","Crediting Period Start Date":42370,"Crediting Period End Date":53327,"Hectares":"39150 Hectares","project_explanation":"The project reforests 39,150 hectares. The project goal is to reforest with trees the degraded pasture in the Amazon Biome, with the goal to prove out the economic feasibility of reforestation in the Amazon via the help of carbon credit sales, with the hopes that other large scale reforestation projects can be completed as investment grade enterprises.Reforest 39,150 hectares of land and maintain this tree cover on the land indefinitely. Of which 20,386 hectares are already reforested.PUBLIC COMMENT PERIOD:This project was open for public comment from 29 October – 28 November 2019. 1)CCB_PRJ_DES_SUM_POR_DRAFT_1969_27OCT20192)CCB_PRJ_DES_SUM_ENG_DRAFT_1969_26OCT20193)Draft_A/R_CCB_VCS_Summary_MR_for_public_comments.pdf 4) Draft_A/R_MR_for_public_comments_portuguese.pdf In June 2022, this project changed its name from The ARC A/R Project to the Carbono Verde AR Project.","lat":-3.6368464731376524,"lon":-47.1845286403163},{"ID":"1953","Name":"Floresta Verde REDD+ Project","Proponent":"Floresta Verde Serviços Ltda.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Registered","Country":"Brazil","Estimated Annual Emission Reductions":340000,"Region":"Latin America","Crediting Period Start Date":42370,"Crediting Period End Date":53327,"Hectares":"53528 Hectares","project_explanation":"The project preserves 53 ,528 hectares in a critical region of the eastern amazon biome. A region where there is high deforestation risk. The project has quantifiable CCB benefits, as it provides full time employment, training and access for the families that live in and around the project area, to be self-empowered in a region where there are few job opportunities. The project also provides cookstoves with chimneys to help mitigate lung cancer and more efficiently burn fuel for cooking. PUBLIC COMMENT PERIOD: This project was open for public comment from 29 October – 28 November 2019. 1)CCB_PRJ_DES_SUM_POR_DRAFT_1953_27OCT2019 2)CCB_PRJ_DES_SUM_ENG_DRAFT_1653_26OCT2019 3)Draft_REDD_CCB_VCS_Summary_MR_for_public_comments.pdf 4) Draft_REDD_MR_for_public_comments_portuguese.pdf In June 2022, this project changed its name from The ARC REDD+ Project to the Floresta Verde REDD+ Project.","lat":-3.6392215239502868,"lon":-47.1905738890871},{"ID":"1811","Name":"Jari/Pará REDD+ Project","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Registered","Country":"Brazil","Estimated Annual Emission Reductions":525314,"Region":"Latin America","Crediting Period Start Date":41828,"Crediting Period End Date":52785,"Hectares":"496988 Hectares","project_explanation":"The Jari Pará REDD+ Project is a partnership between Biofílica Investimentos Ambientais S.A. and Jari Celulose, belonging to the Jari Group, with the purpose of promoting forest conservation and reducing potential greenhouse gas emissions (GHG) based on a model of local economic development that values the “standing forest” through the integration of Sustainable Forest Management activities and the commercialization of environmental services. The Project is located in the municipality of Almeirim, in the State of Pará, and borders the State of Amapá to the North. There is a very important role in this region as it serves as a home for many rural families and as an ecological corridor, with several Conservation Units (CUs) in its vicinity. It has a very rich biodiversity, its vegetation includes ten forest and non-forest formations and species of extreme ecological and social importance.","lat":-1.56661,"lon":-52.853549},{"ID":"1686","Name":"Agrocortex REDD Project","Proponent":"Agrocortex Madeiras do Acre Agroflorestal Ltda.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Registered","Country":"Brazil","Estimated Annual Emission Reductions":483594,"Region":"Latin America","Crediting Period Start Date":41821,"Crediting Period End Date":52778,"Hectares":"186067 Hectares","project_explanation":"The primary objective of the Agrocortex REDD Project is to avoid the unplanned deforestation (AUD) of the 186,369.66 ha project area, consisting of 100% Amazon rainforest. The project area is located within a private property named “Fazenda Seringal Novo Macapá”, which is situated in the municipalities of Manoel Urbano, Pauini and Boca do Acre, in the States of Acre and Amazonas, South-western Amazon. In addition to contributing to the long-term conservation of the region, the Agrocortex REDD Project also has the function of establishing a barrier against the advancement of deforestation, making an important contribution to the conservation of South-western Amazon biodiversity and also to climate regulation in Brazil and South America. This project is open for public comment from 12 May - 11 June 2017. No comments were received.","lat":-8.660307354374263,"lon":-69.03284926246933},{"ID":"1663","Name":"Fazenda Sao Paulo Afforestation","Proponent":"CARBON CREDITS CONSULTING S.R.L.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Registered","Country":"Brazil","Estimated Annual Emission Reductions":19380,"Region":"Latin America","Crediting Period Start Date":41275,"Crediting Period End Date":50405,"Hectares":"287 Hectares","project_explanation":"The Fazenda Sâo Paulo Agroforestry is an afforestation project that aimed to plant more than 286 ha of degraded grassland with the species Eucalyptus uro-grandis (hybrid of E. urophylla and E. grandis species). The project Area is located in the Municipality of Campo Grande in the center part of the state of Mato Grosso do Sul (Brazil). The Project is based on changing the use of land from extensive cattle ranching (of low productivity and which use involved burning of the grass to encourage the regrowth of degraded grassland) to sustainable forest growth systems. The Project also promote the remnant natural savanna restoration of the Project Zone. The set of areas planted with Eucalyptus spp. and the areas of regenerated savannah is a typical mosaic-shaped landscape that guarantees the protection of the soil and the recovery of ecosystem typical of the “Cerrado” biome, the world\'s most biodiverse tropical moist savannah.","lat":-20.717074,"lon":-54.296596},{"ID":"1654","Name":"Fortaleza Ituxi REDD Project","Proponent":"Fazenda Nossa Senhora das Cachoeiras do Ituxi","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Registered","Country":"Brazil","Estimated Annual Emission Reductions":137675,"Region":"Latin America","Crediting Period Start Date":41623,"Crediting Period End Date":52579,"Hectares":"46592 Hectares","project_explanation":"The FORTALEZA ITUXI REDD PROJECT aims at protecting forests located in one of the regions having the highest deforestation rate in the Amazon Biome: the municipality of Lábrea. As the southernmost municipality in the Brazilian state of Amazonas, Lábrea is geographically located nearby the “Arc of Deforestation” and neighbours other highly deforested municipalities. Over the life of the project, the following benefits are expected:- Estimated net GHG emission reductions: 720,470 tCO2e, corresponding to avoidance of deforestation of 1,836.5 hectares over 30-years;- Technical training on sustainable cattle raising and forest management, fire brigades, study for a small non-wood product processing plant, production of Brazil-nuts (already in place) etc.;- Seedling Production Nursery: capacity of 50,000 native-species seedlings per year and donation for neighbors wishing to plant.- Implementation of technical education frameworks;- Complementary monitoring of labor conditions in Project Area;- Implementation of health insurance plan for workers;- Monitoring the attendance of young in schools;- Commercial activity in “Castanhal Fortaleza” company (job generation beyond timber management).","lat":-8.909852,"lon":-66.155054},{"ID":"1147","Name":"Amazon Rio REDD+ IFM","Proponent":"Empresa Brasileira de Conservação de Florestas S.A","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"IFM; REDD","Methodology":"VM0011","Status":"Registered","Country":"Brazil","Estimated Annual Emission Reductions":61238,"Region":"Latin America","Crediting Period Start Date":41430,"Crediting Period End Date":54578,"Hectares":"1000 Hectares","project_explanation":"The Amazon Rio Project consists of a mosaic of four private areas (20,387 ha) in the Manicoré Municipality in the state of Amazonas, Brazil that will be conserved by avoiding planned deforestation (APD). The project activity is based on the cessation of a legally authorised logging plan that had been operational since 1999, added to the implementation of a Management Plan focused on emission reductions, biodiversity conservation, monitoring and sustainable social development in the region, including the promotion of eco-tourism and scientific research. The project will benefit approximately 350 families living in 15 communities surrounding the project area through several socio-economic programs focused on improving access to health, education and income generation, with the purpose of improving the livelihoods of these communities, strengthening their organizational capacity and promoting long-term conservation and sustainability.The Amazon Rio Project consists in the conservation of four private areas - the Amazon Rio I, II, III and IV Reserves in the Manicoré Municipality in the state of Amazonas, Brazil. The project activity is based on the cessation of the planned logging that had been operational since 1999, added to the implementation of a Management Plan focused on emission reductions, biodiversity conservation and sustainable social development in the region, including the promotion of eco-tourism and scientific research. The project seeks the conservation, management and monitoring of the Amazon Rio Reserves through the protection of the area and promotion of sustainable practices in the buffer zone, in which 15 communities will directly benefit from the project. It aims to protect an area of approximately 20,387 hectares of primary forest by avoiding planned deforestation (APD).","lat":-5.996664,"lon":-61.557634},{"ID":"1113","Name":"The Valparaiso Project","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0007","Status":"Registered","Country":"Brazil","Estimated Annual Emission Reductions":153853,"Region":"Latin America","Crediting Period Start Date":40621,"Crediting Period End Date":51578,"Hectares":"28096 Hectares","project_explanation":"The Valparaiso Project seeks to help protect and conserve tropical forest by providing payments for ecosystem services. This type of project is known as a Reducing Emissions from Deforestation and forest Degradation project (REDD project). Project activities intended to reduce deforestation are implemented in and around a privately-owned property in the State of Acre, Brazil and are funded by payments related to emission reduction credits generated by the project. This project is being developed and registered under the Verified Carbon Standard (VCS) and the Climate, Community and Biodiversity Standard (CCBS). Project development involved meeting with the local communities surrounding the project area, engaging Acre state officials working on similar strategies at a regional/state level, developing a plan which will result in lowering the pressure on land and forest resources in consultation with the local community, and putting into operation the REDD project implementation plan.","lat":-8.11173666083284,"lon":-72.61015835546165},{"ID":"738","Name":"Carbon Project in the Emas-Taquari Biodiversity Corridor, Goiás and Mato Grosso do Sul, Brazil","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-AMS0001","Status":"Registered","Country":"Brazil","Estimated Annual Emission Reductions":6870,"Region":"Latin America","Crediting Period Start Date":40518,"Crediting Period End Date":51475,"Hectares":"520 Hectares","project_explanation":"The project for the reforestation of the Emas-Taquari ecological corridor is part of a broader strategy of conservation and restoration of the Cerrado-Pantanal biodiversity corridor. The project includes the reforestation of 589 hectares using native Cerrado species, especially those strongly interrelated with the fauna and/or those with non-destructive economic uses (non-timber), such as fruits, seeds, fibers, oils, and honey.The project aims at an average removal of 12.13 tons of CO2 per hectare per year, which, after 30 years2 shall have accumulated 363.81 tons of CO2e per hectare. At the end of 30 years all the areas to be reforested in the 588.9 hectares, the project anticipates a total stock of 214,245 tons of carbon dioxide, with 206,115 tCO2e being the net amount resulting from the project activity. It also involves 45 families and 35 addicts in project activities, providing technical training for producing seedlings and reforesting degraded areas; and generates employment and","lat":-17.8663590907318,"lon":-53.04198365992571},{"ID":"1118","Name":"Suruí Forest Carbon Project","Proponent":"Metareilá Association of the Suruí Indigenous P\'pl","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Registered","Country":"Brazil","Estimated Annual Emission Reductions":247460,"Region":"Latin America","Crediting Period Start Date":39973,"Crediting Period End Date":50929,"Hectares":"31994 Hectares","project_explanation":"The Suruí Forest Carbon Project (SFCP) aims to halt deforestation and its associated greenhouse gas (GHG) emissions in an area under deforestation pressure in the Sete de Setembro Indigenous Territory (TISS). The project is based on four themes: Forest Protection and Environment, Food Security and Sustainable Production, Institutional Strengthening; Development and implementation of a financial mechanism - Suruí Fund. This set of activities is designed to end deforestation in the TISS by attacking its two main roots: the lack of economic alternatives to ensure the well-being of the Paiter Suruí, and the appearance of external actors to conduct illegal activities. In order to establish the baseline of the project, a projection model of land use change in the TISS was developed. This model is called SimSuruí and is based on system dynamics to represent the existing system in TISS, its agents and their interactions with the surrounding vegetation. The objective of the SFCP is to prevent 13,575.3 hectares of tropical forests from being cleared in the TISS for 30 years (crediting period), to avoid the emission a long term average of 7,423,806.2 tCO2e in the atmosphere and to contribute to the preservation of the Paiter Suruí lifestyle and traditions.","lat":-11.009945,"lon":-61.15148},{"ID":"1596","Name":"The Juma Sustainable Development Reserve Project: Reducing Greenhouse Gas Emissions from Deforestation and Forest Degradation plus forest management in the State of Amazonas, Brazil","Proponent":"Fundação Amazonas Sustentável - FAS","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Registration requested","Country":"Brazil","Estimated Annual Emission Reductions":238530,"Region":"Latin America","Crediting Period Start Date":42370,"Crediting Period End Date":46022,"Hectares":"540445 Hectares","project_explanation":"The Juma Sustainable Development Reserve Project for Reducing Greenhouse Gas Emissions from Deforestation and Forest Degradation plus forest management (“Juma REDD+ Project”) aims to address deforestation and its resulting emission of greenhouse gases (GHG) in an area of the State of Amazonas, which is under great land use pressure. Its implementation is part of a wide strategy planned and initiated in 2003 by the current Government of the State of Amazonas to halt deforestation and promote sustainable development in Amazonas, based on giving value to the environmental services provided by its standing forests. (BRAGA & VIANA et al., 2003; AMAZONAS, 2002). PUBLIC COMMENT PERIOD: This project was open for public comment from 16 December 2019 – 15 January 2020. The project proponent applies the approved VM00015 v1.1 methodology. It has been estimated that 1,703,443 tCO2e of greenhouse gas (GHG) emissions will be avoided by the implementation of the project activities over the initial 10 years baseline period. The overall risk rating was 19%. Therefore, the total number of credits to be deposited in the buffer account is 391 447 VCUs and the total VCUs to be issued are 1 311 996 tCO2e.","lat":-5.853733,"lon":-60.267794},{"ID":"665","Name":"Multi-Species Reforestation in Mato Grosso, Brazil","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-AMS0006","Status":"Registered","Country":"Brazil","Estimated Annual Emission Reductions":15512,"Region":"Latin America","Crediting Period Start Date":36465,"Crediting Period End Date":51074,"Hectares":"1000 Hectares","project_explanation":"The project is located in Mato Grosso (Brazil) and aims at the restoration of grasslands that were formerly deforested for the purpose of cattle grazing activities. The baseline scenario is the continuation of cattle grazing activities with the decrease of carbon stocks as it is still observed around project area; the region is a front of agriculture going towards north to Amazonia. The project scenario is, on one hand, the reforestation of 1’971.25 ha of private lands that were deforested before land purchase by ONF in 1998, and on the other hand natural forest management on 7’000 ha (not considered for issuance of carbon credits). About 50 mixed tree species are used for project activities (local species, but Tectona grandis on 87 ha) as the project was designed for the following objectives: (i) greenhouse gas removals, (ii) pedagogic activities on carbon sequestration, (iii) preservation of biodiversity, and (iv) local development.","lat":-9.79861,"lon":-58.21222},{"ID":"1112","Name":"The Russas Project","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0007","Status":"Registered","Country":"Brazil","Estimated Annual Emission Reductions":120147,"Region":"Latin America","Crediting Period Start Date":40619,"Crediting Period End Date":51576,"Hectares":"41976 Hectares","project_explanation":"The Russas Project seeks to help protect and conserve tropical forest by providing payments for ecosystem services. This type of project is known as a Reducing Emissions from Deforestation and forest Degradation project (REDD project). Project activities intended to reduce deforestation are implemented in and around a privately-owned property in the State of Acre, Brazil and are funded by payments related to emission reduction credits generated by the project. This project is being developed and registered under the Verified Carbon Standard (VCS) and the Climate, Community and Biodiversity Standard (CCBS). Project development involved meeting with the local communities surrounding the project area, engaging Acre state officials working on similar strategies at a regional/state level, developing a plan which will result in lowering the pressure on land and forest resources in consultation with the local community, and putting into operation the REDD project implementation plan.","lat":-8.095106969258591,"lon":-72.6419924249548},{"ID":"1571","Name":"Manoa REDD+ Project","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Registered","Country":"Brazil","Estimated Annual Emission Reductions":279290,"Region":"Latin America","Crediting Period Start Date":41275,"Crediting Period End Date":52231,"Hectares":"730387 Hectares","project_explanation":"Manoa REDD+ Project is a partnership between Biofílica and Grupo Triângulo, located at Manoa Farm, city of Cujubim, state of Rondônia, in an area of 74,038.7 hectares. The farm’s 73,000 hectares of forest demonstrates the pioneering in sustainable forest management, and are one of the few forest areas remaining in private area in the region, constantly threatened by invasions and timber theft. Manoa is of paramount importance in the landscape connectivity, as it is close to conservation units and provides shelter for several species.Benefits to Climate:Avoid the emission of 279,290 tons of CO2e per year or 8,378,697 tons of CO2e along 30 years of project. This corresponds to 22,118 hectares of avoided deforestation. Benefits to the Community:With its own low-impact forest management infrastructure, the benefits to the local community and other stakeholders will be focused on training members of local associations and farm employees on issues such as agroforestry systems, low carbon agriculture, sustainable forest management, environmental eduction, and Associativism with a focus on young audiences in the region and small local producers. Another benefit will be the support in the formation of skilled labor to act in the forest and non-timber forest management chain certified, seeking a regional scope for the target public.BENEFITS TO BIODIVERSITYMaintenance of forest coverage, preventing deforestation of approximately 23,000 hectares along 30 years of project.Conservation of 177 of flora and more than 360 fauna identified species. Out of these species, 12 are mammals and 9 are birds in some type of threat, according to IUCN.Maintenance of ecological corridors with Conservation Units of the state of Rondônia, reducing negative impacts of the region degradation.","lat":-8.995663,"lon":-62.534638},{"ID":"977","Name":"RMDLT Portel - Para REDD Project","Proponent":"RMDLT Property Group Ltd.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Registered","Country":"Brazil","Estimated Annual Emission Reductions":553273,"Region":"Latin America","Crediting Period Start Date":43466,"Crediting Period End Date":58075,"Hectares":"151105 Hectares","project_explanation":"REDD Project to stop deforestation within private parcels amounting to 151,105 Ha at the edge of the deforestation frontier in Brazil. The project will generate multiple climates, social, and biodiversity benefits This project achieved validation and verification to the CCB Standards Second Edition, Climate, and Biodiversity Gold Levels. The project completed verification to the CCB Standards on December 19, 2019. PUBLIC COMMENT PERIOD: The project held a CCB Standards public comment period for verification, 21 October – 20 November 2019. No comments were received.","lat":-2.564183115926981,"lon":-51.07737624580678},{"ID":"875","Name":"FLORESTAL SANTA MARIA PROJECT","Proponent":"Caragua","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0007","Status":"Registered","Country":"Brazil","Estimated Annual Emission Reductions":997444,"Region":"Latin America","Crediting Period Start Date":39916,"Crediting Period End Date":50872,"Hectares":"71714 Hectares","project_explanation":"https://santamariaproject.com/ - The FSM-REDD Project, proposed by Florestal Santa Maria S/A (FSM), is located in Colniza Municipality, Mato Grosso, Brazil. This region is part of the Brazilian Amazon and known as Deforestation Arch, due to the intense deforestation pressure. As an alternative to combat this, FSM-REDD Project estimates the avoidance of 29,923,331 tCO2 throughout 30 years within Fazenda Florestal Santa Maria – private land owned by FSM, comprising 71,714 ha. of native forest. FSM is committed to local socio-environmental development. Project activities encompass a partnership with a neighboring State Park, promoting local initiatives to create fire brigades. Also, FSM will create together with Colniza City Hall, technical forestry schools targeting education of local youngsters.","lat":-9.170750583108793,"lon":-59.35049710937412},{"ID":"1561","Name":"Sustainable Forestry Management Plan Capture and Sequestration Carbon","Proponent":"Global Servicos de Engenharia","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0007; AR-ACM0003","Status":"Under development","Country":"Brazil","Estimated Annual Emission Reductions":99696,"Region":"Latin America","Crediting Period Start Date":42495,"Crediting Period End Date":53451,"Hectares":"3500000 Hectares","project_explanation":"We have the largest private forest native to Brazil. With just over 3 million hectares and our focus is on sustainable forestry management plan for carbon capture and sequestration. With our expertise in FSC certified forest we will have not only the benefit of the exploitation of the wood no longer fulfill its role in the forest that is the carbon cycle, to fulfill a noble role, which is the production of wooden pieces that will generate jobs of its production until its implementation, because our intention is to provide certified wood parts for the production of social houses with a focus on low-income population. The Four Woods, with Environmental concern in the maintenance of its forestry processes, not just extract a maximum of 5 trees per hectare, as is committed to grow the trees on site 5 to 8 from each tree what will increase the density of the forest, the improvement of climate with increased capture of CO ² of the atmosphere and the resulting will be wood.","lat":-4.499874496543721,"lon":-52.972458133319186},{"ID":"1094","Name":"Ecomapua Amazon REDD Project","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Registered","Country":"Brazil","Estimated Annual Emission Reductions":72338,"Region":"Latin America","Crediting Period Start Date":37622,"Crediting Period End Date":48579,"Hectares":"86270 Hectares","project_explanation":"The Ecomapuá Amazon REDD Project is located on Marajó Island, Pará State, in Brazil’s Eastern Amazon region. The Marajó várzea is a critically valuable ecosystem, adding to the importance of the present project. The primary objective of the project is to avoid the unplanned deforestation (AUD) of an 86,269.84ha area within a private property owned by Ecomapuá Conservação Ltda. The present project will achieve predicted net reductions of 4,253.14ha of deforestation, and 2,170,138 tCO2e emissions over the 30 year project lifetime (01/01/2003 – 31/12/2032). Furthermore, a proportion of the carbon credits generated will be dedicated to improving social and environmental conditions for local communities. Marajó Island is classified as “extremely high” priority for preservation by the Brazilian Environment Ministry (“MMA”), consequently the Ecomapuá Amazon REDD Project contributes to National conservation goals and encourages further conservation efforts in and around this critical region.","lat":-1.1640106207290655,"lon":-50.276273910627516},{"ID":"1115","Name":"JARI/AMAPÁ REDD+ PROJECT","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Registered","Country":"Brazil","Estimated Annual Emission Reductions":115009,"Region":"Latin America","Crediting Period Start Date":40708,"Crediting Period End Date":51665,"Hectares":"65982 Hectares","project_explanation":"REDD+ Project located in the Brazilian Amazon state of Amapá that aims to reduce a total of 3,450,278 tCO2e throughout a 30 year period. Combines Sustainable Forest Management, forest cover and biodiversity monitoring, scientific research and local socioeconomic development. Planned, financed and implemented by the proponents Jari Group and Biofilica.","lat":0.816536,"lon":-52.372455},{"ID":"1503","Name":"RESEX Rio Preto-Jacundá REDD+ Project","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Registered","Country":"Brazil","Estimated Annual Emission Reductions":414290,"Region":"Latin America","Crediting Period Start Date":41183,"Crediting Period End Date":52139,"Hectares":"94289 Hectares","project_explanation":"RESEX Rio Preto-Jacundá REDD+ Project is a partnership between Biofílica and the residents of Resex Rio Preto-Jacundá, represented by the Neighborhood Association of The Extractive Reserve Rio Preto-Jacundá and Ribeirinhos do Rio Machado (ASMOREX), having the Center of Studies Rioterra (CES Rioterra) and the Executive Board of the Extractive Reserves of Anari Valley (CDREX) as partners in the planning and implementation of the activities of the Project. Located in the extractive reserve of the same name at the municipalities of Machadinho D’Oeste and Cujubim, northeastern of the State of Rondônia, RESEX Rio Preto-Jacundá has a territory of 95 thousand hectares. It was created in 1996 by State Decree 7,336 and has a history of struggle for rubber tappers rights.The main goal of RESEX Rio Preto-Jacundá REDD+ Project is the promotion of the sustainability of the exctractive community by reducing forest degradation and unplanned and illegal deforestation and consequent emission of greenhouse gases (GHG), achieved through a list of activities funded by the sale of carbon credits.","lat":-8.863412,"lon":-62.288229},{"ID":"963","Name":"The Purus Project","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0007","Status":"Registered","Country":"Brazil","Estimated Annual Emission Reductions":89868,"Region":"Latin America","Crediting Period Start Date":40686,"Crediting Period End Date":51643,"Hectares":"34702 Hectares","project_explanation":"The Purus Project is a VCS and CCBS validated REDD+ project in the State of Acre, Brazil which aims to protect up to 34,702 hectares of tropical rainforest. Furthermore, the Purus Project will simultaneously preserve endangered species and a wide range of ecosystem services, provide direct benefits to local communities, and mitigate the release of nearly 900,000 metric tonnes of carbon dioxide emissions over the first 10 years of the Project.","lat":-8.977771,"lon":-69.472926},{"ID":"832","Name":"Cikel Brazilian Amazon REDD APD Project   Avoiding Planned Deforestation","Proponent":"CKBV Florestal Ltda","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0007","Status":"Registered","Country":"Brazil","Estimated Annual Emission Reductions":370000,"Region":"Latin America","Crediting Period Start Date":39282,"Crediting Period End Date":46586,"Hectares":"27435 Hectares","project_explanation":"The CIKEL Brazilian Amazon REDD APD Project aims to avoid emissions from planned deforestation on a property in Paragominas Municipality, Para state, Brazil. The main activity of the CIKEL Brazilian Amazon REDD APD Project is the cancelation of the planned deforestation activities and decision to instead conserve the forest area and continue limited forest management activities in the area under Forest Stewardship Council® Certification (FSC®) with Low Impact Logging (SFMLIL) practices. Also, the company is intensifying and improving its practices to support the sustainable social development, maintaining and improving the biodiversity monitoring at the RCC in the framework of FCS certification and REDD activities. The RCC property includes five forest areas: Rio Capim, Poty, Cauaxi, Sumal and Caculé, totaling 209,130.54 ha. The project area is a subset of the RCC property and covers an area of 27,434.9 ha of native forest. The project will avoid 9,432,299 tCO2 that would have been emitted into the atmosphere over the next ten years.","lat":-3.6271326591692827,"lon":-48.58293504155984},{"ID":"981","Name":"Pacajai REDD+ Project","Proponent":"Avoided Deforestation Project (Manaus) Limited (“A","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Registered","Country":"Brazil","Estimated Annual Emission Reductions":264116,"Region":"Latin America","Crediting Period Start Date":39814,"Crediting Period End Date":54423,"Hectares":"135106 Hectares","project_explanation":"REDD Project to stop deforestation within private parcels amounting to 135, 105 Ha at the edge of the deforestation frontier in Brazil. The project will generate multiple climate, social, and biodiversity benefits.","lat":-2.0080083852239055,"lon":-51.30844030964836},{"ID":"1027","Name":"IWC BRAZILIAN AMAZON GROUPED REDD APD, AUPD AND BIOMASS TO FUEL PROJECTS","Proponent":"International Wood Corporation","Project Type":"Agriculture Forestry and Other Land Use; Energy industries (renewable/non-renewable sources)","AFOLU Activities":"REDD","Methodology":"VM0005; VM0015; Methodology Under Development","Status":"Under development","Country":"Brazil","Estimated Annual Emission Reductions":500000,"Region":"Latin America","Crediting Period Start Date":44531,"Crediting Period End Date":48182,"Hectares":"18101 Hectares","project_explanation":"The objective of the project, referred to as the IWC BRAZILIAN AMAZON GROUPED REDD APD, AUPD, AND BIOMASS TO FUEL PROJECTS (hereafter, simply the IWC Projects), is to avoid emissions from planned deforestation and unplanned deforestation (e.g. by squatters and poachers), and (if viable) will additionally convert excess biomass from timber operations into a patented high-caloric biomass fuel on a property in the state of Para, Brazil. The project proponent is International Wood Corporation (IWC or “the company”), a development stage public company incorporated in the state of Colorado, with its primary intended business operations comprising of forestry management and the commercialization of exotic hardwoods for export. IWC has been working in forest management in the Brazilian Amazon since 1997. IWC currently holds options to purchase additional parcels of land in the Amazon rainforest upon which future instances of projects, if any, would be located. The specifics regarding the detai","lat":-3.245556,"lon":-48.480833},{"ID":"1317","Name":"Reforestation Grouped Project at Pratigi Environmental Protection Area","Proponent":"Land Conservation Organization (OCT)","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-AMS0007","Status":"Registered","Country":"Brazil","Estimated Annual Emission Reductions":1636,"Region":"Latin America","Crediting Period Start Date":40664,"Crediting Period End Date":77187,"Hectares":"170900 Hectares","project_explanation":"The Reforestation Grouped Project (GP) at Pratigi Environmental Protection Area (EPA) is inserted in the Carbon Neutral Program Pratigi and is located in one of the areas of the Development and Integrated Growth Program with Sustainability (PDCIS) of the EPAs Mosaic of Southern Bahia, which are State Protected Areas for Sustainable Use. The Grouped Project is located at Pratigi EPA that has the important role of linking biodiversity conservation in the region through the sustainable use of natural resources. The PDCIS is located in the Central Corridor of the Atlantic Forest (CCMA) that is considered a biodiversity hotspot. Located along Brazil’s Atlantic coast, the Atlantic Forest encompasses Latin America’s largest population centers, including São Paulo and Rio de Janeiro, and generates 80 percent of Brazil’s Gross Domestic Product.","lat":-13.905615,"lon":-39.310303},{"ID":"1382","Name":"The Envira Amazonia Project - A Tropical Forest Conservation Project in Acre, Brazil","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0007","Status":"Registered","Country":"Brazil","Estimated Annual Emission Reductions":1259646,"Region":"Latin America","Crediting Period Start Date":41123,"Crediting Period End Date":52079,"Hectares":"39301 Hectares","project_explanation":"The Envira Amazonia Project is a VCS and CCBS designed REDD+ project in the State of Acre, Brazil which aims to protect up to 200,000 hectares of tropical rainforest. Furthermore, the Envira Amazonia Project will simultaneously preserve rich biodiversity and a wide range of ecosystem services, provide direct benefits to local communities, and mitigate the release of ~12.6 million metric tonnes of carbon dioxide emissions over the first 10 years of the Project.","lat":-8.847445,"lon":-70.177176},{"ID":"1329","Name":"Maísa REDD+ Project","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Registered","Country":"Brazil","Estimated Annual Emission Reductions":67458,"Region":"Latin America","Crediting Period Start Date":41050,"Crediting Period End Date":52006,"Hectares":"28752 Hectares","project_explanation":"The Project REDD+ Maísa is a result of the partnership between Biofilica Environmental Investments, Sipasa-Seringa and Maísa-Moju Agroindustrial aiming to promote forest conservation and emissions reductions from unplanned deforestation by attributing value to “standing forest” by integrating its multiple use in a sustainable fashion: the sustainable forest management with low impact logging techniques, small scale agriculture, collecting non-wood forest products and trade of environmental services credits.","lat":-3.236972056447478,"lon":-49.38585091764243},{"ID":"3564","Name":"REDD+ Project for the Conservation of Lowland Forest in the Magdalena Medio Region of Colombia","Proponent":"Fundación Biodiversa Colombia (FBC)","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Under development","Country":"Colombia","Estimated Annual Emission Reductions":"20,581","Region":"","Crediting Period Start Date":"","Crediting Period End Date":"01/07/2018","Hectares":"8244 Hectares","project_explanation":"The Reducing Emissions from Deforestation and Forest Degradation (REDD+) Project for the Conservation of Lowland Forest in the Magdalena Medio region of Columbia is an initiative led by Fundación Biodiversa Colombia (FBC) and Fundación Proyecto Primates, supported by Interconexión Eléctrica S.A. E.S.P. (ISA) and South Pole within the Jaguar Connection Program (PCJ). The purpose of this initiative is the certification of actions for the reduction of carbon dioxide (CO2) emissions against the unplanned deforestation and forest degradation of approximately 8,000 hectares (ha) of forest. The area where REDD+ project activities are being carried out is located in the municipalities of Yondó and Puerto Berrío, in the department of Antioquia, and the municipalities of Cimitarra and Puerto Parra, in the department of Santander (Colombia). Currently, the land use scenarios include the expansion of the cattle frontier, subsistence agriculture and illegal logging of timber species. These scenarios are present, without exception, in all the properties that comprise the project. As mentioned above, this initiative hopes to reduce greenhouse gas (GHG) emissions by avoiding unplanned deforestation of the forest remnants in the project area, which are well known for being the best-preserved forests in the Magdalena Medio region, and for the wide diversity of flora and fauna species that inhabit them.","lat":6.711769,"lon":-74.34295},{"ID":"2872","Name":"CRIMA PREDIO PUTUMAYO Y ANDOQUE DE ADUCHE REDD+ PROJECT","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0007","Status":"Withdrawn","Country":"Colombia","Estimated Annual Emission Reductions":"922,896","Region":"Latin America","Crediting Period Start Date":"","Crediting Period End Date":"11/01/2018","Hectares":"1260222 Hectares","project_explanation":"The CRIMA Predio Putumayo y Andoque de Aduche REDD+ Project seeks the conservation of forests located in the indigenous territories of Andoque de Aduche Indigenous Reserve, in the municipality of Solano and Puerto Santander; and in the areas of the indigenous communities of Puerto Zábalo y Los Monos, and Monochoa that are part of the vast Great Predio Putumayo Indigenous Reserve and that are located in Puerto Leguizamo, Puerto Alegría, La Chorrera and Puerto Santander municipalities. The project area has a total area of 1.260.222 ha at the beginning of the monitoring period. The project aims to contribute to mitigate the effects caused by climate change by reducing 27.686.867 tCO2 emissions derived from deforestation and forest degradation during the 30-year crediting period. The main activities during the Project lifetime focus in the development of productive activities compatible with community well-being and nature conservation, providing food security, improving social investment, strengthening land use planning and self-government structure, monitoring biodiversity and forest conservation. These activities aim to control and reduce the incidence of deforestation drivers such as wood extraction, mining and illegal productive activities. The area is characterized by its high biodiversity along with social unrest and deforestation. Among the activities carried out by the promoters of deforestation are moving the border of farming activities (especially subsistence agriculture and livestock), mining, wood harvesting for commercial and community use, illegal crops and colonization processes. The social problems are triggered by the absence of the government, lack of sanitation infrastructure, education, health programs and shortage of technological guidance for sustainable development. This project focuses on the AFOLU (Agriculture, Forestry and Other Land Uses) sectors. Inside the category for Reducing emissions from deforestation and forest degradation in developing countries (REDD+). Its goal is to mitigate the effects caused by climate change through reduction of CO2 emissions from deforestation and forest degradation, restauration of degraded forest lands, promotion of the sustainable wood harvesting and carry out development activities for the community well-being.","lat":0.698333,"lon":-75.253889},{"ID":"2723","Name":"CONDOTO REDD+","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0007","Status":"Registration and verification approval requested","Country":"Colombia","Estimated Annual Emission Reductions":"249,943","Region":"Latin America","Crediting Period Start Date":"","Crediting Period End Date":"08/01/2019","Hectares":"65853 Hectares","project_explanation":"The CONDOTO REDD+ Project seeks the conservation of forests located in the territories of the afro communities organized as the Major Community Council of Condoto and Iró, located within the municipalities of Condoto and Río Iró, in the department of Chocó. The project zone has a total area of 65.026 ha, out of which 46.191 ha were forest in 2015. The area is characterized for its high biodiversity and rain tropical forests, but also for the presence of deforestation activities and social conflicts. Deforestation drivers include mining activities, subsistence agriculture, and activities of illegal use. Social issues include absence of the state and lack of sanitation, education and health infrastructure and lack of technical guidance regarding sustainable production models. The project aims to mitigate the effects caused by climate change by reducing CO2 emissions derived from deforestation and forest degradation, restore degraded forest lands, promote sustainable management of forests and develop productive activities to improve community welfare. The project also seeks to protect biodiversity and high conservation values, enhance ecological connectivity and secure natural habitats of vulnerable species (including those within some category of threat and those that represent ecological interest.","lat":5.089546,"lon":-76.652079},{"ID":"2532","Name":"Cumare carbon project","Proponent":"Reforestadora Cumare S.A.S.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Registered","Country":"Colombia","Estimated Annual Emission Reductions":"29,180","Region":"Latin America","Crediting Period Start Date":"08/08/2022","Crediting Period End Date":"01/11/2016","Hectares":"10673 Hectares","project_explanation":"The project comprises a total of 10.673 ha of land previously under extensive grazing by beef cattle, on which afforestation for obtaining timber products and for sequestering large amounts of carbon dioxide from the atmosphere are established. The project area is located in Colombia. Both properties “El Porvenir” and “Caricare” are located in the center-east of Meta department, within San Martin and Puerto Gaitan municipality. The areas are homogeneous in terms of soil types, climate, land use history and socio-economic conditions. Forests is based on 10-year rotation Eucalyptus pellita, Eucalyptus Urograndis and Eucalyptus urophylla, and 15 to 16 years rotation Pinus caribea plantations. Pinus spp. plantation have been established and will continue being established as a complement to the short-fibre production (Eucalyptus spp.), since the species is best suitable for very low productive soils. Forest project activity is currently in its sixth year after project start-date, and plantation will be completed by year ten of project. Forests will be replanted after clear-cut harvest when the seedling genetic material compensates the cost of soil preparation and plantation. Clone plantations could be managed with regrowth, avoiding the soil preparation costs and its carbon stock reduction. Planted forests will remove carbon dioxide from the atmosphere and store it in different carbon pools (living above-ground and below- ground biomass, soil, litter, non-tree vegetation, dead wood and harvested wood products). Monitoring will cover carbon stock changes for living above-ground pool. Below ground biomass will be estimated indirectly based on above-ground biomass measurements. Litter, dead wood and soil organic carbon pools will be estimated based on conservative default factors from the methodological tool. Non- tree vegetation and harvested wood products will not be accounted as per the methodology applied. The potential non-permanence of stored carbon will be considere","lat":3.624693,"lon":-72.379105},{"ID":"2512","Name":"AFFORESTATION OF DEGRADED GRASSLANDS IN VICHADA, COLOMBIA","Proponent":"Forest First Colombia SAS","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Registered","Country":"Colombia","Estimated Annual Emission Reductions":"139,489","Region":"Latin America","Crediting Period Start Date":"25/05/2022","Crediting Period End Date":"15/09/2016","Hectares":"134732 Hectares","project_explanation":"The grouped project aim is to recover degraded grasslands in Vichada, Colombia, through the establishment of timber plantations. The first instance consists of the afforestation of 30,605 ha of low-fertility grasslands that have been degraded by livestock in the municipalities of Puerto Carreño and La Primavera, it includes the planting of Eucalyptus (Eucalyptus pellita) and Acacia (Acacia mangium) as timber species. Through afforestation activities to recover degraded lands, the project aims to promote connectivity between ecosystems. In addition, this project is expected to provide more than 200 full-time employment opportunities (with equal access to women and men) in a zone historically affected by poverty. Furthermore, the increase in the forest cover and sequestration of carbon in living biomass will contribute to the reduction of GHG emissions by acting as sink that sequesters an average of 139,489 tCO2e per year.","lat":6.0902,"lon":-68.5006},{"ID":"2459","Name":"NAYA REDD+","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD; WRC","Methodology":"VM0007","Status":"Registration and verification approval requested","Country":"Colombia","Estimated Annual Emission Reductions":"350,000","Region":"Latin America","Crediting Period Start Date":"","Crediting Period End Date":"26/11/2015","Hectares":"178487 Hectares","project_explanation":"The NAYA REDD+ aims to develop a participatory process to establish a sustainable management system for the forests of the Community Council of the Naya River Basin, to ensure environmental sustainability and mitigate the threats posed by the main agents and drivers of deforestation, in particular, the strategy is to avoid deforestation through the implementation of the REDD+ project (Reduction of Emissions due to Deforestation and Forest Degradation, conservation of carbon reserves, sustainable management of forests and improvement of forest reserves in developing countries), this project permits the providing of payments for the compensation of the provided ecosystem services. Therefore, the collective territories linked to the project seek, through their territorial autonomy, to carry out conservation processes that preserve their cultural identity and promote the protection of biodiversity and the environmental wealth of their territory. Characteristics directly linked with the objective of REDD+ projects, with desired, sustainable local development, as well as the purpose of reducing emissions generated by deforestation. The Community Council of the Naya River Basin is located in the Colombian Biogeographic Pacific Region, in very humid tropical forests between the departments of Valle del Cauca and Cauca, under the jurisdiction of the municipalities of Buenaventura and López de Micay. This Collective territory was awarded under Resolution 6640 of 2015 of INCODER.","lat":3.059431,"lon":-77.165316},{"ID":"2392","Name":"REDD + in the Forests of the Otún River Basin","Proponent":"Empresa de Acueducto y Alcantarillado de Pereira S.A.S E.S. P","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Registration and verification approval requested","Country":"Colombia","Estimated Annual Emission Reductions":"30,874","Region":"Latin America","Crediting Period Start Date":"","Crediting Period End Date":"01/01/2016","Hectares":"5603 Hectares","project_explanation":"The climate change mitigation project REDD+ in the forests of the Otún River basin is a grouped project which, in its first stage, includes 17 holdings belonging to - the Empresa de Acueducto y Alcantarillado de Pereira (Pereira Aqueduct and Sewerage Company) S.A.S. E.S.P. The project is located in the southern area of the department of Risaralda, in the Central Mountain Range (Cordillera), on the Otún River valley, in the municipalities of Pereira, Santa Rosa de Cabal, and Salento, and it has the main objective of conserving the native forests of the region by reducing the emissions of Greenhouse Gases (GHG) caused by deforestation while preserving and protecting local biodiversity through interagency conservation efforts and the implementation of four strategic lines, which are focused on control activities of the territory; environmental education strengthening and biodiversity research; conservation agreements and ecological restoration programs.","lat":4.739131,"lon":-75.52596},{"ID":"2356","Name":"REDD+ CONSERVATION OF ETHNO SUSTAINABLE AFRO-COLOMBIAN COMMUNITY IN THE TROPICAL RAIN FOREST OF COLOMBIA","Proponent":"WeAct Pty Ltd","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Under validation","Country":"Colombia","Estimated Annual Emission Reductions":"66,000","Region":"Latin America","Crediting Period Start Date":"","Crediting Period End Date":"01/07/2016","Hectares":"10433 Hectares","project_explanation":"This project is an Agriculture, Forestry and Other Land Use (AFOLU) project under the Reducing Emissions from Deforestation and Degradation (REDD) project category. Specifically, the project is of the “Avoided Unplanned Deforestation” (AUD) project category. The project preserves and conserves the native tropical rain forest of around 10,433 hectares in a critical region of the threatened biodiversity hotspot choco-magdalena of Colombia. A region where there is high deforestation risk. The project has quantifiable CCB benefits, as it has generated and provides full time employment, training and access for the families that live in and around the project area, also created to be self-empowered in a region where there are few job opportunities. The project has also provided cookstoves with chimneys to help mitigate lung related diseases (which is the most common disease in the surrounding area due to improper cooking methods) and more efficiently burn fuel for cooking. Also, the company is intensifying and improving its practices to support the sustainable social development, maintaining and improving the biodiversity monitoring at the project area in the framework of REDD activities. From the implementation of this REDD Project, it is estimated that 660,000 tonnes of carbon dioxide emissions will be avoided which would have been emitted into the atmosphere in a period of 10 years in the absence of the project, not including the project’s non-permanence risk buffer contribution.","lat":8.625021,"lon":-77.373911},{"ID":"2330","Name":"Protection of mangroves and community developmental activities in the biodiversity hotspot of Colombia","Proponent":"WeAct Pty Ltd","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Under validation","Country":"Colombia","Estimated Annual Emission Reductions":"460,000","Region":"Latin America","Crediting Period Start Date":"","Crediting Period End Date":"01/04/2016","Hectares":"64000 Hectares","project_explanation":"This project is an Agriculture, Forestry and Other Land Use (AFOLU) under the Reducing Emissions from Deforestation and Degradation (REDD) project category. Specifically, the project is of the “Avoided Unplanned Deforestation” (AUD) project category. The project preserves and conserves the mangrove forest of around 64,000 hectares in a critical region of the threatened biodiversity hotspot Tumbes-Choco-Magdalena of Colombia. A region where there is high deforestation risk. The project has quantifiable CCB benefits, as it has generated and provides full time employment, training and access for the families that live in and around the project area, also created to be self-empowered in a region where there are few job opportunities. The project has also provided cookstoves with chimneys to help mitigate lung related diseases (which is the most common disease in the surrounding area due to improper cooking methods) and more efficiently burn fuel for cooking. Also, the company is intensifying and improving its practices to support the sustainable social development, maintaining and improving the biodiversity monitoring at the project area in the framework of REDD activities. From the implementation of this REDD Project, it is estimated that 4,600,000 tons of carbon dioxide emissions will be avoided which would have been emitted into the atmosphere in a period of 10 years in the absence of the project.","lat":8.105304,"lon":-76.960277},{"ID":"2317","Name":"REDD+ Project Magnolios de Yarumal","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Registration and verification approval requested","Country":"Colombia","Estimated Annual Emission Reductions":"329,260","Region":"Latin America","Crediting Period Start Date":"","Crediting Period End Date":"23/02/2016","Hectares":"7593 Hectares","project_explanation":"Magnolios main scope is to avoid deforestation in natural fog forests in Yarumal, Briceño, Valdivia and Santa Rosa de Osos municipalities, along with the conservation of endangered species of Magnolios, orchids, birds and large cats.","lat":7.034051,"lon":-75.295203},{"ID":"2298","Name":"CONSEJOS COMUNITARIOS DEL PACIFICO VALLE DEL CAUCA (CCPVC) PROGRAMA REDD+ VALLE DEL CAUCA, COLOMBIA","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0006","Status":"Under development","Country":"Colombia","Estimated Annual Emission Reductions":"796,394","Region":"Latin America","Crediting Period Start Date":"","Crediting Period End Date":"19/06/2018","Hectares":"490542 Hectares","project_explanation":"The Consejos Comunitarios del Pacífico en el Valle del Cauca REDD+ Program (called the CCPVC REDD+ Program or Program), is a grouped project which initially includes five Consejos or Community Councils located on the southwest, Pacific side, of Colombia. The initial Project Activity Instances include Consejos; Cuenca del Río Yurumanguí, Comunidad Negra Cuenca del Rio Mayorquín and Papayal, Comunidad Negra de la Cuenca del Río Raposo, Cuenca Mayor del Río Anchicaya, and Mayor de la Cuenca Media and Alta del Río Dagua. Each with legally recognized tenure over their territories, Río Yurumanguí (54,776 ha), Mayorquín and Papayal (19,060 ha), Río Raposo (20,536 ha), Mayor del Río Anchicaya (16,773 ha), and Mayor de la Cuenca Media and Alta del Río Dagua (9,423 ha). The overall Project Area (areas in which a Project Activity Instance must fall into) includes the Pacific zone of the department of Valle de Cauca in areas that are subject of unplanned deforestation and degradation (excluding any areas that have existing VCS projects registered). The Consejos in CCPVC will seek to improve livelihoods for community members and to the long-term environmental, social and financial sustainability of their territory. The location of CCPVC is near the Pacific Ocean and included major rivers that cut through the project area supporting high biodiversity. However, the territory of CCPVC experiences continuous reduction of forest cover, and the biodiversity with its ecosystems threatened. Deforestation and degradation in CCPVC has occurred due to unsustainable and illegal practices, such as illegal logging, small-scale mining, and shifting agriculture, with natural resources are being extracted unsustainably. CCPVC has directed their focus on the conservation and sustainable use of forests and other natural resources in their territories. The Project Area includes large expanses of forests and agroforestry areas that provide a crucial economic benefits to the local communities.","lat":3.696826,"lon":-77.129521},{"ID":"2297","Name":"REDD+ Project Pueblos indígenas resguardando la selva","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0037","Status":"Registration and verification approval requested","Country":"Colombia","Estimated Annual Emission Reductions":"2,365,816","Region":"Latin America","Crediting Period Start Date":"","Crediting Period End Date":"31/12/2016","Hectares":"3663485 Hectares","project_explanation":"The REDD+ Project is a local community initiative of four Indigenous Associations of the Predio Putumayo Indigenous Reserve in Colombian Amazon, which seeks certification of actions related to the reduction of carbon emissions due to unplanned deforestation and degradation (AUDD) in about 3.6 million hectares of forest. The initiative includes activities in multiple instances, corresponding to the Associations of Indigenous Authorities (AATI): the Puerto Alegría Indigenous Council Association (COINPA), the Murui United People\'s Major Indigenous Council (CIMPUM), the Association of Indigenous Authorities of the Puerto Arica Zone (AIZA) and the Association of Traditional Councils and Authorities from Chorrera Indigenous Zone (AZICATCH). Project activities aim to preserve the traditionally sustainable relationship of indigenous peoples with the forest and to limit, manage or improve other land uses, thereby reducing the impact of human activities on the natural environment, allowing its regeneration and maintaining the structure and functionality of the forest. Similarly, other dimensions of socioeconomic development of indigenous peoples and climate change are managed.","lat":-1.342811,"lon":-72.425359},{"ID":"2290","Name":"BLUE CARBON PROJECT GULF OF MORROSQUILLO “VIDA MANGLAR”","Proponent":"Conservation International Foundation","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0007","Status":"Registered","Country":"Colombia","Estimated Annual Emission Reductions":"31,310","Region":"Latin America","Crediting Period Start Date":"06/05/2021","Crediting Period End Date":"15/05/2015","Hectares":"7561 Hectares","project_explanation":"The Blue Carbon Project Gulf of Morrosquillo is a grouped project whose expansion region includes all the mangrove forests present in the Gulf of Morrosquillo, in the Colombian Caribbean. In this region are some of the most important mangrove and marine-coastal protected areas of the Caribbean coast: the mangroves of Cispatá Bay, La Balsa-Tinajones and adjacent sectors of the Sinu River estuarine delta; the mangrove ecosystems and lagoons of La Caimanera; and the Mangrove System of the Boca de Guacamayas Sector. The main objective of the project is the reduction of greenhouse gas emissions through activities that allow the identification, prioritization and execution of actions for the adequate management of mangroves, the promotion of sustainable development, the strengthening of local governance and the promotion of alternative productive activities, while contributing to the protection of high values of community conservation and biodiversity. The Project began on May 15, 2015 and will have an expected duration of 30 years; during this period, the reduction of 1,221,717 tCO2e is expected through the implementation of activities related to four strategic lines: strengthening of governance, alternative productive projects, recovery and rehabilitation of mangrove areas, and monitoring. In addition, it is expected that this project will provide community benefits related to the strengthening of local governance and management of regionally protected marine-coastal areas, the maintenance of sustainable community management practices of mangrove forests and increased perception of the value of forest resources, as well as the economic empowerment of community groups and increased employment opportunities. Positive impacts on biodiversity include conserving the mangrove’s ecosystems and biodiversity and maintaining the hydrobiological connectivity of the coastal-marine landscape. The manatee and needle caiman are two vulnerable species that are found in this area.","lat":9.324177,"lon":-75.725577},{"ID":"2262","Name":"REDD+ Yaguara Llanos del Yari","Proponent":"CUESTA Y ASOCIADOS SAS","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"","Methodology":"VM0015","Status":"Withdrawn","Country":"Colombia","Estimated Annual Emission Reductions":"3,478,764","Region":"Latin America","Crediting Period Start Date":"","Crediting Period End Date":"","Hectares":"124923 Hectares","project_explanation":"The YAGUARA II LLANOS DEL YARÍ Project aims at reducing deforestation through the actions of the indigenous communities from the ethnicities Piapoco, Piratapuyo and Pijao, that were recently displaced by the armed conflict in Colombia, and that now are returning to their territory wishing to restore their sovereignty over the land and to protect the remnants of highly threatened amazon forest and its biodiversity","lat":-73.574749,"lon":1.761024},{"ID":"2251","Name":"REDD PROJECT OF THE INDIGENOUS PEOPLES OF VAUPÉS YUTUCU AND OTHERS","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Registration and verification approval requested","Country":"Colombia","Estimated Annual Emission Reductions":"438,730","Region":"Latin America","Crediting Period Start Date":"","Crediting Period End Date":"01/01/2017","Hectares":"809664 Hectares","project_explanation":"Develop a REDD+ project to promote the sustainable use of the territory and generate productive alternatives for the reduction of emissions from deforestation and degradation in the livelihoods of five zones of the Great Indigenous Reserve of Vaupés. This project was open for public comment for the dates 14 July 2020 - 13 August 2020.","lat":1.139052,"lon":-70.605548},{"ID":"2084","Name":"CONSERVATION PROJECT REDD+ SUR DEL META BOSQUES DE PAZ, SUSTENTO DE VIDA","Proponent":"ALLCOT AG","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Registration requested","Country":"Colombia","Estimated Annual Emission Reductions":"374,315","Region":"Latin America","Crediting Period Start Date":"","Crediting Period End Date":"01/01/2019","Hectares":"77612 Hectares","project_explanation":"The Meta Sostenible project is a grouped REDD+ project located in the department of Meta, Colombia. The project area is inside the Amazonian biome and includes the municipalities of Puerto Rico, Vista Hermosa, Mesetas, La Uribe and La Macarena. The project aims at reducing deforestation caused by the expansion of agriculture and the installation of grasslands for the development of extensive cattle ranching, and in a lesser extent by the proliferation of illegal crops and development of infrastructure (mainly roads).The project activities that will promote the reduction of GHG caused by deforestation include the improvement of schools and local health systems, the transfer of knowledge through training about local finances, administration, practices for the good management of projects, among others; along with the development of agroforestry systems.PUBLIC COMMENT PERIOD:This project was open for public comment from 30 January 2020 – 27 February 2020.","lat":2.94206,"lon":-73.208302},{"ID":"2071","Name":"COCOMACIA COMMUNITY REDD+ PROGRAM, CHOCO/ANTIOQUIA COLOMBIA","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0006","Status":"Under development","Country":"Colombia","Estimated Annual Emission Reductions":"3,073,861","Region":"Latin America","Crediting Period Start Date":"","Crediting Period End Date":"31/08/2016","Hectares":"1000000 Hectares","project_explanation":"The Project area of 695,245 hectares is in the collective territory of the Greater Community Council of the Integral Peasant Association of the Atrato , better known as COCOMACIA, in Colombia. The Project Area is situated in the middle part of the sub-region of the Atrato River Basin in the department of Chocó, in the municipalities of Atrato, Quibdó, Medio Atrato, Bojayá and Carmen del Darién, and in the department of Antioquia, in the municipalities of Vigía del Fuerte, Murindó and Urrao. COCOMACIA’s location at the Atrato River basin offers a variety of ecosystems to the Project Area, consisting of forests, chuscales, swamps, and rivers, where COCOMACIA plays a fundamental role in supporting conservation of natural resources and culture throughout the entire Atrato River. The land in the Project Area is part of the biologically diverse Chocó-Darien Bioregion, knowingly one of the most diverse areas in the world.PUBLIC COMMENT PERIOD:This project is open for public comment from 06 December 2019 – 05 January 2020. <a href=mailto: secretariat@v-c-s.org?subject=COCOMACIA comments>Submit comments from 06 December 2019 – 05 January 2020</a>","lat":6.252258,"lon":-76.804568},{"ID":"1869","Name":"Yagual - Carbon Sequestration Grouped Project for the Restoration, Conservation and Sustainable Production in the Guerrero, Sumapaz and Rabanal Paramo Systems","Proponent":"Société de gestion de projets ECOTIERRA Inc.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Registered","Country":"Colombia","Estimated Annual Emission Reductions":"13,619","Region":"Latin America","Crediting Period Start Date":"04/06/2020","Crediting Period End Date":"19/12/2018","Hectares":"1000 Hectares","project_explanation":"The Carbon sequestration grouped project for the restoration, conservation and sustainable production in the Guerrero, Sumapaz and Rabanal paramo systems (Project Yagual) proposed by Terra Integrity with the support of Société de Gestion de Projets Ecotierra Inc. (Ecotierra) is a grouped project expecting to increase forest cover over 1 500 ha of non-forest land on the Colombian high Andes through sustainable agroforestry systems and reforestation activities for conservation purposes. These interventions aim to increase in a significant way the economic and environmental benefits of the project lands while ensuring sustainability in their activities and manage the development objectives of their owners.","lat":5.245,"lon":-74.006},{"ID":"1821","Name":"Conservación de los Ecosistemas y el Almacén de Carbono Región de Transición Guayano Amazónica \'Flor de Inírida\'","Proponent":"Ciprogress Greenlife","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0007","Status":"Registration requested","Country":"Colombia","Estimated Annual Emission Reductions":"7,627,523","Region":"Latin America","Crediting Period Start Date":"","Crediting Period End Date":"01/01/2017","Hectares":"1000 Hectares","project_explanation":"The proposed project activity belongs to: Sectoral Scope: 14AFOLU Project Category: Reduced Emissions from Deforestation and Degradation (REDD)Activity Type: Avoiding Unplanned Deforestation and Degradation & Avoiding Planned Deforestation and Degradation.The project aims for the ecosystems and carbon stock conservation in the Transition Region Guayano - Amazónica in Colombia.The project activity benefits are summarized in 14 sustainable mega-projects:1. Governance support: Capacity Building Program2. Characterization of biodiversity (Food sovereignty).3. Fish in the Orinoco Basin and Río Negro (Food Sovereignty).4. Systems for water treatment (Food sovereignty).5. Ethno-education.6. Vital cycles and rhythmic room patterns in the indigenous reserves (Housing - Sewerage - Habitat).7. Means of transport, connectivity and territorial communication.8. Health with an intercultural, ethno-cultural focus, for the indigenous population of the communities in the indigenous reserves.9. Media, scientific and ethnic documentary.10. Alternative and renewable energies.11. Climate effect on the REDD + project12. Soil improvement (food sovereignty).13. Box for small activities.14. Recognition and rewards system.All of them are in line with the Governance Framework Agreement signed with the collective territories owners.The project will be implemented in the following Indigenous Reservations:- Almidón La Ceiba- Bajo Río Guanía y Río Negro- Caranacor Yurí Laguna Morocoto- Coayaré El Coco- Cuenca Media y Alta Río Inírida- El Venado- Cuenca Alta y Río Guainía- Remanso Chorro Bocón- Río Atabapo e Inírida- Puerto Colombia, Ríos Cuyarí e Isana- Tonina SejalPublic Comment Period: 19 November - 19 December 2018No comments were received.","lat":2.613478,"lon":-69.154694},{"ID":"1806","Name":"Riscales REDD+ Project","Proponent":"Consejo Comunitario General Los Riscales.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0007","Status":"Under validation","Country":"Colombia","Estimated Annual Emission Reductions":"187,240","Region":"Latin America","Crediting Period Start Date":"","Crediting Period End Date":"01/01/2014","Hectares":"168574 Hectares","project_explanation":"This project is an AFOLU project under REDD project category. Specifically, the project is of the Avoided Unplanned Deforestation & Degradation (AUDD) project category. The project is estimated to generate approximately 5.5 million VCUs over 30 years. The project area is located in the collective territory of Los Riscales in the Pacific coastal in the department of Chocó. Belonging to the biologically diverse Chocó-Darién bioregion.The project will have climate, community and biodiversity benefits. Climate benefits relate to the GHG emission reduction resulting from implementing the project, in particular due to the reduction in the rhythm of land use changes from forests to agriculture and livestock raising. Biodiversity benefits related to protection of High Conservation Values in one of the world´s megadiverse hotspots. And Community benefits through enhancing community livelihoods, and strengthening forest governance capacity.PUBLIC COMMENT PERIOD:This project is open for public comment from 14 November – 14 December 2018. <a href=mailto:secretariat@verra.org?subject=Riscales REDD+ Project comments>Submit comments from 14 November – 14 December 2018","lat":5.690137,"lon":-77.312893},{"ID":"1769","Name":"Grouped Project for restoration of degraded lands in Jaguar Corridors, Colombia","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"IFM; REDD","Methodology":"VM0005; AR-ACM0003","Status":"Registered","Country":"Colombia","Estimated Annual Emission Reductions":"6,835","Region":"Latin America","Crediting Period Start Date":"30/08/2019","Crediting Period End Date":"01/09/2015","Hectares":"4320 Hectares","project_explanation":"The project aim is to recover land degraded through practices such as cattle raising, by promoting alternative practices, such as timber plantations, agroforestry systems, enrichment and assisted natural regeneration. Throughout its lifetime, the project will contribute to the reduction of greenhouse gas emissions by acting as a sink, sequestering almost 200,000 tCO2e. In addition, this project is expected to provide more than 200 full-time employment opportunities in a zone historically affected by paramilitarism and poverty, as well as to promote the recuperation of natural biodiversity habitats, such as jaguar corridors in Latin America. This project was open for public comment from 27 November to 27 December 2019.","lat":6.313054,"lon":-73.9475},{"ID":"1765","Name":"Grouped Project for reducing emissions from deforestation and forest degradation-REDD-in the Regional Natural Park:Biological Corridor PNN Purace-PNN Cueva de los Guacharos","Proponent":"Corporación Autónoma Regional del Río Grande de la Magdalena (CORMAGDALENA)","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Registered","Country":"Colombia","Estimated Annual Emission Reductions":"117,468","Region":"Latin America","Crediting Period Start Date":"07/12/2021","Crediting Period End Date":"08/03/2014","Hectares":"1000 Hectares","project_explanation":"The cluster/grouped Project for Reducing Emissions from Deforestation and Forest Degradation: “Regional Natural Park: Biological Corridor PNN Puracé – PNN Cueva de los Guácharos” (henceforward referred as REDD Huila – CB) is located in the Colombian Andes region. Which main objectives include the climate, community, and biodiversity: 1. Reduction of deforestation in the Project area, and associated GHG emissions 2. Conserve and enhance existing biodiversity, and increase the value of standing forest over time, in order to achieve conservation objectives.3. Facilitate the access to investment for the improvement of existing production systems, and increase the income of rural population and farmers.4. Ensure sustainability for the new production systems that farmers are going to invest in, and achieve markets and obtain the maximum benefit of their products (added value).5. To promote governance, monitoring and control, on a community basis, in conjunction with local environmental institutions, in order to ensure deforestation reductions in the area.PUBLIC COMMENT PERIOD:CCB Standards public comment period for validation – 07 February – 08 March 2020. No comments were received","lat":1.764026,"lon":-76.259782},{"ID":"1695","Name":"Scheme of Compensation for Ecosystem Services for Forest Management and Conservation of Water Sources in the Jurisdiction of CORPOCHIVOR","Proponent":"Local Environmental Authority of Chivor (CORPOCHIVOR)","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Registered","Country":"Colombia","Estimated Annual Emission Reductions":"1,662","Region":"Latin America","Crediting Period Start Date":"16/01/2018","Crediting Period End Date":"11/04/2014","Hectares":"937 Hectares","project_explanation":"This project was open to a CCB Program public comment from 22 June 22 July 2017,. and was open for a VCS Program public comment period from 02 January - 01 February 2018. No comments were received during either comment period.","lat":4.888858,"lon":-73.366905},{"ID":"1682","Name":"Regenerating Colombian Coffee Ecosystems","Proponent":"PUR Development Pte. Ltd.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"AR-AMS0007","Status":"Registered","Country":"Colombia","Estimated Annual Emission Reductions":"7,107","Region":"Latin America","Crediting Period Start Date":"06/04/2020","Crediting Period End Date":"20/04/2014","Hectares":"3268237 Hectares","project_explanation":"Regenerating Colombian Coffee Ecosystems is a grouped afforestation and reforestation project initiated by PUR Projet in 2014 in the Colombian Northern Andean Montane Forests, where watersheds and coffee lands are severely eroded and biologically degraded.Colombia is the world’s third largest coffee producer and 95% of Colombian coffee-growing families operate on small plots of land, averaging five acres each. The Tropical Andes are one of the main coffee growing areas in Columbia and a major biodiversity hotspot, hosting 25% of the country\'s flora and being the richest ecoregion for birds in the country (974 bird species). However, Colombia’s Andean watersheds are threatened by uncontrolled deforestation due to rapid expansion of agriculture and cattle grazing, which strongly degrades the coffee farming conditions and the yields: low pollination, high erosion, frequent pests and diseases, low water resources. The lack of natural protection makes the farms highly vulnerable to extreme climatic events such as prolonged droughts, heavy rains, storms, landslides, etc. Besides, coffee farmers often depend on a single source of income and are highly vulnerable to market fluctuations: price volatility, demand variation, increased costs for inputs such as fertilizers, etc. Farms are not economically resilient and they are not resilient to climate change either. In this context, PUR Projet initiated an afforestation and reforestation project in Colombia in 2014, in collaboration with small-scale coffee farmers. PUR Projet is an international organization specialized in the development of ecosystems restoration and conservation projects, within agricultural supply chains like coffee and cocoa. PUR Projet also assists companies in insetting their supply chains and managing their socio-environmental commitments.","lat":6.497593,"lon":-75.012988},{"ID":"1657","Name":"Grouped Project REDD+ conservation of the Oak ecological corridor Guantiva – La Rusia – Iguaque, Colombia","Proponent":"Fundación Natura","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Under validation","Country":"Colombia","Estimated Annual Emission Reductions":"110","Region":"Latin America","Crediting Period Start Date":"","Crediting Period End Date":"14/03/2015","Hectares":"1075348 Hectares","project_explanation":"PUBLIC COMMENT PERIOD:This project was open for public comment from 26 September – 26 October 2018. No comments were receivedThe project, which has an area of over 1 million ha across three departments of Colombia seeks to generate the following climate, community and biodiversity benefits. Climate benefits: mitigate climate change through the implementation of activities to reduce deforestation and degradation of the oak (Quercus humboldtii and Colombobalanus excelsa) forests.Biodiversity benefits: to contribute to the conservation of biological diversity through project activities that reduce pressure on natural forests, which allows ecosystems associated with oak forests to maintain their high conservation values associated with structure, composition and functionality thereof.Community objectives: Strengthening local governance through improvements in the planning and implementation of land-use management practices and assistance in the development of alternative productive activities through training and technical assistance in agroforestry and silvopastoral systems and their respective value chains.","lat":6.551636,"lon":-72.955734},{"ID":"856","Name":"The Chocó-Darién Conservation Corridor REDD Project","Proponent":"Anthrotect S.A.S.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0009","Status":"Registered","Country":"Colombia","Estimated Annual Emission Reductions":"96","Region":"Latin America","Crediting Period Start Date":"06/04/2020","Crediting Period End Date":"18/10/2010","Hectares":"13465 Hectares","project_explanation":"The Chocó-Darién Conservation Corridor is the first REDD+ project to be issued credits for activities co-designed and implemented on a community-owned, collective land title. The project protects 13,465 hectares of tropical rainforest in the Darién region of northwest Colombia, one of the most biologically diverse regions on the planet. Developed by Anthrotect, the project is co-designed and managed with COCOMASUR, an Afro-Colombian community association in the municipality of Acandí that received collective title to the project area in 2005. Cattle ranching is very common in Acandí, and there are an estimated 47,000 heads of cattle in the vicinity of the project. Working together, COCOMASUR and Anthrotect have designed a strategy to stop the spread of ranching into the project area, thereby protecting Afro-Colombian livelihoods as well as the forests on which they depend.","lat":8.468405,"lon":-77.341723},{"ID":"1395","Name":"Bajo Calima y Bahía Málaga (BCBM) REDD+ Project","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0006","Status":"Registered","Country":"Colombia","Estimated Annual Emission Reductions":"498,719","Region":"Latin America","Crediting Period Start Date":"06/04/2020","Crediting Period End Date":"26/08/2013","Hectares":"83452 Hectares","project_explanation":"REDD+ Project to mitigate climate change, protect rich biodiversity, and generate sources of income for poor communities, through forest governance, capacity building, and productive activities that will prevent selective logging of native forests, avoiding degradation and deforestation. Located in Buenaventura, Western Pacific coast of Colombia. Developed by BIOREDD+/USAID","lat":4.005277,"lon":-77.159722},{"ID":"576","Name":"Restoration of degraded areas and reforestation in Cáceres and Cravo Norte, Colombia","Proponent":"Asorpar Ltd.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-AM0005; AR-ACM0003","Status":"Registered","Country":"Colombia","Estimated Annual Emission Reductions":"80,000","Region":"Latin America","Crediting Period Start Date":"06/04/2020","Crediting Period End Date":"02/02/2002","Hectares":"1200 Hectares","project_explanation":"The project envisions the reforestation of grasslands in Colombia. The grasslands show low soil carbon content because of soil degradation and/or climate-edaphic conditions. The A/R project activity proposes to reforest ~ 1,230 ha in the area of Cáceres/Antioquia and ~ 9,640 ha in Cravo Norte/Arauca. The project areas were previously exposed to extensive cattle grazing activities. In addition to cattle grazing, some parts of the Cáceres area was exposed to alluvial gold mining. The project seeks to promote sustainable management of forest resources in a manner that fosters natural regeneration. Since 2002, Asorpar Ltd. has been reforesting land with about 25 native tree species planted in different stand models that allow for natural regeneration of flown in seeds on the reforestation sites. Asorpar Ltd. puts emphasis on promoting mixed stands. This sets their approach apart from other commercial plantation forestry entities active in Colombia. The management of mixed stands is far more challenging than of monocultures. This circumstance is reinforced by the fact that little is known about several tree species planted in the project, particularly with regard to their growth performance and silvicultural management. Hence, the proposed project activity offers a unique opportunity to obtain valuable knowledge about silvicultural management practices for mixed plantation forestry and suitability of native tree species for commercial plantation forestry.","lat":7.587132,"lon":-75.251756},{"ID":"1566","Name":"REDD+ Project Resguardo Indigena Unificado Selva de Mataven (RIU SM)","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0007","Status":"Registered","Country":"Colombia","Estimated Annual Emission Reductions":"3,622,352","Region":"Latin America","Crediting Period Start Date":"08/12/2016","Crediting Period End Date":"01/01/2013","Hectares":"1856836 Hectares","project_explanation":"REDD+ Project Resguardo Indígena Unificado–Selva de Mataven (REDD+ RIU-SM) aims to develop a participatory process to achieve the establishment of an integrated management system of forests and lands of the reserve, to ensure its sustainability and to mitigate threats of its conservation, particularly avoiding deforestation through the implementation of a REDD+ Project (Reducing Emissions from Deforestation and Forest Degradation + conserving carbon stocks, sustainable management of forests and enhancement of forest reserves in developing countries) that allows providing compensation payments for ecosystem services. The technology corresponds to a REDD Project in accordance with standards established by the VCS. Specifically an activity “Avoiding Unplanned Deforestation and Degradation (AUDD)”. The Indigenous Reservation is located east of the high plain Orinoco Colombian region in the transition belt between the savannas of the Orinoco and the Amazon forests, in Department of Vichada","lat":4.244444,"lon":-68.393333},{"ID":"1390","Name":"Carmen del Darién (CDD) REDD+ Project","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0006","Status":"Registered","Country":"Colombia","Estimated Annual Emission Reductions":"462,190","Region":"Latin America","Crediting Period Start Date":"06/04/2020","Crediting Period End Date":"28/01/2014","Hectares":"118318 Hectares","project_explanation":"REDD+ Project to mitigate climate change, protect rich biodiversity, and generate sources of income for poor communities, through forest governance, capacity building, and productive activities that will prevent selective logging of native forests, avoiding degradation and deforestation. Located in the North of Choco, North Western Pacific coast of Colombia. Developed by BIOREDD+/USAID","lat":6.87222,"lon":-77.126089},{"ID":"1396","Name":"Rio Pepe y ACABA REDD+ Project","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0006","Status":"Registered","Country":"Colombia","Estimated Annual Emission Reductions":"224,050","Region":"Latin America","Crediting Period Start Date":"06/04/2020","Crediting Period End Date":"01/12/2014","Hectares":"48177 Hectares","project_explanation":"REDD+ Project to mitigate climate change, protect rich biodiversity, and generate sources of income for poor communities, through forest governance, capacity building, and productive activities that will prevent selective logging of native forests, avoiding degradation and deforestation. Located in the midst of Choco, Northwestern Province of Colombia. Developed by BIOREDD+/USAID","lat":5.117203,"lon":-76.93361},{"ID":"1391","Name":"SIVIRÚ-USARAGÁ-PIZARRO-PILIZÁ (SUPP) REDD+ Project","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0006","Status":"Registered","Country":"Colombia","Estimated Annual Emission Reductions":"312,078","Region":"Latin America","Crediting Period Start Date":"06/04/2020","Crediting Period End Date":"26/10/2013","Hectares":"47667 Hectares","project_explanation":"REDD+ Project to mitigate climate change, protect rich biodiversity, and generate sources of income for poor communities, through forest governance, capacity building, and productive activities that will prevent selective logging of native forests, avoiding degradation and deforestation. Located in the South of Choco, Pacific coast of Colombia. Developed by BIOREDD+/USAID","lat":4.915528,"lon":-77.359746},{"ID":"1400","Name":"Concosta REDD+ Project","Proponent":"Consejo Comunitario de Concosta","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0006","Status":"Registered","Country":"Colombia","Estimated Annual Emission Reductions":"333,978","Region":"Latin America","Crediting Period Start Date":"06/04/2020","Crediting Period End Date":"18/07/2013","Hectares":"52212 Hectares","project_explanation":"REDD+ Project to mitigate climate change, protect rich biodiversity, and generate sources of income for poor communities, through forest governance, capacity building, and productive activities that will prevent selective logging of native forests, avoiding degradation and deforestation. Located in the South of Choco, on the Pacific coast of Colombia. Developed by BIOREDD+/USAID","lat":4.704722,"lon":-77.221667},{"ID":"1389","Name":"Acapa -­ Bajo Mira Y Frontera REDD+ Project","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0006","Status":"Registered","Country":"Colombia","Estimated Annual Emission Reductions":"404,786","Region":"Latin America","Crediting Period Start Date":"09/06/2020","Crediting Period End Date":"13/11/2013","Hectares":"58212 Hectares","project_explanation":"REDD+ Project to mitigate climate change, protect rich biodiversity, and generate sources of income for poor communities, through forest governance, capacity building, and productive activities that will prevent selective logging of native forests, avoiding degradation and deforestation. Located in Tumaco, Southwestern Pacific coast of Colombia. Developed by BIOREDD+/USAID","lat":1.6428,"lon":-78.892797},{"ID":"1392","Name":"Cajambre REDD+ Project","Proponent":"Consejo Comunitario de Cajambre","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0006","Status":"Registered","Country":"Colombia","Estimated Annual Emission Reductions":"297,488","Region":"Latin America","Crediting Period Start Date":"06/04/2020","Crediting Period End Date":"14/11/2013","Hectares":"60316 Hectares","project_explanation":"REDD+ Project to mitigate climate change, protect rich biodiversity, and generate sources of income for poor communities, through forest governance, capacity building, and productive activities that will prevent selective logging of native forests, avoiding degradation and deforestation. Located in Buenaventura, Western Pacific coast of Colombia. Developed by BIOREDD+/USAID","lat":3.292599,"lon":-77.128245},{"ID":"1399","Name":"Mutatá REDD+ Project","Proponent":"Cabildo Mayor Indígena de Mutatá","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0006","Status":"Registered","Country":"Colombia","Estimated Annual Emission Reductions":"156,476","Region":"Latin America","Crediting Period Start Date":"06/04/2020","Crediting Period End Date":"26/06/2013","Hectares":"34288 Hectares","project_explanation":"REDD+ Project to mitigate climate change, protect rich biodiversity, and generate sources of income for poor indigenous communities, through forest governance, capacity building, and productive activities that will prevent selective logging of native forests, avoiding degradation and deforestation. Located in both Northeastern Choco, and North western Antioquia, in the Darien region of Colombia. Developed by BIOREDD+/USAID","lat":7.298886,"lon":-76.487774},{"ID":"1530","Name":"Grouped Project for Commercial Forest Plantations Initiatives in the Department of Vichada","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Registered","Country":"Colombia","Estimated Annual Emission Reductions":"39,506","Region":"Latin America","Crediting Period Start Date":"06/04/2020","Crediting Period End Date":"01/08/2011","Hectares":"8700 Hectares","project_explanation":"The Grouped Project for Commercial Forest Plantations Initiatives in the Department of Vichada aims to promote investments new commercial forest plantations in Puerto Carreño Municipality. The project is based on changing the use of land from extensive cattle ranching to sustainable forest production systems, restoring natural forest cover, and creating a landscape of biological and productive corridors that produce financial, social and environmental services for the region. These impacts include the mitigation of climate change, regulation of water flows, expansion of habitat and conservation of the flora and fauna in the zone and the Orinoco region.The Project area for the first instance corresponds to the properties of La Pedregoza, El Toro, Canapro, El Diamante and Horizonte Verde, located at the veredas Caño Negro, Aceito, La Esmeralda and Campo Alegre, in the municipality of Puerto Carreño (Department of Vichada, Colombia). The land within the project boundary is degraded grassland for all cases of the grouped instances, as they all occur in the same baseline conditions. Such grasslands grasslands have been historically subject to burns that took place with the objective to reduce tree covers and expand grasslands in order to develop extensive cattle ranching activities. However, all properties conserve remnants of gallery forests and natural areas. For the first instance, it is expected to reforest around 8,700 ha with commercial plantations, using the species Acacia mangium, Eucalyptus tereticornis, Eucalyptus pellita Hevea brasiliensis, Anacardium occidentale, Pinus caribaea and other 25 native species.The project is expected to capture 1,185,191 tCO2e in 30 years, with an average annual GHG emission of 39,506 tCO2e.","lat":5.542937,"lon":-68.340479},{"ID":"1233","Name":"Reforestation with Rubber on degraded lands of Colombia","Proponent":"Compañía de Profesionales de Bolsa S.A (PdB)","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Registered","Country":"Colombia","Estimated Annual Emission Reductions":"38,946","Region":"Latin America","Crediting Period Start Date":"26/08/2020","Crediting Period End Date":"20/12/2011","Hectares":"5918 Hectares","project_explanation":"Project Description: The forestry project “Reforestation with Rubber on degraded lands of Colombia” consists of the planting of Hevea brasiliensis on 10.000 hectares. The project promotes sustainable development through reforestation and forest restoration activities in the oriental plains region of Colombia. It also supports the creation of value-added and exports for the rubber and wood products value chains, enhances and conserves biodiversity in the area, provides carbon sequestration for the mitigation of global warming, and encourages the commercialization of timber and non-timber products from the plantations (sale of wood and latex).","lat":4.900273,"lon":-70.345494},{"ID":"1378","Name":"Forestry Project for the Basin of the Chinchina River, an Environmental and Productive Alternative for the City and the Region","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Registered","Country":"Colombia","Estimated Annual Emission Reductions":"12,189","Region":"Latin America","Crediting Period Start Date":"06/04/2020","Crediting Period End Date":"04/06/2002","Hectares":"4539 Hectares","project_explanation":"The primary objective of this project is to regulate and improve the quantity and quality of fresh water for the region’s communities by restoring the watersheds that supply their water systems, each duly identified as part of the Chinchiná River watershed restoration program. The program’s activities involve ecological restoration through assisted natural regeneration and reforestation. The species used for the assisted natural regeneration system come from the natural forests within the project boundary","lat":4.5613,"lon":-75.21},{"ID":"1434","Name":"Forestry Project “More Forests for Medellin”","Proponent":"Secretaría del Medio Ambiente del Municipio de Medellín","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"","Methodology":"AR-ACM0003","Status":"Withdrawn","Country":"Colombia","Estimated Annual Emission Reductions":"1,781","Region":"","Crediting Period Start Date":"06/04/2020","Crediting Period End Date":"","Hectares":"681 Hectares","project_explanation":"The project is based in the establishment of forest plantations, silvopastoral systems and assisted models for natural regeneration in areas of grasslands and stubbles in the Municipality of Medellin, department of Antioquia, in order to promote the removals of GHG and mitigate the climate change impacts while taking into account socioeconomic and cultural traditions of population in the area of influence of the Project. Additionally, the project seeks to generate appropriated land use alternatives for the rural areas and promote the recovery of slopes, hills and strategic ecosystems of the Municipality of Medellin. The project also promotes productive alternatives in the rural area to reduce the pressure of the forest relicts and to ensure the conservation of soils and biodiversity, among others environmental gods; it also seeks to provide alternative sources of funds and income for the rural communities of the Municipality.","lat":6.167856,"lon":-75.670507},{"ID":"1429","Name":"Recovery of degraded areas with agroforestry systems in Colombia","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Registered","Country":"Colombia","Estimated Annual Emission Reductions":"746","Region":"Latin America","Crediting Period Start Date":"04/11/2015","Crediting Period End Date":"16/01/2012","Hectares":"219 Hectares","project_explanation":"The grouped project proposes the recovery of degraded areas in Colombia by implementing agroforestry, silvopastoral and assisted natural regeneration systems, mixed-species plantations or any kind of land use multipurpose systems, in order to support initiatives that contribute to sustainable development, taking into account the region’s needs.","lat":8.3005,"lon":-76.425},{"ID":"1622","Name":"REDD+ Project for Caribbean Guatemala: The Conservation Coast","Proponent":"Fundacion para el Ecodesarrollo y la Conservacion [FUNDAECO]","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Registered","Country":"Guatemala","Estimated Annual Emission Reductions":"728,161","Region":"Latin America","Crediting Period Start Date":"04/06/2020","Crediting Period End Date":"01/04/2012","Hectares":"54157 Hectares","project_explanation":"This project is an Agriculture, Forestry and Other Land Use (AFOLU) project under the Reducing Emissions from Deforestation and Degradation (REDD) project category. Specifically, the project is of the “Avoided Unplanned Deforestation & Degradation” (AUDD) project category.The project is estimated to generate approximately 17,921,895 VCUs over 30 years. The project area is located in Department of Izabal in the Caribbean coast region of Guatemala in the Sarstun-Motagua reference region proposed by the national level REDD+ program. Belonging to the biologically diverse Mesoamerican Biological Corridor, forests in the project area are important nationally and internationally for the ecosystem services they provide. The project area forests, however, have experienced a continued reduction in biomass due largely to small-scale farmers and medium to large scale cattle ranchers that have sought to expand their activities or have been displaced by agro-industrial expansion. These forests have also historically been an important source of income for local families, who periodically harvest small amounts of timber when the economic needs arise.In 2013 Guatemala passed the Framework for the Regulation of the Reduction of Vulnerability, the Mandatory Adaptation to the effects of Climate Change and the Mitigation of the effects of Greenhouse Gases (Decree 07-2013) which gave landowners the rights to emission reductions generated in either voluntary or compliance markets. This law allowed the REDD+ Project for Caribbean Guatemala to pursue a Grouped Project design where the project proponent, FUNDAECO, could represent small landowners and manage the development of a REDD+ project on their behalf through legal contracts that transfer project ownership to FUNDAECO.The expansion of industrial agriculture and migration of subsistence farmers and cattle ranchers into protected areas is a historical trend observed in the project zone. Consequently, forests and land within protected areas are an important source of income within the project zone and is the major focus of the REDD+ project. The project aims to alleviate these pressures on the forests through the support of governance capacity (including individual property titling, land-use planning and conservation zone demarcation), the generation of alternative economic activities and income sources, and through capacity building in administration and management. These project activities, beyond protecting local forests and biodiversity, contribute to social and economic development in one of the poorest areas of Guatemala. The effectiveness of these activities is partially dependent on their long-term economic success and wide-spread adoption. Since the project’s inception, local communities have been actively participating in the project’s formulation and implementation. The early involvement of participating communities has created awareness among community members and readiness for project implementation.","lat":15.216831,"lon":-88.891564},{"ID":"514","Name":"Promoting Sustainable Development through Natural Rubber Tree Plantations in Guatemala","Proponent":"PICA DE HULE NATURAL, S.A.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0001","Status":"Registered","Country":"Guatemala","Estimated Annual Emission Reductions":"46,434","Region":"Latin America","Crediting Period Start Date":"06/04/2020","Crediting Period End Date":"01/06/2007","Hectares":"1 Hectares","project_explanation":"Validation achieved to the CCB Standards Second Edition, Biodiversity Gold Level, on 27 February 2014. Gap validation to remove two farms from the project area and verification achieved to the CCB Standards Second Edition, Biodiversity Gold Level on 03 March 2017. The project will establish rubber tree plantations in a project boundary of 2,366.16 hectares of degraded and degrading lands where the traditional use has been cattle grazing, which corresponds to eligible area. The species planted will be Hevea brasiliensis. Direct planting of H. brasiliensis in the project area began in 2007 and will continue through 2013. The real or effective planted area corresponds to 2,252.23 hectares which is given by planting density of natural rubber plantations. This area excludes other vegetated areas within project boundary such as creeks, borders’ vegetation, and small spots of vegetation.","lat":14.458248,"lon":-91.294307},{"ID":"1558","Name":"Agroforestry and forest restoration for ecological connectivity, poverty reduction and biodiversity conservation in Cerro San Gil, Caribbean Guatemala","Proponent":"Livelihoods Fund","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Registered","Country":"Guatemala","Estimated Annual Emission Reductions":"51,827","Region":"Latin America","Crediting Period Start Date":"06/04/2020","Crediting Period End Date":"09/11/2013","Hectares":"161591 Hectares","project_explanation":"The Project will establish 4,000 hectares of Agroforestry Systems and Forest Plantations in community lands surrounding the remaining rainforests of this key protected area in Caribbean Guatemala, between the international Borders of Belize and Honduras; these forests are a vital link in the Mesoamerican Biological Corridor and the caribbean migratory funnel of Central America. The Cerro San Gil is the region´s largest and most bio-diverse tropical rainforest in Caribbean Guatemala. The remaining forests of this region are truly biodiversity treasures: phenomena of isolation and differentiated evolution took place in the coastal mountains of this region, which explains their amazing biological diversity and endemism. Although very close in distance, these forests present assemblages of biodiversity and endemic species that differentiate them. Due to deforestation, these forests have become “biological islands”, which must be protected and connected.","lat":15.636744,"lon":-89.001654},{"ID":"1541","Name":"Lacandon – Forest for life REDD+ Project","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Registered","Country":"Guatemala","Estimated Annual Emission Reductions":"238,875","Region":"Latin America","Crediting Period Start Date":"06/04/2020","Crediting Period End Date":"01/02/2012","Hectares":"45289 Hectares","project_explanation":"This project is developed under the requirements of Agriculture, Forestry and Other Land Use (AFOLU) projects. Specifically, the project category is “Avoided Unplanned Deforestation & Degradation” (AUDD) for Reducing Emissions from Deforestation and Degradation (REDD). The Lacandón – Forest for Life (Bosques para la Vida) REDD+ Project focuses on reduce deforestation that is being exerte by different agents on the forest region by improving living condition of the communities located within the National Park and surrounding areas. Through implementation of project activities, the environmental function of the diverse ecosystems will be maintained, the cultural tangible heritage will be preserved and greenhouse gas emissions from deforestation and degradation processes will be prevented.","lat":16.642129,"lon":-90.566631},{"ID":"1538","Name":"ECO2 Rubber Forests Guatemala","Proponent":"Negocios Energeticos De Occidente, S.A.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Registered","Country":"Guatemala","Estimated Annual Emission Reductions":"19,022","Region":"Latin America","Crediting Period Start Date":"06/09/2016","Crediting Period End Date":"31/05/2011","Hectares":"1789 Hectares","project_explanation":"The grouped project “ECO2 Rubber Forests Guatemala” aims to create a broad platform for carbon market access in Guatemala where rubber forests will be established and managed. The Project will facilitate access to carbon finance as an additional income source and will generate positive incentives for reforestation with sustainably or responsible managed rubber tree forests. The grouped platform will allow producers to access the carbon market efficiently, transparently and at a low cost for every project activity instance, mobilizing the capital necessary to scale up successful land-use practices.The project activity is reforestation with rubber tree forests along the Guatemalan region of Central America. The model of reforestation includes implementing sustainable or responsible forest management in all the plantations included in the Project","lat":14.435594,"lon":-91.290772},{"ID":"1384","Name":"Reduced Emissions from Avoided Deforestation in the Multiple Use Zone of the Maya Biosphere Reserve in Guatemala (GuateCarbon)","Proponent":"Consejo Nacional de Áreas Protegidas (CONAP)","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Registered","Country":"Guatemala","Estimated Annual Emission Reductions":"1,385,971","Region":"Latin America","Crediting Period Start Date":"06/04/2020","Crediting Period End Date":"30/01/2012","Hectares":"463239 Hectares","project_explanation":"The Guatecarbon REDD+ project is a voluntary forest carbon project that is jointly managed by the local community forestry association of the Petén (ACOFOP) and the national council for protected areas of Guatemala (CONAP) The project activities take place within the Multiple-use Zone (MUZ), 797,868ha or 38%, of the total Maya Biosphere Reserve (MBR), which encompasses 2,080,298 ha. The project seeks to produce a net reduction in greenhouse house gas emissions from deforestation (RED) of approximately 41,579,156 tCO2e by strengthening and improving the existing model of co-management arrangements in the MUZ between local residents and the national government, and by improving zoning, land use planning and enforcement.","lat":17.209557,"lon":-89.631297},{"ID":"3554","Name":"Core Farming in Odisha","Proponent":"Core CarbonX Solutions Pvt. Ltd.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ALM","Methodology":"VM0017","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":774200,"Region":"Asia","Crediting Period Start Date":43374,"Crediting Period End Date":57983,"Hectares":"98000 Hectares","project_explanation":"The proposed ‘Core Farming in Odisha’ implemented by about 76,000 farmers and organic grower cooperatives overing 98,000 hectares of cropland in the state of Odisha to be implemented in the first phase. The project aims at increasing the capacity of soil to sequester carbon, enhance the carbon sequestration by natural farming, agroforestry practices such as planting of trees, reduce emissions from use of synthetic fertilizers and reduce emissions from burning of crop residue by application of VCS methodology: VM0017 Sustainable Agricultural Land Management (SALM). Several SALM practices and technologies have been proven to reduce greenhouse gas emissions and prevent climate change by enhancing carbon storage in soils; preserving existing soil carbon; and reducing carbon dioxide, methane and nitrous oxide emissions. Some of those practices are conservation tillage, cover crops, enhanced crop rotations, residue retention, agroforestry and avoidance of crop residue burning. The project holistically aims at achieving sustainable management practices which improves soil health, reduces greenhouse gas (GHG) emissions and develop the socio-economic status of the project area. The project aims to reduce and sequester carbon leading to an estimated GHG emission reductions or removals (tCO2e) of 774200 tCO2e / year. This projects climate benefits include emissions reduction or removals of approximately 30968000 (thirty million ninety-six hundred eight thousand) tCO2e over the lifetime of the project.","lat":17.8,"lon":87.483333},{"ID":"3555","Name":"Agroforestry Plantations in the Country by Greenply","Proponent":"Greenply Industries Limited (GIL)","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":65152,"Region":"Asia","Crediting Period Start Date":43266,"Crediting Period End Date":54223,"Hectares":"12000 Hectares","project_explanation":"Adopting an agroforestry approach would be a practical alternative to meet the growing demand for wood and other tree-based products because it is a system that can offer both food and wood while also preserving and rehabilitating the ecosystem. The proposed ARR VCS project aims to support small-scale farmers in Nagaland, Gujarat, Odisha, India, using sustainable Plantations in order to give them financial advantages and assure GHG mitigation over the period of its lifetime. The total project area of expected to be covered in the project is 12,000 hectares","lat":26.851209,"lon":95.074905},{"ID":"3560","Name":"Improving livelihoods through Agroforestry Plantations in India","Proponent":"Infinite Solutions","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"ACM0003","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":39445,"Region":"Asia","Crediting Period Start Date":43636,"Crediting Period End Date":54593,"Hectares":"4000 Hectares","project_explanation":"This project aims for the sustainable implementation and management of Afforestation activity that involves carbon sequestration on degraded lands through agroforestry plantation activities with species plantations in the multiple districts of India. The project includes multiple land parcels (continue and scattered). The project has been undertaken to plant agroforestry species on the land which was severly degraded in the baseline and continues to be degraded. Before the project activity, the project area was facing threat due to severe soil erosion from slash and burn rotations. The project tends to combat land degradation and emphasize the role of project in the UN sustainable development and land restoration agenda. The project activity is expected to reduce atmospheric CO2 by sequestration and storing in the form of biomass. The project is expected to be functional and remove CO2 from the atmosphere for 80 years of its lifetime with 30 years of renewable period. The Project activities are carried out and monitored according to the approved project methodology AR-ACM0003 for the first crediting period of 30 years. The project aims to remove an estimated 39,445 tCO2e annually and 11,83,343 tCO2e during the first crediting period.","lat":22.601,"lon":75.3025},{"ID":"3563","Name":"Core Farming in Himachal Pradesh","Proponent":"Core CarbonX Solutions Pvt. Ltd.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ALM","Methodology":"VM0017","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":291824,"Region":"Asia","Crediting Period Start Date":43405,"Crediting Period End Date":58014,"Hectares":"39230 Hectares","project_explanation":"The proposed ‘Core Farming in Himachal Pradesh activity’ is practised by individual farmers and organic grower cooperatives covering 39,230 hectares of cropland in the state of Himachal Pradesh to be implemented in the first phase. The project aims at increasing the capacity of soil to sequester carbon, enhance the carbon sequestration by agroforestry practices such as planting of trees, reduce emissions from the use of synthetic fertilizers and reduce emissions from burning of crop residue by application of VCS methodology: VM0017 Sustainable Agricultural Land Management (SALM). Several SALM practices and technologies have been proven to reduce greenhouse gas emissions and prevent climate change by enhancing carbon storage in soils, preserving existing soil carbon, and reducing carbon dioxide, methane and nitrous oxide emissions. Those practices include conservation tillage, cover crops, enhanced crop rotations, residue retention, agroforestry and avoidance of crop residue burning. The project holistically aims at achieving sustainable management practices which improve soil health, reduce greenhouse gas (GHG) emissions and develop the socio-economic status of the project area. The project aims to reduce and sequester carbon leading to estimated GHG emission reductions or removals (tCO2e) of 291824 tCO2e / year. This project\'s climate benefits include emissions reduction or removals of approximately 11672960 tCO2e over the lifetime of the project.","lat":30.377776,"lon":79.07222},{"ID":"3565","Name":"Core Farming in Jharkhand","Proponent":"Core CarbonX Solutions Pvt. Ltd.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ALM","Methodology":"VM0017","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":289256,"Region":"Asia","Crediting Period Start Date":43353,"Crediting Period End Date":57962,"Hectares":"39648 Hectares","project_explanation":"The proposed ‘Core Farming in Jharkhand’ activity is practised by individual farmers, about 37,536 farmers, and organic grower cooperatives covering 39,648 hectares of cropland in the state of Jharkhand to be implemented in the first phase. The project aims at increasing the capacity of soil to sequester carbon, enhance the carbon sequestration by agroforestry practices such as planting of trees, reduce emissions from the use of synthetic fertilizers and reduce emissions from burning of crop residue by application of VCS methodology: VM0017 Sustainable Agricultural Land Management (SALM). By improving soil carbon storage, protecting current soil carbon, and lowering carbon dioxide, methane, and nitrous oxide emissions, a number of SALM techniques and technologies have been shown to lower greenhouse gas emissions and mitigate climate change. Conservation tillage, cover crops, improved crop rotations, residue retention, agroforestry, and avoiding agricultural residue burning are a few of these techniques. The project\'s overarching goal is to implement sustainable management techniques that enhance soil health, lower greenhouse gas (GHG) emissions, and advance the socio-economic situation of the project region. The project aims to reduce and sequester carbon leading to estimated GHG emission reductions or removals (tCO2e) of 289,256 tCO2e / year. This project\'s climate benefits include emissions reduction or removals of approximately 11,570,238 tCO2e over the lifetime of the project.","lat":21.949998,"lon":87.966666},{"ID":"3566","Name":"Livelihood improvement by agroforestry plantation in India","Proponent":"Purncare Carbon Mitigation Solutions Private Limited","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":61296,"Region":"Asia","Crediting Period Start Date":43262,"Crediting Period End Date":54219,"Hectares":"4000 Hectares","project_explanation":"Adopting an agroforestry approach would be a practical alternative to meet the growing demand for wood and other tree-based products because it is a system that can offer both food and wood while also preserving and rehabilitating the ecosystem. The proposed ARR VCS project aims to support small-scale farmers in Nasik, Ahmednagar districts in India, using sustainable plantations in order to give them financial advantages and assure GHG mitigation over the period of its lifetime. The total project area of expected to be covered in the project is 4000 hectares.","lat":19.997451,"lon":73.789799},{"ID":"3568","Name":"CORE CARBON SERICULTURE PLANTATION IN ODISHA STATE","Proponent":"Core CarbonX Solutions Pvt. Ltd.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":104844,"Region":"Asia","Crediting Period Start Date":43271,"Crediting Period End Date":50575,"Hectares":"10520 Hectares","project_explanation":"The villages under the project area predominantly have an agrarian economy where most of its population depends on agriculture. The major agroforestry plantation in these project districts (Keonjhar, Mayurbhanj & Sundergarh) are Asana, Arjuna, Cashew and Mango. The plantation was done by the farmers and utilized subsidies to avail the saplings. The saplings do sequestration of carbon dioxide at a faster pace and ultimately reduce GHG emissions. Initially, 10,520 hectares of land have been selected for the first project activity instance. Through carbon sequestration by the planted trees, the project is expected to generate annual average GHG emission reductions or removals of 104,844 tCO2e. The selected farmers are those farmers who did not plant anything on their lands as they were fallow lands. CCX company held workshops in the villages and advised the villagers to grow Asana & Arjuna, Cashew and Mango trees in a sustainable manner to earn carbon revenue. The idea of earning additional revenue caught the farmer’s attention, and they decided to enter into carbon-offset agreements with the CCX company.","lat":21.616665,"lon":86.716666},{"ID":"3572","Name":"GROUPED AGROFORESTRY PROJECT IN VARIOUS STATES OF INDIA","Proponent":"Infinite Solutions","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":163886,"Region":"Asia","Crediting Period Start Date":43647,"Crediting Period End Date":54604,"Hectares":"10000 Hectares","project_explanation":"This project is an agroforestry plantation initiated by Infinite Environmental Solutions LLP (IESLLP) with the help of local farmers/communities. Plantation activities conducted at multiple locations in the states of India from 2019 and is expected to cover 10000 hectares. Farmers retain ownership of the trees, products, and land as well. Farmers received training from project implementer for plantation. Simple tree plantation technique is used with negligible soil disturbance. The proposed ARR VCS project plans to promote sustainable agroforestry for small-scale farmers to provide them with financial benefits and ensure GHG mitigation in the various state of India.","lat":21.962825,"lon":79.042304},{"ID":"3577","Name":"Ban Odisha 02","Proponent":"Core CarbonX Solutions Pvt. Ltd.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":15671,"Region":"Asia","Crediting Period Start Date":42005,"Crediting Period End Date":49309,"Hectares":"1900 Hectares","project_explanation":"Core CarbonX Solutions Private Limited (CCX) is a carbon management consultancy company with a registered office in the state of Telangana. CCX is the Project Proponent (PP) of the carbon offset project called “Ban Odisha 02” in all districts of Odisha. The Project Activity will lead to considerable carbon sequestration in the project areas and will contribute strongly to the sustainable development of rural villages involved in the project. The project quantifies the GHG removals occurring from agroforestry plantations through the use of AR-ACM0003: “Afforestation and reforestation project activities implemented on lands other than wetlands”, Version 02.0 developed under the Clean Development Mechanism for large-scale plantations. The project plans to generate carbon credits for the voluntary market under the VCS standard. Such planting activity would result in carbon credits that would be sold in the carbon market to generate revenue. As per the Carbon-offset agreement entered into between the farmers and CCX, 60%-80 of the carbon income generated from the sale of carbon credits would be distributed among the farmers. The project activity was implemented in 1900 hectares. Through carbon sequestration by the planted trees, the project is expected to generate annual average GHG emission reductions or removals of 15671 tCO2e.","lat":17.833332,"lon":87.383332},{"ID":"3578","Name":"Ban Odisha 03","Proponent":"Core CarbonX Solutions Pvt. Ltd.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":15671,"Region":"Asia","Crediting Period Start Date":42005,"Crediting Period End Date":49309,"Hectares":"1900 Hectares","project_explanation":"Core CarbonX Solutions Private Limited (CCX) is a carbon management consultancy company with a registered office in the state of Telangana. CCX is the Project Proponent (PP) of the carbon offset project called “Ban Odisha 03” in all districts of Odisha. The Project Activity will lead to considerable carbon sequestration in the project areas and will contribute strongly to the sustainable development of rural villages involved in the project. The project quantifies the GHG removals occurring from agroforestry plantations through the use of AR-ACM0003: “Afforestation and reforestation project activities implemented on lands other than wetlands”, Version 02.0 developed under the Clean Development Mechanism for large-scale plantations. The project plans to generate carbon credits for the voluntary market under the VCS standard. Such planting activity would result in carbon credits that would be sold in the carbon market to generate revenue. As per the Carbon-offset agreement entered into between the farmers and CCX, 60%-80% of the carbon income generated from the sale of carbon credits would be distributed among the farmers. The project activity was implemented in 1900 hectares. Through carbon sequestration by the planted trees, the project is expected to generate annual average GHG emission reductions or removals of 15671 tCO2e.","lat":17.833332,"lon":87.383332},{"ID":"3583","Name":"Ban Odisha 07","Proponent":"Core CarbonX Solutions Pvt. Ltd.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":15671,"Region":"Asia","Crediting Period Start Date":42005,"Crediting Period End Date":49309,"Hectares":"1900 Hectares","project_explanation":"Core CarbonX Solutions Private Limited (CCX) is a carbon management consultancy company with a registered office in the state of Telangana. CCX is the Project Proponent (PP) of the carbon offset project called “Ban Odisha 07” in all districts of Odisha. The Project Activity will lead to considerable carbon sequestration in the project areas and will contribute strongly to the sustainable development of rural villages involved in the project. The project quantifies the GHG removals occurring from agroforestry plantations through the use of AR-ACM0003 “: Afforestation and reforestation project activities implemented on lands other than wetlands”, Version 02.0 developed under the Clean Development Mechanism for large-scale plantations. The project plans to generate carbon credits for the voluntary market under the VCS standard. Such planting activity would result in carbon credits that would be sold in the carbon market to generate revenue. As per the Carbon-offset agreement entered into between the farmers and CCX, 60%-80% of the carbon income generated from the sale of carbon credits would be distributed among the farmers. The project activity was implemented in 1900 hectares. Through carbon sequestration by the planted trees, the project is expected to generate annual average GHG emission reductions or removals of 15671 tCO2e.","lat":17.833332,"lon":87.383332},{"ID":"3585","Name":"Ban Odisha 09","Proponent":"Core CarbonX Solutions Pvt. Ltd.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":15671,"Region":"Asia","Crediting Period Start Date":42005,"Crediting Period End Date":49309,"Hectares":"1900 Hectares","project_explanation":"Core CarbonX Solutions Private Limited (CCX) is a carbon management consultancy company with a registered office in the state of Telangana. CCX is the Project Proponent (PP) of the carbon offset project called “Ban Odisha 09” in all districts of Odisha. The Project Activity will lead to considerable carbon sequestration in the project areas and will contribute strongly to the sustainable development of rural villages involved in the project. The project quantifies the GHG removals occurring from agroforestry plantations through the use of AR-ACM0003 “: Afforestation and reforestation project activities implemented on lands other than wetlands”, Version 02.0 developed under the Clean Development Mechanism for large-scale plantations. The project plans to generate carbon credits for the voluntary market under the VCS standard. Such planting activity would result in carbon credits that would be sold in the carbon market to generate revenue. As per the Carbon-offset agreement entered into between the farmers and CCX, 60%-80% of the carbon income generated from the sale of carbon credits would be distributed among the farmers. The project activity was implemented in 1900 hectares. Through carbon sequestration by the planted trees, the project is expected to generate annual average GHG emission reductions or removals of 15671 tCO2e.","lat":17.833332,"lon":87.383332},{"ID":"3586","Name":"Ban Odisha 10","Proponent":"Core CarbonX Solutions Pvt. Ltd.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":15671,"Region":"Asia","Crediting Period Start Date":42005,"Crediting Period End Date":49309,"Hectares":"1900 Hectares","project_explanation":"Core CarbonX Solutions Private Limited (CCX) is a carbon management consultancy company with a registered office in the state of Telangana. CCX is the Project Proponent (PP) of the carbon offset project called “Ban Odisha 10” in all districts of Odisha. The Project Activity will lead to considerable carbon sequestration in the project areas and will contribute strongly to the sustainable development of rural villages involved in the project. The project quantifies the GHG removals occurring from agroforestry plantations through the use of AR-ACM0003 “: Afforestation and reforestation project activities implemented on lands other than wetlands”, Version 02.0 developed under the Clean Development Mechanism for large-scale plantations. The project plans to generate carbon credits for the voluntary market under the VCS standard. Such planting activity would result in carbon credits that would be sold in the carbon market to generate revenue. As per the Carbon-offset agreement entered into between the farmers and CCX, 60%-80% of the carbon income generated from the sale of carbon credits would be distributed among the farmers. The project activity was implemented in 1900 hectares. Through carbon sequestration by the planted trees, the project is expected to generate annual average GHG emission reductions or removals of 15671 tCO2e","lat":17.833332,"lon":87.383332},{"ID":"3558","Name":"Core Farming in West Bengal","Proponent":"Core CarbonX Solutions Pvt. Ltd.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ALM","Methodology":"VM0017","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":308918,"Region":"Asia","Crediting Period Start Date":43313,"Crediting Period End Date":57922,"Hectares":"42343 Hectares","project_explanation":"The proposed ‘Core Farming in West Bengal’ activity is practised by farmers and organic grower cooperatives covering 42,343 hectares of cropland in the state of West Bengal to be implemented in the first phase. The project aims at increasing the capacity of soil to sequester carbon, enhance the carbon sequestration by agroforestry practices such as planting of trees, reduce emissions from the use of synthetic fertilizers and reduce emissions from burning of crop residue by application of VCS methodology: VM0017 Sustainable Agricultural Land Management (SALM). By improving soil carbon storage, protecting current soil carbon, and lowering carbon dioxide, methane, and nitrous oxide emissions, a number of SALM techniques and technologies have been shown to lower greenhouse gas emissions and mitigate climate change. Conservation tillage, cover crops, improved crop rotations, residue retention, agroforestry, and avoiding agricultural residue burning are a few of these techniques. The project\'s overarching goal is to implement sustainable management techniques that enhance soil health, lower greenhouse gas (GHG) emissions, and advance the socio-economic situation of the project region. The project aims to reduce and sequester carbon leading to an estimated GHG emission reduction or removals (tCO2e) of 308,918 tCO2e / year. This project\'s climate benefits include emissions reduction or removals of approximately 12,356,704 tCO2e over the lifetime of the project.","lat":21.5,"lon":89.9},{"ID":"3580","Name":"Ban Odisha 05","Proponent":"Core CarbonX Solutions Pvt. Ltd.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":15671,"Region":"Asia","Crediting Period Start Date":42005,"Crediting Period End Date":49309,"Hectares":"1900 Hectares","project_explanation":"Core CarbonX Solutions Private Limited (CCX) is a carbon management consultancy company with a registered office in the state of Telangana. CCX is the Project Proponent (PP) of the carbon offset project called “Ban Odisha 05” in all districts of Odisha. The Project Activity will lead to considerable carbon sequestration in the project areas and will contribute strongly to the sustainable development of rural villages involved in the project. The project quantifies the GHG removals occurring from agroforestry plantations through the use of AR-ACM0003: “Afforestation and reforestation project activities implemented on lands other than wetlands”, Version 02.0 developed under the Clean Development Mechanism for large-scale plantations. The project plans to generate carbon credits for the voluntary market under the VCS standard. Such planting activity would result in carbon credits that would be sold in the carbon market to generate revenue. As per the Carbon-offset agreement entered into between the farmers and CCX, 60%-80% of the carbon income generated from the sale of carbon credits would be distributed among the farmers. The project activity was implemented in 1900 hectares. Through carbon sequestration by the planted trees, the project is expected to generate annual average GHG emission reductions or removals of 15671 tCO2e.","lat":17.833332,"lon":87.383332},{"ID":"3576","Name":"Ban Odisha 01","Proponent":"Core CarbonX Solutions Pvt. Ltd.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":15671,"Region":"Asia","Crediting Period Start Date":42005,"Crediting Period End Date":49309,"Hectares":"1900 Hectares","project_explanation":"Core CarbonX Solutions Private Limited (CCX) is a carbon management consultancy company with registered office in the state of Telangana. CCX is the Project Proponent (PP) of the carbon offset project called “Ban Odisha01” in all districts of Odisha. The Project Activity will lead to considerable carbon sequestration in the project areas and will contribute strongly to the sustainable development of rural villages involved in the project. The project quantifies the GHG removals occurring from agroforestry plantations through the use of AR-ACM0003: “Afforestation and reforestation project activities implemented on lands other than wetlands”, Version 02.0 developed under the Clean Development Mechanism for large-scale plantations. The project plans to generate carbon credits for the voluntary market under the VCS standard. Such planting activity would result in carbon credits that would be sold in the carbon market to generate revenue. As per the Carbon-offset agreement entered into between the farmers and CCX, 60%-80 of the carbon income generated from the sale of carbon credits would be distributed among the farmers. The project activity was implemented in 1900 hectares. Through carbon sequestration by the planted trees, the project is expected to generate annual average GHG emission reductions or removals of 15671 tCO2e.","lat":17.833331,"lon":87.383328},{"ID":"3579","Name":"Ban Odisha 04","Proponent":"Core CarbonX Solutions Pvt. Ltd.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":15671,"Region":"Asia","Crediting Period Start Date":42005,"Crediting Period End Date":49309,"Hectares":"1900 Hectares","project_explanation":"Core CarbonX Solutions Private Limited (CCX) is a carbon management consultancy company with a registered office in the state of Telangana. CCX is the Project Proponent (PP) of the carbon offset project called “Ban Odisha 04” in all districts of Odisha. The Project Activity will lead to considerable carbon sequestration in the project areas and will contribute strongly to the sustainable development of rural villages involved in the project. The project quantifies the GHG removals occurring from agroforestry plantations through the use of AR-ACM0003: “Afforestation and reforestation project activities implemented on lands other than wetlands”, Version 02.0 developed under the Clean Development Mechanism for large-scale plantations. The project plans to generate carbon credits for the voluntary market under the VCS standard. Such planting activity would result in carbon credits that would be sold in the carbon market to generate revenue. As per the Carbon-offset agreement entered into between the farmers and CCX, 60%-80% of the carbon income generated from the sale of carbon credits would be distributed among the farmers. The project activity was implemented in 1900 hectares. Through carbon sequestration by the planted trees, the project is expected to generate annual average GHG emission reductions or removals of 15671 tCO2e.","lat":17.833332,"lon":87.383332},{"ID":"3582","Name":"Ban Odisha 06","Proponent":"Core CarbonX Solutions Pvt. Ltd.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":15671,"Region":"Asia","Crediting Period Start Date":42005,"Crediting Period End Date":49309,"Hectares":"1900 Hectares","project_explanation":"Core CarbonX Solutions Private Limited (CCX) is a carbon management consultancy company with a registered office in the state of Telangana. CCX is the Project Proponent (PP) of the carbon offset project called “Ban Odisha 06” in all districts of Odisha. The Project Activity will lead to considerable carbon sequestration in the project areas and will contribute strongly to the sustainable development of rural villages involved in the project. The project quantifies the GHG removals occurring from agroforestry plantations through the use of AR-ACM0003: “Afforestation and reforestation project activities implemented on lands other than wetlands”, Version 02.0 developed under the Clean Development Mechanism for large-scale plantations. The project plans to generate carbon credits for the voluntary market under the VCS standard. Such planting activity would result in carbon credits that would be sold in the carbon market to generate revenue. As per the Carbon-offset agreement entered into between the farmers and CCX, 60%-80% of the carbon income generated from the sale of carbon credits would be distributed among the farmers. The project activity was implemented in 1900 hectares. Through carbon sequestration by the planted trees, the project is expected to generate annual average GHG emission reductions or removals of 15671 tCO2e.","lat":17.833332,"lon":87.383332},{"ID":"3570","Name":"Bamboo plantations by farmers and community in the country","Proponent":"Infinite Solutions","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":61126,"Region":"Asia","Crediting Period Start Date":43655,"Crediting Period End Date":54612,"Hectares":"4500 Hectares","project_explanation":"The primary goal of this project is to contribute to the removal and reduction of greenhouse gases (GHG) emissions from the atmosphere by planting Bamboo on degraded land owned by individual farmers/communities. The project is expected to be planted across the country covering 4500 hectares, however initially the plantations were started from districts Raisen and Bhopal of the state Madhya Pradesh, the central part of India and at districts of Nashik and Ahmednagar in the state of Maharashtra.","lat":23.015,"lon":78.153},{"ID":"3561","Name":"Core Farming in Tamil Nadu","Proponent":"Core CarbonX Solutions Pvt. Ltd.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ALM","Methodology":"VM0017","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":871824,"Region":"Asia","Crediting Period Start Date":43405,"Crediting Period End Date":58014,"Hectares":"119500 Hectares","project_explanation":"The proposed ‘Core Farming in Tamil Nadu’ activity is practised by individual farmers practised by about 1,60,000 farmers and organic grower cooperatives covering 1,19,500 hectares of cropland in the state of Tamil Nadu to be implemented in the first phase. The project aims at increasing the capacity of soil to sequester carbon, enhance the carbon sequestration by agroforestry practices such as planting of trees, reduce emissions from the use of synthetic fertilizers and reduce emissions from burning of crop residue by application of VCS methodology: VM0017 Sustainable Agricultural Land Management (SALM). Several SALM practices and technologies have been proven to reduce greenhouse gas emissions and prevent climate change by enhancing carbon storage in soils, preserving existing soil carbon, and reducing carbon dioxide, methane and nitrous oxide emissions. Those practices include conservation tillage, cover crops, enhanced crop rotations, residue retention, agroforestry and avoidance of crop residue burning. The project holistically aims at achieving sustainable management practices which improve soil health, reduce greenhouse gas (GHG) emissions and develop the socio-economic status of the project area. The project aims to reduce and sequester carbon leading to estimated GHG emission reductions or removals (tCO2e) of 871824tCO2e / year. This project\'s climate benefits include emissions reduction or removals of approximately 34872968tCO2e over the lifetime of the project.","lat":8.083332,"lon":80.333331},{"ID":"3584","Name":"Ban Odisha 08","Proponent":"Core CarbonX Solutions Pvt. Ltd.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":15671,"Region":"Asia","Crediting Period Start Date":42005,"Crediting Period End Date":49309,"Hectares":"1900 Hectares","project_explanation":"Core CarbonX Solutions Private Limited (CCX) is a carbon management consultancy company with a registered office in the state of Telangana. CCX is the Project Proponent (PP) of the carbon offset project called “Ban Odisha 08” in all districts of Odisha. The Project Activity will lead to considerable carbon sequestration in the project areas and will contribute strongly to the sustainable development of rural villages involved in the project. The project quantifies the GHG removals occurring from agroforestry plantations through the use of AR-ACM0003 “: Afforestation and reforestation project activities implemented on lands other than wetlands”, Version 02.0 developed under the Clean Development Mechanism for large-scale plantations. The project plans to generate carbon credits for the voluntary market under the VCS standard. Such planting activity would result in carbon credits that would be sold in the carbon market to generate revenue. As per the Carbon-offset agreement entered into between the farmers and CCX, 60%-80% of the carbon income generated from the sale of carbon credits would be distributed among the farmers. The project activity was implemented in 1900 hectares. Through carbon sequestration by the planted trees, the project is expected to generate annual average GHG emission reductions or removals of 15671 tCO2e.","lat":17.833332,"lon":87.383332},{"ID":"3478","Name":"CORE CARBON VANAM IN TELANGANA STATE","Proponent":"Core CarbonX Solutions Pvt. Ltd.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":419519,"Region":"Asia","Crediting Period Start Date":43252,"Crediting Period End Date":50556,"Hectares":"49530 Hectares","project_explanation":"The proposed ARR VCS project plans to promote sustainable agroforestry for small-scale farmers to provide them with financial benefits and ensure GHG mitigation in the state of Telangana, India. The project is being conducted in the spread across all the districts of Telangana. CCX entered into carbon offset agreements with individual farmers of various districts of Telangana state for provision of carbon credit advisory services to them. The individual farmers are the owners of the lands on which trees are being grown to sequester carbon and reduce greenhouse gas emissions from the atmosphere. CCX has mobilized the farmers in the selected states of India to plant various tree species on their lands. These tree species range from fruit bearing trees like Indian blackberry, Guava, Mango to commercial species like Teak, Mahogany and Sandal, etc. Simple tree cultivation techniques involving planting saplings in the pits with minimum disturbance to the lands have been employed by the selected farmers.","lat":15.8,"lon":81.833331},{"ID":"3481","Name":"CORE CARBON VANAM IN ODISHA STATE","Proponent":"Core CarbonX Solutions Pvt. Ltd.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":449341,"Region":"Asia","Crediting Period Start Date":43245,"Crediting Period End Date":50549,"Hectares":"53051 Hectares","project_explanation":"The proposed ARR VCS project plans to promote sustainable agroforestry for small-scale farmers to provide them with financial benefits and ensure GHG mitigation in the state of Odisha, India. The project is being conducted in the spread across all the districts of Odisha. CCX entered into carbon offset agreements with individual farmers of various districts of Odisha state for the provision of carbon credit advisory services to them. The individual farmers are the owners of the lands on which trees are being grown to sequester carbon and reduce greenhouse gas emissions from the atmosphere. CCX has mobilized the farmers in the selected states of India to plant various tree species on their lands. These tree species range from fruit-bearing trees like Indian blackberry, Guava, and Mango to commercial species like Teak, Mahogany Sandal, etc. The selected farmers have employed simple tree cultivation techniques involving planting saplings in the pits with minimum disturbance to the lands.","lat":17.833331,"lon":87.38333},{"ID":"3501","Name":"EVI SUSTAINABLE AGRICULTURE PROGRAM","Proponent":"Emergent Ventures India Private Limited","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ALM","Methodology":"AMS-III.AU","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":60000,"Region":"Asia","Crediting Period Start Date":43276,"Crediting Period End Date":45832,"Hectares":"500 Hectares","project_explanation":"The purpose of this grouped project (Program) is to replace the traditional practice of flooded irrigation (baseline) with System of Root Intensification (SRI) technique in rice cultivation (project). SRI is an intermittent wet and dry technique of cultivation which induces positive socio-economic and environmental impacts by reducing water consumption and increasing crop yield compared to baseline. This also results in reduced GHG emission emissions associated with energy use in water pumping and methane avoidance associated with standing water in farm fields compared to the baseline. Increase in yield and reduced water and energy consumption also yields socio-economic benefits to the farmers. The first project activity instance (VPA) under the program is located in the state of Odisha in India. In the baseline, farmers were using traditional agriculture practice of rice cultivation and replaced it with SRI in the project activity. The area covered in this VPA is up to 500 hectares. In the project activity, emission reductions happen due to methane avoidance from the farm fields and reduced electricity consumption. However, emission reductions due to methane avoidance alone, are being claimed under the program. It is estimated that 60,000 tCO2e of emission reductions will be generated per annum.","lat":18.016666,"lon":82.083331},{"ID":"3518","Name":"JFMC PLANTATIONS IN CHHATTISGARH STATE","Proponent":"Chhattisgarh Forest Department","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":67447,"Region":"Asia","Crediting Period Start Date":43647,"Crediting Period End Date":54604,"Hectares":"5000 Hectares","project_explanation":"Project is a VCS AFOLU (Agriculture, Forestry and Other Land Use) grouped project implemented in Chhattisgarh Forest Department (Kawardha division Kabeerdham, district and Chhattisgarh State) and it falls under the ARR (Afforestation, Reforestation, and Revegetation) category. The project aim is to reforest 5000 hectares out of which 450 hectares of degraded land which is currently under management by the project proponent have been planted.","lat":22.438894,"lon":81.339608},{"ID":"3507","Name":"Carbon Sequestration through Agroforestry by farmers in Telangana State","Proponent":"Core CarbonX Solutions Pvt. Ltd.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":73711,"Region":"Asia","Crediting Period Start Date":43101,"Crediting Period End Date":50405,"Hectares":"3030 Hectares","project_explanation":"Core CarbonX Solutions Private Limited (CCX) is a carbon management consultancy company with registered office in the state of Telangana. CCX is the Project Proponent (PP) of the carbon offset project called “Carbon Sequestration through Agroforestry by farmers in Telangana State”. CCX entered into carbon offset agreements with individual farmers of various districts of Telangana state for provision of carbon credit advisory services to them the districts covered under this project activity are Bhadradri Kothagudem, Hanamkonda, Jagithyal Jayashankar Bhupalapally, Kamareddy, Karimnagar, Khammam, Mahabubabad Mulugu & Warangal, Nagarkurnool, Nalgonda, Peddapelli and Suryapet. The villages under the project area predominantly have an agrarian economy where most of its population depends on agriculture. The project quantifies the GHG removals occurring from agroforestry plantations through the use of AR-ACM0003: “Afforestation and reforestation project activities implemented on lands other than wetlands”, Version 02.0 developed under the Clean Development Mechanism for large-scale plantations. The project plans to generate carbon credits for the voluntary market under the VCS standard. Such planting activity would result in carbon credits that would be sold in the carbon market to generate revenue.The project activity was implemented in 3029.69 hctres. Through carbon sequestration by the planted trees, the project is expected to generate annual average GHG emission reductions or removals of 73,711 tCO2e.","lat":15.8,"lon":81.833331},{"ID":"3476","Name":"CORE CARBON VANAM IN JHARKHAND STATE 2","Proponent":"Core CarbonX Solutions Pvt. Ltd.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":502059,"Region":"Asia","Crediting Period Start Date":43040,"Crediting Period End Date":50344,"Hectares":"19828 Hectares","project_explanation":"The proposed ARR VCS project plans to promote sustainable agroforestry for small-scale farmers to provide them with financial benefits and ensure GHG mitigation in the state of Jharkhand, India. The project is being conducted in the spread across all the districts of Jharkhand. CCX entered into carbon offset agreements with individual farmers of various districts of Jharkhand state for the provision of carbon credit advisory services to them. The individual farmers are the owners of the lands on which trees are being grown to sequester carbon and reduce greenhouse gas emissions from the atmosphere. CCX has mobilized the farmers in the selected states of India to plant various tree species on their lands. These tree species range from fruit-bearing trees like Indian blackberry, Guava, and Mango to commercial species like Teak, Mahogany Sandal, etc. The selected farmers have employed simple tree cultivation techniques involving planting saplings in the pits with minimum disturbance to the lands.","lat":23.75,"lon":85.5},{"ID":"3477","Name":"CORE CARBON VANAM IN ANDHRA PRADESH","Proponent":"Core CarbonX Solutions Pvt. Ltd.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":2847326,"Region":"Asia","Crediting Period Start Date":43289,"Crediting Period End Date":50593,"Hectares":"111980 Hectares","project_explanation":"The proposed ARR VCS project plans to promote sustainable agroforestry for small-scale farmers to provide them with financial benefits and ensure GHG mitigation in the state of Andhra Pradesh, India. The project is being conducted in the spread across all the districts of Andhra Pradesh. CCX entered into carbon offset agreements with individual farmers of various districts of Andhra Pradesh state for provision of carbon credit advisory services to them. The individual farmers are the owners of the lands on which trees are being grown to sequester carbon and reduce greenhouse gas emissions from the atmosphere. CCX has mobilized the farmers in the selected states of India to plant various tree species on their lands. These tree species range from fruit bearing trees like Indian blackberry, Guava, Mango to commercial species like Teak, Mahogany and Sandal, etc. Simple tree cultivation techniques involving planting saplings in the pits with minimum disturbance to the lands have been employed by the selected farmers.","lat":21.5,"lon":89.9},{"ID":"3480","Name":"CORE CARBON VANAM IN JHARKHAND STATE","Proponent":"Core CarbonX Solutions Pvt. Ltd.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":172110,"Region":"Asia","Crediting Period Start Date":43230,"Crediting Period End Date":50534,"Hectares":"20320 Hectares","project_explanation":"The proposed ARR VCS project plans to promote sustainable agroforestry for small-scale farmers to provide them with financial benefits and ensure GHG mitigation in the state of Jharkhand, India. The project is being conducted in the spread across all the districts of Jharkhand. CCX entered into carbon offset agreements with individual farmers of various districts of Jharkhand state for the provision of carbon credit advisory services to them. The individual farmers are the owners of the lands on which trees are being grown to sequester carbon and reduce greenhouse gas emissions from the atmosphere. CCX has mobilized the farmers in the selected states of India to plant various tree species on their lands. These tree species range from fruit-bearing trees like Indian blackberry, Guava, and Mango to commercial species like Teak, Mahogany Sandal, etc. The selected farmers have employed simple tree cultivation techniques involving planting saplings in the pits with minimum disturbance to the lands.","lat":21.949998,"lon":87.966666},{"ID":"3486","Name":"CORE CARBON VANAM(SERICULTURE) IN ODISHA STATE","Proponent":"Core CarbonX Solutions Pvt. Ltd.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":62811,"Region":"Asia","Crediting Period Start Date":43266,"Crediting Period End Date":50570,"Hectares":"6300 Hectares","project_explanation":"Core CarbonX Solutions Private Limited (CCX) is a carbon management consultancy company with registered office in the state of Odisha. CCX is the Project Proponent (PP) of the carbon offset project called “Core Carbon Vanam (Sericulture) in Odsha State”. CCX entered into carbon offset agreements with individual farmers of various districts of Odisha state for provision of carbon credit advisory services to them. The individual farmers are the owners of the lands on which trees are being grown to sequester carbon and reduce greenhouse gas emissions from the atmosphere. CCX has mobilized the farmers in the selected states of India to plant various tree species on their lands. These tree species range from trees like Asana, Arjuna covering Sericulture sector. Simple tree cultivation techniques involving planting saplings in the pits with minimum disturbance to the lands have been employed by the selected farmers. The villages under the project area predominantly have an agrarian economy where most of its population depends on agriculture. The major agroforestry plantation in these project districts (Keonjhar, Mayurbhanj & Sundergarh) are Asana, Arjuna etc . The planation was done by the farmers and utilized the subsidies to avail the saplings. The saplings do the sequestration of carbon dioxide at faster pace and ultimately reduces GHG emissions. The Project Activity will lead to considerable carbon sequestration in the project areas and will contribute strongly to the sustainable development of rural villages involved in the project. Initially, 6,300 hectares of land has been selected for the first project activity instance. Through carbon sequestration by the planted trees, the project is expected to generate annual average GHG emission reductions or removals of 62811 tCO2e.","lat":21.616665,"lon":86.716666},{"ID":"3491","Name":"CORE CARBON VANAM IN WEST BENGAL AND TAMIL NADU","Proponent":"Core CarbonX Solutions Pvt. Ltd.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":1679050,"Region":"Asia","Crediting Period Start Date":43424,"Crediting Period End Date":50728,"Hectares":"198235 Hectares","project_explanation":"Core CarbonX Solutions Private Limited (CCX) is a carbon management consultancy company with registered office in the state of Telangana. CCX is the Project Proponent (PP) of the carbon offset project called “Core Carbon Vanam in West Bengal and Tamil Nadu”. CCX entered into carbon offset agreements with individual farmers of various districts of West Bengal and Tamil Nadu state for provision of carbon credit advisory services to them. The individual farmers are the owners of the lands on which trees are being grown to sequester carbon and reduce greenhouse gas emissions from the atmosphere. CCX has mobilized the farmers in the selected states of India to plant various tree species on their lands. These tree species range from fruit bearing trees like Indian blackberry, Guava, Mango to commercial species like teak, mahogany and sandal ,etc. Simple tree cultivation techniques involving planting saplings in the pits with minimum disturbance to the lands have been employed by the selected farmers.","lat":8.083332,"lon":89.9},{"ID":"3535","Name":"Core Carbon Sahaja Vyavasayam in Andhra Pradesh","Proponent":"Core CarbonX Solutions Pvt. Ltd.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ALM; ARR","Methodology":"VM0017","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":4830706,"Region":"Asia","Crediting Period Start Date":43282,"Crediting Period End Date":57891,"Hectares":"641230 Hectares","project_explanation":"Andhra Pradesh has been historically called the Rice Bowl of India and continues to be the country\'s largest rice producer. The agriculture system forms the backbone of economic development and contributes 32.79 % of the total State Domestic Product. The proposed Natural Farming in Andhra Pradesh activity is practised by individual farmers practised by about 5,00,000 farmers and organic grower cooperatives covering 6,41,230 hectares of cropland in the state of Andhra Pradesh to be implemented in the first phase. The project aims at increasing the capacity of soil to sequester carbon, enhance the carbon sequestration by agroforestry practices such as planting of trees, reduce emissions from the use of synthetic fertilizers and reduce emissions from burning of crop residue by application of VCS methodology: VM0017 Sustainable Agricultural Land Management (SALM). Several SALM practices and technologies have been proven to reduce greenhouse gas emissions and prevent climate change by enhancing carbon storage in soils, preserving existing soil carbon, and reducing carbon dioxide, methane and nitrous oxide emissions. Those practices include conservation tillage, cover crops, enhanced crop rotations, residue retention, agroforestry and avoidance of crop residue burning. The project holistically aims at achieving sustainable management practices which improve soil health, reduce greenhouse gas (GHG) emissions and develop the socio-economic status of the project area. The project aims to reduce and sequester carbon leading to estimated GHG emission reductions or removals (tCO2e) of 4830706 tCO2e / year. This project\'s climate benefits include emissions reduction or removals of approximately 193228248 tCO2e over the lifetime of the project.","lat":13.216666,"lon":84.733333},{"ID":"3431","Name":"SUSTAINABLE AGRICULTURAL PRACTICES IN INDIA","Proponent":"VN Foods & Beverages","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ALM","Methodology":"VM0017","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":283500,"Region":"Asia","Crediting Period Start Date":43040,"Crediting Period End Date":57649,"Hectares":"35000 Hectares","project_explanation":"The project aims at achieving sustainable management practices which reduces greenhouse gas (GHG) emissions by reducing the dependency on chemical fertilizers by replacing it with environment friendly organic-based soil amendments. The project activity aims at increasing the capacity of the soil to sequester carbon and enhance nutrients through adoption of sustainable management practices such as agro-forestry, mulching, green manure, vermicomposting etc. this project bring improvement to farmer livelihood and entire rural ecosystem.","lat":76.44,"lon":14.16},{"ID":"3365","Name":"Developing Voluntary Carbon market project for Sundarban Tiger Reserve in India","Proponent":"Value Network Ventures Advisory Services Pvt. Ltd.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD; WRC","Methodology":"VM0007","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":57587,"Region":"Asia","Crediting Period Start Date":43374,"Crediting Period End Date":54331,"Hectares":"2585 Hectares","project_explanation":"The project will reduce CO2 emissions by taking appropriate preventive measures for drivers and curbing forest degradation. The project aims to prevent further degradation by providing local people with alternative means to support their lives like LPG or improved cookstoves distribution and by providing opportunities to contribute and cooperate in conservation and afforestation activities.","lat":21.838052,"lon":88.885277},{"ID":"3360","Name":"Developing climate resilience of the coastal communities of Sunderbans through Mangrove Afforestation","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR; WRC","Methodology":"AR-AM0014","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":93533,"Region":"Asia","Crediting Period Start Date":44436,"Crediting Period End Date":51740,"Hectares":"650 Hectares","project_explanation":"The project is implemented on 650 ha across several Gram Panchayats in the Sunderbans region. The project activities also include several community development initiatives that address health, livelihoods and education of the local communities in the villages under the project. The project restores degraded mangrove habitats through the plantation of diverse native mangrove species. The project sequesters carbon through biomass, above ground and below ground, and in the soil as soil organic carbon","lat":25.05748,"lon":88.282611},{"ID":"3361","Name":"Participatory Mangrove Afforestation & Restoration in the west coast of India","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR; WRC","Methodology":"AR-AM0014","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":14097,"Region":"Asia","Crediting Period Start Date":44720,"Crediting Period End Date":52024,"Hectares":"175 Hectares","project_explanation":"The objective of the project is to restore degraded mangrove ecosystems in the estuarine islands of several rivers in coastal Karnataka, including the Aghanashini, Sharavathi and Kali rivers, and their tributaries. The three rivers form an integral part of the coastal ecosystem of Uttara Kannada District of Karnataka, India.The project objective is to restore the degarded mangrove habitats through plantation of several, diverse native mangrove and mangrove associated species, including several species which had disappeared from the region following degradation and deforestation of the mangrove habitat.","lat":14.793708,"lon":74.68688},{"ID":"3347","Name":"Developing voluntary carbon market project for Periyar Tiger Reserve in India","Proponent":"Periyar Tiger Conservation Foundation (PTCF)","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0037","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":190217,"Region":"Asia","Crediting Period Start Date":43374,"Crediting Period End Date":54331,"Hectares":"93477 Hectares","project_explanation":"Tiger Reserves are the storehouse of ecosystem services and a majority of rural population depend on forest resources for their day-to-day livelihood. This dependence is in the form of collection of a variety of Non-Timber Forest Produce (NTFP) and collection of firewood and fodder for subsistence and livelihood purposes. Due to this dependence on forest resources and lack of sufficient infrastructure, the local communities venture in the forest areas resulting in degradation of pristine forest and causing human wildlife conflicts. This results in loss of human lives, and wild animals in a retaliatory process. Hence, there is a need to develop a dedicated finance mechanism which shall help in mitigating the conflicts in an efficient way and lead to coexistence and harmony amongst forest fringe communities and wildlife. This project will result in enhancing carbon sequestration by reducing pressures on forests from unsustainable collection of firewood through sustainable firewood management and exploring energy efficient technologies and alternative fuel in and around Periyar Tiger Reserve, Kerala.","lat":9.6195,"lon":77.418199},{"ID":"3346","Name":"DEVELOPING CARBON FINANCE PROJECT FOR FARMERS ADOPTING REGENERATIVE AGRICULTURE PRACTICES IN THE INDO-GANGETIC PLAINS","Proponent":"Varaha ClimateAg Private Limited","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ALM","Methodology":"VM0042","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":4796219,"Region":"Asia","Crediting Period Start Date":43617,"Crediting Period End Date":50921,"Hectares":"2000000 Hectares","project_explanation":"The project intends to generate additional income to the small holder farmers of Indo- Gangetic plain region for adopting improved agricultural practices such as zero till farming, cover cropping, crop diversification, farm residue incorporation, optimizing fertilizer application and efficient water management which provide a potential to not just prevent emissions into the atmosphere but also create carbon sinks through sequestration of carbon back into the soil. The project will be a grouped project. Starting with rice-wheat cropping system, the project will be further expanded to maize-wheat, sugarcane, and cotton-wheat/cotton cropping systems. Pulses and Mustard are cover crops widely interspersed in these cropping systems. The project considers 2019 as the baseline year in which the interventions started. Starting with 12 thousand hectares (~28000 Tonnes CO2 Eq. per annum) in 2019, the area will be stabilized at 2 million hectares (~7.0 million Tonnes CO2 Eq. per annum) in 2027 and maintained until 2038.","lat":28.582001,"lon":77.247414},{"ID":"3335","Name":"Developing a voluntary carbon market project for Pench Tiger Reserve in India","Proponent":"Tiger Conservation Foundation of Pench Tiger Reserve (TCFP)","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR; REDD","Methodology":"VM0037","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":56845,"Region":"Asia","Crediting Period Start Date":43009,"Crediting Period End Date":53965,"Hectares":"45522 Hectares","project_explanation":"The Project consists of forest protection and emission reduction activities in the Tiger Reserve. About 45522 ha (Project Area) area comes under REDD (Reducing Emission from Deforestation and Forest Degradation). The main effect of this project activity is reducing carbon emissions by preventing the conversion of forest lands with high carbon stocks to non-forest lands with lower carbon stocks.","lat":21.719439,"lon":79.413888},{"ID":"3295","Name":"Developing Carbon Finance Project For Van Panchayats In Soil Conservation  Forest Division Ranikhet (Uttarakhand)","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0037","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":40742,"Region":"Asia","Crediting Period Start Date":43115,"Crediting Period End Date":50419,"Hectares":"2474 Hectares","project_explanation":"Under the Uttarakhand Forest Resource Management Project (UFRMP), Uttarakhand Forest Department (UKFD) has tackled forest degradation in over 800 Van Panchayats across the state. VPs were treated in Ranikhet Soil Conservation Forest Division. Out of these Van Panchayats, 18 Van Panchayats have been selected for developing carbon finance project. Anthropogenic pressures such as unsustainable extraction of fuel wood, overgrazing of cattle,anthropogenic forest fire, and unsustainable extraction of Non-Timber Forest Products (NTFPs) are responsible for forest degradation and deforestation in these Van Panchayats. Various eco-restoration activities are implemented by UFRMP with an objective to enhance restoration of the degraded forests by empowering village community. These activities include assisted natural regeneration, protection through fencing, soil and water conservation, alternative livelihood development including other better forest management practices like fire management and forest patrolling.","lat":29.649995,"lon":79.42},{"ID":"3296","Name":"Developing Carbon Finance Project for Van Panchayats in Soil Conservation  Forest Division Nainital (Uttarakhand)","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0037","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":22573,"Region":"Asia","Crediting Period Start Date":43449,"Crediting Period End Date":50753,"Hectares":"1248 Hectares","project_explanation":"Under the Uttarakhand Forest Resource Management Project (UFRMP), Uttarakhand Forest Department (UKFD) has tackled forest degradation in over 800 Van Panchayats across the state. Van Panchayats were treated in Nainital Soil Conservation Forest Division. Out of these Van Panchayats, 7 Van Panchayats have been selected for developing carbon finance project. Anthropogenic pressures such as unsustainable extraction of fuel wood, overgrazing of cattle’s, anthropogenic forest fire, and unsustainable extraction of NTFPs are responsible for forest degradation and deforestation in these Panchayati forest. Various eco-restoration activities are implemented by UFRMP with an objective to enhance restoration of the degraded forest by empowering village community. These activities include assisted natural regeneration, protection through fencing, soil and water conservation, alternative livelihood development including other better forest management practices like fire management and, forest patrolling.","lat":29.380275,"lon":79.463569},{"ID":"3248","Name":"ARAKU VALLEY REFORESTATION PROJECT","Proponent":"CropZone Agro Forestry Private Limited","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Under validation","Country":"India","Estimated Annual Emission Reductions":342277,"Region":"Asia","Crediting Period Start Date":43017,"Crediting Period End Date":46668,"Hectares":"6825 Hectares","project_explanation":"The project is a VCS ARR Gro up project where various horticulture species and coffee shrubs are planted. Plantation activities are done in the first 6 years (20 17 2022) as part of the first project instance . In the first project instance Coffee shrubs have been planted along with shade trees like Silver oak on 6390.9 hectares. The total project area of first instance is 6824.7 hectares where several other tree species are also planted in the remaining area. The planting activities are done on abandoned croplands and barren lands in 13 Mandal\'s of Vishakhapatnam district in Andhra Pradesh state. By reforesting these areas , the project instance is expected to sequester 342277 tCO2 annually. Plantation activities are done on the barren land parcels owned by tribal communities living in these area. These land parcels are pre provided to them by state as individual Plattaland\'s. Community were able to do only subsistence farming in a small patch of their lands because of investment constraints. Rest of the land were abandoned leading to land degradation. PP identified these land areas and plantation activities have been done here with the consent of land owners.","lat":17.6868,"lon":83.2185},{"ID":"3243","Name":"Core Carbon Sustainable Rice Productions 01","Proponent":"Core CarbonX Solutions Pvt. Ltd.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ALM","Methodology":"AMS-III.AU","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":52920,"Region":"Asia","Crediting Period Start Date":44743,"Crediting Period End Date":47299,"Hectares":"40000 Hectares","project_explanation":"Rice cultivation is the most important agricultural operation in Telangana State, not only in terms of food security but also in terms of livelihood and plays a major part in the economy and employment. The agriculture sector is backbone of the rural economy in Telangana. In Telangana State Paddy cultivated is 52,51,261 acres in Vanakalam and 51,71,916 acres in Yasangi and total cultaivated area for the year 2020-21 is 10.423 Million acres . The total production of rice in Telangana was 145.68 lakh tonnes in 2020-21. The district of Suryapet is one of the major producers district of rice. The aim of this project activity is reducing the CH4 emissions by switching traditional rice cultivation to AWD technique. The project activity comprises of grouped projects of rice fields implementing various water management practices located at different areas within the geographical area of India. The proposed project activity instances involve the implementation of the various water management practices to mitigate methane emission from rice fields in regions in Suryapet District in Telangana state, India.","lat":17.143908,"lon":79.623924},{"ID":"3238","Name":"Core Carbon Sustainable Rice Productions","Proponent":"Core CarbonX Solutions Pvt. Ltd.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ALM","Methodology":"AMS-III.AU","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":52920,"Region":"Asia","Crediting Period Start Date":44743,"Crediting Period End Date":47299,"Hectares":"40000 Hectares","project_explanation":"Paddy fields are the most dominant anthropogenic sources of methane to the atmosphere (5-20% of the total emission from all anthropogenic sources ). Anaerobic decomposition of organic material in flooded rice fields produces methane, which escapes to the atmosphere primarily by transport through the rice plants. The annual amount of CH4 emitted from a given area of rice is a function of the number and duration of crops grown, water regimes before and during the cultivation period, and organic and inorganic soil amendments. Soil type, temperature, and rice cultivar also affect CH4 emissions. This CH4 emission-intensive cultivation method will be targeted by the proposed programme, that will involve the implementation of the technology/measures that result in reduced anaerobic decomposition of organic matter in rice cropping soils and thus reduced generation of methane. The project activity comprises of grouped projects of rice fields implementing the following methods: (a) Rice farms that change the water regime during the cultivation period from continuously to intermittent flooded conditions and/or a shortened period of flooded conditions; (b) Alternate wetting and drying method (AWD) (c) Rice farms that change their rice cultivation practice from transplanted to direct-seeded rice (DSR). Thus, the measure will consist of AWD and/or DSR in combination with adjusted water management system in rice cultivation.","lat":16.8679,"lon":79.4359},{"ID":"3180","Name":"Sustainable Agriculture Land Management Project by Suminter India Organics Private Limited","Proponent":"Suminter India Organics","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ALM","Methodology":"VM0042","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":275748,"Region":"Asia","Crediting Period Start Date":43009,"Crediting Period End Date":53965,"Hectares":"52031 Hectares","project_explanation":"The proposed VCS ALM (Agricultural Land Management) project activity aims at developing a carbon sequestration project in the context of Organic adoption and certification by Suminter India Organics and it is also eliminating the dependency on chemical fertilizers and pesticides by replacing those with environment friendly organic based soil amendments. The project goal is to increase the capacity of soil to sequester carbon and increase nutrients through Farmyard manure, compost vermicompost, etc . The project also holistically aims at achieving sustainable management practices which not only reduce greenhouse gas (GHG) emissions but also aim at achieving socioeconomic development in the project area.","lat":20.5937,"lon":78.9629},{"ID":"3174","Name":"Sustainable Agriculture land Management Project by Biowin Agro Research","Proponent":"Biowin Agro Research","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ALM","Methodology":"VM0042","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":26639,"Region":"Asia","Crediting Period Start Date":43009,"Crediting Period End Date":53965,"Hectares":"11560 Hectares","project_explanation":"The proposed VCS Agricultural Land Management (ALM) project activity aims at eliminating dependence on chemical fertilizers and pesticides by replacing those with environment friendly organic based soil amendments. The project activity aims at increasing t he capacity of soil to sequester carbon and enhance nutrients through mulching, and integration of compost and vermicompost manure. The project also holistically aims at achieving sustainable management practices which not only reduce greenhouse gas (GHG) emissions but also aim at achieving socioeconomic development in the project area. The SALM project is expected to reduce greenhouse gas (GHG) emissions in the following single or combined ways:","lat":11.6854,"lon":76.132},{"ID":"3172","Name":"Forest Plantation Project in Ujjain, India","Proponent":"Ujjain Smart City Limited","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":505,"Region":"Asia","Crediting Period Start Date":43647,"Crediting Period End Date":50951,"Hectares":"36 Hectares","project_explanation":"Ujjain is a district in the state of Madhya Pradesh of Central India. The district covers 6,091 km2 and has a population of 19,86,864 people (2011 census). As part of the Government of India’s ambitious flagship Smart City Programme, Ujjain is working to increase the district\'s tree and forest cover. Under the Smart City Mission, cities and urban centers are being rebuilt and revamped as part of this initiative in order to prepare them for holistic growth and to provide inhabitants with world-class sustainable living standards. Aside from improving constructed infrastructure, greening the urban landscapes as well as through tree-planting operations is critical to ensuring that cities are suited for a high standard of living.","lat":23.1765,"lon":75.7885},{"ID":"3156","Name":"Sustainable Rice Cultivation for Marginal Farmers in Madhya Pradesh, India","Proponent":"Value Network Ventures Advisory Services Pvt. Ltd.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ALM","Methodology":"AMS-III.AU","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":189404,"Region":"Asia","Crediting Period Start Date":44727,"Crediting Period End Date":47283,"Hectares":"31848 Hectares","project_explanation":"The purpose of the Project is to implement a water saving technology, Alternate Wetting and Drying (AWD), in the irrigated rice paddies of smallholder farmers in the climate vulnerable districts in the central Indian state of Madhya Pradesh.","lat":23.473319,"lon":77.947997},{"ID":"3114","Name":"Developing voluntary carbon market project for Dudhwa Tiger Reserve in India","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0037","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":358584,"Region":"Asia","Crediting Period Start Date":43374,"Crediting Period End Date":54331,"Hectares":"220200 Hectares","project_explanation":"The project consists of forest protection and emission reduction activities within the Tiger Reserve. The main outcome of this project is to reduce carbon emissions by preventing the degradation of the forest lands. The project area is a protected forest, and even though activities such as collecting fuelwood & NTFP and grazing is prohibited, such activities still have conventionally been carried out by the locals for their sustenance and livelihood","lat":28.516666,"lon":80.683333},{"ID":"3115","Name":"Sustainable agricultural practices for carbon sequestration by Organic and Natural farming groups","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ALM","Methodology":"VM0017","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":556903,"Region":"Asia","Crediting Period Start Date":43009,"Crediting Period End Date":57618,"Hectares":"70000 Hectares","project_explanation":"The Agricultural Land Management project in the state of Karnataka, India aims at eliminating the dependence on chemical fertilizers by replacing it with environment friendly organic-based soil amendments. The project involves active participation of various Organic and Natural farming groups. The project activity aims at increasing the capacity of the soil to sequester carbon and enhance nutrients through adoption of sustainable management practices such as agro-forestry, mulching, green manure, vermicomposting etc. The project also holistically aims at achieving sustainable management practices which not only reduces greenhouse gas (GHG) emissions but also bring improvement to farmer livelihood and entire rural ecosystem.","lat":14.705197,"lon":76.166398},{"ID":"3093","Name":"INDIA CARBON PROGRAM:AWD/DSR","Proponent":"Nurture Agtech Private Limited","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ALM","Methodology":"AMS-III.AU","Status":"Under validation","Country":"India","Estimated Annual Emission Reductions":52158,"Region":"Asia","Crediting Period Start Date":44341,"Crediting Period End Date":52010,"Hectares":"23000 Hectares","project_explanation":"India is one of the world\'s largest producers of rice and exporter of rice in the world. Rice cultivation is the most important agricultural operation in India, not only in terms of food security but also in terms of livelihood and plays a major part in the economy. It is a known fact that rice fields emit methane into the environment that contributes to global warming. The project plans to promote improved water management practices in rice cultivation instead of using the traditional practice of continuously flooded irrigation. AWD/DSR are proven methods to reduce methane emission by as much as 48% compared to flooded conditions where large amounts of methane (CH4) gets generated because of anaerobic decomposition. This project is expected to generate important co-benefits of reducing water usage during rice cultivation, decrease pest and disease attacks, improve soil health etc. Further they are also beneficial for reduced cost of cultivation for small land holders. In the first instance, the project is planned to be implemented in 23,000 hectares in Punjab and Haryana States. During the project implementation, relevant technical training and advisory was provided for the farmers to help them conduct AWD/DSR during rice cultivation. The total GHG emissions reductions due to the implementation of the project activity is estimated to be 365,299 tCO2e over 7 years, with an annual average of 52,186 tCO2e.","lat":30.403648,"lon":74.027962},{"ID":"3067","Name":"Sustainable Agricultural Land Management Project by Amiha Agro Private Limited","Proponent":"Amiha Agro Private Limited","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ALM","Methodology":"VM0017","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":256116,"Region":"Asia","Crediting Period Start Date":42917,"Crediting Period End Date":50221,"Hectares":"86062 Hectares","project_explanation":"This project activity aims at improvement of agricultural practices such as crop residue management and enhanced cropping practices that sequester soil organic carbon ( while increasing productivity in three different states of India . Th e farmers involved in this project activity are largely composed of small and marginal farmers having land holding sizes of 1 2 hectares . As a result, these farmers are highly susceptible to variabilities arising from the agricultural produce markets and the weather conditions The condition prior to the project implementation of the croplands in th e project area which include usage of synthetic chemical fertilizers, heavy tillage and no crop residue management.","lat":19.7515,"lon":75.7139},{"ID":"3065","Name":"Sustainable Agricultural Improvement Practices in Punjab","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ALM","Methodology":"VM0017","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":66175,"Region":"Asia","Crediting Period Start Date":43654,"Crediting Period End Date":50958,"Hectares":"24994 Hectares","project_explanation":"The project activity is located in the Indian state of Punjab aims at developing a unique soil organic carbon (SOC) sequestration project with an objective of addressing the severe crop residue burning -air pollution issue.The project activity integrates the adoption of Sustainable Agricultural Land Management (SALM) practices.The project ensures, nutrient recycling, carbon sequestration, water conservation, weedicide savings, improved yield, climate resilience of crops and lastly change in farmer’s behaviour which is the major reason for burning. The Project activities are carried out and monitored according to approved VCS methodology VM0017: “Adoption of Sustainable Agricultural Land Management”.","lat":29.3,"lon":73.55},{"ID":"3053","Name":"Sustainable Agricultural Land Management Project by Greneity","Proponent":"Greneity Infocom Service Pvt Ltd","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ALM","Methodology":"VM0042","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":173250,"Region":"Asia","Crediting Period Start Date":44743,"Crediting Period End Date":52047,"Hectares":"40000 Hectares","project_explanation":"This project activity aims at the farmers and the farming communities to enable them adopt improved agricultural practices such as crop residue management for enhancing their crop productivity and sequester CO2 in the soil. The project activity is located in five different states of India – Bihar, Punjab, Maharashtra , Uttarakhand and Uttar Pradesh. The farmers involved in this project activity are small and marginal who are vulnerable from the impacts of climate change. A heavy dependence on chemical synthetic inorganic nitrogen fertilizers, post-harvest crop residue burning and disturbance of soil through intense tilling operations have led to severe degradation of the cropland soils. It has also made the agricultural system not only vulnerable to the impacts of climate change but also a major contributor to greenhouse gas (GHG) emissions can be reduced.","lat":31.1471,"lon":75.3412},{"ID":"2972","Name":"Sustainable Agriculture Land Management Project by Earthallica Naturals","Proponent":"EKI Energy Services Limited","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ALM","Methodology":"VM0017","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":20000,"Region":"Asia","Crediting Period Start Date":42917,"Crediting Period End Date":46568,"Hectares":"1850 Hectares","project_explanation":"The proposed VCS Agricultural Land Management (ALM) project activity aims at eliminating dependence on chemical fertilizers and pesticides by replacing those with environment friendly organic based soil amendments. The project activity aims at increasing c apacity of soil to sequester carbon and enhance nutrient through mulching, integration of compost and vermicompost manure. The project also holistically aims at achieving sustainable management practices which not only reduces greenhouse gas (GHG) emission s but also aims at achieving socioeconomic development of the project area.","lat":21.2787,"lon":81.8661},{"ID":"2959","Name":"Reforestation Project in Meghalaya by Shillong Bamboo","Proponent":"Shillong Bamboo","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":100000,"Region":"Asia","Crediting Period Start Date":42917,"Crediting Period End Date":50221,"Hectares":"5000 Hectares","project_explanation":"The proposed project activity is an Afforestation Reforestation and Revegetation (ARR) ARR), through plantation of native bamboo species for the regeneration of degraded lands and livelihood generation in the northeast hilly state of India Meghalaya. Bamboo has the potential to not only address global climate change through its fast sequestration rate of atmospheric carbon, but if combined with value added processing has the potential to address the global trend of deforestation through the provision of a sustainable alternative to traditional timber sources.","lat":25.467,"lon":91.3662},{"ID":"2934","Name":"Boomitra Carbon Farming in the Indo-Gangetic Plains","Proponent":"Boomitra Inc","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ALM","Methodology":"VM0042","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":350000,"Region":"Asia","Crediting Period Start Date":43344,"Crediting Period End Date":50648,"project_explanation":"This project intends to help farmers adopt new improved agriculture practices in the Indo-Gangetic Plains of the Indian subcontinent. Improved agriculture practices include crop residue management, natural farming, crop rotations and more, which enable cropland soils to improve their carbon sequestration capabilities. The region contains large numbers of small and marginal farmers who are highly susceptible to reductions in yields arising from climate change, and there is a strong need for programs and interventions to help them adapt. In this context, improved agricultural practices provide the opportunity and the power to reverse land degradation and return carbon to the soil, creating carbon removals while improving overall soil health. In this project, farmers adopt a variety of improved agriculture practices. These practices are proven ways to increase soil organic carbon, and enable farmers to improve their productivity: increases in soil organic carbon improve the ability of soils to store moisture and nutrients, and thus also help to increase yields. Boomitra’s research has shown that farmers face various barriers in the adoption of these practices, and this project works towards helping farmers to surmount these barriers, while working with partners to create feasible and sustainable solutions that promote behavioral change at the grassroots level. The financial benefits from carbon credits will provide a direct boost to the livelihoods of these farmers, many of whom are small and marginal farmers.","lat":27.3965,"lon":80.125},{"ID":"2933","Name":"Solve for Carbon Neutrality - LTI’s Afforestation Program","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-AMS0007","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":956,"Crediting Period Start Date":42938,"Crediting Period End Date":50242,"Hectares":"77 Hectares","project_explanation":"The Larson and Toubro Infotech is a small scale afforestation, reforestation and revegetation (ARR) project, implemented along with Value Network Ventures Advisory Services Pte. Ltd (VNV). The project is implemented across several states in India, through collaboration with many Non-Governmental Organisations (NGOs) who have carried out the afforestation and reforestation activities with the close involvement of members of the local communities.","lat":15,"lon":75},{"ID":"2889","Name":"Boomitra Carbon Farming South of the Vindhyas","Proponent":"Boomitra Inc","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ALM","Methodology":"VM0042","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":400000,"Region":"Asia","Crediting Period Start Date":43132,"Crediting Period End Date":50436,"project_explanation":"This project works with the farmers of southern and central India to help them adopt improved agricultural practices such as residue management and enhanced cropping practices that sequester carbon while increasing productivity. This region is largely composed of small and marginal farmers, with each farming just a few hectares of land. As a result, these farmers are highly susceptible to variabilities arising from markets and weather. Over the last century, agriculture in the region has undergone a dramatic shift towards intensification. Since the late 1940s, yields of all staple crops have seen a several-fold increase. This increase was necessary to feed a growing population, but at the same time, it led to an increase of 150kg/ha in the amount of synthetic fertilizer applied to farms, along with similar increases in other crop inputs. An intensive agricultural process focused on maximizing yields every year has led to a gradual degradation of the soils of the region, resulting in CO2 emissions from the lost soil carbon. In this context, improved agricultural practices provide the opportunity and the power to reverse this land degradation and return carbon to the soil, creating carbon removals while improving overall soil health. In this project, farmers adopt a variety of improved agriculture practices. These practices are proven ways to increase soil organic carbon, and also enable farmers to improve their productivity: increases in soil organic carbon improve the ability of soils to store moisture and nutrients, and thus also help to increase yields. This project works towards helping farmers to surmount their barriers, while working with partners to create feasible and sustainable solutions that effect grass-roots behavior change. Furthermore, the financial benefits from carbon credits will provide a direct boost to the livelihoods of these farmers, many of whom are small and marginal farmers.","lat":14.6819,"lon":77.6006},{"ID":"2867","Name":"Sustainable Agricultural Land Management Project by Om Organic  Cotton","Proponent":"Om Organic Cotton Pvt. Ltd.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ALM","Methodology":"VM0017","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":956199,"Region":"Asia","Crediting Period Start Date":42917,"Crediting Period End Date":50221,"Hectares":"219620 Hectares","project_explanation":"The proposed VCS Agricultural Land Management (ALM) project activity aims at eliminating dependence on chemical fertilizers and pesticides by replacing those with environment friendly organic-based soil amendments. The project activity aims at increasing capacity of soil to sequester carbon and enhance nutrient through mulching, integration of compost and vermicompost manure. The project also holistically aims at achieving sustainable management practices which not only reduces greenhouse gas (GHG) emissions but also aims at achieving socioeconomic development of the project area.","lat":31.959167,"lon":77.064722},{"ID":"2833","Name":"Grouped Reforestation Project by Cropzone Agro Forestry Private Limited","Proponent":"CropZone Agro Forestry Private Limited","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":10571,"Region":"Asia","Crediting Period Start Date":42887,"Crediting Period End Date":46538,"Hectares":"502 Hectares","project_explanation":"Crop Zone Agro Forestry Limited (CZAFL) is proposing a grouped Afforestation, Reforestation and Revegetation (ARR) in Andhra Pradesh, Telangana, Karnataka and Maharashtra state of India. CZAFL is the Project Proponent (PP) whereas EKI Energy Services Limited (Enking International) is providing carbon credit advisory services to the PP. The CZAFL has mobilized the farmers in the selected states of India to plant various tree species on their lands. These tree species range from fruit bearing trees like Indian blackberry, Guava, Mango to commercial species like Teak, Mahogany and Sandal. Simple tree cultivation techniques involving planting saplings in the pits with minimum disturbance to the lands have been employed. The lands selected for the project activity is fallow agriculture land. The PP has made contract with the farmers/land owners where they will be given tree saplings and technical support. In return, the PP will reap the benefits through sale of carbon credits. Initially, 501.7 hectares of land has been selected for the first project activity instance. Through carbon sequestration by the planted trees, the project is expected to generate annual average GHG emission reductions of removals of 10,571 tCO2e.","lat":15.3173,"lon":75.7139},{"ID":"2756","Name":"Voluntary Carbon Market Projects for Agroforestry Plantations in Mehsana, Gujarat","Proponent":"Gujarat Forest Department","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":454090,"Region":"Asia","Crediting Period Start Date":43252,"Crediting Period End Date":50556,"Hectares":"2090 Hectares","project_explanation":"The demand for timber and other tree-based products is increasing day by day and one feasible alternative to fulfil such a demand would be adopting agroforestry practice as this is one system that can provide both wood and food while at the same time conserve and rehabilitate ecosystem. The proposed ARR VCS project plans to promote sustainable agroforestry for small-scale farmers to provide them with financial benefits and ensure GHG mitigation in the state of Gujarat, India. The project is being conducted in the Mehsana district. The total project area is 2089.95 hectares and the agroforestry plantations done by the farmers from 2018 to 2020 have been considered. The main agroforestry species planted in the each village during 2018, 2019 and 2020 are Eucalyptus globulus, Ailanthus excelsa, Azadirachta indica, Acacia nilotica, Tectona grandis, Mangifera indica and Melia dubia.","lat":23.58676,"lon":72.369942},{"ID":"2758","Name":"Voluntary Carbon Market Project for Agroforestry Plantation in Godhra, Gujarat","Proponent":"Gujarat Forest Department","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":366214,"Region":"Asia","Crediting Period Start Date":43252,"Crediting Period End Date":50556,"Hectares":"1972 Hectares","project_explanation":"The demand for timber and other tree-based products is increasing day by day and one feasible alternative to fulfil such a demand would be adopting agroforestry practice as this is one system that can provide both wood and food while at the same time conserve and rehabilitate ecosystem. The proposed ARR VCS project plans to promote sustainable agroforestry for small-scale farmers to provide them with financial benefits and ensure GHG mitigation in the state of Gujarat, India. The project is being conducted in the Godhra circle spread across Panchmahal district. The total project area is 1972 h.a. and the agroforestry plantations done by the farmers from 2018 to 2020 have been considered. The main agroforestry species planted in each village during 2018, 2019 and 2020 are Eucalyptus globulus and Tectona grandis (Teak).","lat":22.84374,"lon":74.23878},{"ID":"2759","Name":"Voluntary Carbon Market Project for Agroforestry Plantation in Surat, Gujarat","Proponent":"Gujarat Forest Department","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":411021,"Region":"Asia","Crediting Period Start Date":43252,"Crediting Period End Date":50556,"Hectares":"1719 Hectares","project_explanation":"The demand for timber and other tree-based products is increasing day by day and one feasible alternative to fulfil such a demand would be adopting agroforestry practice as this is one system that can provide both wood and food while at the same time conserve and rehabilitate ecosystem. The proposed ARR VCS project plans to promote sustainable agroforestry for small-scale farmers to provide them with financial benefits and ensure GHG mitigation in the state of Gujarat, India. The project is being conducted in the Bharuch circle spread across Surat district. The total project area is 1719 h.a. and the agroforestry plantations done by the farmers from 2018 to 2020 have been considered. The main agroforestry species planted in the each village during 2018, 2019 and 2020 comprise of Eucalyptus (Eucalyptus globulus), Teak (Tectona grandis), Melia Dubia (Meliya dubia), Malbari limbda (Azadirachta indica), Baval (Acacia nilotica) and Mango (Mangifera indica).","lat":21.170238,"lon":72.831062},{"ID":"2757","Name":"Voluntary Carbon Market Project for Agroforestry Plantation in Anand and Kheda, Gujarat","Proponent":"Gujarat Forest Department","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":911158,"Region":"Asia","Crediting Period Start Date":43252,"Crediting Period End Date":50556,"Hectares":"5369 Hectares","project_explanation":"The demand for timber and other tree-based products is increasing day by day and one feasible alternative to fulfil such a demand would be adopting agroforestry practice as this is one system that can provide both wood and food while at the same time conserve and rehabilitate ecosystem. The proposed ARR VCS project plans to promote sustainable agroforestry for small-scale farmers to provide them with financial benefits and ensure GHG mitigation in the state of Gujarat, India. The project is being conducted in the Ahmedabad circle spread across Anand and Kheda district. The total project area in Anand district is 2272.75 hectares and 3096.5 hectares in Kheda district, together making a total project area of 5369.25 hectares. The agroforestry plantations done by the farmers from 2018 to 2020 have been considered. The main agroforestry species planted in each village during 2018, 2019 and 2020 in Anand comprises of Eucalyptus (Eucalyptus globulus), Arduso (Ailanthus excelsa), Malbari Limbda (Azadirachta Indica), Baval (Acacia nilotica), Teak (Tectona grandis) and Melia Dubia (Melia dubia), whereas in Kheda, the main agroforestry species planted during 2018,2019 and 2020 are Eucalyptus (Eucalyptus globulus), Arduso (Ailanthus excelsa), Malbari Limbda (Azadirachta Indica), Teak (Tectona grandis) and Melia Dubia (Melia dubia) and Mango (Mangifera indica).","lat":22.563199,"lon":72.960278},{"ID":"2590","Name":"REGENERATIVE AGRICULTURE IN RICE-WHEAT-MAIZE SYSTEM FOR INCOME GENERATION","Proponent":"Grow Indigo Private Ltd","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0042","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":4267622,"Region":"Asia","Crediting Period Start Date":43647,"Crediting Period End Date":50951,"Hectares":"1534000 Hectares","project_explanation":"The Rice-Wheat-Maize system in North-West India accounts for a significant portion of the food supply in the country. Depletion of underground water, declining fertility status associated with multiple nutrient deficiencies, increased concentration of greenhouse gases (GHGs) in the atmosphere owing to soil methanogenesis from rice cultivation and burning of rice residues are some of the end results of the intensive system. Thus, there is a challenge to balance the food production and sustainability goals simultaneously. Recent advancements in regenerative agriculture methods improve environmental outcomes without negatively impacting yields. However, agronomic, and socio-economic factors such as access to agro-advisory and the cost of technology adoption remain a crucial barrier to adopting regenerative agriculture practices. By linking smallholder farmers to carbon marketplaces, this project aims to overcome these critical barriers to adoption by enabling additional income opportunities. The project will cover the states Punjab, Haryana, and the adjoining National Capital Region (NCR), and primarily focus on the Rice - Wheat - Maize cropping system, without excluding other crops, with regenerative agricultural practices that are known to reduce GHG emissions and thus generate carbon credits by way of CO2e and SOC. With a cash incentive, the smallholder farmers in the project boundary will adopt these practices more readily and contribute to sustainability and reduce GHG emissions. A voluntary carbon marketplace for carbon credits, for the first time will create income opportunities for smallholder farmers in India via this project.","lat":28.6448,"lon":77.216721},{"ID":"2584","Name":"Grouped Reforestation Project in Indore, India","Proponent":"EKI Energy Services Limited","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-AMS0007; AR-ACM0003","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":5458,"Region":"Asia","Crediting Period Start Date":42917,"Crediting Period End Date":50221,"Hectares":"398900 Hectares","project_explanation":"Indore is located in the central region of India, specifically in Madhya Pradesh. It is one of largest cities of India and commercial center of Madhya Pradesh state. Being crowned as the cleanest city of India 5th year in a row, Indore is also aiming at increasing its tree cover in the metropolitan as well as in the Indore district region as well. Indore city has also been selected as one of the cities under the Central Government’s ambitious Smart City Mission. Under this mission, cities and urban centers are being revamped to prepare them for achieving holistic development and for providing world class living standard to the citizens. Apart from the up-gradation basic facilities, greening the urban environment through tree plantation in one of the pathways to make cities fit for good standard of living.","lat":22.7196,"lon":75.8577},{"ID":"2555","Name":"Improving rural livelihood through agroforestry practices in Punjab, India- II","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Registration and verification approval requested","Country":"India","Estimated Annual Emission Reductions":1571328,"Region":"Asia","Crediting Period Start Date":42917,"Crediting Period End Date":50221,"Hectares":"3310 Hectares","project_explanation":"The proposed ARR VCS project plans to promote sustainable agroforestry for small-scale farmers to provide them with financial benefits and ensure GHG mitigation in the state of Punjab, India. The project is being conducted in three divisions of Punjab namely Hoshiarpur, Dasuya and Pathankot. The total project area is 3309.56 ha and the agroforestry plantations done by farmers from 2017 to 2020 are considered. The plantations done by the farmers are in two types (i) the plantations undertaken at personal level and (ii) the plantations undertaken under the Sub-Mission on Agroforestry (SMAF) under NMSA (National Mission on Sustainable Agroforestry) implemented by Punjab Forest Department. The main agroforestry tree species planted in each village for the year 2017, 2018, 2019 and 2020 are clonal Poplar, clonal Eucalyptus, Teak, Shisham, Chandan, Drek. The plantations undertaken by the farmers in their respective farms are block, intercrop or boundary plantations.","lat":31.856387,"lon":75.875546},{"ID":"2552","Name":"Improving rural livelihood through agroforestry practices in Punjab, India- I","Proponent":"Department of Forests and Wildlife Preservation, Punjab","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Registration and verification approval requested","Country":"India","Estimated Annual Emission Reductions":1098123,"Region":"Asia","Crediting Period Start Date":42917,"Crediting Period End Date":50221,"Hectares":"3993 Hectares","project_explanation":"The proposed ARR VCS project plans to promote sustainable agroforestry for small-scale farmers to provide them with financial benefits and ensure GHG mitigation in the state of Punjab, India. The project is being conducted in three divisions of Punjab namely Sahibzada Ajit Singh Nagar, Rupnagar and Nawanshahr. The total project area is 3,992.71 ha and the agroforestry plantations done by farmers from 2017 to 2020 are considered. The plantations done by the farmers are in two types (i) the plantations undertaken at personal level and (ii) the plantations undertaken under the SubMission on Agroforestry (SMAF) under NMSA (National Mission on Sustainable Agroforestry) implemented by Punjab Forest Department. The main agroforestry tree species planted in each village for the year 2017, 2018, 2019 and 2020 are clonal Poplar, clonal Eucalyptus, Teak, Shisham, Chandan, Drek. The plantations undertaken by the farmers in their respective farms are block, intercrop or boundary plantations. The plants are harvested after their respective cycles and replanted in the same area.","lat":30.974985,"lon":76.527219},{"ID":"2531","Name":"Grouped project for reforestation on degraded and non-forest lands","Proponent":"EKI Energy Services Limited","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-AMS0003; AR-AMS0007; AR-ACM0003; AR-AM0014","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":36000,"Region":"Asia","Crediting Period Start Date":43372,"Crediting Period End Date":50676,"Hectares":"1000 Hectares","project_explanation":"Grouped Project for Reforestation on Degraded Land and Fallow Agricultural Lands (hereafter referred as the project) s located in geographical boundary of India. The project is aimed at establishing forests on degraded lands and unused non-forest lands at various locations of India. The grouped project is being implemented by EKI Energy Services Ltd.","lat":17.22,"lon":16.96},{"ID":"2526","Name":"Clean Air and Healthy Soil","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ALM","Methodology":"VM0017","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":178434,"Region":"Asia","Crediting Period Start Date":43313,"Crediting Period End Date":50617,"Hectares":"64807 Hectares","project_explanation":"The Proposed VCS Clean Air and Healthy Soil project implemented by Confederation of Indian Industry (CII), in the states of Punjab and Haryana aims at developing a unique soil carbon sequestration project with an objective of addressing the severe crop residue burning -air pollution issue, in an environmentally sustainable and cost-effective manner. The project integrates the adoption of SALM practices, as a permanent solution to stubble burning. The project ensures, nutrient recycling, carbon sequestration, water conservation, weedicide savings, improved yield, climate resilience of crops and lastly change in farmer’s behavior which is the major reason for burning. The adopted practices also bring significant improvement to farmer livelihood and entire rural ecosystem.","lat":31.259428,"lon":77.054507},{"ID":"2515","Name":"Sustainable Agricultural Land Management Grouped Project in India","Proponent":"EKI Energy Services Limited","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ALM","Methodology":"VM0017","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":4099,"Region":"Asia","Crediting Period Start Date":43408,"Crediting Period End Date":50712,"Hectares":"10000 Hectares","project_explanation":"The proposed VCS Agricultural Land Management (ALM) activity aims at eliminating dependence on chemical fertilizers and pesticides by replacing those with environment friendly organic-based soil amendments. The project activity aims at increasing capacity of soil to sequester carbon and enhance nutrient through mulching, integration of compost and vermicompost manure. The selected villages for the project are located in Dhar district of Madhya Pradesh in Malwa and Vidhya region of Madhya Pradesh state of Central India. The project area is mainly dominated with black cotton soil where crops are grown in two seasons.","lat":22.6,"lon":75.3},{"ID":"2479","Name":"Mahogany Plantation in India","Proponent":"Mahogani Vishwa Agro Pvt Ltd","Project Type":"Agriculture Forestry and Other Land Use","Methodology":"AR-ACM0003","Status":"Under development","Country":"India","Estimated Annual Emission Reductions":692175,"Region":"Asia","Hectares":"15000 Hectares","project_explanation":"The project “Mahogany planation in India” is a joint reforestation and sustainable development plantation project activity, in Maharashtra Telangana, Madhya Pradesh, Gujrat and Karnataka states of India. Plantation for this project is carried out by participating farmers. The participant (farmer) plant trees on their land, holding proprietorship of the trees and their harvests as well. Mahogany Vishwa Agro Private Limited (MVAPL) is the project proponent which is coordinating the efforts among the various stakeholder. It has offered training to planters for plantation and also shares a segment of revenues from carbon credits with the farmers. Currently MVAPL associates with farmers those who are willing to cultivate Mahogany trees on their land in hundreds of hectares in the state of Maharashtra Telangana, Madhya Pradesh, Gujrat and Karnataka states of, India and defined as a project boundary.","lat":18.473,"lon":74.518},{"ID":"2404","Name":"Reforestation of degraded land by MTPL in India","Proponent":"Mangalam Timber Products Limited","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0001","Status":"Registered","Country":"India","Estimated Annual Emission Reductions":146998,"Region":"Asia","Crediting Period Start Date":37067,"Crediting Period End Date":48023,"Hectares":"2939 Hectares","project_explanation":"The proposed CDM project activity by MTPL involves carbon sequestration of degraded lands through reforestation activities. Many discrete parcels of degraded land that is owned by small and poor farmers/ tribal who do not have the capability of plantation without any external financial support and technical guidance are reforested under Farm Forestry Scheme. The project encompasses 12, 437 parcels of land measuring 14,969.46 hectares owned by 12, 002 farmers distributed in seven districts across three states Odisha, Andhra Pradesh and Chhattisgarh, majority being in Odisha which constitutes almost 83% area of the project, 14% in Andhra Pradesh and only 3% in Chhattisgarh.","lat":19.156157,"lon":82.616999},{"ID":"2346","Name":"Afforestation project by Cropcity Agrovet Pvt. Ltd. Mahogany trees","Proponent":"Cropcity Agrovet Pvt. Ltd","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-AMS0007","Status":"Registration requested","Country":"India","Estimated Annual Emission Reductions":11261,"Region":"Asia","Crediting Period Start Date":42942,"Crediting Period End Date":50246,"Hectares":"129 Hectares","project_explanation":"The project is combined tree planting and sustainable development project, in India, carried out by subsistence farmers. The farmer’s plant trees on their land and retain ownership of the trees and their products. Cropcity Agrovet Pvt. Ltd. (CAPL) have established a unique contract cultivation model where in our farmers are considered as CAPL’s stakeholders. The returns to the farmers are maximized by assuring them optimum price and latest technical knowledge to improve their productivity. The farmers are always encouraged to follow Good Agricultural Practices (GAP). Kanaka Management Services Private Limited as a joint PP is responsible for all technical matters related to the VCS/CCB project documentation. The project is classified under sector 14 of the VCS: Agriculture, Forestry, and other Land-uses (AFOLU), and operates as an Afforestation, Reforestation, and Revegetation (ARR) project type. In addition, the project has been designed as a Grouped Project, and plans to increase the number of project instances over time. The first phase of the project consists of the participation of 151 landholders to restore tree cover in initial project instances using 158,900 trees of Mahogany species that are native or adapted to the agro-ecological zone of the project. The project only quantifies GHG removals from forestation activities through the use of AR-AMS0007 v3.1 developed under the Clean Development Mechanism for small-scale reforestation, which is being used under the Verified Carbon Standard (VCS). The project estimates average yearly removals per hectare till 20 years of crediting period for the initial project instances to be 11,261 tCO2e but intends to add more project instances at the first verification time.","lat":17.794,"lon":74.493},{"ID":"1176","Name":"System of Root Intensification (SRI) programme: Reduction of Methane emissions and water consumption in rice fields of India","Proponent":"Emergent Ventures India Private Limited","Project Type":"Agriculture Forestry and Other Land Use","Methodology":"AMS-III.AU","Status":"Registration requested","Country":"India","Estimated Annual Emission Reductions":56776,"Hectares":"50000 Hectares","project_explanation":"The purpose of this grouped project (the project) is to replace the traditional practice of rice cultivation with System of Rice Intensification (hereafter referred as SRI) technique and thus reducing the methane generation. SRI technique helps the farmers to increase the yield with use of less water resources. The land to be cultivated under the project activity has been under traditional paddy production and would have continued with traditional practices in the absence of the project activity. The SRI technique helps the farmers to practice agriculture in sustainable manner, enhance water management practice in rice cultivation and uplift the socio-economic status of native rural. The Project instance (hereafter referred as project activity) involves the implementation of SRI technique to mitigate methane emission from paddy fields in Bodhgaya and Manpur blocks of district Gaya in Bihar state, India. The total area under the project activity for SRI is 500 hectares.","lat":24.695378,"lon":84.991111},{"ID":"2075","Name":"Agricultural Land Management Project in Hujgal & Kalari Cluster watershed, India implemented by Godrej Agrovet Ltd.","Proponent":"Godrej Agrovet Limited","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ALM","Methodology":"VM0017","Status":"Registration requested","Country":"India","Estimated Annual Emission Reductions":30403,"Region":"Asia","Crediting Period Start Date":42904,"Crediting Period End Date":50208,"Hectares":"38238 Hectares","project_explanation":"The proposed VCS ALM (Agricultural Land Management) project activity aims at developing a carbon sequestration project in the context of Integrated Watershed Development Programme (IWDP) implemented by Godrej Agrovet Ltd. (GAVL) in collaboration with National Bank for Agriculture and Rural Development (NABARD). The project integrates watershed development (as per NABARD WDF Guidelines) and the adoption of Sustainable Agricultural Land Management (SALM) practices by smallholder farmers within the proposed watersheds.PUBLIC COMMENT PERIOD:This project was open for public comment from 13 December 2019 – 12 January 2020.","lat":12.98,"lon":77.182777},{"ID":"922","Name":"Plantation Project on wastelands by Sun Plant Agro Limited","Proponent":"Sun Plant Agro Limited","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-AMS0005","Status":"Registered","Country":"India","Estimated Annual Emission Reductions":1708,"Region":"Asia","Crediting Period Start Date":39002,"Crediting Period End Date":51054,"Hectares":"2720 Hectares","project_explanation":"Sun Plant Agro Limited (SPA), which is a pioneer in commercial plantation activities in north-eastern region of the state of Bihar, India, has initiated a project for rehabilitation of 949.21 acres of degraded, fallow land by adopting a commercial plantation model with trees like Gmelina arborea, Anthocephalus cadamba, Dalbergia sisoo, Bombax ceiba, Albizzia lebbec, Eucalyptus, Jatropha etc. The plantation sites are located in the districts of Kishanganj, Araria, Supaul and Purnea in the state of Bihar and Madhupur district in Jharkhand state of India. The plantation sites in Bihar are located within in geographical confines of the Mahanadi and Kosi river basins on barren privately owned lands. The project sites are located in districts which are some of the most backward regions in India with respect to different human development indicators , thus amplifying the importance of the plantation activities as a source of employment and economic progress in the project areas. The project i","lat":26.2115,"lon":87.229132},{"ID":"1711","Name":"Agricultural Land Management project in Telangana, India implemented by Godrej Consumer Products Limited","Proponent":"Godrej Consumer Products Limited","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR; REDD","Methodology":"ACM0017; VM0017","Status":"Registration requested","Country":"India","Estimated Annual Emission Reductions":33392,"Region":"Asia","Crediting Period Start Date":42948,"Crediting Period End Date":50252,"Hectares":"3071 Hectares","project_explanation":"The proposed VCS ALM (Agricultural Land Management) project activity aims at improving Soil carbon status through Integrated Watershed Development Programme (IWDP) implemented by Godrej Consumer Products Limited (GCPL), the Project Proponent (PP) in collaboration with the National Bank for Agriculture and Rural Development (NABARD), the active promoter of participatory Watershed Development Programmes in the Government, Semi-government and NGO sectors. The project integrates watershed development and the adoption of Sustainable Agriculture Land Management (SALM) practices by smallholder farmers within the proposed watersheds. The villages which are selected under the Watershed Devel This project was open for public comment from 24 August - 23 September 2017. No comments were received.","lat":17.803056,"lon":78.816665},{"ID":"1704","Name":"Agricultural Land Management  project in Beed District, India implemented by Godrej Properties Ltd.","Proponent":"Godrej Properties Ltd","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0019; VM0017","Status":"Registered","Country":"India","Estimated Annual Emission Reductions":33764,"Region":"Asia","Crediting Period Start Date":42944,"Crediting Period End Date":50248,"Hectares":"1000 Hectares","project_explanation":"PUBLIC COMMENT PERIOD: This project is open for public comment from 7 July - 6 August 2017. Godrej has undertaken a watershed project of 3300 Ha in the Beed District of Maharashtra, India. The project promotes holistic watershed development and an integration of Carbon sequestration practices across the entire area including the three villages of Jamb, Bavi and Zapewadi. The Project will include tree plantations, differential cropping patterns, vermicomposting, etc to ensure the quality and organic carbon content in the soil is continuously improved","lat":19.061066,"lon":75.467382},{"ID":"994","Name":"TIST Program in India, VCS 001","Proponent":"Clean Air Action Corporation","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-AMS0001","Status":"Registered","Country":"India","Estimated Annual Emission Reductions":11047,"Region":"Asia","Crediting Period Start Date":37987,"Crediting Period End Date":48944,"Hectares":"672 Hectares","project_explanation":"Since its inception in 1999, over 63,000 participants organized into over 8,900 TIST Small Groups have planted over ten million trees in Tanzania, India, Kenya, Uganda, Nicaragua, and Honduras - accomplishing GhG sequestration through tree planting, creating a potential long-term income stream, and developing sustainable environments and livelihoods. Currently over 50,000 TIST participants in over 6,900 Small Groups are registered in the TIST program in Kenya and are working to break their local cycle of deforestation, drought and famine. The trees planted in tens of thousands of discrete groves and land parcels are already beginning to reduce erosion, stabilize and enrich the soil, and will soon be providing shade. VCS 001: This is a VCS grouped project, is a subset of the TIST reforestation project in India and applies to 452 Small Groups, 2,599 members, 924 project areas and 671.8 ha. TIST Progam in India VCS 001 is the same project as TIST Program in India CCB 001.,","lat":12.510175,"lon":79.66785},{"ID":"1015","Name":"Community-based reforestation project on degraded lands in Uttar Pradesh, India by Indian Farm Forestry Development Co-operative Limited","Proponent":"Indian Farm Forestry Development Co-operative LTD","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-AMS0005","Status":"Registered","Country":"India","Estimated Annual Emission Reductions":5651,"Region":"Asia","Crediting Period Start Date":39644,"Crediting Period End Date":50600,"Hectares":"222 Hectares","project_explanation":"Wastelands in India are a significant resource on which many rural people depend for food, fodder, and fuel wood. This project provides an opportunity for the rural poor to restore degraded lands and improve their living conditions. Indian Farm Forestry Co-operative Limited has implemented the project in the districts of Allahabad, Sultanpur, Pratapgarh, Unnao and Lucknow of Uttar Pradesh from July 15, 2008 covering an area of about 222 hectares. The project has assisted farmers, especially women, to promote plantation on wastelands and marginally productive lands by organizing primary farm forestry cooperatives and thus making it a people’s participative program. The project activities will help in improving soil and water conservation and bringing about ecological balance, and to generate consistent employment for the rural poor and thus help them in their socio-economic development.","lat":26.49741,"lon":81.74648},{"ID":"689","Name":"Reforestation of degraded land in Chhattisgarh, India","Proponent":"Prakash Industries Limited","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0002","Status":"Registered","Country":"India","Estimated Annual Emission Reductions":5007,"Region":"Asia","Crediting Period Start Date":37422,"Crediting Period End Date":60797,"Hectares":"282 Hectares","project_explanation":"The land to be reforested under the project activity has been a degraded land and would have continued to degrade in the absence of the project activity. The natural land conditions did not permit arrival and establishment of forest propagules. The project area is a revenue area, obtained from the villagers and secluded from the forest lands. The lands under project activity are locally known as Bhata Lands that have poor water holding capacity; no vegetation and are heavily prone to wind and water erosion. Thus, the major purposes of the project activity are to: 1. Enhance carbon sink through reforestation. 2. Reclaim the degraded land in a sustainable manner 3. Reduce pressure on natural forests of the region 4. Uplift socio-economic status of native rural","lat":21.543921,"lon":81.25426},{"ID":"1328","Name":"Araku Valley Livelihood Project","Proponent":"Livelihoods Fund","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Registered","Country":"India","Estimated Annual Emission Reductions":80660,"Crediting Period Start Date":40417,"Crediting Period End Date":47721,"Hectares":"6002 Hectares","project_explanation":"Various horticultural tree species and shrubs will be planted on 6,024 ha in this VCS ARR project activity in a 3-year project roll out period. Eight different species groups are distinguished based mainly on similar growth characteristics (similar biomass accumulation rates) and planting densities. All groups will be planted on the 6,024 ha. Coffee will be introduced after 3 years on 3,000 ha. The different species groups of the proposed ARR project activity comprise, among others, Mango, Guava, Custard apple, Orange, Lemon, and other local fruit trees. In addition Teak, Bamboo and various indigenous trees will be introduced. After a tree establishment phase, coffee will be planted under shade. The planting area is located on degraded land with very low plant cover (around 60% of the land is classified as barren land.). The horticultural tree planting will sequester carbon and generate additional income by turning this degraded, low carbon lands into high carbon sites. The overall goal of the project is to improve the livelihood of small and marginalized tribal communities in the Araku Valley of Visakhapatnam district in the state of Andhra Pradesh in India. The project will turn a low carbon landscape into a high carbon multiple use landscape improving food security and generating additional income for the community. The project area will cover 333 villages in 5 different Mandals and as an average approximately 16 planting sites per village. Totally, on 5,442 discrete areas of non-forested land with a geographical identification the horticulture systems will be established. The tribal communities living in the project area are Bhagathas, Valmikies, Kamaras, Porjas and Kondhs. They converse in a dialect of Adivasi Oriya and Kui. The area is very secluded and still many of the villages are inaccessible by vehicles. 90% of the population in the project area is living below the poverty line. The livelihoods of the tribal communities in the region have a distinct set of economic characteristics which differ widely from the lowlands adjoining this area of Visakhapatnam, with respect to climate, soil, rainfall, habitat, flora, and fauna. Subsistence agriculture is the primary livelihood for nearly 99% of the tribes and special characteristics are: • Agriculture through Slash and Burn Technique on hill slopes, known as Podu cultivation; • Gathering of Non Timber Forest Products; • Farming on terraces or in valleys both under irrigated and rain fed condition, and • Cattle and backyards gardens. The current annual average income of households in the region ranges between INR.15, 000 to INR 18, 000 (USD 350-400). Indiscriminate Podu cultivation has resulted in barren lands with increased soil erosion leading to environmental degradation has contributed to poverty and deprivation in the area. Dependence on forest and land has become extremely difficult for the tribal way of live. The rate of growth in population and diminishing forest cover makes them extremely vulnerable. Therefore, an integrated, holistic development approach revolving around building their local resources and skills to improve the agriculture and Non Timber Forest Produce (NTFP) needs to be adopted to address the issue of tribal poverty and build their economies.","lat":18.310476,"lon":82.552448},{"ID":"1463","Name":"India Sundarbans Mangrove Restoration","Proponent":"Livelihoods Fund","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-AM0014","Status":"Registered","Country":"India","Estimated Annual Emission Reductions":51249,"Region":"Asia","Crediting Period Start Date":40449,"Crediting Period End Date":47753,"Hectares":"4675 Hectares","project_explanation":"This reforestation project is a community initiative aiming to provide a new financing mechanism to overcome the current barriers to contribute positively to wetland restoration through mangrove reforestation in a multi-species environment and to allow communities to benefit from the carbon market. A key ecosystem restoration objective of the project is to re-establish the ecosystem functions relating to wave and wind erosion control to protect embankments, and to re-establish functioning ecosystems that can also enhance biodiversity. The socio-economic rationale for the project is to protect important livelihood functions for local communities. The project proponent will implement the project together with local communities. The A/R activity will provide greenhouse gas mitigation benefits and also important adaptation benefits in addressing climate change impacts. Such impacts include ongoing sea level rise and a probable increase in storm intensity","lat":21.905499,"lon":88.44651},{"ID":"3226","Name":"Padang Tikar Landscape","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD; WRC","Methodology":"VM0007","Status":"Under validation","Country":"Indonesia","Estimated Annual Emission Reductions":"590,557","Region":"Asia","Crediting Period Start Date":"","Crediting Period End Date":"30/08/2017","Hectares":"58673 Hectares","project_explanation":"The Padang Tikar Landscape project is located in the Padang Tikar Landscape of the Batu Ampar subdistrict, Kubu Raya district, West Kalimantan province, Indonesia. The project consists of 10 \'Village Forests\', covering 76,370 hectares (ha), 58,672.7 ha of which is eligible for the reducing emissions from deforestation and forest degradation (REDD) project. The Village Forest of Padang Tikar is the largest \'Village Forest\' permit in Indonesia and is divided into three types of forest: protected forest (69,299 ha), limited production forest (1,985 ha), and convertible production forest (5,086 ha). The Padang Tikar Landscape project is a microcosm of the country as it has comprehensive forest ecosystems, ranging from inland forests to swamp forests (including mangrove forests and peatlands).","lat":0.831275,"lon":109.313833},{"ID":"3012","Name":"Agroforestry and Reforestation for Carbon Sequestration in Indonesia","Proponent":"PUR Development Pte Ltd","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-AMS0007","Status":"Under development","Country":"Indonesia","Estimated Annual Emission Reductions":"1,888","Region":"Asia","Crediting Period Start Date":"","Crediting Period End Date":"20/08/2021","Hectares":"515 Hectares","project_explanation":"Agroforestry and Reforestation for Carbon Sequestration in Indonesia is a grouped afforestation and reforestation project initiated by PUR Projet in 2021. The purpose of the project is to reforest the degraded land and to promote sustainable agroforestry with local farmers located in the Indonesian regions of Sumatra Island, Bangka Belitung Islands, Sulawesi Island, and Java Island. PUR Projet develops agroforestry projects with local institutions (agricultural cooperatives & rural communities) and local farmers who want to engage into more virtuous agricultural practices. Providing technical support, training, and free access to seedlings - PUR Projet will work with participants to plant trees on their land in the interest of protection and restoration. The main objectives of the project are as follows: - Increase climate change resilience of agricultural lands, diversify incomes, and restore ecosystem services by supporting agroforestry practices. - Implement full stand rehabilitation and restoration of degraded lands. - Climate change mitigation through carbon removals generated by tree-planting activities. - Raise environmental awareness and knowledge within rural communities and promote sustainable agriculture practices.","lat":4.586507,"lon":96.895223},{"ID":"2403","Name":"Riau Ecosystem Restoration Carbon Project","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD; WRC","Methodology":"VM0007","Status":"On Hold","Country":"Indonesia","Estimated Annual Emission Reductions":"6,870,411","Region":"Asia","Crediting Period Start Date":"20/10/2021","Crediting Period End Date":"17/06/2016","Hectares":"130090 Hectares","project_explanation":"The Riau Ecosystem Restoration Carbon Project seeks to protect and restore 130,090 ha of peatland ecosystem located in the Republic of Indonesia while at the same time preserving biodiversity and enhancing local livelihoods. The Project will avoid 78,425 ha of forest clearing and conversion to an industrial forestry plantation. The Project is on the island of Sumatra and in the Province of Riau. Specifically, it is located on the Kampar Peninsula, which is a rain-fed peatland forest made up of four former logging concessions. Through the REDD+ process of avoided planned deforestation and wetlands conservation and restoration, the Project will be preserving the remaining peat swamp forests by preventing their conversion to forestry plantations.","lat":0.4462471029560577,"lon":102.66481881414873},{"ID":"2395","Name":"OKI REDD+ Project","Proponent":"Japan Asia Group Ltd","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AM0014; VM0007; AR-ACM0003","Status":"Registration requested","Country":"Indonesia","Estimated Annual Emission Reductions":"181,986","Region":"Asia","Crediting Period Start Date":"","Crediting Period End Date":"05/08/2016","Hectares":"23500 Hectares","project_explanation":"The Project consists of forest protection activities, including emission reduction in the mangrove forests of about 11,650 ha (REDD), and afforestation activities of about 11,840 ha on bare land and grassland (ARR) in a protected forest of about 23,500 ha in Organ Komering Irir, South Sumatra, Indonesia. The main ecosystems of these two regions are mangrove forests and grassland, bare land and shrub land, respectively, which are separated by boundaries. Mangrove forest in the region has been severely affected by forest deforestation caused by the conversion to shrimp ponds since the beginning of 1990’s. Mangrove forest in this region had decreased by about 540 ha (9787 ha to 9248 ha) from 1990 to 2012, while bare land area had increased by about 1200 ha (450 ha to 1685 ha). In this project area, the impacts of construction of artificial waterways to transport materials necessary for activities in adjacent industrial forests, the spread of fire due to fire outside the project area, and the development due to misidentification of unclear boundary line with outside the project area can be seen. In mangrove forest areas in particular, there has been a large number of small-scale activities for the development of shrimp aquaculture ponds and the logging for that, and these activities are a major cause of deforestation in this area. This is evident from field surveys, satellite image analysis and interviews. This trend is also gradually expanding in the areas adjacent to the project area, and if the situation continues, the deforestation of the protected forests is likely to continue. Originally, the project area is a protected forest, and cutting down for shrimp farming is prohibited, but in this area, it has been conventionally carried out for livelihood, and the law is not generally observed. The project will reduce CO2 emissions by taking appropriate preventive measures for drivers and curbing the progress of deforestation. In addition, where there is an old aquaculture pond, the silvo fishery method will be used to plant trees while preventing leakage. The purpose of this project is to prevent further deforestation by providing local people with alternative means to support the lives of them such as opportunities for participation and cooperation in forest conservation and afforestation projects. Therefore, as a result of communication with local residents focusing on the sustainable development of the local society for many years before the start of the project, a deep relationship of trust has been built, and participation and cooperation in the project by them have been actively carried out. These include the organization of farmers\' groups, forest patrols and afforestation activities. The monitoring of carbon storage is carried out by the combination of satellite image analysis and field measurement (ground truth). Landsat images are used to classify land cover. Field measurements are also made to identify the actual vegetation and to obtain data to estimate the carbon factor of the forest in the project area. It is estimated to contribute to an annual reduction of approximately 57,000 tons of CO2 emissions. On the other hand, the amount of CO2 absorbed by afforestation activities is estimated to be at an average of about 180,000 tons per year from 2022. After registering with the Verra, we will use the funds from the credit sales to maintain the project and return the funds to local residents through the construction of schools and other facilities and the provision of educational and employment opportunities, thereby contributing to the creation of a sustainable local community.","lat":-2.565,"lon":105.6},{"ID":"1899","Name":"Sumatra Merang Peatland Project (SMPP)","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR; WRC","Methodology":"VM0007","Status":"Registered","Country":"Indonesia","Estimated Annual Emission Reductions":"1,338,569","Region":"Asia","Crediting Period Start Date":"06/04/2020","Crediting Period End Date":"01/01/2016","Hectares":"22922 Hectares","project_explanation":"The SMPP aims to restore the ecological functions of the Merang peatland through the use of sustainable land-use models that benefit critically endangered biodiversity and provide benefits for local communities. These overarching objectives will be achieved by implementing ecosystem and habitat restoration activities while establishing sustainable avenues for economic success amongst the local communities.","lat":-2.019124,"lon":104.1383},{"ID":"1498","Name":"Preserving Peat Swamp Forest Ecosystem Through Redd+ Activity In Kampar Peninsula Riau-Indonesia","Proponent":"KPHP Tasik Besar Serkap (KPHP TBS), Riau Province-Indonesia","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0007","Status":"Under validation","Country":"Indonesia","Estimated Annual Emission Reductions":"1,624,961","Region":"Asia","Crediting Period Start Date":"","Crediting Period End Date":"16/12/2014","Hectares":"14723 Hectares","project_explanation":"This project aims to reduce greenhouse gas through preventing the 14,722.9 ha out of the 40,449 ha of the designated peat swamp forest area managed by KPHP TBS being converted into a timber plantation. The project area consists of swamp forest on top of a thick layer (5-12m) of peat that is currently maintained under a favorable condition. Main objective of the proposed project is to avoid conversion of the proposed project area into timber plantation by assign it as a REDD area thus change its function from production to protection. According to the Ministry of Forestry decree No. 509/Menhut-VII/2010 on, the proposed project area is eligible for conversion into industrial timber plantation. There are already 17 Industrial Plantation Forest surrounding the area, making conversion of the area into Industrial Forest Plantation the most plausible option.","lat":0.6813214249489539,"lon":102.49801829598462},{"ID":"1493","Name":"Mangrove restoration and coastal greenbelt protection in the East coast of Aceh and North Sumatra Province, Indonesia","Proponent":"Livelihoods Fund","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-AM0014","Status":"Registered","Country":"Indonesia","Estimated Annual Emission Reductions":"124,706","Region":"Asia","Crediting Period Start Date":"06/04/2020","Crediting Period End Date":"14/06/2011","Hectares":"1000 Hectares","project_explanation":"The goal of this project is to increase the environmental carrying capacity of mangrove ecosystems in the east coast of Northern Sumatra for carbon sequestration, natural disaster risk reduction and local livelihood improvement. Ecological improvement, climate change mitigation, economic consideration and local community participation will be the main-stream and the spirit of this proposed project. By helping to ensure that the mangrove and more generally the coastal green-belt are well maintained, the project will support Sumatra’s future ecological, social and economic development. During the first 3-4 years of mangrove restoration, the project will restore more than 5,000 ha of degraded mangrove. Undergoing validation and verification to the CCB Standards: public comment period – 19 August – 18 September 2019. The following documents are undergoing public comment: 1) CCB_PROJ_DESC_ENG_DRAFT_1493_31JUL2019 2) CCB_PROJ_DESC_SUM_BAH_DRAFT_1493_31JUL2019 3) CCB_MON_REP_ENG_","lat":4.6651080044924615,"lon":97.77216084640959},{"ID":"674","Name":"Rimba Raya Biodiversity Reserve Project","Proponent":"InfiniteEARTH","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0004","Status":"Registered","Country":"Indonesia","Estimated Annual Emission Reductions":"3,527,171","Region":"Oceania","Crediting Period Start Date":"06/04/2020","Crediting Period End Date":"01/07/2019","Hectares":"64977 Hectares","project_explanation":"The Rimba Raya Biodiversity Reserve Project, an initiative by InfiniteEARTH, aims to reduce Indonesia’s emissions by preserving some 64,000 hectares of tropical peat swamp forest. This area, rich in biodiversity including the endangered Bornean orangutan, was slated by the Provincial government to be converted into four palm oil estates. Located on the southern coast of Borneo in the province of Central Kalimantan, the project is also designed to protect the integrity of the adjacent world-renowned Tanjung Puting National Park, by creating a physical buffer zone on the full extent of the ~90km eastern border of the park.","lat":-3.106367,"lon":112.299244},{"ID":"1477","Name":"Katingan Peatland Restoration and Conservation Project","Proponent":"PT. Rimba Makmur Utama (PT. RMU)","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR; REDD; WRC","Methodology":"VM0007","Status":"Registered","Country":"Indonesia","Estimated Annual Emission Reductions":"7,451,846","Region":"Asia","Crediting Period Start Date":"06/04/2020","Crediting Period End Date":"01/11/2010","Hectares":"14980 Hectares","project_explanation":"The Katingan Restoration and Conservation Project (‘The Katingan Project’) protects and restores 149,800 hectares of peatland ecosystems, to offer local communities sustainable sources of income, and to tackle global climate change. The project lies within the districts of Katingan and Kotawaringin Timur in Central Kalimantan Province and covers one of the largest remaining intact peat swamp forests in Indonesia","lat":-2.3825331776905583,"lon":113.26739369744178},{"ID":"3340","Name":"Boomitra Grassland Restoration in East Africa Through Soil Enrichment","Proponent":"Boomitra Inc","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ALM","Methodology":"VM0042","Status":"Under development","Country":"Kenya","Estimated Annual Emission Reductions":"200,000","Region":"Africa","Crediting Period Start Date":"","Crediting Period End Date":"01/11/2018","project_explanation":"This project helps pastoralists in deploying practices that contribute to the sustainable development of the Savanna grasslands of East Africa. The pastoralists of this region have largely resorted to implementing traditional grassland management methods on their lands. The grazing of grasslands by both livestock and wildlife is widely prevalent, and degradation of land due to overgrazing is a prominent issue. In this context, the opportunity to introduce improved grassland management practices, including sustainable grazing practices, will significantly help the grasslands of the region and restore carbon to their soil, creating carbon removals while improving overall soil health. In this project, pastoralists will be mobilized to take up a variety of improved grassland management practices. These practices are proven ways to increase soil organic carbon, prevent further degradation of the grasslands, and enable pastoralists to improve their productivity.","lat":-1.8997,"lon":36.301},{"ID":"2623","Name":"Komaza Smallholder Farmer Forestry Kenya","Proponent":"Komaza Group Inc.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-AMS0007","Status":"Registration and verification approval requested","Country":"Kenya","Estimated Annual Emission Reductions":"286,630","Region":"Africa","Crediting Period Start Date":"","Crediting Period End Date":"01/05/2017","Hectares":"45316 Hectares","project_explanation":"Komaza is a social enterprise founded in 2006 in Coastal Kenya. It was started with the mission of getting subsistence farmers out of poverty by building a profitable forestry business that connects thousands of small-scale tree farmers to high-value wood markets. The afforestation project will include all of Komaza’s planting since 2017 and future planting in Kenya, establishing over 45,000 hectares of micro tree farms with 100,000 smallholder farmers. It will monitor carbon emission removals and co-benefits on climate, communities and biodiversity, including improved livelihoods, women empowerment, community training, reduced land degradation and reduced pressure on natural forests.","lat":-3.508129,"lon":39.909047},{"ID":"2363","Name":"CONSERVATION OF MIOMBOS IN TARU KENYA REDD+","Proponent":"Swiss carbon Value Ltd.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0009","Status":"Under validation","Country":"Kenya","Estimated Annual Emission Reductions":"16,225","Region":"Africa","Crediting Period Start Date":"","Crediting Period End Date":"01/07/2016","Hectares":"8760 Hectares","project_explanation":"This project plans to achieve its goals through the implementation of a REDD+ strategy (Reducing Emissions from Deforestation and Forest Degradation) under the Methodology for Avoided Ecosystem Conversion, v3.0 (VM0009) of VCS, aimed at conserving threatened Miombo forests and the benefits that they provide to the community. These benefits include the mitigation of climate change, an increase in carbon (CO2) sequestration and forest cover, and the conservation of flora and fauna in the region. The project is located in the Taru Ranch property in the village of Taru in Kwale County, about 60 kilometers northwest of Mombasa, Kenya’s second largest city. The nearly 16,674 ha ranch is situated in the southeastern plains of Kenya. The bounding coordinates for the property are 9,605,191.95 m N, 9,583,436.15 m N, 528,392.84 m E, and 517,402.76 m E (WGS 1984 UTM Zone 37 South). The project is aimed at conserving the current forest through the protection of a large area of natural Miombo forests by means of activities of Avoided Unplanned Deforestation (8011.72 ha) and activities of Avoided Planned Deforestation (1884.8 ha). The main agents of deforestation in the project area are the local populations that live in the project area (Taru village) and the surrounding areas, with 450 families in the following villages: Mwembeni, Nyari, Mitunguni, Mwakunde, Kazamoyo, Vidzandani, and Mwadzungi. As a result of the difficult environmental and economic conditions in the region, this projects climate objectives depend on the success of community-oriented project activities, such as a tree-planting program, community gardens, wildlife rescue and rehabilitation, a water supply program, a daycare service for women working on the farm, the promotion of environmental awareness, and an empowerment program for women. This project has the potential to avoid the emission of 486,755.18 tCO2 over the 30 years it will take to complete this project.","lat":-3.429,"lon":39.123},{"ID":"2338","Name":"TIST Program in Kenya, VCS-CCB 010","Proponent":"Clean Air Action Corporation","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-AMS0007","Status":"Registered","Country":"Kenya","Estimated Annual Emission Reductions":"93,619","Region":"Africa","Crediting Period Start Date":"23/09/2021","Crediting Period End Date":"01/02/2015","Hectares":"2293 Hectares","project_explanation":"The International Small Group and Tree Planting Program (TIST) is a combined reforestation and sustainable development project in Kenya, carried out by subsistence farmers. The farmers plant trees on their land and retain ownership of the trees and their products. They receive training from TIST and a share of the carbon revenues from CAAC. This project description (PD) is for a subset of the TIST project in Kenya and initially applies to 1,649 Small Groups, 10,007 farmers, 6,348 project areas and 2,293.154 ha. The main species planted are Gravellia, Cyprus, and Acacia. TIST farmers use a mosaic restoration approach, planting on thousands of individual farms spread across the landscape. TIST estimates this project will result in as annual average GHG removal of 93,619 tonnes and a total GHG removal of 2,808,565 tonnes.","lat":0.0722,"lon":37.6597},{"ID":"1944","Name":"Livelihoods Mount Elgon Project","Proponent":"Livelihoods Fund","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ALM","Methodology":"VM0017","Status":"Registration and verification approval requested","Country":"Kenya","Estimated Annual Emission Reductions":"53,142","Region":"Africa","Crediting Period Start Date":"","Crediting Period End Date":"02/03/2016","Hectares":"35100 Hectares","project_explanation":"The Mount Elgon Livelihood Project is a livelihood improvement project implemented by the NGO, Vi Agroforestry, in partnership with the Livelihoods Fund and Brookside Dairy Limited in the Mount Elgon region of Kenya. The project is tackling poverty, environmental degradation and climate change challenges. The Mount Elgon region is historically a densely populated area due to its favourable agro-ecology – fertile soils and high rainfall. The population is highly dependent on agriculture; hence, the lands have been stripped off its natural vegetation, and extensively cultivated and fragmented. Farmers practice subsistence agriculture – characterized by low inputs – resulting in low yields and rapid loss of soil fertility. Livestock husbandry is characterized by uncontrolled grazing, lack of quality feeds, and shortage of quality veterinary services.PUBLIC COMMENT PERIOD:This project is open for public comment from 4 September – 4 October 2019. <a href=mailto: secretariat@verra.org?subject=Livelihoods Mount Elgon Project, Kenya >4 September – 4 October 2019</a>.","lat":0.427248,"lon":34.3632},{"ID":"1225","Name":"Kenya Agricultural Carbon Project","Proponent":"Vi Agroforestry Programme","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ALM","Methodology":"VM0017","Status":"Registered","Country":"Kenya","Estimated Annual Emission Reductions":"99,004","Region":"Africa","Crediting Period Start Date":"06/04/2020","Crediting Period End Date":"01/07/2009","Hectares":"21966 Hectares","project_explanation":"The project promotes and implements a package of Sustainable Agricultural Land Management (SALM) practices within smallholder farming systems and generates GHG removals through soil and tree carbon sequestration.","lat":0.129314,"lon":34.394044},{"ID":"899","Name":"TIST Program in Kenya, VCS 006","Proponent":"Clean Air Action Corporation","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-AMS0001","Status":"Registered","Country":"Kenya","Estimated Annual Emission Reductions":"233,275","Region":"Africa","Crediting Period Start Date":"01/10/2012","Crediting Period End Date":"01/01/2004","Hectares":"6049 Hectares","project_explanation":"Since its inception in 1999, over 63,000 participants organized into over 8,900 TIST Small Groups have planted over ten million trees in Tanzania, India, Kenya, Uganda, Nicaragua, and Honduras - accomplishing GhG sequestration through tree planting, creating a potential long-term income stream, and developing sustainable environments and livelihoods. Currently over 50,000 TIST participants in over 6,900 Small Groups are registered in the TIST program in Kenya and are working to break their local cycle of deforestation, drought and famine. The trees planted in tens of thousands of discrete groves and land parcels are already beginning to reduce erosion, stabilize and enrich the soil, and will soon be providing shade. VCS 005: This is a VCS grouped project, is a subset of the TIST reforestation project in Kenya and applies to 3,961 of the Small Groups, 29,222 members, 18,099 project areas and 7,419.2 ha.TIST Program in Kenya VCS-006 is the same as the project TIST Program in Kenya CCB-003.","lat":-1.012116,"lon":33.928857},{"ID":"737","Name":"TIST Program in Kenya, VCS 005","Proponent":"Clean Air Action Corporation","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-AMS0001","Status":"Registered","Country":"Kenya","Estimated Annual Emission Reductions":"86,694","Region":"Africa","Crediting Period Start Date":"06/04/2020","Crediting Period End Date":"01/01/2004","Hectares":"2556 Hectares","project_explanation":"Since its inception in 1999, over 63,000 participants organized into over 8,900 TIST Small Groups have planted over ten million trees in Tanzania, India, Kenya, Uganda, Nicaragua, and Honduras - accomplishing GhG sequestration through tree planting, creating a potential long-term income stream, and developing sustainable environments and livelihoods. Currently over 50,000 TIST participants in over 6,900 Small Groups are registered in the TIST program in Kenya and are working to break their local cycle of deforestation, drought and famine. The trees planted in tens of thousands of discrete groves and land parcels are already beginning to reduce erosion, stabilize and enrich the soil, and will soon be providing shade. VCS 005: This is a VCS grouped project, is a subset of the TIST reforestation project in Kenya and applies to 1,179 of the Small Groups, 8,692 members, 6,710 project areas and 2,556.1 ha. TIST Program in Kenya VCS-005 was originally validated as a CCB project with the title, TIST Program in Kenya CCB-002. As part of the project\'s CCB re-validation in 2017 the project is changing its CCB title to TIST Program in Kenya VCS-005.","lat":0.033785,"lon":37.653227},{"ID":"562","Name":"The Kasigau Corridor REDD Project – Phase I Rukinga Sanctuary","Proponent":"Wildlife Works Carbon LLC","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0009","Status":"Registered","Country":"Kenya","Estimated Annual Emission Reductions":"251,432","Region":"Africa","Crediting Period Start Date":"04/06/2020","Crediting Period End Date":"01/01/2005","Hectares":"30169 Hectares","project_explanation":"WWC\'s first project at Rukinga, Kenya, has been operating since 2005 protecting local wildlife and forests. The aim of this project is to bring the benefits of direct carbon financing to surrounding communities, while simultaneously addressing alternative livelihoods. Human-wildlife conflict has been a problem in the past, as local agents are reliant on flora and fauna as a means for subsistence. The Rukinga project directly addresses such sources of conflict in a holistic, sustainable approach. An additional goal is to secure a contiguous wildlife migration corridor between Tsavo East and West National Parks.","lat":-3.674261,"lon":38.785508},{"ID":"1408","Name":"Chyulu Hills REDD+ Project","Proponent":"Chyulu Hills Conservation Trust","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0009","Status":"Registered","Country":"Kenya","Estimated Annual Emission Reductions":"1,100,943","Region":"Africa","Crediting Period Start Date":"06/04/2020","Crediting Period End Date":"19/09/2013","Hectares":"410534 Hectares","project_explanation":"The Chyulu Hills REDD+ Project (CHRP) is a multi-partner initiative designed to promote climate change mitigation and adaptation, restore biodiversity and create alternative livelihoods under the UN scheme of Reducing Emissions from Deforestation and forest Degradation (REDD+). It is located in the Tsavo-Amboseli ecosystem, southeastern Kenya and stretches over an area of 410,533.84 ha. Its main geographic feature is the volcanic Chyulu Hills mountain range, from which the project derives its name. This project presents a broad ecosystem approach, including REDD+, to provide long-term sustainable financing and management to maintain the ecological integrity of an iconic African landscape. The project will help to protect a very high value wildlife and biodiversity area while supporting the development needs of indigenous and other local communities.","lat":-2.806913,"lon":37.687994},{"ID":"596","Name":"TIST Program in Kenya, VCS 003","Proponent":"Clean Air Action Corporation","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0001","Status":"Registered","Country":"Kenya","Estimated Annual Emission Reductions":"14,482","Region":"Africa","Crediting Period Start Date":"12/04/2011","Crediting Period End Date":"01/01/2004","Hectares":"421 Hectares","project_explanation":"Since its inception in 1999, over 63,000 participants organized into over 8,900 TIST Small Groups have planted over ten million trees in Tanzania, India, Kenya, Uganda, Nicaragua, and Honduras - accomplishing GhG sequestration through tree planting, creating a potential long-term income stream, and developing sustainable environments and livelihoods. Currently, over 50,000 TIST participants in over 6,900 Small Groups are registered in the TIST program in Kenya and are working to break their local cycle of deforestation, drought, and famine. The trees planted in tens of thousands of discrete groves and land parcels are already beginning to reduce erosion, stabilize and enrich the soil, and will soon be providing shade. This PD is a subset of the reforestation project in Kenya and applies to 350 of the Small Groups, 2,632 members, 1,483 project areas and 421.5 ha.","lat":0.012579,"lon":37.648572},{"ID":"597","Name":"TIST Program in Kenya, VCS 004","Proponent":"Clean Air Action Corporation","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-AMS0001","Status":"Registered","Country":"Kenya","Estimated Annual Emission Reductions":"13,790","Region":"Africa","Crediting Period Start Date":"12/04/2011","Crediting Period End Date":"01/01/2004","Hectares":"391 Hectares","project_explanation":"Since its inception in 1999, over 63,000 participants organized into over 8,900 TIST Small Groups have planted over ten million trees in Tanzania, India, Kenya, Uganda, Nicaragua, and Honduras - accomplishing GhG sequestration through tree planting, creating a potential long-term income stream, and developing sustainable environments and livelihoods. Currently over 50,000 TIST participants in over 6,900 Small Groups are registered in the TIST program in Kenya and are working to break their local cycle of deforestation, drought and famine. The trees planted in tens of thousands of discrete groves and land parcels are already beginning to reduce erosion, stabilize and enrich the soil, and will soon be providing shade. This PD is for a subset of the reforestation project in Kenya and applies to 315 of the Small Groups, 2,279 members, 1,246 project areas and 391.6 ha. TIST Program in Kenya VCS-001, -002 -003 and -004 comprise the project TIST Program in Kenya CCB-001.","lat":0.14305,"lon":36.819042},{"ID":"595","Name":"TIST Program in Kenya, VCS 002","Proponent":"Clean Air Action Corporation","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-AMS0001","Status":"Registered","Country":"Kenya","Estimated Annual Emission Reductions":"13,663","Region":"Africa","Crediting Period Start Date":"12/04/2011","Crediting Period End Date":"01/01/2004","Hectares":"398 Hectares","project_explanation":"Since its inception in 1999, over 63,000 participants organized into over 8,900 TIST Small Groups have planted over ten million trees in Tanzania, India, Kenya, Uganda, Nicaragua, and Honduras - accomplishing GhG sequestration through tree planting, creating a potential long-term income stream, and developing sustainable environments and livelihoods. Currently over 50,000 TIST participants in over 6,900 Small Groups are registered in the TIST program in Kenya and are working to break their local cycle of deforestation, drought and famine. The trees planted in tens of thousands of discrete groves and land parcels are already beginning to reduce erosion, stabilize and enrich the soil, and will soon be providing shade. VCS 002: This PD is for a subset of the reforestation project in Kenya and applies to 296 of the Small Groups, 2,283 members, 1,051 project areas and 398.1 ha. TIST Program in Kenya VCS-001, -002 -003 and -004 comprise the project TIST Program in Kenya CCB-001.","lat":0.141267,"lon":37.693258},{"ID":"594","Name":"TIST Program in Kenya, VCS 001","Proponent":"Clean Air Action Corporation","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0001","Status":"Registered","Country":"Kenya","Estimated Annual Emission Reductions":"14,701","Region":"Africa","Crediting Period Start Date":"12/04/2011","Crediting Period End Date":"01/01/2004","Hectares":"353 Hectares","project_explanation":"Since its inception in 1999, over 63,000 participants organized into over 8,900 TIST Small Groups have planted over ten million trees in Tanzania, India, Kenya, Uganda, Nicaragua, and Honduras - accomplishing GhG sequestration through tree planting, creating a potential long-term income stream, and developing sustainable environments and livelihoods. Currently over 50,000 TIST participants in over 6,900 Small Groups are registered in the TIST program in Kenya and are working to break their local cycle of deforestation, drought and famine. The trees planted in tens of thousands of discrete groves and land parcels are already beginning to reduce erosion, stabilize and enrich the soil, and will soon be providing shade. This PD is for a subset of the reforestation project in Kenya and applies to 117 of the Small Groups, 853 members, 484 project areas and 353.9 ha.TIST Program in Kenya VCS-001, -002 -003 and -004 comprise the project TIST Program in Kenya CCB-001.","lat":0.072169,"lon":37.659891},{"ID":"996","Name":"TIST Program in Kenya, VCS 009","Proponent":"Clean Air Action Corporation","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-AMS0001","Status":"Registered","Country":"Kenya","Estimated Annual Emission Reductions":"88,163","Region":"Africa","Crediting Period Start Date":"13/03/2013","Crediting Period End Date":"01/01/2004","Hectares":"2724 Hectares","project_explanation":"Since its inception in 1999, over 63,000 participants organized into over 8,900 TIST Small Groups have planted over ten million trees in Tanzania, India, Kenya, Uganda, Nicaragua, and Honduras - accomplishing GhG sequestration through tree planting, creating a potential long-term income stream, and developing sustainable environments and livelihoods. Currently over 50,000 TIST participants in over 6,900 Small Groups are registered in the TIST program in Kenya and are working to break their local cycle of deforestation, drought and famine. The trees planted in tens of thousands of discrete groves and land parcels are already beginning to reduce erosion, stabilize and enrich the soil, and will soon be providing shade. VCS 009: This is a VCS grouped project, is a subset of the TIST reforestation project in Kenya and applies to 1,726 of the Small Groups, 12,433 members, 5,654 project areas and 2724.0 ha. TIST Program in Kenya VCS-009 is the same project as TIST Program in Kenya CCB-004.","lat":0.005999,"lon":37.809196},{"ID":"612","Name":"The Kasigau Corridor REDD Project - Phase II The Community Ranches","Proponent":"Wildlife Works Carbon LLC","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0009","Status":"Registered","Country":"Kenya","Estimated Annual Emission Reductions":"1,461,479","Region":"Africa","Crediting Period Start Date":"06/04/2020","Crediting Period End Date":"01/01/2010","Hectares":"169741 Hectares","project_explanation":"This project builds on Wildlife Works\' first REDD project (Phase I, Rukinga Ranch) which has been protecting forests, flora and fauna since 2006. The aim of this new, larger project is to bring the benefits of direct carbon financing to surrounding communities, while simultaneously addressing alternative livelihoods and protecting vital flora and fauna. Human-wildlife conflict has been a problem in the past, as local agents are directly reliant on the environment as a means for subsistence. This Phase II project directly addresses such sources of conflict in a holistic, sustainable approach, and on a large scale. This Phase II project is classified by VCS as a mega-project, as it is estimated to reduce over 1 million tonnes of CO2-e per year.","lat":-3.917672,"lon":38.805574},{"ID":"1468","Name":"Northern Kenya Grasslands Project","Proponent":"Northern Rangelands Trust","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ALM","Methodology":"VM0032","Status":"Registered","Country":"Kenya","Estimated Annual Emission Reductions":"1,797,493","Region":"Africa","Crediting Period Start Date":"05/05/2020","Crediting Period End Date":"10/12/2012","Hectares":"1993078 Hectares","project_explanation":"The Northern Rangelands Trust is currently helping 11 different conservancies on pastoralist-occupied lands in northern Kenya implement a shift from continuous, unrestricted grazing to planned rotational grazing. The rest to forage plants afforded by the new grazing management,is expected to restore overgrazed grasslands and generate soil carbon storage by nearly 200,000 tons per year across more than 1 million ha of northern Kenya rangelands. This expected change in soil carbon will remove more than 600,000 tons of greenhouse gas (CO2 equivalents) from the atmosphere per year. This project was open to public comment for its validation and first verification to the CCB Standards from 04 March - 03 April 2019. No comments were received.","lat":0.819519,"lon":37.664315},{"ID":"2609","Name":"KUAMUT RAINFOREST CONSERVATION PROJECT","Proponent":"Permian Malaysia SDN. BHD","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"IFM","Methodology":"VM0010","Status":"Registration requested","Country":"Malaysia","Estimated Annual Emission Reductions":"543,049","Region":"Asia","Crediting Period Start Date":"","Crediting Period End Date":"11/12/2015","Hectares":"83381 Hectares","project_explanation":"The Kuamut Rainforest Conservation Project (‘Kuamut Project’) aims to protect and restore 83,381 ha of tropical forest in Sabah, Malaysia. The project is located in the Tongod and Kinabatangan Districts of Sabah, Malaysia. The project area is part of a long-term approximately 1-million-hectare concession granted to Yayasan Sabah on a 99-year lease arrangement with the Sabah Forestry Department (acting on behalf of the State Government of Sabah). Yayasan Sabah is a State-owned para-governmental charitable foundation that was formed in 1966 with the aim of ‘improving the lives of Malaysians living in Sabah’. Prior to the start of the project, the project area was designated as production forest (Class II). The area had been repeatedly logged in the past and was designated for further commercial exploitation. Project additionality is explicitly demonstrated by preventing *** hectares of commercial logging over *** years. Had the project not intervened, the resulting carbon emissions over this period would have contributed *** tonnes of carbon dioxide equivalent (tCO2e) into the atmosphere. In addition to its contribution to preventing the release of greenhouse gas (GHG) emissions, the project is protecting an important biodiverse habitat, Despite its ex-logged state, the area is known to support very high populations of elephants, banteng and orangutan, and endangered bird species including Helmeted Hornbill, Bornean Peacock Pheasant and Storms Stork.","lat":5.2,"lon":117.333331},{"ID":"672","Name":"INFAPRO Rehabilitation of logged-over dipterocarp forest in Sabah, Malaysia","Proponent":"Face the Future","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"IFM","Methodology":"VM0005","Status":"Registered","Country":"Malaysia","Estimated Annual Emission Reductions":"138,013","Region":"Oceania","Crediting Period Start Date":"06/04/2020","Crediting Period End Date":"01/01/2017","Hectares":"25000 Hectares","project_explanation":"The project rehabilitates 25,000 ha of severely logged-over mixed dipterocarp rainforest in Sabah, Malaysia and prevents relogging of the forest in this area. In the absence of the project activity, the forest would be re-logged and would only slowly recuperate due to the high quantities of vines and climbing bamboos suppressing the remnant trees and the natural regeneration process.","lat":5.027872,"lon":117.803684},{"ID":"3344","Name":"The Last Habitat REDD+ project","Proponent":"Bosques Amazonicos","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0007","Status":"Under development","Country":"Peru","Estimated Annual Emission Reductions":"781,865","Region":"Latin America","Crediting Period Start Date":"","Crediting Period End Date":"01/03/2020","Hectares":"22226 Hectares","project_explanation":"The Last Habitat REDD+ project is located in the Ucayali region, in the central zone of the Peruvian Amazon, one of the regions with the highest rates of deforestation in Peru (31,543.29 ha in 2021). The project area is comprised by two private estates belonging to the project proponent, BAM: the properties of Nuestro Señor Jesucristo with 8,049.87 ha and Selva Maestra with 14,176.13 ha, a total area of 22,226 ha mainly of primary floodable forests. Located near the city of Pucallpa (Ucayali) and surrounded by deforestation pressures from agriculture, urbanization and others, the project area harbors an extraordinary ecological wealth, being the last habitat or refuge for various species of flora and fauna and a green island of outstanding ecological value. In addition, the are includes several types of valuable forest, among them the aguajales, which are the wetlands with the greatest carbon sequestration capacity in the Amazon, making this an essential ecosystem to conserve. The Last Habitat REDD+ project is designed under the avoided planned deforestation methodology as this area was originally sold to the project proponent with the authorization to convert the forested areas in agrarian production lands (camu camu, palm oil, piñon, and cattle ranching). Despite having the legal authorization to carry out traditional productive activities, BAM, with its own resources, has promoted the conservation of these valuable forests and its biodiversity over the years by implementing different strategies and activities such: territorial supervision with technical and legal support, forest surveillance activities, permanent work with communities for improving their capacities in sustainable forestry management, among others. Such conservation efforts will only be feasible and sustainable over time with the support of carbon revenues from the proposed REDD+ project.","lat":-8.559732,"lon":-74.57334},{"ID":"2598","Name":"Experimental regeneration of diverse forests on abandoned pastures in Panguana, Peru","Proponent":"Panguana Stiftung","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-AMS0007","Status":"Under development","Country":"Peru","Estimated Annual Emission Reductions":"9,940","Region":"Latin America","Crediting Period Start Date":"","Crediting Period End Date":"01/11/2021","Hectares":"140 Hectares","project_explanation":"Panguana is the oldest biological research station in Peru (founded in 1968) with a focus on studying the immense biodiversity of the Amazon rainforest. The research station is located on the western edge of the Reserva Comunal El Sira (RC El Sira), a national protected area established to protect the pristine montane rainforests of the Cordillera El Sira. The buffer zone of the RCS and its surrounding area is mainly populated by indigenous communities and small-scale farmers. Intensive deforestation in this area in favour of pastures has resulted in fragments of primary rainforests existing primarily as islands between pastures. In this respect, the private nature reserve of Panguana currently forms a peninsula with an intact connection to the untouched rainforests in the heart of the RC El Sira. Restoration of degraded pastureland and rehabilitation of secondary forests adjacent to existing old growth forests at Panguana presents the opportunity to conserve an important biodiversity corridor as well as an effective strategy for rehabilitation of degraded tropical forest across the region. The project has the following main goals: • Restore natural rainforests on pastures within the area of the Panguana foundation (~140 ha) • Accelerate forest restoration by testing different approaches and developing best practices for local conditions • Introduce sustainable food and tree production systems (permaculture, aquaponics, tree nursery) • Only use inexpensive materials and methods, easily available in the region • Exchange knowledge and develop a sustainable landscape management together with local stakeholders (indigenous communities, small-scale farmers, local institutions) It is expected that the project activities will lead to a mean annual removal of ~16 t CO2e per hectare during the first 20 years.","lat":-9.623197350030484,"lon":-74.92488899602391},{"ID":"2502","Name":"TAHUAMANU AMAZON REDD PROJECT","Proponent":"MADERERA RIO ACRE SAC","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0006","Status":"Registration requested","Country":"Peru","Estimated Annual Emission Reductions":"1,575,108","Region":"Latin America","Crediting Period Start Date":"","Crediting Period End Date":"19/04/2017","Hectares":"171584 Hectares","project_explanation":"The proposed project is based on the enhancement and strengthening of the sustainable forest management of a consolidated group of forest concessions managed by a local company with long forest tradition, MADERACRE SAC, who also has previous successful experience with REDD+. The whole area managed by MADERACRE SAC, including the current proposed project area and others already VCS/CCB verified, are FSC certified, which guarantees that logging activities are being done under adequate techniques. The area faces increasing threats from unsustainable agrarian practices from neighbouring local religious communities and others. To deal with it, the project plans to combine an increase in protection measures (patrolling, working together with other forest concessions and the forest and political authorities) with the promotion of productive activities for neighbouring communities, as a strategy to offer alternative sources of income that do not imply the clearing of forest areas. Based on this approach, the project expects to reduce projected deforestation. The project is located in Madre de Dios, a region in the south-east of the Peruvian Amazon with the most accelerated deforestation rate of Peru.","lat":11.359047,"lon":69.973701},{"ID":"2345","Name":"Green Gold Loreto 1","Proponent":"Green Gold Forestry Peru SA","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"IFM","Methodology":"VM0010","Status":"Registered","Country":"Peru","Estimated Annual Emission Reductions":"486,931","Region":"Latin America","Crediting Period Start Date":"07/01/2022","Crediting Period End Date":"01/08/2020","Hectares":"183445 Hectares","project_explanation":"Green Gold Forestry will take 206,000 ha of its production forest concession area out of the planned logging cycle and into management for ecosystem services. Within the project boundary, baseline logging will cease, together with the establishment and maintenance of logging roads, skidding trails and other infrastructure. Thereby, emissions will be eliminated from the extraction and processing of logs, from collateral mortality of felling operations, and from roads, skidding trails and other infrastructure. The forest will be protected from disturbance, reducing emissions from logging operations and allowing carbon content to accumulate over time, taking advantage of the overall trend of carbon accumulation in Amazonian forests. Any negative effects that biodiversity may have experienced from logging operations will be allowed to recover. The project will work with surrounding communities to establish an active conservation program for their benefit and for that of the climate and the forest’s biodiversity and ecosystem health. Jobs will include forest rangers, eco-guides, research and monitoring assistants and other support staff. Forest rangers will regularly patrol the project area, particularly its fluvial access routes, to detect and deter illegal logging, hunting and encroachment. The project plans to develop the area as a prime destination for ecotourism and scientific research, establishing a lodge and research station within the first five years. Furthermore, the project intends to establish and support sustainable NTFP and fruit growing enterprises with the communities.","lat":-2.753347780073498,"lon":-73.7271261511339},{"ID":"2278","Name":"The Jaguar Amazon REDD+ Project","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0006","Status":"Registered","Country":"Peru","Estimated Annual Emission Reductions":"3,751,851","Region":"Latin America","Crediting Period Start Date":"03/12/2021","Crediting Period End Date":"01/01/2018","Hectares":"183015 Hectares","project_explanation":"The project is located in Peru, in the south-east area of the Department of Madre de Dios, in the province of Tahuamanu (districts of Iñapari, Iberia and Tahuamanu). The project area (PA) comprises the consolidated Otorongo and Chullachaqui areas covering a total of 183,015 hectares. The project is based on the sustainable forest management of certified wood from the consolidated “Inversiones Forestales Chullachaqui SAC” and “Forestal Otorongo SAC” in the Province of Tahuamanu, department of Madre de Dios in southeast Peru.The Project Area is 183,015 hectares and is located 17 km from the interoceanic highway, the main transversal communication route between Peru and Brazil. In addition, the project area operates as part of the Vilcabamba-Amboró Biological Corridor, which would have an area of approximately 30 million hectares. Within the project area, there are no native indigenous populations. In the towns of Alerta, Portillo, San Francisco and Oceania there are settlers dedicated to collecting Brazil nuts and eventually shiringa. The general objective of the company is to manage the extension of forest granted by the Peruvian State, improving the production of forest goods and services in a continuous and sustainable manner with an adequate long-term strategy for its implementation. The main project objectives are the following: • Climate Goal: Reduce the expected deforestation rate and the associated GHG emissions in the project area in the upcoming years • Community Goal: Promote and consolidate a sustainable use of agrarian land increasing the family incomes without necessity to expand to new areas • Biodiversity Goal: Protect the rich ecosystem that is home of many significant threatened species of fauna and flora","lat":-11.597301574320303,"lon":-69.83731253013784},{"ID":"687","Name":"Reforestation of pastures in Sociedad Agrícola de Interés Social “José Carlos Mariátegui” - Joven Forestal Project, Perú","Proponent":"SAIS José Carlos Mariategui","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0001","Status":"Registered","Country":"Peru","Estimated Annual Emission Reductions":"31,737","Region":"Latin America","Crediting Period Start Date":"26/09/2011","Crediting Period End Date":"20/03/2018","Hectares":"1450 Hectares","project_explanation":"The main objective of the project reforestation of pasture areas in the Sociedad Agrícola de Interés Social (SAIS) JOSE CARLOS MARIATEGUI – Joven Forestal Project is to establish 1,450 hectares of forest plantations, using three exotic species of genus Pinus: Pinus radiata, Pinus patula and Pinus pseudostrobus, it will be achieved with carbon credits, improve conservation soils and water regimes, to help improve environmental conditions and protection of biodiversity. This project is politically located within Cachachi, Jesus and Cospas districts in the province and department of Cajamarca - Perú.","lat":-7.437877575542979,"lon":-78.36429801079237},{"ID":"1882","Name":"REDD+ PROJECT IN THE ALTO HUAYABAMBA CONSERVATION CONCESSION (CCAH).","Proponent":"Asociacion Amazonicos por la Amazonía","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Registered","Country":"Peru","Estimated Annual Emission Reductions":"52,425","Region":"Latin America","Crediting Period Start Date":"31/07/2019","Crediting Period End Date":"30/10/2013","Hectares":"53410 Hectares","project_explanation":"The REDD+ project in the Alto Huayabamba Concession Conservation (CCAH) is located in the region of San Martín in the central north of Peru. The CCAH covers an area of 143,928.09 ha at an altitude between 1800-4670 meters above sea level, with two well-defined ecosystems: a) the so-called Paramos of the central cordillera; and b) the so-called Peruvian Yungas or mountain forests. The area of the project is in the forest-covered zone of the CCAH and covers 53,410 ha, located in the Corridor of Conservation Abiseo-Cóndor-Kutukú, in the two countries of Ecuador and Peru; within the hotspot of the eastern mountains of the Tropical Andes and the Great Forest Area of the Amazon in the lower Andean-Amazonian areas. Within the area of the project exists a total of 40 families, widespread and in two (2) settlements: Nuevo Bolívar and El Progreso, with 26 families in the latter two, who make use of and are dependent of the forest. The area of the project has an exceptional value of the biodiversity, where 310 species amongst the amphibians, reptiles, birds, and mammals have been identified as objects of the conservation for the Peruvian Yungas (highest number of occurrence per area for the Peruvian Yungas for 52 species), the yellow-tailed woolly monkey (Oreonax flavicauda) being the flag species of the CCAH. The general objective of the project is the conservation of the CCAH\'s montane forests to protect their exceptional biodiversity and the ecosystem services they provide, without undermining the opportunities to improve the living conditions of the population that depend on these forests. The conservation of the CCAH\'s forests will prevent the emission of 52,425 tCO2e per year.","lat":-7.208178215980757,"lon":-77.52980371251184},{"ID":"1799","Name":"Forest management to mitigate climate change in Bélgica native community, Madre de Dios region – Peru","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Registered","Country":"Peru","Estimated Annual Emission Reductions":"126,168","Region":"Latin America","Crediting Period Start Date":"29/03/2022","Crediting Period End Date":"01/07/2017","Hectares":"53563 Hectares","project_explanation":"The project is developed in the native community of Bélgica, belongs to the Yine ethnic group, which has an extension of 53,563.57 hectares. The community is located in the district of Iñapari, province of Tahuamanu in the department of Madre de Dios.The purpose of the project is to conserve the forests of the community against the advance of deforestation and degradation, and create proposals for a proper management of this forests in their territory. It’s proposed to reduce the pressure to change land use in the project area through four components: strengthening of technical capacities for forest management, development of productive alternatives to generate income and development of capacities for the administration of natural resources, strengthening the control and surveillance system, and strengthening of forest governance. These actions are aimed at preventing the advance of unplanned deforestation within the project area, for which permanent alliances and coordinations will be carried out with institutions that are currently carrying out conservation activities in the area so that these are continuous.The activities that are planned to reduce deforestation, in addition to the involvement of the stakeholders, should be implemented so that the risk of the project decreases and generates greater confidence in the project by the populations of each community, currently the risk is 13% making the execution of the project viable.With these actions, the project expects to annually avoid an average of net emissions of 17 295.9 tCO2-e according to the baseline scenario projected for the first 10-year period. The project includes benefits for the populations involved as well as for the conservation of biodiversity, beyond the benefits of reducing GHG emissions.","lat":-11.101058,"lon":-70.001908},{"ID":"1153","Name":"Shade Coffee & Cacao Reforestation Project","Proponent":"Société de gestion de projets ECOTIERRA Inc.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Registered","Country":"Peru","Estimated Annual Emission Reductions":"1,969,139","Region":"Latin America","Crediting Period Start Date":"06/04/2020","Crediting Period End Date":"30/09/2013","Hectares":"30 Hectares","project_explanation":"Ecotierra`s Shade Coffee and Cacao Project is a ARR carbon sequestration grouped project based on improving agricultural farming techniques to includes coffee and cacao under shade. The project aims to turn traditional land use schemes into shade, organic and fair trade coffee and cacao production systems by the mean of massive plantation of trees among those cultures, education, technical formation and accompaniment.","lat":-11.184106,"lon":-74.789132},{"ID":"658","Name":"Reforestation of pastures in Campo Verde with native species, Pucallpa, Peru","Proponent":"Bosques Amazónicos","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-AM0003","Status":"Registered","Country":"Peru","Estimated Annual Emission Reductions":"5,600","Region":"Latin America","Crediting Period Start Date":"06/04/2020","Crediting Period End Date":"23/12/2017","Hectares":"920 Hectares","project_explanation":"Widely viewed as a best-practice model for tropical forestry and sustainable development, this award-winning project has seen 919.3 hectares of degraded pasture land reforested with valuable native trees through direct planting and promotion of natural regeneration in the department of Ucayali in the Amazon region of Peru.","lat":-8.585644596610171,"lon":-74.76996068271113},{"ID":"796","Name":"Alto Huayabamba","Proponent":"Pur Projet","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-AMS0001","Status":"Registered","Country":"Peru","Estimated Annual Emission Reductions":"28,756","Region":"Latin America","Crediting Period Start Date":"06/04/2020","Crediting Period End Date":"01/04/2008","Hectares":"2300 Hectares","project_explanation":"Carbon Dioxide sequestration through reforestation with small-scale farmers in Peru, San Martin Region.","lat":-7.316239,"lon":-76.824622},{"ID":"958","Name":"BIOCORREDOR MARTIN SAGRADO REDD+ PROJECT","Proponent":"Pur Projet","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Registered","Country":"Peru","Estimated Annual Emission Reductions":"219,722","Region":"Latin America","Crediting Period Start Date":"06/04/2020","Crediting Period End Date":"01/01/2010","Hectares":"303699 Hectares","project_explanation":"The project aims to avoid for 80 years deforestation and degradation of forest in an area of 295 654 hectares of primary forest, which is under stress of deforestation and degradation by various drivers and agents, detailed hereafter. The project area is a high conservation value area with many endemic species and several threatened species (flora and fauna) and also boasts vital resources for downstream and surrounding communities. In particular it regulates the water resources in the Huayabamba river basin and the availability of water for downstream communities and cities.","lat":-7.114483287042477,"lon":-77.36346879636169},{"ID":"1218","Name":"Evio Kuiñaji Ese´Eja Cuana, To Mitigate Climate Change, Madre de Dios - Perú","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0007","Status":"Registered","Country":"Peru","Estimated Annual Emission Reductions":"114,410","Region":"Latin America","Crediting Period Start Date":"29/04/2020","Crediting Period End Date":"01/07/2011","Hectares":"7653 Hectares","project_explanation":"Achieved validation to the CCB Standards Second Edition, Climate and Biodiversity Gold Levels, on 09 March 2015.Madre de Dios is the Amazon region with the highest levels of biodiversity in the country, that’s why it earned the title of Biodiversity Capital of Peru in 1994. In this region we find the natural habitat of endangered animal species such as the black caiman (Melanosuchus Niger), the harpy eagle (Harpy Eagle) and the giant otter (Pteronura brasiliensis) as well as habitat for forest species of economic importance as chestnut (bertholletia excelsa). Currently, Madre de Dios faces an abrupt change in land use and accelerated forest degradation; historically, this same region was characterized by low levels of deforestation, so that the impact generated, affects the well-preserved status of this area. This change may be a result of the construction of the South Inter-Oceanic Highway, which generated greater accessibility and therefore increased immigration. In this scenario, we need to add up the advancement of informal gold mining, fueled by the rising price of gold, whose mode of extraction is highly polluting and causing deforestation in areas adjacent to the rivers of the region.The project will be developed in the Native Community of Ese\'Eja Infierno and its Ecotourism Concession located in Madre de Dios, these areas belong politically to the province of Tambopata, Tambopata District, adding a total area of 7749.94 hectares. The purpose of the project is to conserve community forests and their concession, against de rapidly increase of deforestation. The project proposes to reduce the pressure to change the use of land in the project area through the promotion of sustainable economic activities, forest governance and the establishment of conservation agreements on critical areas previously identified. These actions are intended to avoid the expansion of agriculture; to achieve them, permanent coordination and alliances will be made with institutions that currently are conducting conservation activities in the area.Also, the control and monitoring system of the community and its concession will be strengthened, emphasizing on the formation and operation of forest guards, which have an official recognition of the Regional Directorate of Forestry and Wildlife of Madre de Dios, which represents a strategy of community involvement.With these actions, the project hopes to avoid annual average net emissions of 117,676.00 tCO2-e. in the referenced scenario during the first 10 years period, in which, because of migration and occupation of the land that promotes the operation of the South Interoceanic Highway, an average of 289.76 ha per year will be deforested.The project includes benefits for the concerned people and the conservation of biodiversity, beyond the benefits of reducing GHG emissions. The project has applied the CCBA (Climate, Community & Biodiversity Association) standards.","lat":-12.687075,"lon":-69.214939},{"ID":"868","Name":"REDD project in Brazil nut concessions in Madre de Dios, Peru","Proponent":"Bosques Amazónicos","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0007","Status":"Registered","Country":"Peru","Estimated Annual Emission Reductions":"2,086,089","Region":"Latin America","Crediting Period Start Date":"06/04/2020","Crediting Period End Date":"01/01/2010","Hectares":"724601 Hectares","project_explanation":"BAM has entered into a long term partnership with the Madre de Dios Federation of Brazil nut Concessioners (FEPROCAMD) aimed at preventing deforestation and preserving environmental integrity on 300,000 hectares of concession land in high quality rainforest. The project is helping to establish initiatives which will increase both the value of the healthy forest and the income generated through sustainable Brazil nut harvesting, empowering concessioners to protect and maintain their forest. Currently, concessioners’ activity is limited to subsistence Brazil nut collection and, in a very few cases, subsistence forestry. The long-term wellbeing of concessioners and their families is highly dependent on the health of local ecosystems, but they have few resources with which to protect their concessions. Illegal deforestation on concession land has increased due to the new InterOceanic Highway, which passes through Madre de Dios. The construction of this road has brought unusually high numbers of migrants to the area, many of whom use concession land to fulfill their housing and work needs. There have been significant increases in unsustainable, illegal, small-scale agriculture and logging.","lat":-12.194504163199806,"lon":-69.63523717092077},{"ID":"844","Name":"Madre de Dios Amazon REDD+ Project","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0007","Status":"Registered","Country":"Peru","Estimated Annual Emission Reductions":"659,793","Region":"Latin America","Crediting Period Start Date":"06/04/2020","Crediting Period End Date":"01/01/2009","Hectares":"96906 Hectares","project_explanation":"The Madre de Dios Amazon REDD Project (the Project) is a Reduced Emissions from Deforestation and Forest Degradation (REDD) project. The Project is designed around the impending effects of a new trans-Amazonian, inter-oceanic road that is nearly complete from Brazil to the Pacific Ocean and Peruvian ports. The remaining stretch of the new road is scheduled for completion in 2009, and the completed road system will facilitate the immigration of new settlers into the region. The immigrant population is predicted to subsist by agricultural and agricultural livestock activities. Deforestation and forest degradation are a result of these activities. These effects are already visible in Brazil where the trans-Amazonian road has been complete for some time.","lat":-11.092496140774678,"lon":-70.00722178717204},{"ID":"1133","Name":"Yacumama Forest Carbon Project","Proponent":"Lawrence Bishop","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0007","Status":"Registered","Country":"Peru","Estimated Annual Emission Reductions":"72,982","Region":"Latin America","Crediting Period Start Date":"06/04/2020","Crediting Period End Date":"01/01/2012","Hectares":"3202 Hectares","project_explanation":"The overall goal for the Yacumama Forest Carbon Project (“Project”) is to protect and conserve the tropical lowland floodplain forest on Yacumama, a privately held lodge, research, education, and conservation area, in the Amazon Basin of Peru, for long-term carbon sequestration. In addition, the Project also serves to protect, maintain, and (for some taxa) improve native biodiversity while supporting local community livelihoods by increasing sustainable economic opportunities. The climate objective for the Project is to avoid emissions from deforestation and degradation. The entire property including the Project Area will, by economic necessity, be sold by the owners in the absence of funding from carbon financing. Because the owners have legal permission to harvest the entire property, which under Peruvian law transfers with the sale, the most likely buyer would be a company who would harvest the entire property, sell the valuable wood, burn the remaining woody biomass, and implement agricultural conversion on the fertile floodplain soils.","lat":-4.60025,"lon":-73.409591},{"ID":"1496","Name":"Jubilación Segura : Agroforestry And Reforestation With Smallscale Farmers in Peru","Proponent":"Pur Projet","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-AMS0007","Status":"Registered","Country":"Peru","Estimated Annual Emission Reductions":"4,485","Region":"Latin America","Crediting Period Start Date":"06/04/2020","Crediting Period End Date":"01/01/2010","Hectares":"1000 Hectares","project_explanation":"Jubilacion Segura is a grouped afforestation and reforestation project initiated by Pur Projet, a French organization specialized in the development of community agroforestry and reforestation project andcarbon management, after observing the erosion and unproductive state of some small-scale farmers’ land in the Amazon Andean foothill forest, North Peru.There is an urge in Peru to participate to reforestation, as this country suffers from a deforestation rate of 260 000 hectares per year in average (67 000 ha average / year for the state of San Martin where the projects are located). As a consequence of this deforestation and inappropriate land uses, most of the land remains unproductive. The migratory agriculture, the traditional swidden agriculture and the previous large scale coca production are the main responsible of this situation of widespread deforestation and resulting degraded and unproductive land.","lat":-6.4207,"lon":-76.498},{"ID":"985","Name":"Cordillera Azul National Park REDD Project","Proponent":"CIMA, Cordillera Azul","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0007","Status":"Registered","Country":"Peru","Estimated Annual Emission Reductions":"1,575,268","Region":"Latin America","Crediting Period Start Date":"06/04/2020","Crediting Period End Date":"08/08/2008","Hectares":"1353190 Hectares","project_explanation":"The Cordillera Azul National Park REDD+ Project avoids deforestation in a magnificent expanse of lowland and montane forests in four departments in central Peru: San Martín, Ucayali, Huánuco, and Loreto. The area encompasses 1,351,964 hectares inside the national park. The park, owned by the government of Peru, is managed and financed by the Peruvian NGO Centro de Conservación, Investigación y Manejo de Áreas Naturales (CIMA) through a public-private partnership piloted by the Peruvian government. The project’s avoided-deforestation objective is accomplished by strengthening park protection, engaging local communities and other stakeholders in land-use management compatible with conservation, and improving the quality of life of the park’s neighbors. Approximately 180,000 people in more than 200 communities – immigrant and indigenous – neighbor the park. Villagers close to the park mostly practice subsistence agriculture; those closer to major roads engage in market activities as well. CIMA and its close advisor, The Field Museum in Chicago, have worked with communities since 2002 to ensure that the project activities incorporate and reflect the values and aspirations of local residents. The project activities are highly participatory, with villagers leading several efforts and developing competencies that will enable long-term success.The biodiversity in the project area is astounding. Intact forests stretch from lowlands (150 meters) to ragged mountain peaks (2,400 meters). This eastern outlier of the Andes has been isolated sufficiently long for speciation to occur: more than 35 species new to science have been discovered in the park to date. The forests harbor rare and endangered species, as well as abundant populations of animals and plants that are crucial to the well-being of park neighbors.","lat":-7.689735316035307,"lon":-75.98607061692672},{"ID":"944","Name":"Alto Mayo Conservation Initiative","Proponent":"Conservation International Foundation","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Registered","Country":"Peru","Estimated Annual Emission Reductions":"515,268","Region":"Latin America","Crediting Period Start Date":"06/04/2020","Crediting Period End Date":"15/06/2008","Hectares":"182000 Hectares","project_explanation":"The Alto Mayo Protected Forest (AMPF) covers approximately 182,000 hectares of land in the Peruvian Amazon of extremely high value for biodiversity conservation and watershed protection. This area forms part of the Abiseo-Condor-Kutukú Conservation Corridor, one of the most threatened ecosystems in the world which houses an incredible number of endemic plants and animals of global importance and whose forests gives rise to several major rivers which provide clean and abundant water supplies and support several economic activities of the local population living in the Alto Mayo basin. The threats to the area have increased in the last decade with the development of regional infrastructure projects and the rising price of coffee -the main crop grown in this area- leading to increasing deforestation and the subsequent loss of ecosystem services that this NPA provides. This scenario will continue unless new mechanisms are designed to add value to the standing forest so that it can compete economically with other land uses. In response, Conservation International and its allies in the region designed the Alto Mayo Conservation Initiative (AMCI), whose main goal is to promote the sustainable management of the AMPF and its ecosystem services for the benefit of the local populations and the global climate. With the financial support of carbon financing, these actions are facilitating the conservation of large expanses of forest with associated climate change mitigation benefits, while also creating opportunities for the sustainable development of local communities.","lat":-5.780293,"lon":-77.547634},{"ID":"1455","Name":"Reduction of the deforestation and degradation of tropical dry forests in Piura and Lambayeque","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Registration requested","Country":"Peru","Estimated Annual Emission Reductions":"46,803","Region":"Latin America","Crediting Period Start Date":"","Crediting Period End Date":"01/04/2013","Hectares":"38355 Hectares","project_explanation":"The project is located in the dry forests of northern Peru, in the regions of Piura and Lambayeque, with the participation of the Regional Conservation Area Salitral-Huarmaca Dry Forests and the Rural Community of Santo Domingo de Olmos. Both areas have different contexts and social, economic and cultural practices, and a variety of natural resources in their territories. The conservation of the tropical dry forests of this zone are considered important to avoid desertification, watershed management, conserve endemic biodiversity and provide ecosystem services to a growing population.The Regional Conservation Area Salitral-Huarmaca Dry Forests extends over two districts in the region of Piura, Salitral in the province of Morropón and Huarmaca in the province of Huancabamba. The Regional Conservation Area has an approximate area of 28 811 hectaresThe rural community of Santo Domingo de Olmos is located in the district of Olmos, in this region. The community has an estimated population of 36 500 inhabitants and an area of 277 878 hectares The project is developed in the Regional Conservation Area Salitral Huarmaca Dry Forests and Rural Community of Santo Domingo de Olmos with a project area of 38 355 hectares of tropical dry forests. The purpose of the project is to preserve the dry forest against the threats of deforestation and degradation. It is proposed to reduce the pressure of land use change in the project area by three components: a) Appropriate use of environmental territory, b) Development of organizational, social and technical capabilities for the management of the natural resources c) Implementation of initiatives for forest conservation.With these actions, the project will avoid an annual average net emissions of 46,583.28 tCO2-e according to the baseline scenario projected for the first 10 years. The project includes benefits for the communities involved and for the conservation of endemic biodiversity. The project has applied the standard of the Climate, Community & Biodiversity Association (CCBA) achieving the gold level for the protection of endangered species such as White-winged Guan (Penelope albipennis).","lat":-5.857984,"lon":-79.73957},{"ID":"1360","Name":"Forest Management to reduce deforestation and degradation in Shipibo Conibo and Cacataibo Indigenous communities of Ucayali region","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0015","Status":"Registered","Country":"Peru","Estimated Annual Emission Reductions":"564,818","Region":"Latin America","Crediting Period Start Date":"06/04/2020","Crediting Period End Date":"01/07/2010","Hectares":"127004 Hectares","project_explanation":"The Ucayali Region is located in the central part of eastern Peru, with an approximate area of 105 082.69 km2, is the second region, after the Loreto Region, to introduce greater extent. Politically bounded on the north by the Loreto Region; on the south by the Regions of Junín, Cusco and Madre de Dios; on the west by the Huánuco and Pasco regions; on the east by the State of Acre - Brazil. It is divided into 4 provinces: Padre Abad, Coronel Portillo and Atalaya Purus; for a total of 15 districts . It has 432,000 inhabitants, according to the National Census of 2007. In Ucayali live 14 ethnic families with a population of 40 thousand people, representing 12 percent of total amazonian indigenous population.The project is developed in 07 native communities belonging to ethnic and Cacataibo Shibipo Conibo, which grouped occupy an area of 127,004.0 hectares. The purpose of the project is to conserve the forests of these communities with the advance of deforestation and degradation.","lat":-8.738638619705885,"lon":-74.7844136251969},{"ID":"1397","Name":"Reforestation of pasture lands on the Peruvian Northern Andes – “Forestry PRODICOM” Grouped Project","Proponent":"Multiple Proponents","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-AMS0007","Status":"Registered","Country":"Peru","Estimated Annual Emission Reductions":"39,551","Region":"Latin America","Crediting Period Start Date":"06/04/2020","Crediting Period End Date":"01/03/2015","Hectares":"167 Hectares","project_explanation":"The Reforestation of Pasture Lands on the Peruvian Northern Andes – “Forestry PRODICOM” Grouped Project proposed by SOCODEVI in association with Ecotierra and ADEFOR is an ARR carbon sequestration grouped project based on the development of cooperative enterprises composed by small local producers for the installation of 5,000 ha of new forest plantation in high altitude Andean pastures. The use of Pine and Eucalyptus species proven to be adapted to the conditions of the area and following a management plan adapted to the conditions and circumstances of the local producer will contribute to assure a sustainable change from traditional land use schemes of low productivity animal husbandry into a sustainable forest management system for commercial purposes. Forestry activities will be complemented with environmental education, technical training and accompaniment.","lat":-7.781896,"lon":-77.869052},{"ID":"1351","Name":"Planting for the Future: Financially sustainable agroforestry systems and payments for ecosystem services","Proponent":"Plant your Future","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"ACM0003","Status":"Registered","Country":"Peru","Estimated Annual Emission Reductions":"719","Region":"Latin America","Crediting Period Start Date":"17/03/2015","Crediting Period End Date":"16/01/2012","Hectares":"25 Hectares","project_explanation":"Our project creates a scalable model for sustainable agriculture, which will reduce deforestation and which will be adopted at a landscape scale in the Peruvian Amazon. Farmers’ technical and business capacity will be enhanced, they will gain access to formal markets for native fruit and timber, and their incomes will be increased and diversified. As a result, the livelihoods of farming families will be enhanced and poverty reduced. The project design is applicable to landowning smallholder farmers across Peru who have in the past relied on ‘slash and burn’ shifting cultivation agriculture or ranching that resulted in unproductive agricultural lands and degraded pastures. The project will provide seedlings and training to farmers to reforest their farms, converting them from low productivity migratory agriculture where they have to rotate farmed areas to market-orientated agroforestry systems. The first project instances are located in Loreto and Ucayali Provinces of Peru.","lat":-3.909094535432583,"lon":-73.34782020600242},{"ID":"1067","Name":"Reduction of deforestation and degradation in Tambopata National Reserve and Bahuaja-Sonene National Park within the area of Madre de Dios region –Peru","Proponent":"AIDER","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"VM0007","Status":"Registered","Country":"Peru","Estimated Annual Emission Reductions":"457,750","Region":"Latin America","Crediting Period Start Date":"06/04/2020","Crediting Period End Date":"01/07/2010","Hectares":"573299 Hectares","project_explanation":"The project will be developed in the area comprised by Tambopata National Reserve and the sector of Bahuaja-Sonene National Park located in Madre de Dios region, corresponding to the partial Administration Contract of RNTAMB and PNBS – Madre de Dios sector, signed by Peruvian State and the Asociación para la Investigación y el Desarrollo Integral – AIDER . Both Natural Protected Areas (NPA) belong politically to Tampopata province, Inambari and Tambopata districts, and have a combined area of 573 299,97 hectares. The project purpose is to conserve forests from both NPAs against deforestation imminent advance.The project proposes to reduce pressure to change land-use at the NPAs Buffer Zone by promoting sustainable economic activities and establishing conservation agreements at previously identified critical areas. Both actions are looking forward to consolidate a “barrier” against expansion of economic frontier (agricultural and mining activities), with alliance and permanent coordination with institutions that are currently doing conservation activities in the area.In addition, RNTAMB and PNBS control and surveillance system will be strengthened, even more on conformation and operation of community committees of surveillance with official recognition, as a strategy for local communities to participate in NPAs management. Finally, we will provide technical support to regional forest authority and National Service of Natural Protected Areas –SERNANP for forest and environmental governance of Madre de Dios region, enhancing State participation on NPAs and optimizing coordination and collaboration between authorities and local population on NPAs management.","lat":-12.8943461791114,"lon":-69.5270083744959},{"ID":"2497","Name":"TIST Program in Uganda, VCS-CCB 011","Proponent":"Clean Air Action Corporation","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR; REDD","Methodology":"AR-AMS0007","Status":"Registration and verification approval requested","Country":"Uganda","Estimated Annual Emission Reductions":"121,978","Region":"Africa","Crediting Period Start Date":"","Crediting Period End Date":"16/12/2003","Hectares":"3500 Hectares","project_explanation":"TIST is a community led ARR project comprised of thousands of farmers taking action on their own land and in their own communities. TIST Program in Uganda, VCS-CCB 011 applies to a subsection of this program in Uganda.","lat":0.145476,"lon":30.078576},{"ID":"2471","Name":"Agroforestry and reforestation with small-scale farmers in Uganda","Proponent":"PUR Development Pte Ltd","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-AMS0007","Status":"Registration and verification approval requested","Country":"Uganda","Estimated Annual Emission Reductions":"1,214","Region":"Africa","Crediting Period Start Date":"","Crediting Period End Date":"13/04/2016","Hectares":"590 Hectares","project_explanation":"Purpose of the project is to reforest degraded land and promote sustainable agroforestry with small-scale farmers located in coffee and vanilla area in Uganda. PUR Projet is an international organisation specialised in the development of ecosystem restoration within agricultural supply chains like coffee, cocoa and vanilla. The main objective of the project are then the following: -Climate change mitigation throught carbon removals -Increase climate change resilience of small-holder farmers, diversify incomes and restore ecosystem services by supporting agroforestry practices, inside and around coffee parcels. -Increase coffee yields and quality by implementing Good Agricultural Practices (GAP).","lat":0.169899,"lon":30.078078},{"ID":"2339","Name":"TIST Program in Uganda, VCS-CCB 010","Proponent":"Clean Air Action Corporation","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-AMS0007","Status":"Registered","Country":"Uganda","Estimated Annual Emission Reductions":"83,340","Region":"Africa","Crediting Period Start Date":"30/08/2021","Crediting Period End Date":"01/02/2015","Hectares":"2414 Hectares","project_explanation":"The International Small Group and Tree Planting Program (TIST) is a combined reforestation and sustainable development project in Uganda, carried out by subsistence farmers. The farmers plant trees on their land and retain ownership of the trees and their products. They receive training from TIST and a share of the carbon revenues from CAAC. This project description (PD) is for a subset of the TIST project in Uganda and initially applies to 789 Small Groups, 3,196 Participants, 2,605 Project Areas, and 2,414 hectares. The main species planted are pine, gravellia, and teak. TIST farmers use a mosaic restoration approach, planting on thousands of individual farms spread across the landscape.","lat":3.073811,"lon":32.237527},{"ID":"799","Name":"Bukaleba Forest Project","Proponent":"Busoga Forestry Co. Ltd (Subsidiary Green Resources)","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0001","Status":"Registered","Country":"Uganda","Estimated Annual Emission Reductions":"11,903","Region":"Africa","Crediting Period Start Date":"20/03/2012","Crediting Period End Date":"11/03/2004","Hectares":"2061 Hectares","project_explanation":"The ARR project activity of the Bukaleba Forest Project (BFP) is implemented on land within the Bukaleba Central Forest Reserve (BCFR) in the administrative district of Mayuge, Eastern Uganda. The project activity will establish and manage exotic and indigenous reforestation on approximately 2,061 ha of degraded shrub and grassland.","lat":0.368811,"lon":33.415542},{"ID":"995","Name":"TIST Program in Uganda, VCS 006","Proponent":"Clean Air Action Corporation","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-AMS0001","Status":"Registered","Country":"Uganda","Estimated Annual Emission Reductions":"7,787","Region":"Africa","Crediting Period Start Date":"13/03/2013","Crediting Period End Date":"01/01/2006","Hectares":"283 Hectares","project_explanation":"Since its inception in 1999, over 63,000 participants organized into over 8,900 TIST Small Groups have planted over ten million trees in Tanzania, India, Kenya, and Uganda - accomplishing GhG sequestration through tree planting, creating a potential long-term income stream, and developing sustainable environments and livelihoods. Currently over 5,000 TIST participants in over 800 Small Groups are registered in the TIST program in Uganda and are working to break their local cycle of deforestation, drought and famine. The trees planted in tens of thousands of discrete groves and land parcels are already beginning to reduce erosion, stabilize and enrich the soil, and will soon be providing shade. VCS 006: This PD is for a subset of the reforestation project in Uganda and applies to 17 of the Small Groups, 52 members, 20 project areas and 283.1 ha.TIST Program in Uganda VCS-005 and -006 comprise the project TIST Program in Uganda CCB-002.","lat":-1.228393,"lon":30.129882},{"ID":"993","Name":"TIST Program in Uganda, VCS 005","Proponent":"Clean Air Action Corporation","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-AMS0001","Status":"Registered","Country":"Uganda","Estimated Annual Emission Reductions":"19,342","Region":"Africa","Crediting Period Start Date":"13/03/2013","Crediting Period End Date":"01/01/2003","Hectares":"723 Hectares","project_explanation":"Since its inception in 1999, over 88,000 participants organized into over 12,000 TIST Small Groups have planted over 17 million trees in Tanzania, India, Kenya, and Uganda - accomplishing GhG sequestration through tree planting, creating a potential long-term income stream, and developing sustainable environments and livelihoods. Currently over 10,000 TIST participants in over 1,400 Small Groups are registered in the TIST program in Uganda and are working to break their local cycle of deforestation, drought and famine. The trees planted in tens of thousands of discrete groves and land parcels are already beginning to reduce erosion, stabilize and enrich the soil, and will soon be providing shade. VCS 005: The project is a subset of the TIST reforestation project in Uganda and originally applied to 301 of the Small Groups, 1,799 members, 953 project areas and 722.6 ha. It was expanded as a VCS grouped project during the second verification to 672 of the Small Groups, 4,248 members, 2,708 project areas and 2,434 ha. The original project instances can be found below in the file KML_993_08FEB2013 The new instances added during the second verification can found below in the file KML_993_07JUL2017 TIST Program in Uganda VCS-005 and -006 comprise the project TIST Program in Uganda CCB-002.","lat":0,"lon":30.176389},{"ID":"827","Name":"TIST Program in Uganda, VCS 003","Proponent":"Clean Air Action Corporation","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-AMS0001","Status":"Registered","Country":"Uganda","Estimated Annual Emission Reductions":"13,112","Region":"Africa","Crediting Period Start Date":"23/05/2012","Crediting Period End Date":"01/01/2003","Hectares":"443 Hectares","project_explanation":"Since its inception in 1999, over 63,000 participants organized into over 8,900 TIST Small Groups have planted over ten million trees in Tanzania, India, Kenya, and Uganda - accomplishing GhG sequestration through tree planting, creating a potential long-term income stream, and developing sustainable environments and livelihoods. Currently over 5,000 TIST participants in over 800 Small Groups are registered in the TIST program in Uganda and are working to break their local cycle of deforestation, drought and famine. The trees planted in tens of thousands of discrete groves and land parcels are already beginning to reduce erosion, stabilize and enrich the soil, and will soon be providing shade. This PD is for a subset of the reforestation project in Uganda and applies to 157 of the Small Groups, 1,211 members, 610 project areas and 443.3 ha.TIST Program in Uganda VCS-001, -002 -003 and -004 comprise the project TIST Program in Uganda CCB-001.","lat":0.91059,"lon":29.759588},{"ID":"826","Name":"TIST Program in Uganda, VCS 004","Proponent":"Clean Air Action Corporation","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-AMS0001","Status":"Registered","Country":"Uganda","Estimated Annual Emission Reductions":"2,958","Region":"Africa","Crediting Period Start Date":"22/05/2012","Crediting Period End Date":"01/01/2003","Hectares":"102 Hectares","project_explanation":"Since its inception in 1999, over 63,000 participants organized into over 8,900 TIST Small Groups have planted over ten million trees in Tanzania, India, Kenya, and Uganda - accomplishing GhG sequestration through tree planting, creating a potential long-term income stream, and developing sustainable environments and livelihoods. Currently over 5,000 TIST participants in over 800 Small Groups are registered in the TIST program in Uganda and are working to break their local cycle of deforestation, drought and famine. The trees planted in tens of thousands of discrete groves and land parcels are already beginning to reduce erosion, stabilize and enrich the soil, and will soon be providing shade.This PD is for a subset of the reforestation project in Uganda and applies to 8 of the Small Groups, 69 members, 13 project areas and 102.2 ha.TIST Program in Uganda VCS-001, -002 -003 and -004 comprise the project TIST Program in Uganda CCB-001.","lat":0.786174,"lon":29.635165},{"ID":"824","Name":"TIST Program in Uganda, VCS 001","Proponent":"Clean Air Action Corporation","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-AMS0001","Status":"Registered","Country":"Uganda","Estimated Annual Emission Reductions":"24,348","Region":"Africa","Crediting Period Start Date":"22/05/2012","Crediting Period End Date":"01/01/2003","Hectares":"777 Hectares","project_explanation":"Since its inception in 1999, over 63,000 participants organized into over 8,900 TIST Small Groups have planted over ten million trees in Tanzania, India, Kenya, and Uganda - accomplishing GhG sequestration through tree planting, creating a potential long-term income stream, and developing sustainable environments and livelihoods. Currently over 5,000 TIST participants in over 800 Small Groups are registered in the TIST program in Uganda and are working to break their local cycle of deforestation, drought and famine. The trees planted in tens of thousands of discrete groves and land parcels are already beginning to reduce erosion, stabilize and enrich the soil, and will soon be providing shade. This PD is for a subset of the reforestation project in Uganda and applies to 291 of the Small Groups, 1,662 members, 1,000 project areas and 777.1 ha. TIST Program in Uganda VCS-001, -002 -003 and -004 comprise the project TIST Program in Uganda CCB-001. Undergoing verification to the CCB St","lat":0.557316,"lon":30.176894},{"ID":"825","Name":"TIST Program in Uganda, VCS 002","Proponent":"Clean Air Action Corporation","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-AMS0001","Status":"Registered","Country":"Uganda","Estimated Annual Emission Reductions":"4,801","Region":"Africa","Crediting Period Start Date":"06/04/2020","Crediting Period End Date":"01/01/2003","Hectares":"165 Hectares","project_explanation":"Since its inception in 1999, over 63,000 participants organized into over 8,900 TIST Small Groups have planted over ten million trees in Tanzania, India, Kenya, and Uganda - accomplishing GHG sequestration through tree planting, creating a potential long-term income stream, and developing sustainable environments and livelihoods. Currently over 5,000 TIST participants in over 800 Small Groups are registered in the TIST program in Uganda and are working to break their local cycle of deforestation, drought and famine. The trees planted in tens of thousands of discrete groves and land parcels are already beginning to reduce erosion, stabilize and enrich the soil, and will soon be providing shade.This PD is for a subset of the reforestation project in Uganda and applies to 17 of the Small Groups, 24 members, 22 project areas and 164.9 ha.TIST Program in Uganda VCS-001, -002 -003 and -004 comprise the project TIST Program in Uganda CCB-001","lat":0.362074,"lon":30.156234},{"ID":"673","Name":"Natural High Forest Rehabilitation Project on degraded land of Kibale National Park","Proponent":"Greenchoice","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0001","Status":"Registered","Country":"Uganda","Estimated Annual Emission Reductions":"74,181","Region":"Africa","Crediting Period Start Date":"06/04/2020","Crediting Period End Date":"01/01/2009","Hectares":"8593 Hectares","project_explanation":"The project activity in Kibale National Park (KNP) is located in the western part of Uganda and is implemented by Uganda Wildlife Authority in cooperation with Face the Future. Due to the high precipitation, complex landform and undulating valleys, as well as continual human disturbance (fire, grazing, charcoal production and cultivation) and poor land management, the area has been subjected to severe degradation of the vegetation and soil erosion. The project contributes to climate change mitigation by sequestering GHGs in sinks through planting of indigenous tree species and assisted natural regeneration activities. The purpose of the project activity is to realize multiple socio-economic and environmental benefits (climate change mitigation, biodiversity conservation, local community development and soil erosion control) through restoring forest vegetation on degraded lands.","lat":0.35975,"lon":30.38852},{"ID":"3623","Name":"Bugnavilla Afforestation Through High-Quality Timber Over Degraded Grasslands","Proponent":"Bugnavilla SAS","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Under validation","Country":"Uruguay","Estimated Annual Emission Reductions":"4,668","Region":"Latin America","Crediting Period Start Date":"","Crediting Period End Date":"","Hectares":"945 Hectares","project_explanation":"Bugnavilla is a grouped project located in center east region of Uruguay. The project initially comprises a total of 1.984,2 ha of land previously under extensive grazing by beef cattle, on which afforestation for obtaining high value, long lived timber products and for sequestering large amounts of carbon dioxide from the atmosphere will be established. The project ´s first instance will be in “El Tembetarí” property, in the department ( of Treinta y Tres, Uruguay. Forests are based on 25 year rotation Eucalyptus spp. plantations, mostly managed with pruning and three thinning operations, to obtain knot free, high diameter logs suitable for sawing or plywood production. Plantation will be completed by year 1 of proje ct and forests will be replanted after clear cut harvest. The practices are not certified with the FSC standard. Although they are carried out as if they were, because in the near future it is intended to FSC certified.","lat":-32.5,"lon":-54.2},{"ID":"2992","Name":"HG Afforestation Through High Quality Timber Over Degraded Grasslands","Proponent":"Pike Carbosur S.A.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Under validation","Country":"Uruguay","Estimated Annual Emission Reductions":"1,478","Region":"Latin America","Crediting Period Start Date":"","Crediting Period End Date":"08/10/2020","Hectares":"459 Hectares","project_explanation":"The project comprises a total of 790 ha of land previously under extensive grazing by beef cattle, on which a fforestation for obtaining high value, long lived timber products and for sequestering large amounts of carbon dioxide from the atmosphere will be established. Forests are based on 16 year rotation Eucalyptus spp. plantations, mostly managed with pruning and three thinning operations, to obtain knot free, high diameter logs suitable for saw ing or plywood production Plantation will be completed by year 5 of project and forests will be r eplanted after clear cut harvest. The practices are not certified with the FSC standard. Although they are carried out as if they were, because in the near future it is intended to FSC certif ied Planted forests will remove carbon dioxide from the atmosphere and store it in different carbon pools (living above ground and below ground biomass, soil, li tter, non tree vegetation, dead wood and harvested wood products). Monitoring will cover carbon stock changes for living above.","lat":-32.84,"lon":-55},{"ID":"2576","Name":"Montes del Este afforestation through high quality timber in degraded grasslands","Proponent":"Pike Carbosur S.A.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Registration and verification approval requested","Country":"Uruguay","Estimated Annual Emission Reductions":"38,000","Region":"Latin America","Crediting Period Start Date":"","Crediting Period End Date":"30/10/2016","Hectares":"4314 Hectares","project_explanation":"Afforestation through high quality timber in degraded grasslands. The project comprises a total of 4.314 ha of land previously under extensive grazing by beef cattle, on which afforestation for obtaining high-value, long-lived timber products and for sequestering large amounts of carbon dioxide from the atmosphere will be established. The project sequesters CO2 through forest plantation in degraded grassland areas, generating net anthropogenic removals by sinks","lat":-32.38,"lon":-54.169},{"ID":"2411","Name":"Bosques del Uruguay II (BDU II) Afforestation through High Quality Timber in Grasslands Project","Proponent":"AGRO EMPRESA FORESTAL SA","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Registered","Country":"Uruguay","Estimated Annual Emission Reductions":"4,066","Region":"Latin America","Crediting Period Start Date":"14/10/2021","Crediting Period End Date":"25/03/2016","Hectares":"1056 Hectares","project_explanation":"The project activity “Bosques del Uruguay II Afforestation through High Quality Timber in Grasslands Project” (hereafter, “BDU II project”) is an afforestation project on extensive cattle grazing pastures areas using exotic species (Eucalyptus grandis and dunnii) aiming to produce, as a priority product, high quality logs for sawmill industry and secondarily, biomass for energy and/or pulp. BDU II trust funds comprises 20 properties or plots located in the Central East region of Uruguay (the host country), with a total area of 14,657 ha of which, 9,363 ha are effectively planted. The unplanted area, 5,404 ha, remaining in part as natural grasslands, are used for cattle grazing and flora and fauna conservation. Given that an important portion of BDU II trust fund effectively planted area had already established plantations (8,307 ha) when the trust fund started to operate, they cannot be included within the VCS project boundary. The BDU II project eligible for the VCS standard is circumscribed to 1,056 ha effectively planted after the trust fund operation starting date, carried out in 6 properties (5 entire plots and 29% of the 6th one). The project activity is carried out on lightly degraded land as a consequence of many decades of intensive cattle grazing. This degradation is expected to continue in the absence of the project. The project utilizes two species: E. grandis and E. dunnii that occupies 74% and 26% of the planted area, respectively. The project contributes to the sustainable development of Uruguay, specifically by: • Increasing labour demand from the local population • Adding value to wood products and diversifying the regional production will lead to higher economic revenues for the region. • Promoting an integrated management scheme with the ecosystem. • Developing and improving a new mechanism to finance projects in the forestry sector","lat":-33.19147,"lon":-54.873508},{"ID":"920","Name":"IBERPAPEL SILVIPASTURAL SYSTEM ON DEGRADED LAND","Proponent":"Los Eucaliptus S.A.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0001","Status":"Registered","Country":"Uruguay","Estimated Annual Emission Reductions":"14,746","Region":"Latin America","Crediting Period Start Date":"06/04/2020","Crediting Period End Date":"10/09/2004","Hectares":"122000 Hectares","project_explanation":"The project comprises a total of 4,691 ha of land with a history of agriculture with intensive tillage or grazing by beef cattle, activities that have caused severe soil erosion and degradation. Forest plantations for obtaining pulpwood and sequestering carbon dioxide from the atmosphere will be established. These plantations are part of a silvipastural system. This project activity is implemented on degraded lands, which are expected to continue to degrade in the absence of the project and hence the land cannot be expected to revert to a non-degraded state without human intervention.","lat":-34.606943,"lon":-55.7475},{"ID":"961","Name":"‘El Arriero ’ Afforestation on degraded grasslands under extensive grazing project","Proponent":"El Arriero S.A.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0001","Status":"Registered","Country":"Uruguay","Estimated Annual Emission Reductions":"18,271","Region":"Latin America","Crediting Period Start Date":"06/04/2020","Crediting Period End Date":"30/04/2009","Hectares":"5377 Hectares","project_explanation":"The project comprises a total of 5,377 ha of land previously under extensive grazing by beef cattle, on which Afforestation for obtaining high-value, long-lived timber products and for sequestering large amounts of carbon dioxide from the atmosphere will be established.","lat":-32.789946,"lon":-55.23134},{"ID":"960","Name":"“Weyerhaeuser Uruguay” Forest Plantations on degraded grasslands under extensive grazing","Proponent":"EUCAPINE S.R.L","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0001","Status":"Registered","Country":"Uruguay","Estimated Annual Emission Reductions":"56,019","Region":"Latin America","Crediting Period Start Date":"06/04/2020","Crediting Period End Date":"22/02/2006","Hectares":"18988 Hectares","project_explanation":"The project will comprise a total of 18,988 ha of land previously under extensive grazing by beef cattle, on which forest plantations for obtaining high-value, long-lived timber products and for sequestering large amounts of carbon dioxide from the atmosphere will be established.","lat":-32.69112,"lon":-54.449345},{"ID":"965","Name":"ITAA afforestation on degraded grasslands under extensive grazing","Proponent":"Intercontinental Timber Asociacion Agraria","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"REDD","Methodology":"AR-ACM0001","Status":"Registered","Country":"Uruguay","Estimated Annual Emission Reductions":"5,451","Region":"Latin America","Crediting Period Start Date":"06/04/2020","Crediting Period End Date":"19/12/2007","Hectares":"229 Hectares","project_explanation":"The project comprises a total of 1,544 ha of land previously under extensive grazing by beef cattle, on which afforestation for obtaining high-value, long-lived timber products and for sequestering large amounts of carbon dioxide from the atmosphere will be established.","lat":-33.649003,"lon":-54.863857},{"ID":"962","Name":"Forteko afforestation on degraded grasslands under extensive grazing","Proponent":"Agroempresa Forestal S.A.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0001","Status":"Registered","Country":"Uruguay","Estimated Annual Emission Reductions":"55,965","Region":"Latin America","Crediting Period Start Date":"06/04/2020","Crediting Period End Date":"31/07/2007","Hectares":"16553 Hectares","project_explanation":"The project comprises a total of 16,928 ha of land previously under extensive grazing by beef cattle, on which forest plantations for obtaining high-value, long-lived timber products and for sequestering large amounts of carbon dioxide from the atmosphere will be established.","lat":-32.80862,"lon":-55.263686},{"ID":"1543","Name":"Bosques del Uruguay Afforestation through High Quality Timber in Grasslands Project","Proponent":"Agroempresa Forestal S.A.","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0003","Status":"Registered","Country":"Uruguay","Estimated Annual Emission Reductions":"11,499","Region":"Latin America","Crediting Period Start Date":"17/08/2017","Crediting Period End Date":"30/05/2012","Hectares":"3017 Hectares","project_explanation":"The proposed ARR project activity “Bosques del Uruguay Afforestation through High Quality Timber in Grasslands Project” (hereafter, “BdU project”) is an afforestation project on extensive cattle grazing pastures areas using exotic species (Eucalyptus grandis and dunnii) aiming to produce, as a priority product, high quality logs for sawmill industry and secondarily, biomass for energy and/or pulp. The project is developed in 14 properties or plots located in the Central East region of Uruguay (the host country), with a total area of 9,528 ha. The area of grasslands to be effectively planted and to be included on the project boundary is 3,147 ha. Part of the total area, had already established plantations at the project start date. The unplanted area (mainly grasslands) will be used for cattle grazing and flora and fauna conservation. The project sequesters CO2 through forest plantation, generating net anthropogenic removals by sinks. It is expected to remove 785,745 tCO2 in 60 years.","lat":-33.114938,"lon":-54.575457},{"ID":"959","Name":"‘Guanaré’ Forest Plantations on degraded grasslands under extensive grazing","Proponent":"Guanaré SA","Project Type":"Agriculture Forestry and Other Land Use","AFOLU Activities":"ARR","Methodology":"AR-ACM0001","Status":"Registered","Country":"Uruguay","Estimated Annual Emission Reductions":"127,416","Region":"Latin America","Crediting Period Start Date":"06/04/2020","Crediting Period End Date":"24/04/2006","Hectares":"21298 Hectares","project_explanation":"The project will comprise a total of 21,298 ha of land previously under extensive grazing by beef cattle, on which forest plantations for obtaining high-value, long-lived timber products and for sequestering large amounts of carbon dioxide from the atmosphere will be established.","lat":-33.114938,"lon":-54.575457}]');var IP={latitude:35.73202612464274,longitude:137.53268402693763,zoom:1};const MP=function(){var t=r((0,e.useState)("pointer"),2),i=t[0],o=(t[1],r((0,e.useState)(IP),2)),a=o[0],l=o[1],c=r((0,e.useState)(null),2),u=c[0],h=c[1],d=r((0,e.useState)(null),2),p=d[0],f=d[1],g=r((0,e.useState)(null),2),m=g[0],y=g[1];return(0,e.useEffect)((function(){if(u){var e=function(){var e,t=(e=s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Py("https://g3-data.s3.ap-northeast-1.amazonaws.com/COG/test/cog-forestloss-tile.tif");case 2:return t=e.sent,e.next=5,t.readRasters({bbox:u,resX:.01,resY:.01});case 5:n=e.sent,y(n);case 7:case"end":return e.stop()}}),e)})),function(){var t=this,i=arguments;return new Promise((function(r,o){var a=e.apply(t,i);function s(e){n(a,r,o,s,l,"next",e)}function l(e){n(a,r,o,s,l,"throw",e)}s(void 0)}))});return function(){return t.apply(this,arguments)}}();e()}}),[u]),e.createElement("div",null,e.createElement(Kh,{views:new Gs({repeat:!0}),initialViewState:a,controller:!0,getCursor:function(){return i},layers:TP({data:RP,rasterData:m,cogBbox:u,cogBboxPoly:p,onClick:function(e){var t=function(e,t,n){var i=(n=n||{}).units||"kilometers",r=n.steps||8;if(!e)throw new Error("geojson is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof r)throw new Error("steps must be an number");if(void 0===t)throw new Error("radius is required");if(r<=0)throw new Error("steps must be greater than 0");var o=[];switch(e.type){case"GeometryCollection":return rf(e,(function(e){var n=xg(e,t,i,r);n&&o.push(n)})),tf(o);case"FeatureCollection":return nf(e,(function(e){var n=xg(e,t,i,r);n&&nf(n,(function(e){e&&o.push(e)}))})),tf(o)}return xg(e,t,i,r)}(function(e,t,n){if(void 0===n&&(n={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!pd(e[0])||!pd(e[1]))throw new Error("coordinates must contain numbers");return function(e,t,n){void 0===n&&(n={});var i={type:"Feature"};return(0===n.id||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=t||{},i.geometry=e,i}({type:"Point",coordinates:e},t,n)}([e.lon,e.lat]),200,{units:"kilometers"}),n=$h(t);h(n);var i=nd(n);f(i),l((function(t){return{longitude:e.lon,latitude:e.lat,zoom:7,transitionDuration:1e3,transitionInterpolator:new _e}}))}})},e.createElement(Gy,{mapStyle:"mapbox://styles/mapbox/light-v10",mapboxAccessToken:"pk.eyJ1Ijoic2hpbWl6dSIsImEiOiJjbGViajl1bWwxOW04M3Zwa2Uxc3J4eTNoIn0.Z3KLWOUk9-rr9qGvQsNOPw"})),e.createElement("div",{className:"attribution"},e.createElement("a",{href:"http://www.openstreetmap.org/about/",target:"_blank",rel:"noopener noreferrer"},"© OpenStreetMap")))};function LP(){return e.createElement(MP,null)}var DP=document.getElementById("app");(0,t.s)(DP).render(e.createElement(LP,{tab:"home"}))})()})();
//# sourceMappingURL=app.js.map